2025-01-30T04:10:38.509Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:10:38.558Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:10:38.637Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T04:10:38.660Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210051308.pcm","age":180880.2236328125,"size":1194240}
2025-01-30T04:10:38.678Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210051308.pcm.mp3","age":142483.59106445312,"size":79413}
2025-01-30T04:10:38.681Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T04:10:38.682Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:10:38.683Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:10:39.049Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:10:39.108Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:10:40.919Z [32minfo[39m: Command Name: setkey
2025-01-30T04:10:40.920Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T04:10:41.092Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T04:10:41.094Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334375207107952661","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:10:41.095Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:10:43.558Z [32minfo[39m: Command Name: record
2025-01-30T04:10:43.560Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:10:43.734Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:10:43.962Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:10:43.965Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:10:43.965Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:10:43.965Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:10:43.966Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:10:43.967Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738210243966.pcm","directory":"temp"}
2025-01-30T04:10:44.022Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:10:44.023Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:10:44.023Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:10:44.023Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:10:44.024Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:10:44.024Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:10:44.024Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334375218126520394","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:10:44.024Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:10:44.026Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:10:44.027Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:10:45.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 12719 bytes)
2025-01-30T04:10:47.968Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 23996 bytes)
2025-01-30T04:10:49.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 37194 bytes)
2025-01-30T04:10:51.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 51876 bytes)
2025-01-30T04:10:53.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 65538 bytes)
2025-01-30T04:10:55.445Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:10:56.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 76957 bytes)
2025-01-30T04:10:58.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 88600 bytes)
2025-01-30T04:10:59.178Z [32minfo[39m: Command Name: stop
2025-01-30T04:10:59.180Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:10:59.396Z [32minfo[39m: [StopCommand] Stopping recording...
2025-01-30T04:10:59.398Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:10:59.400Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":97148,"duration":15376,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:10:59.404Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:11:00.407Z [32minfo[39m: [VoiceRecorder] Recording size: 2910720 bytes
2025-01-30T04:11:01.780Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738210243966.pcm to MP3
2025-01-30T04:11:01.780Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738210243966.pcm.mp3","exists":true}
2025-01-30T04:11:01.780Z [32minfo[39m: [TranscriptionService] File stats:{"size":183549,"created":"2025-01-30T04:11:01.599Z","modified":"2025-01-30T04:11:01.758Z"}
2025-01-30T04:11:01.782Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:11:02.466Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:11:02.475Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:11:08.950Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:11:33.624Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:11:33.626Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:11:33.626Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:11:33.631Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:11:33.631Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":97267,"duration":49608,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:11:33.634Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:11:34.641Z [32minfo[39m: [handleReply] Interaction state: 🛑 **Recording Stopped!**
The bot will now process the recording and generate a summary.

⏳ Please wait while the audio is being processed...{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334375283733561416","commandName":"stop","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:11:34.643Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:11:34.662Z [32minfo[39m: [VoiceRecorder] Recording size: 2910720 bytes
2025-01-30T04:11:36.032Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738210243966.pcm to MP3
2025-01-30T04:11:36.032Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738210243966.pcm.mp3","exists":true}
2025-01-30T04:11:36.033Z [32minfo[39m: [TranscriptionService] File stats:{"size":183549,"created":"2025-01-30T04:11:01.599Z","modified":"2025-01-30T04:11:36.012Z"}
2025-01-30T04:11:36.033Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:12:07.804Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:12:07.806Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:12:07.807Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:12:07.808Z [31merror[39m: [VoiceRecorder] Error stopping recording on disconnect: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:15:38.520Z [32minfo[39m: Memory Usage:
2025-01-30T04:15:38.526Z [32minfo[39m: rss: 138.5 MB
2025-01-30T04:15:38.526Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-30T04:15:38.526Z [32minfo[39m: heapUsed: 28.06 MB
2025-01-30T04:15:38.527Z [32minfo[39m: external: 8.64 MB
2025-01-30T04:15:38.527Z [32minfo[39m: arrayBuffers: 0.72 MB
2025-01-30T04:20:38.521Z [32minfo[39m: Memory Usage:
2025-01-30T04:20:38.525Z [32minfo[39m: rss: 139.24 MB
2025-01-30T04:20:38.526Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-30T04:20:38.526Z [32minfo[39m: heapUsed: 28.54 MB
2025-01-30T04:20:38.527Z [32minfo[39m: external: 8.64 MB
2025-01-30T04:20:38.527Z [32minfo[39m: arrayBuffers: 0.72 MB
2025-01-30T04:21:47.858Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:21:47.892Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:21:47.960Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T04:21:47.980Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210243966.pcm","age":648496.5883789062,"size":2910720}
2025-01-30T04:21:47.991Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210243966.pcm.mp3","age":611871.2609863281,"size":183549}
2025-01-30T04:21:47.994Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T04:21:47.995Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:21:47.996Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:21:48.404Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:21:48.434Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:22:16.060Z [32minfo[39m: Command Name: setkey
2025-01-30T04:22:16.062Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T04:22:16.304Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T04:22:16.305Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334378122728050760","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:22:16.306Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:22:19.819Z [32minfo[39m: Command Name: record
2025-01-30T04:22:19.823Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:22:20.145Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:22:20.406Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:22:20.408Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:22:20.408Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:22:20.408Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:22:20.409Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:22:20.409Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738210940409.pcm","directory":"temp"}
2025-01-30T04:22:20.454Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:22:20.455Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:22:20.455Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:22:20.455Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:22:20.455Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:22:20.455Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:22:20.456Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334378138662080576","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:22:20.456Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:22:20.475Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:22:20.476Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:22:22.015Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:22:26.423Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 6285 bytes)
2025-01-30T04:22:28.422Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 15716 bytes)
2025-01-30T04:22:34.141Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 19835 bytes)
2025-01-30T04:22:34.933Z [32minfo[39m: Command Name: stop
2025-01-30T04:22:34.936Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:22:35.154Z [32minfo[39m: [StopCommand] Stopping recording...
2025-01-30T04:22:35.155Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:22:35.157Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":19847,"duration":14701,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:22:35.162Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:22:36.180Z [32minfo[39m: [VoiceRecorder] Recording size: 1167360 bytes
2025-01-30T04:22:37.344Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:22:37.345Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:22:37.546Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738210940409.pcm to MP3
2025-01-30T04:22:37.547Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738210940409.pcm.mp3","exists":true}
2025-01-30T04:22:37.547Z [32minfo[39m: [TranscriptionService] File stats:{"size":57141,"created":"2025-01-30T04:22:37.431Z","modified":"2025-01-30T04:22:37.522Z"}
2025-01-30T04:22:37.550Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:22:37.550Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:22:41.729Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:23:09.168Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:23:09.170Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:23:09.171Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:23:09.176Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:23:09.176Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":19959,"duration":48721,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:23:09.180Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:23:10.187Z [32minfo[39m: [handleReply] Interaction state: 🛑 **Recording Stopped!**
The bot will now process the recording and generate a summary.

⏳ Please wait while the audio is being processed...{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334378201874436187","commandName":"stop","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:23:10.189Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:23:10.205Z [32minfo[39m: [VoiceRecorder] Recording size: 1167360 bytes
2025-01-30T04:23:11.500Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738210940409.pcm to MP3
2025-01-30T04:23:11.500Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738210940409.pcm.mp3","exists":true}
2025-01-30T04:23:11.501Z [32minfo[39m: [TranscriptionService] File stats:{"size":57141,"created":"2025-01-30T04:22:37.431Z","modified":"2025-01-30T04:23:11.464Z"}
2025-01-30T04:23:11.501Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:23:11.501Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:23:43.431Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:23:43.436Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:23:43.436Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:23:43.437Z [31merror[39m: [VoiceRecorder] Error stopping recording on disconnect: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:24:44.976Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:24:45.015Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:24:45.090Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T04:24:45.110Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210940409.pcm","age":130781.30834960938,"size":1167360}
2025-01-30T04:24:45.120Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738210940409.pcm.mp3","age":93541.29467773438,"size":57141}
2025-01-30T04:24:45.126Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T04:24:45.128Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:24:45.129Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:24:45.583Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:24:45.607Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:24:47.503Z [32minfo[39m: Command Name: setkey
2025-01-30T04:24:47.504Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T04:24:47.667Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T04:24:47.669Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334378758127353856","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:24:47.670Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:24:51.379Z [32minfo[39m: Command Name: record
2025-01-30T04:24:51.381Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:24:51.615Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:24:51.831Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:24:51.833Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:24:51.833Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:24:51.833Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:24:51.834Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:24:51.834Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738211091834.pcm","directory":"temp"}
2025-01-30T04:24:51.877Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:24:51.878Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:24:51.878Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:24:51.879Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:24:51.879Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:24:51.879Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:24:51.880Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334378774451720264","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:24:51.880Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:24:58.153Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:24:58.157Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:24:59.616Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:25:01.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 8483 bytes)
2025-01-30T04:25:03.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 21427 bytes)
2025-01-30T04:25:05.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 33287 bytes)
2025-01-30T04:25:09.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 45400 bytes)
2025-01-30T04:25:13.091Z [32minfo[39m: Command Name: stop
2025-01-30T04:25:13.092Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:25:13.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 54745 bytes)
2025-01-30T04:25:13.328Z [32minfo[39m: [StopCommand] Stopping recording...
2025-01-30T04:25:13.329Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:25:13.330Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":56153,"duration":21450,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:25:13.333Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:25:14.342Z [32minfo[39m: [VoiceRecorder] Recording size: 1954560 bytes
2025-01-30T04:25:14.893Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:25:14.896Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:25:15.473Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:25:15.709Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738211091834.pcm to MP3
2025-01-30T04:25:15.710Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738211091834.pcm.mp3","exists":true}
2025-01-30T04:25:15.710Z [32minfo[39m: [TranscriptionService] File stats:{"size":114645,"created":"2025-01-30T04:25:15.567Z","modified":"2025-01-30T04:25:15.688Z"}
2025-01-30T04:25:15.711Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:25:15.711Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:25:47.880Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:25:47.884Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:25:47.886Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:25:47.891Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:25:47.891Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":56224,"duration":56012,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:25:47.895Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:25:48.906Z [32minfo[39m: [handleReply] Interaction state: 🛑 **Recording Stopped!**
The bot will now process the recording and generate a summary.

⏳ Please wait while the audio is being processed...{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334378865497346089","commandName":"stop","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:25:48.908Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:25:48.925Z [32minfo[39m: [VoiceRecorder] Recording size: 1954560 bytes
2025-01-30T04:25:50.220Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738211091834.pcm to MP3
2025-01-30T04:25:50.220Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738211091834.pcm.mp3","exists":true}
2025-01-30T04:25:50.220Z [32minfo[39m: [TranscriptionService] File stats:{"size":114645,"created":"2025-01-30T04:25:15.567Z","modified":"2025-01-30T04:25:50.201Z"}
2025-01-30T04:25:50.221Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:25:50.221Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:26:21.933Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:26:21.938Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:26:21.938Z [31merror[39m: [VoiceRecorder] Error stopping recording: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:26:21.940Z [31merror[39m: [VoiceRecorder] Error stopping recording on disconnect: Connection error.{"cause":{"message":"request to https://api.openai.com/v1/audio/transcriptions failed, reason: socket hang up","type":"system","errno":"ECONNRESET","code":"ECONNRESET"},"stack":"Error: Connection error.\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:316:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:447:32)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:29:44.982Z [32minfo[39m: Memory Usage:
2025-01-30T04:29:44.987Z [32minfo[39m: rss: 126.64 MB
2025-01-30T04:29:44.988Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-30T04:29:44.988Z [32minfo[39m: heapUsed: 28.38 MB
2025-01-30T04:29:44.989Z [32minfo[39m: external: 8.47 MB
2025-01-30T04:29:44.989Z [32minfo[39m: arrayBuffers: 0.55 MB
2025-01-30T04:34:44.984Z [32minfo[39m: Memory Usage:
2025-01-30T04:34:44.988Z [32minfo[39m: rss: 126.5 MB
2025-01-30T04:34:44.989Z [32minfo[39m: heapTotal: 29.96 MB
2025-01-30T04:34:44.990Z [32minfo[39m: heapUsed: 28.13 MB
2025-01-30T04:34:44.991Z [32minfo[39m: external: 8.47 MB
2025-01-30T04:34:44.991Z [32minfo[39m: arrayBuffers: 0.54 MB
2025-01-30T04:39:22.626Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:39:22.668Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:39:22.745Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T04:39:22.777Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738211091834.pcm","age":849346.3525390625,"size":1954560}
2025-01-30T04:39:22.782Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738211091834.pcm.mp3","age":812459.470703125,"size":114645}
2025-01-30T04:39:22.790Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T04:39:22.793Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:39:22.793Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:39:23.280Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:39:23.313Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:40:21.660Z [32minfo[39m: Command Name: setkey
2025-01-30T04:40:21.663Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T04:40:21.831Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T04:40:21.833Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334382676383371274","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:40:21.834Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:40:24.213Z [32minfo[39m: Command Name: record
2025-01-30T04:40:24.216Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:40:24.450Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:40:24.696Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:40:24.698Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:40:24.698Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:40:24.699Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:40:24.699Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:40:24.700Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738212024699.pcm","directory":"temp"}
2025-01-30T04:40:24.806Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:40:24.807Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:40:24.807Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:40:24.807Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:40:24.807Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:40:24.807Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:40:24.808Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334382686990766181","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:40:24.808Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:40:24.811Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:40:24.812Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:40:26.701Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 13214 bytes)
2025-01-30T04:40:28.699Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 23953 bytes)
2025-01-30T04:40:28.841Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:40:30.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 36803 bytes)
2025-01-30T04:40:32.960Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 48677 bytes)
2025-01-30T04:40:34.958Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 62061 bytes)
2025-01-30T04:40:37.432Z [32minfo[39m: Command Name: stop
2025-01-30T04:40:37.434Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:40:37.688Z [32minfo[39m: [StopCommand] Stopping recording...
2025-01-30T04:40:37.689Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:40:37.689Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":68272,"duration":12882,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:40:37.692Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:40:38.698Z [32minfo[39m: [VoiceRecorder] Recording size: 2269440 bytes
2025-01-30T04:40:39.691Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:40:39.693Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:40:40.071Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738212024699.pcm to MP3
2025-01-30T04:40:40.072Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738212024699.pcm.mp3","exists":true}
2025-01-30T04:40:40.072Z [32minfo[39m: [TranscriptionService] File stats:{"size":136605,"created":"2025-01-30T04:40:39.914Z","modified":"2025-01-30T04:40:40.049Z"}
2025-01-30T04:40:40.074Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:40:40.074Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:40:41.677Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":151,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T04:40:41.681Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738212041677.txt","size":151}
2025-01-30T04:40:41.681Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":151,"transcriptContent":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}
2025-01-30T04:40:42.682Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:40:43.425Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:40:45.098Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:40:45.099Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T04:40:47.101Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:40:51.057Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1903,"transcriptLength":151}
2025-01-30T04:40:51.057Z [32minfo[39m: [VoiceRecorder] Guild ID:
2025-01-30T04:40:51.057Z [32minfo[39m: [VoiceRecorder] Summary Channel ID:
2025-01-30T04:40:51.058Z [32minfo[39m: [VoiceRecorder] Guild Config:
2025-01-30T04:40:51.059Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T04:40:51.291Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***Narrative Summary:*** The players find themselves embroiled in a discussion about creating a new documentary, leading to a humorous exchange regarding the likelihood of its success. One player points out that this isn't the first documentary made about the group, hinting at a history of past portrayals.

The session opens with the players discussing the possibility of creating a new documentary about their adventures. One player expresses doubt about the new documentary's success, leading to a comical back-and-forth about the odds. The mention of past documentaries sparks a revelation that this wouldn't be their first on-screen portrayal, adding a layer of humor and depth to their shared history.

Despite the unconventional nature of the conversation, the players' banter and familiarity with each other create a sense of camaraderie and shared experiences. The idea of a documentary acts as a catalyst for reflection on past adventures and the group's dynamic, setting the stage for a session filled with reminiscing and laughter. 

Ultimately, the discussion about the documentary serves as a lighthearted segue into the players' next adventure, highlighting their unique bond and the humor that underpins their escapades. 

***Memorable Moments:***
- `Player 1:` "You can make a whole new documentary about this. That seems highly unlikely."
- `Player 2:` "Excuse me, this is not even the first documentary that was made about us!"

***Consequences & Setup:***
- **Immediate Consequences:** Setting the tone for the session with a light-hearted discussion about creating a new documentary.
- *Future Plot Hooks:* The idea of revisiting past adventures through a documentary could lead to nostalgic or reflective moments in future sessions.
- Unresolved Threads: The players' history with past documentaries hints at potential storylines or revelations related to their previous exploits.
2025-01-30T04:40:51.297Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T04:40:51.297Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":68319,"duration":26490,"speakingStates":[["406937877348352001",false]]}
2025-01-30T04:40:51.301Z [32minfo[39m: [VoiceRecorder] Output stream ended successfully
2025-01-30T04:40:51.303Z [32minfo[39m: [handleReply] Interaction state: 🛑 **Recording Stopped!**
The bot will now process the recording and generate a summary.

⏳ Please wait while the audio is being processed...{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334382742561099816","commandName":"stop","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:40:51.303Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:40:52.307Z [32minfo[39m: [VoiceRecorder] Recording size: 2269440 bytes
2025-01-30T04:40:53.609Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738212024699.pcm to MP3
2025-01-30T04:40:53.609Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738212024699.pcm.mp3","exists":true}
2025-01-30T04:40:53.610Z [32minfo[39m: [TranscriptionService] File stats:{"size":136605,"created":"2025-01-30T04:40:39.914Z","modified":"2025-01-30T04:40:53.593Z"}
2025-01-30T04:40:53.610Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T04:40:53.610Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T04:40:55.256Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":151,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T04:40:55.261Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738212055257.txt","size":151}
2025-01-30T04:40:55.261Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":151,"transcriptContent":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}
2025-01-30T04:40:56.269Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:40:58.635Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:40:58.635Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T04:41:00.642Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:02.649Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"***The interaction involves a discussion about making a new documentary, with one person expressing doubt due to the perceived unlikelihood while the other points out that there have been previous documentaries made about them.***\n\n- The conversation hints at a sense of disbelief or surprise at the idea of creating a new documentary.\n- One individual seems to be skeptical about the feasibility of a new documentary, implying it's improbable.\n- The response signifies that there have been prior documentaries made about the subject, suggesting a history of documentary coverage.\n- The exchange highlights a potential conflict in perspectives regarding the significance of creating another documentary. \n- It hints at a possible story behind the group or subject that has garnered enough attention to warrant multiple documentaries. \n\n\nNo transcript available."}
2025-01-30T04:41:02.650Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T04:41:06.657Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:08.077Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:08.078Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T04:41:14.085Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:15.281Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:15.283Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:453:27)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"},"context":{"transcriptLength":151,"transcriptSample":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}}
2025-01-30T04:41:15.284Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary in ClearStreamsAndSave, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:453:27)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:301:29)"}
2025-01-30T04:41:15.303Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"63","data":{"guildId":"1315144523336122469","transcript":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!\n"}}
2025-01-30T04:41:15.303Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T04:41:15.303Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 63
2025-01-30T04:41:15.304Z [32minfo[39m: [VoiceRecorder] Guild ID:
2025-01-30T04:41:15.304Z [32minfo[39m: [VoiceRecorder] Summary Channel ID:
2025-01-30T04:41:15.304Z [32minfo[39m: [VoiceRecorder] Guild Config:
2025-01-30T04:41:15.304Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T04:41:15.481Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:15.686Z [32minfo[39m: Command Name: record
2025-01-30T04:41:15.692Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:41:15.866Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:41:16.071Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:41:16.072Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:41:16.072Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:41:16.072Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:41:16.072Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:41:16.072Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738212076072.pcm","directory":"temp"}
2025-01-30T04:41:16.073Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:41:16.073Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:41:16.073Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:41:16.073Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:41:16.073Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:41:16.073Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:41:16.074Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334382902972256267","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:41:16.074Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:41:16.080Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:41:16.080Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:41:17.241Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:41:18.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 91 bytes (total: 10406 bytes)
2025-01-30T04:41:20.300Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 23045 bytes)
2025-01-30T04:41:20.311Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"63","data":{"guildId":"1315144523336122469","transcript":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!\n"}}
2025-01-30T04:41:20.312Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T04:41:20.312Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":151,"transcriptContent":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}
2025-01-30T04:41:21.316Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:22.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 36278 bytes)
2025-01-30T04:41:24.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 50200 bytes)
2025-01-30T04:41:24.630Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:24.630Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T04:41:26.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 60948 bytes)
2025-01-30T04:41:26.635Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:27.567Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:27.568Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T04:41:29.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 71061 bytes)
2025-01-30T04:41:31.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 82896 bytes)
2025-01-30T04:41:31.574Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:32.953Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:32.953Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T04:41:33.099Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 94838 bytes)
2025-01-30T04:41:35.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 106157 bytes)
2025-01-30T04:41:38.956Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:39.241Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 115557 bytes)
2025-01-30T04:41:40.136Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:40.139Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":151,"transcriptSample":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}}
2025-01-30T04:41:40.140Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T04:41:40.140Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"63","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T04:41:40.153Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"63","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T04:41:40.157Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"63","queueName":"summary-generation"}
2025-01-30T04:41:41.151Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"63","data":{"guildId":"1315144523336122469","transcript":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!\n"}}
2025-01-30T04:41:41.152Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T04:41:41.152Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":151,"transcriptContent":"You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not "}
2025-01-30T04:41:41.679Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 126462 bytes)
2025-01-30T04:41:42.154Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:43.528Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T04:41:43.529Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T04:41:43.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 136994 bytes)
2025-01-30T04:41:45.533Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can make a whole new documentary about this. That seems highly unlikely. Excuse me, this is not even the first documentary that was made about us!

2025-01-30T04:41:45.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 150861 bytes)
2025-01-30T04:41:47.758Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 162208 bytes)
2025-01-30T04:41:48.062Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1206,"transcriptLength":151}
2025-01-30T04:41:48.063Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T04:41:48.287Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-30T04:41:48.295Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"63","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738212108063}}
2025-01-30T04:41:49.762Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 174650 bytes)
2025-01-30T04:41:51.760Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 69 bytes (total: 187400 bytes)
2025-01-30T04:41:53.764Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 200159 bytes)
2025-01-30T04:42:02.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 208372 bytes)
2025-01-30T04:42:14.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 215014 bytes)
2025-01-30T04:42:17.178Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 220850 bytes)
2025-01-30T04:42:37.728Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:42:37.776Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:42:37.865Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-30T04:42:37.887Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738212024699.pcm","age":120086.54052734375,"size":2269440}
2025-01-30T04:42:37.902Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738212024699.pcm.mp3","age":104173.43774414062,"size":136605}
2025-01-30T04:42:37.904Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738212076072.pcm","age":18768.26806640625,"size":7929600}
2025-01-30T04:42:37.905Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":2,"maxAge":2592000000}
2025-01-30T04:42:37.935Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:42:37.936Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:42:38.353Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:42:38.374Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:47:37.747Z [32minfo[39m: Memory Usage:
2025-01-30T04:47:37.755Z [32minfo[39m: rss: 125.84 MB
2025-01-30T04:47:37.755Z [32minfo[39m: heapTotal: 27.71 MB
2025-01-30T04:47:37.755Z [32minfo[39m: heapUsed: 26.21 MB
2025-01-30T04:47:37.757Z [32minfo[39m: external: 8.06 MB
2025-01-30T04:47:37.757Z [32minfo[39m: arrayBuffers: 0.15 MB
2025-01-30T04:50:38.030Z [32minfo[39m: Command Name: record
2025-01-30T04:50:38.035Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:50:38.282Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:50:38.286Z [31merror[39m: [RecordCommand] Error: OpenAI API key not set{"stack":"Error: OpenAI API key not set\n    at VoiceRecorder.startRecording (file:///usr/src/app/src/VoiceRecorder.js:231:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async RecordCommand.execute (file:///usr/src/app/src/commands/audio/RecordCommand.js:35:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:50:38.287Z [31merror[39m: Error executing command record after retries: OpenAI API key not set{"stack":"Error: OpenAI API key not set\n    at VoiceRecorder.startRecording (file:///usr/src/app/src/VoiceRecorder.js:231:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async RecordCommand.execute (file:///usr/src/app/src/commands/audio/RecordCommand.js:35:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:50:38.287Z [31merror[39m: Error handling command: OpenAI API key not set{"stack":"Error: OpenAI API key not set\n    at VoiceRecorder.startRecording (file:///usr/src/app/src/VoiceRecorder.js:231:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async RecordCommand.execute (file:///usr/src/app/src/commands/audio/RecordCommand.js:35:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:50:38.288Z [31merror[39m: Discord client error: OpenAI API key not set{"stack":"Error: OpenAI API key not set\n    at VoiceRecorder.startRecording (file:///usr/src/app/src/VoiceRecorder.js:231:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async RecordCommand.execute (file:///usr/src/app/src/commands/audio/RecordCommand.js:35:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:70:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T04:56:32.739Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T04:56:32.773Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T04:56:32.842Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-30T04:56:32.859Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":2,"maxAge":2592000000}
2025-01-30T04:56:32.865Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T04:56:32.865Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T04:56:33.294Z [32minfo[39m: Bot initialized successfully
2025-01-30T04:56:33.341Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T04:56:47.421Z [32minfo[39m: Command Name: setkey
2025-01-30T04:56:47.425Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T04:56:47.604Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T04:56:47.607Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334386811006353429","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:56:47.608Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:56:50.793Z [32minfo[39m: Command Name: record
2025-01-30T04:56:50.795Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T04:56:50.988Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T04:56:51.218Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T04:56:51.220Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T04:56:51.221Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:56:51.221Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T04:56:51.221Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:56:51.222Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213011221.pcm","directory":"temp"}
2025-01-30T04:56:51.274Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:56:51.275Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:56:51.276Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T04:56:51.276Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:56:51.276Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T04:56:51.276Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T04:56:51.276Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334386825212465315","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T04:56:51.276Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T04:56:51.286Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:56:51.287Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:56:52.406Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:56:58.346Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 6324 bytes)
2025-01-30T04:57:04.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 14472 bytes)
2025-01-30T04:57:06.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 22376 bytes)
2025-01-30T04:57:08.445Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 35440 bytes)
2025-01-30T04:57:12.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 43749 bytes)
2025-01-30T04:57:14.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 55202 bytes)
2025-01-30T04:57:16.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 70088 bytes)
2025-01-30T04:57:19.545Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 83605 bytes)
2025-01-30T04:57:22.246Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 94015 bytes)
2025-01-30T04:57:26.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 105027 bytes)
2025-01-30T04:57:28.487Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 118406 bytes)
2025-01-30T04:57:30.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 132052 bytes)
2025-01-30T04:57:33.685Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 142944 bytes)
2025-01-30T04:57:35.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 156914 bytes)
2025-01-30T04:57:38.085Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 170448 bytes)
2025-01-30T04:57:40.085Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 185034 bytes)
2025-01-30T04:57:43.584Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 193669 bytes)
2025-01-30T04:57:46.067Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 206041 bytes)
2025-01-30T04:57:48.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 221356 bytes)
2025-01-30T04:57:52.526Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 232558 bytes)
2025-01-30T04:57:54.729Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 245891 bytes)
2025-01-30T04:57:56.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 259255 bytes)
2025-01-30T04:58:00.287Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 95 bytes (total: 271513 bytes)
2025-01-30T04:58:03.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 277814 bytes)
2025-01-30T04:58:08.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 286886 bytes)
2025-01-30T04:58:10.325Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 300842 bytes)
2025-01-30T04:58:12.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 316043 bytes)
2025-01-30T04:58:14.327Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 329592 bytes)
2025-01-30T04:58:16.328Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 345350 bytes)
2025-01-30T04:58:18.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 356031 bytes)
2025-01-30T04:58:20.865Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 369305 bytes)
2025-01-30T04:58:22.945Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 382501 bytes)
2025-01-30T04:58:25.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 394014 bytes)
2025-01-30T04:58:27.983Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 406126 bytes)
2025-01-30T04:58:29.985Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 421117 bytes)
2025-01-30T04:58:33.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 429429 bytes)
2025-01-30T04:58:35.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 442994 bytes)
2025-01-30T04:58:38.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 455243 bytes)
2025-01-30T04:58:42.608Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 68 bytes (total: 464855 bytes)
2025-01-30T04:58:44.605Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 476302 bytes)
2025-01-30T04:58:46.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 489373 bytes)
2025-01-30T04:58:49.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 500562 bytes)
2025-01-30T04:58:51.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 510029 bytes)
2025-01-30T04:58:51.280Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T04:58:51.282Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213131281.pcm","directory":"temp"}
2025-01-30T04:58:51.287Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T04:58:51.290Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T04:58:51.291Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T04:58:51.291Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T04:58:51.946Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T04:58:51.948Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T04:58:52.298Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T04:58:53.752Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T04:58:55.185Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213011221.pcm to MP3
2025-01-30T04:58:55.186Z [31merror[39m: [VoiceRecorder] Error processing recording: this.transcriptionService.transcribe is not a function{"stack":"TypeError: this.transcriptionService.transcribe is not a function\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:105:64)"}
2025-01-30T04:58:55.187Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: this.transcriptionService.transcribe is not a function{"stack":"TypeError: this.transcriptionService.transcribe is not a function\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:105:64)"}
2025-01-30T04:58:55.187Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T04:58:57.300Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:02:14.634Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T05:02:14.677Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T05:02:14.749Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-30T05:02:14.773Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213011221.pcm","age":202382.11645507812,"size":16677120}
2025-01-30T05:02:14.787Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213011221.pcm.mp3","age":199505.19653320312,"size":979653}
2025-01-30T05:02:14.788Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213131281.pcm","age":202382.0595703125,"size":65280}
2025-01-30T05:02:14.790Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"transcripts","fileCount":2,"maxAge":2592000000}
2025-01-30T05:02:14.792Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T05:02:14.792Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T05:02:15.201Z [32minfo[39m: Bot initialized successfully
2025-01-30T05:02:15.253Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T05:02:20.225Z [32minfo[39m: Command Name: setkey
2025-01-30T05:02:20.228Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T05:02:20.451Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T05:02:20.452Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334388206241845330","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T05:02:20.453Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T05:02:22.826Z [32minfo[39m: Command Name: record
2025-01-30T05:02:22.830Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T05:02:23.099Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T05:02:23.333Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T05:02:23.335Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T05:02:23.335Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T05:02:23.335Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T05:02:23.336Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:02:23.336Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213343336.pcm","directory":"temp"}
2025-01-30T05:02:23.381Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:02:23.383Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:02:23.383Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T05:02:23.383Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:02:23.383Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T05:02:23.384Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T05:02:23.384Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334388217558073416","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T05:02:23.384Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T05:02:23.391Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:02:23.393Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:02:24.975Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:02:26.632Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 13881 bytes)
2025-01-30T05:02:28.711Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 26773 bytes)
2025-01-30T05:02:30.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 38162 bytes)
2025-01-30T05:02:32.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 54286 bytes)
2025-01-30T05:02:34.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 70108 bytes)
2025-01-30T05:02:36.851Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 85790 bytes)
2025-01-30T05:02:38.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 98911 bytes)
2025-01-30T05:02:41.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 111451 bytes)
2025-01-30T05:02:43.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 125046 bytes)
2025-01-30T05:02:46.770Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 136911 bytes)
2025-01-30T05:02:49.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 147729 bytes)
2025-01-30T05:02:53.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 159463 bytes)
2025-01-30T05:03:02.992Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 166663 bytes)
2025-01-30T05:03:05.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 177360 bytes)
2025-01-30T05:03:07.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 190913 bytes)
2025-01-30T05:03:25.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 201517 bytes)
2025-01-30T05:03:31.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 217086 bytes)
2025-01-30T05:03:33.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 229508 bytes)
2025-01-30T05:03:35.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 243179 bytes)
2025-01-30T05:03:37.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 258337 bytes)
2025-01-30T05:03:39.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 274316 bytes)
2025-01-30T05:03:41.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 290092 bytes)
2025-01-30T05:03:44.324Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 303288 bytes)
2025-01-30T05:03:46.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 318041 bytes)
2025-01-30T05:03:48.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 331639 bytes)
2025-01-30T05:03:50.591Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 346944 bytes)
2025-01-30T05:03:52.593Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 362257 bytes)
2025-01-30T05:03:54.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 377924 bytes)
2025-01-30T05:03:56.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 391995 bytes)
2025-01-30T05:03:58.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 407864 bytes)
2025-01-30T05:04:00.674Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 422215 bytes)
2025-01-30T05:04:02.671Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 438382 bytes)
2025-01-30T05:04:04.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 452467 bytes)
2025-01-30T05:04:07.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 466707 bytes)
2025-01-30T05:04:09.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 481488 bytes)
2025-01-30T05:04:11.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 495559 bytes)
2025-01-30T05:04:13.171Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 508094 bytes)
2025-01-30T05:04:15.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 519291 bytes)
2025-01-30T05:04:17.611Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 532537 bytes)
2025-01-30T05:04:19.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 546956 bytes)
2025-01-30T05:04:21.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 194 bytes (total: 562270 bytes)
2025-01-30T05:04:23.389Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:04:23.393Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213463391.pcm","directory":"temp"}
2025-01-30T05:04:23.398Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:04:23.400Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:04:23.400Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:04:23.401Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:04:23.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 576786 bytes)
2025-01-30T05:04:24.395Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:04:24.397Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:04:24.413Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:04:27.238Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213343336.pcm to MP3
2025-01-30T05:04:27.239Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738213343336.pcm.mp3","exists":true}
2025-01-30T05:04:27.240Z [32minfo[39m: [TranscriptionService] File stats:{"size":1048533,"created":"2025-01-30T05:04:26.632Z","modified":"2025-01-30T05:04:27.217Z"}
2025-01-30T05:04:27.242Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:04:27.242Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:04:29.414Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:04:35.736Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:04:38.527Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":984,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:04:38.528Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Now, I don't understand. None of this is making any sense to me. What is there to understand? Okay, we got in an accident, right? They felt a little bad about it. One thing led to another, and they as...
2025-01-30T05:04:38.529Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":984,"transcriptContent":"Now, I don't understand. None of this is making any sense to me. What is there to understand? Okay, "}
2025-01-30T05:04:39.531Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Now, I don't understand. None of this is making any sense to me. What is there to understand? Okay, we got in an accident, right? They felt a little bad about it. One thing led to another, and they asked themselves, like, a dinner date. Who are these people, exactly? Can I work at Whitney Taft? I thought you were going to be a Taft. What, the Taft family? I don't know. Yeah, a Taft family, yes. That's a good guess, Charlie. I'm rich, but these people are the stratosphere. My whole family was a Taft family. My uncles and grandfathers and cousins all worked for Taft Co. Enterprises. My uncle even drowned in a bath at their motel. He didn't drown, he burned up. Get out of the address. This is a great opportunity, okay? Do not screw this up. Because if you get into a family like this, it's like becoming royalty. What's the plan for the date? I mean, the plan is we're just going to be ourselves. Ha! Don't be yourself. No, that's terrible. Be anybody but yourselves. Charlie.

2025-01-30T05:04:42.429Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":27,"transcriptLength":984}
2025-01-30T05:04:42.434Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738213482429.txt","size":984}
2025-01-30T05:04:42.435Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T05:04:43.254Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: **No transcript provided.**
2025-01-30T05:04:43.255Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:04:43.259Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213343336.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:04:43.260Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213343336.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:06:23.393Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:06:23.397Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213583396.pcm","directory":"temp"}
2025-01-30T05:06:23.399Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:06:23.401Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:06:23.401Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T05:06:23.402Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:06:24.407Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:06:25.411Z [31merror[39m: Error in convertToMp3:{"error":"Input file is empty","inputFile":"/usr/src/app/temp/recording-1315144523336122469-1738213463391.pcm","inputFileExists":true}
2025-01-30T05:06:25.414Z [31merror[39m: [VoiceRecorder] Error processing recording: Input file is empty{"stack":"Error: Input file is empty\n    at AudioService.convertToMp3 (file:///usr/src/app/src/services/AudioService.js:45:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:29)"}
2025-01-30T05:06:25.415Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: Input file is empty{"stack":"Error: Input file is empty\n    at AudioService.convertToMp3 (file:///usr/src/app/src/services/AudioService.js:45:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:29)"}
2025-01-30T05:06:25.417Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:06:29.408Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:06:44.755Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:06:44.757Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:06:46.639Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:06:47.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 13931 bytes)
2025-01-30T05:06:50.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 25554 bytes)
2025-01-30T05:06:56.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 40704 bytes)
2025-01-30T05:06:58.356Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 56000 bytes)
2025-01-30T05:07:01.314Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 69541 bytes)
2025-01-30T05:07:03.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 85390 bytes)
2025-01-30T05:07:05.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 101203 bytes)
2025-01-30T05:07:07.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 113699 bytes)
2025-01-30T05:07:09.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 127912 bytes)
2025-01-30T05:07:12.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 137198 bytes)
2025-01-30T05:07:14.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 152848 bytes)
2025-01-30T05:07:14.639Z [32minfo[39m: Memory Usage:
2025-01-30T05:07:14.641Z [32minfo[39m: rss: 128.65 MB
2025-01-30T05:07:14.641Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-30T05:07:14.641Z [32minfo[39m: heapUsed: 27.8 MB
2025-01-30T05:07:14.641Z [32minfo[39m: external: 9.21 MB
2025-01-30T05:07:14.641Z [32minfo[39m: arrayBuffers: 1.29 MB
2025-01-30T05:07:16.215Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 165489 bytes)
2025-01-30T05:07:18.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 181545 bytes)
2025-01-30T05:07:20.692Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 193580 bytes)
2025-01-30T05:07:22.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 209189 bytes)
2025-01-30T05:07:24.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 225131 bytes)
2025-01-30T05:07:27.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 238871 bytes)
2025-01-30T05:07:32.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 252278 bytes)
2025-01-30T05:07:34.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 265026 bytes)
2025-01-30T05:07:36.257Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 279316 bytes)
2025-01-30T05:07:38.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 293428 bytes)
2025-01-30T05:07:40.254Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 309468 bytes)
2025-01-30T05:07:42.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 322711 bytes)
2025-01-30T05:07:45.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 333875 bytes)
2025-01-30T05:07:49.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 340920 bytes)
2025-01-30T05:07:51.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 351463 bytes)
2025-01-30T05:07:53.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 366112 bytes)
2025-01-30T05:07:57.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 375664 bytes)
2025-01-30T05:07:59.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 389597 bytes)
2025-01-30T05:08:01.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 401717 bytes)
2025-01-30T05:08:04.992Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 415965 bytes)
2025-01-30T05:08:07.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 430653 bytes)
2025-01-30T05:08:09.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 446434 bytes)
2025-01-30T05:08:11.994Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 460782 bytes)
2025-01-30T05:08:13.993Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 476684 bytes)
2025-01-30T05:08:16.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 487790 bytes)
2025-01-30T05:08:18.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 497614 bytes)
2025-01-30T05:08:20.915Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 512418 bytes)
2025-01-30T05:08:22.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 528405 bytes)
2025-01-30T05:08:23.396Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:08:23.398Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213703397.pcm","directory":"temp"}
2025-01-30T05:08:23.399Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:08:23.401Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:08:23.402Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:08:23.402Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:08:24.407Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:08:27.256Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213583396.pcm to MP3
2025-01-30T05:08:27.257Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738213583396.pcm.mp3","exists":true}
2025-01-30T05:08:27.257Z [32minfo[39m: [TranscriptionService] File stats:{"size":986901,"created":"2025-01-30T05:08:26.639Z","modified":"2025-01-30T05:08:27.235Z"}
2025-01-30T05:08:27.257Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:08:27.257Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:08:29.408Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:08:38.578Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:08:38.583Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:08:39.629Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:08:40.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 9854 bytes)
2025-01-30T05:08:42.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 22911 bytes)
2025-01-30T05:08:44.934Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 35456 bytes)
2025-01-30T05:08:46.936Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 49190 bytes)
2025-01-30T05:08:48.936Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 64097 bytes)
2025-01-30T05:08:52.462Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":208,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:08:52.463Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: The next video is inspired by a site calledaries.com return, where they will share recordings of siemin. The record finisher is used to contrasting the languages of android. For example, sound is oozi...
2025-01-30T05:08:52.463Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":208,"transcriptContent":"The next video is inspired by a site calledaries.com return, where they will share recordings of sie"}
2025-01-30T05:08:53.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 74351 bytes)
2025-01-30T05:08:53.466Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: The next video is inspired by a site calledaries.com return, where they will share recordings of siemin. The record finisher is used to contrasting the languages of android. For example, sound is oozing out,

2025-01-30T05:08:55.582Z [33mwarn[39m: [TranscriptionService] Unable to summarize, retrying...{"responseContent":"Unable to summarize."}
2025-01-30T05:08:55.582Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":208,"transcriptLength":208}
2025-01-30T05:08:55.586Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738213735583.txt","size":208}
2025-01-30T05:08:55.587Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T05:08:55.602Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 87140 bytes)
2025-01-30T05:08:55.888Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: The next video is inspired by a site calledaries.com return, where they will share recordings of siemin. The record finisher is used to contrasting the languages of android. For example, sound is oozing out,

2025-01-30T05:08:55.888Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:08:55.892Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213583396.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:08:55.892Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213583396.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:08:58.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 98203 bytes)
2025-01-30T05:09:00.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 111942 bytes)
2025-01-30T05:09:02.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 125505 bytes)
2025-01-30T05:09:04.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 140709 bytes)
2025-01-30T05:09:06.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 153856 bytes)
2025-01-30T05:09:09.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 167303 bytes)
2025-01-30T05:09:12.477Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 179587 bytes)
2025-01-30T05:09:14.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 192804 bytes)
2025-01-30T05:09:17.514Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 207253 bytes)
2025-01-30T05:09:19.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 222964 bytes)
2025-01-30T05:09:21.515Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 237969 bytes)
2025-01-30T05:09:24.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 252582 bytes)
2025-01-30T05:09:26.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 262764 bytes)
2025-01-30T05:09:29.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 274241 bytes)
2025-01-30T05:09:31.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 288760 bytes)
2025-01-30T05:09:33.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 299646 bytes)
2025-01-30T05:09:35.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 313161 bytes)
2025-01-30T05:09:37.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 327685 bytes)
2025-01-30T05:09:40.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 338653 bytes)
2025-01-30T05:09:43.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 349940 bytes)
2025-01-30T05:09:45.937Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 362725 bytes)
2025-01-30T05:09:50.255Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 375566 bytes)
2025-01-30T05:09:53.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 388465 bytes)
2025-01-30T05:09:55.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 402023 bytes)
2025-01-30T05:09:57.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 415290 bytes)
2025-01-30T05:10:00.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 426435 bytes)
2025-01-30T05:10:02.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 439886 bytes)
2025-01-30T05:10:07.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 450426 bytes)
2025-01-30T05:10:11.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 463320 bytes)
2025-01-30T05:10:13.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 476488 bytes)
2025-01-30T05:10:17.416Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 485806 bytes)
2025-01-30T05:10:19.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 492663 bytes)
2025-01-30T05:10:21.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 504282 bytes)
2025-01-30T05:10:23.399Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:10:23.402Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213823400.pcm","directory":"temp"}
2025-01-30T05:10:23.405Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:10:23.407Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:10:23.408Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:10:23.409Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:10:23.986Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 518460 bytes)
2025-01-30T05:10:24.414Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:10:26.677Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:10:26.678Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:10:27.305Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213703397.pcm to MP3
2025-01-30T05:10:27.305Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738213703397.pcm.mp3","exists":true}
2025-01-30T05:10:27.305Z [32minfo[39m: [TranscriptionService] File stats:{"size":979605,"created":"2025-01-30T05:10:26.699Z","modified":"2025-01-30T05:10:27.284Z"}
2025-01-30T05:10:27.306Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:10:27.306Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:10:28.676Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 12971 bytes)
2025-01-30T05:10:29.416Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:10:30.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 27703 bytes)
2025-01-30T05:10:31.261Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:10:33.638Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 37865 bytes)
2025-01-30T05:10:35.797Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 49278 bytes)
2025-01-30T05:10:37.567Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":463,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:10:37.567Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Giv...
2025-01-30T05:10:37.567Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":463,"transcriptContent":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}
2025-01-30T05:10:38.571Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:10:38.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 58733 bytes)
2025-01-30T05:10:39.867Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:10:39.868Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:10:40.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 74852 bytes)
2025-01-30T05:10:41.873Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:10:42.614Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:10:42.615Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:10:42.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 87798 bytes)
2025-01-30T05:10:44.798Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 101545 bytes)
2025-01-30T05:10:46.620Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:10:47.119Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 113819 bytes)
2025-01-30T05:10:48.110Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:10:48.111Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:10:49.119Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 129467 bytes)
2025-01-30T05:10:51.638Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 140303 bytes)
2025-01-30T05:10:53.638Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 156018 bytes)
2025-01-30T05:10:54.114Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:10:54.771Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:10:54.773Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"},"context":{"transcriptLength":463,"transcriptSample":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}}
2025-01-30T05:10:54.773Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"}
2025-01-30T05:10:54.790Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"64","data":{"guildId":"1315144523336122469","transcript":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.\n"}}
2025-01-30T05:10:54.791Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T05:10:54.791Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 64
2025-01-30T05:10:54.797Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738213854791.txt","size":463}
2025-01-30T05:10:54.797Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T05:10:55.009Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:10:55.009Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:10:55.013Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213703397.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:10:55.014Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213703397.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:10:55.640Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 171854 bytes)
2025-01-30T05:10:57.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 184446 bytes)
2025-01-30T05:10:59.798Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"64","data":{"guildId":"1315144523336122469","transcript":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.\n"}}
2025-01-30T05:10:59.798Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:10:59.798Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":463,"transcriptContent":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}
2025-01-30T05:10:59.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 196552 bytes)
2025-01-30T05:11:00.798Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:02.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 209787 bytes)
2025-01-30T05:11:02.965Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:02.966Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:11:04.758Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 222856 bytes)
2025-01-30T05:11:04.968Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:05.744Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:05.744Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:11:06.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 234603 bytes)
2025-01-30T05:11:08.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 248378 bytes)
2025-01-30T05:11:09.750Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:10.524Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:10.525Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:11:11.057Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 259375 bytes)
2025-01-30T05:11:14.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 272879 bytes)
2025-01-30T05:11:16.527Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:17.289Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:17.292Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":463,"transcriptSample":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}}
2025-01-30T05:11:17.292Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:11:17.292Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:11:17.305Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T05:11:17.308Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"64","queueName":"summary-generation"}
2025-01-30T05:11:17.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 287515 bytes)
2025-01-30T05:11:18.309Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"64","data":{"guildId":"1315144523336122469","transcript":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.\n"}}
2025-01-30T05:11:18.310Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:11:18.311Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":463,"transcriptContent":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}
2025-01-30T05:11:19.315Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:19.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 303424 bytes)
2025-01-30T05:11:20.596Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:20.597Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:11:21.658Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 318014 bytes)
2025-01-30T05:11:22.601Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:22.863Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"***No transcript available.***"}
2025-01-30T05:11:22.865Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:11:23.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 329997 bytes)
2025-01-30T05:11:25.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 345904 bytes)
2025-01-30T05:11:26.866Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:27.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 359262 bytes)
2025-01-30T05:11:29.404Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:29.405Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:11:29.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 373803 bytes)
2025-01-30T05:11:31.741Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 388802 bytes)
2025-01-30T05:11:34.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 400312 bytes)
2025-01-30T05:11:35.414Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:35.877Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:35.878Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":463,"transcriptSample":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}}
2025-01-30T05:11:35.879Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:11:35.879Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:11:35.885Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":2}
2025-01-30T05:11:35.887Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"64","queueName":"summary-generation"}
2025-01-30T05:11:36.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 410014 bytes)
2025-01-30T05:11:38.893Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"64","data":{"guildId":"1315144523336122469","transcript":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.\n"}}
2025-01-30T05:11:38.894Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:11:38.894Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":463,"transcriptContent":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}
2025-01-30T05:11:39.639Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 421410 bytes)
2025-01-30T05:11:39.896Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:41.639Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 432081 bytes)
2025-01-30T05:11:42.146Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:42.147Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:11:43.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 445056 bytes)
2025-01-30T05:11:44.149Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:44.822Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:44.823Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:11:46.698Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 458746 bytes)
2025-01-30T05:11:48.700Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 474663 bytes)
2025-01-30T05:11:48.823Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:49.322Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:49.322Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:11:50.957Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 486113 bytes)
2025-01-30T05:11:53.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 501463 bytes)
2025-01-30T05:11:55.300Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 517351 bytes)
2025-01-30T05:11:55.325Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had a chance to get a face done. Thanks, thanks. What do you think of the patch? What? Great. Good. Give me a second, all right? What? I thought you said you weren't going to hit on me. You want to hang on? Yeah. Oh shit, okay. No, you're right. I went into default mode, my bad. What the hell is she doing? Is she going to ruin this whole thing? Oh, crap. Hang on.

2025-01-30T05:11:55.958Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:11:55.959Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":463,"transcriptSample":"I think you look really pale, do you need some sunscreen? It's the first of the season, I've not had"}}
2025-01-30T05:11:55.960Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:11:55.961Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:11:55.965Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"64","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":3}
2025-01-30T05:11:55.966Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"64","queueName":"summary-generation"}
2025-01-30T05:11:57.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 533119 bytes)
2025-01-30T05:11:59.639Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 547221 bytes)
2025-01-30T05:12:02.238Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 560766 bytes)
2025-01-30T05:12:04.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 576569 bytes)
2025-01-30T05:12:06.242Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 592225 bytes)
2025-01-30T05:12:08.249Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 608024 bytes)
2025-01-30T05:12:10.238Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 623824 bytes)
2025-01-30T05:12:12.998Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 638071 bytes)
2025-01-30T05:12:14.643Z [32minfo[39m: Memory Usage:
2025-01-30T05:12:14.644Z [32minfo[39m: rss: 135.55 MB
2025-01-30T05:12:14.644Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-30T05:12:14.644Z [32minfo[39m: heapUsed: 29.36 MB
2025-01-30T05:12:14.645Z [32minfo[39m: external: 11.42 MB
2025-01-30T05:12:14.645Z [32minfo[39m: arrayBuffers: 3.49 MB
2025-01-30T05:12:15.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 649100 bytes)
2025-01-30T05:12:17.719Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 665071 bytes)
2025-01-30T05:12:19.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 680554 bytes)
2025-01-30T05:12:21.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 695302 bytes)
2025-01-30T05:12:23.401Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:12:23.403Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738213943402.pcm","directory":"temp"}
2025-01-30T05:12:23.405Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:12:23.407Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:12:23.408Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:12:23.409Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:12:24.361Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:12:24.363Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:12:24.413Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:12:26.958Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:12:27.372Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213823400.pcm to MP3
2025-01-30T05:12:27.372Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738213823400.pcm.mp3","exists":true}
2025-01-30T05:12:27.372Z [32minfo[39m: [TranscriptionService] File stats:{"size":1280685,"created":"2025-01-30T05:12:26.603Z","modified":"2025-01-30T05:12:27.354Z"}
2025-01-30T05:12:27.373Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:12:27.373Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:12:29.414Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:12:35.710Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1872,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:12:35.711Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: -"Sorry, you startled me. That's a pretty good stance you got there, are you trained?" -"Yes, you?" -"Yeah." -"Oh my god." -"You do karate?" -"I got more of a Catholic thing going on, sort of a hand o...
2025-01-30T05:12:35.711Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1872,"transcriptContent":"-\"Sorry, you startled me. That's a pretty good stance you got there, are you trained?\" -\"Yes, you?\" "}
2025-01-30T05:12:36.714Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: -"Sorry, you startled me. That's a pretty good stance you got there, are you trained?" -"Yes, you?" -"Yeah." -"Oh my god." -"You do karate?" -"I got more of a Catholic thing going on, sort of a hand of God." -"Stupid idiot." -"Hey, get over here." -"No, no, that's really cool, you show me that last move again?" -"Hey, get over here, what is the noise on you?" -"Whoa, whoa, whoa, whoa, whoa, whoa, hey, hey." -"Sorry, I got a cramp." -"She's really digging her looks into him." -"You need to change." -"Ugh, one second. Ugh, the same person's even calling me to answer. Hello, who is this? Who? Who is that? I don't know that name. Who? Who? Oh, waitress, why didn't you say that?" -"Because my name is not waitress. Okay, you know what? It doesn't even matter. Did Charlie steal my bike?" -"What are you talking about? Charlie's been with me the entire day. How did you get this number? I changed it." -"Look, I need my bike back. If I don't get it back, I'm gonna lose my job." -"Hello? Hello?" -"God, I have to change my number again. Holy shit. Oh no, Frank, I just realized something. What? Without Charlie doing all those insane things he's always doing for the waitress, her life is gonna completely change." -"What do you mean?" -"So she's gonna be constantly calling or dropping by looking for answers, so there's a very good chance that she's gonna have a front row seat for the final moment of humiliation, and that's gonna destroy Charlie for good." -"What's the final moment of humiliation?" -"That's the climactic moment where the rich people reveal their twisted game to all their wealthy friends and everybody has a good laugh. Okay, Frank, here's what's gonna have to happen. You're gonna have to do all of those creepy things on Charlie's list to keep the waitress from poking around while this whole thing runs its course." -"Where are you gonna go?"

2025-01-30T05:12:40.832Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"**No transcript available.**"}
2025-01-30T05:12:40.834Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:12:42.838Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: -"Sorry, you startled me. That's a pretty good stance you got there, are you trained?" -"Yes, you?" -"Yeah." -"Oh my god." -"You do karate?" -"I got more of a Catholic thing going on, sort of a hand of God." -"Stupid idiot." -"Hey, get over here." -"No, no, that's really cool, you show me that last move again?" -"Hey, get over here, what is the noise on you?" -"Whoa, whoa, whoa, whoa, whoa, whoa, hey, hey." -"Sorry, I got a cramp." -"She's really digging her looks into him." -"You need to change." -"Ugh, one second. Ugh, the same person's even calling me to answer. Hello, who is this? Who? Who is that? I don't know that name. Who? Who? Oh, waitress, why didn't you say that?" -"Because my name is not waitress. Okay, you know what? It doesn't even matter. Did Charlie steal my bike?" -"What are you talking about? Charlie's been with me the entire day. How did you get this number? I changed it." -"Look, I need my bike back. If I don't get it back, I'm gonna lose my job." -"Hello? Hello?" -"God, I have to change my number again. Holy shit. Oh no, Frank, I just realized something. What? Without Charlie doing all those insane things he's always doing for the waitress, her life is gonna completely change." -"What do you mean?" -"So she's gonna be constantly calling or dropping by looking for answers, so there's a very good chance that she's gonna have a front row seat for the final moment of humiliation, and that's gonna destroy Charlie for good." -"What's the final moment of humiliation?" -"That's the climactic moment where the rich people reveal their twisted game to all their wealthy friends and everybody has a good laugh. Okay, Frank, here's what's gonna have to happen. You're gonna have to do all of those creepy things on Charlie's list to keep the waitress from poking around while this whole thing runs its course." -"Where are you gonna go?"

2025-01-30T05:12:47.402Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2995,"transcriptLength":1872}
2025-01-30T05:12:47.405Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738213967402.txt","size":1872}
2025-01-30T05:12:47.405Z [33mwarn[39m: [ChannelService] Message is too long (3032 chars), splitting into chunks
2025-01-30T05:12:47.779Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ### Narrative Summary
In this transcript, two characters have a conversation about their combat training styles before a phone call interrupts them. The caller accuses someone of stealing a bike, leading to a discussion about preventing the waitress from getting involved in a potentially humiliating situation. One character decides to take on the responsibility of continuing the eccentric actions the other character typically does to keep the waitress distracted.

### Detailed Breakdown

#### Key Events
- Two characters discuss their combat training styles.
- A phone call comes in accusing someone of stealing a bike.
- A conversation about preventing the waitress from discovering a potentially humiliating situation.
- One character decides to take on the responsibility of maintaining the waitress's distance by continuing eccentric actions.

> "Sorry, you startled me. That's a pretty good stance you got there, are you trained?"
- Character A acknowledges Character B's combat stance.

> "You do karate?"
- Character A inquires about Character B's combat training.

> "I got more of a Catholic thing going on, sort of a hand of God."
- Character B describes their combat training style.

> "Hey, get over here, what is the noise on you?"
- Phone call interrupts the conversation between the characters.

> "Did Charlie steal my bike?"
- Caller accuses someone of stealing their bike.

> "Without Charlie doing all those insane things he's always doing for the waitress, her life is gonna completely change."
- Character explains the potential consequences of the waitress getting involved.

> "You're gonna have to do all of those creepy things on Charlie's list to keep the waitress from poking around while this whole thing runs its course."
- Character A assigns Character B the task of keeping the waitress distracted with eccentric behavior.

#### Memorable Moments
- *Character A and Character B discuss their combat training styles in a casual manner.*
- *Phone call interrupts the conversation, leading to accusations of bike theft.*
- *Character A strategizes on keeping the waitress away from a potentially humiliating situation by assigning Character B a unique task.*
  
### Consequences & Setup
- **Immediate Consequences**: Character B will have to start emulating the eccentric behaviors of another character to distract the waitress.
- **Future Plot Hooks**: The potential humiliation of a character during a twisted game involving rich individuals.
- **Party's Next Objectives**: Character B needs to fulfill the task of keeping the waitress from discovering the ongoing events. 

### Next Session
- ***Immediate Goals***: Character B needs to start embodying the eccentric behavior to keep the waitress away.
- *Known Challenges Ahead*: Potential challenges in maintaining the disguise and keeping the waitress distracted.
- *Player Intentions*: Character B may need to discover new ways to prevent the waitress from interacting with potentially harmful situations.
2025-01-30T05:12:47.780Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:12:47.786Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213823400.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:12:47.787Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738213823400.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:14:23.407Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:14:23.416Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738214063415.pcm","directory":"temp"}
2025-01-30T05:14:23.421Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:14:23.422Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:14:23.423Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T05:14:23.423Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:14:24.428Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:14:26.720Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738213943402.pcm to MP3
2025-01-30T05:14:26.721Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738213943402.pcm.mp3","exists":true}
2025-01-30T05:14:26.721Z [32minfo[39m: [TranscriptionService] File stats:{"size":1629,"created":"2025-01-30T05:14:26.653Z","modified":"2025-01-30T05:14:26.702Z"}
2025-01-30T05:14:26.721Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:14:26.721Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:14:28.542Z [31merror[39m: [TranscriptionService] Transcription failed after all retries: 400 Audio file is too short. Minimum audio length is 0.1 seconds.{"status":400,"headers":{"access-control-expose-headers":"X-Request-ID","alt-svc":"h3=\":443\"; ma=86400","cf-cache-status":"DYNAMIC","cf-ray":"909efa7d8a841238-ORD","connection":"keep-alive","content-length":"188","content-type":"application/json","date":"Thu, 30 Jan 2025 05:14:28 GMT","openai-organization":"user-4ejnqtxizleb4mjrgob2jjhk","openai-processing-ms":"1449","openai-version":"2020-10-01","server":"cloudflare","set-cookie":"__cf_bm=y30Oo34MmjifoYfvei.h4rwQbIGid_Lu1DS45Xusdqw-1738214068-1.0.1.1-8D7S4hpftPEh8FuMG0cePgTefnTy17A.xkXoCmYB.qnpVUVa5xwMvf8wxxy6J42Nmbx.MBJ96Ti1pg7KHRENmg; path=/; expires=Thu, 30-Jan-25 05:44:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=pR7xuGaK0t4JHjvgMCK9b3Szagq61axNp6p50zstyd4-1738214068519-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None","strict-transport-security":"max-age=31536000; includeSubDomains; preload","via":"envoy-router-c77b65f44-6c8bt","x-content-type-options":"nosniff","x-envoy-upstream-service-time":"1413","x-ratelimit-limit-requests":"500","x-ratelimit-remaining-requests":"499","x-ratelimit-reset-requests":"120ms","x-request-id":"req_a22467631c4b705d8b8347ef67a0ee4d"},"request_id":"req_a22467631c4b705d8b8347ef67a0ee4d","error":{"message":"Audio file is too short. Minimum audio length is 0.1 seconds.","type":"invalid_request_error","param":"file","code":"audio_too_short"},"code":"audio_too_short","param":"file","type":"invalid_request_error","stack":"Error: 400 Audio file is too short. Minimum audio length is 0.1 seconds.\n    at APIError.generate (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/error.mjs:41:20)\n    at OpenAI.makeStatusError (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:286:25)\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:330:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:105:32)"}
2025-01-30T05:14:28.545Z [31merror[39m: [VoiceRecorder] Error processing recording: 400 Audio file is too short. Minimum audio length is 0.1 seconds.{"status":400,"headers":{"access-control-expose-headers":"X-Request-ID","alt-svc":"h3=\":443\"; ma=86400","cf-cache-status":"DYNAMIC","cf-ray":"909efa7d8a841238-ORD","connection":"keep-alive","content-length":"188","content-type":"application/json","date":"Thu, 30 Jan 2025 05:14:28 GMT","openai-organization":"user-4ejnqtxizleb4mjrgob2jjhk","openai-processing-ms":"1449","openai-version":"2020-10-01","server":"cloudflare","set-cookie":"__cf_bm=y30Oo34MmjifoYfvei.h4rwQbIGid_Lu1DS45Xusdqw-1738214068-1.0.1.1-8D7S4hpftPEh8FuMG0cePgTefnTy17A.xkXoCmYB.qnpVUVa5xwMvf8wxxy6J42Nmbx.MBJ96Ti1pg7KHRENmg; path=/; expires=Thu, 30-Jan-25 05:44:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=pR7xuGaK0t4JHjvgMCK9b3Szagq61axNp6p50zstyd4-1738214068519-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None","strict-transport-security":"max-age=31536000; includeSubDomains; preload","via":"envoy-router-c77b65f44-6c8bt","x-content-type-options":"nosniff","x-envoy-upstream-service-time":"1413","x-ratelimit-limit-requests":"500","x-ratelimit-remaining-requests":"499","x-ratelimit-reset-requests":"120ms","x-request-id":"req_a22467631c4b705d8b8347ef67a0ee4d"},"request_id":"req_a22467631c4b705d8b8347ef67a0ee4d","error":{"message":"Audio file is too short. Minimum audio length is 0.1 seconds.","type":"invalid_request_error","param":"file","code":"audio_too_short"},"code":"audio_too_short","param":"file","type":"invalid_request_error","stack":"Error: 400 Audio file is too short. Minimum audio length is 0.1 seconds.\n    at APIError.generate (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/error.mjs:41:20)\n    at OpenAI.makeStatusError (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:286:25)\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:330:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:105:32)"}
2025-01-30T05:14:28.545Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: 400 Audio file is too short. Minimum audio length is 0.1 seconds.{"status":400,"headers":{"access-control-expose-headers":"X-Request-ID","alt-svc":"h3=\":443\"; ma=86400","cf-cache-status":"DYNAMIC","cf-ray":"909efa7d8a841238-ORD","connection":"keep-alive","content-length":"188","content-type":"application/json","date":"Thu, 30 Jan 2025 05:14:28 GMT","openai-organization":"user-4ejnqtxizleb4mjrgob2jjhk","openai-processing-ms":"1449","openai-version":"2020-10-01","server":"cloudflare","set-cookie":"__cf_bm=y30Oo34MmjifoYfvei.h4rwQbIGid_Lu1DS45Xusdqw-1738214068-1.0.1.1-8D7S4hpftPEh8FuMG0cePgTefnTy17A.xkXoCmYB.qnpVUVa5xwMvf8wxxy6J42Nmbx.MBJ96Ti1pg7KHRENmg; path=/; expires=Thu, 30-Jan-25 05:44:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=pR7xuGaK0t4JHjvgMCK9b3Szagq61axNp6p50zstyd4-1738214068519-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None","strict-transport-security":"max-age=31536000; includeSubDomains; preload","via":"envoy-router-c77b65f44-6c8bt","x-content-type-options":"nosniff","x-envoy-upstream-service-time":"1413","x-ratelimit-limit-requests":"500","x-ratelimit-remaining-requests":"499","x-ratelimit-reset-requests":"120ms","x-request-id":"req_a22467631c4b705d8b8347ef67a0ee4d"},"request_id":"req_a22467631c4b705d8b8347ef67a0ee4d","error":{"message":"Audio file is too short. Minimum audio length is 0.1 seconds.","type":"invalid_request_error","param":"file","code":"audio_too_short"},"code":"audio_too_short","param":"file","type":"invalid_request_error","stack":"Error: 400 Audio file is too short. Minimum audio length is 0.1 seconds.\n    at APIError.generate (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/error.mjs:41:20)\n    at OpenAI.makeStatusError (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:286:25)\n    at OpenAI.makeRequest (file:///usr/src/app/node_modules/.pnpm/openai@4.79.1_ws@8.18.0/node_modules/openai/core.mjs:330:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:60:39)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:105:32)"}
2025-01-30T05:14:28.546Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:14:29.429Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:14:30.425Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:14:30.426Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:14:30.964Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:14:37.041Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 9176 bytes)
2025-01-30T05:14:40.461Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 19699 bytes)
2025-01-30T05:14:43.503Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 29439 bytes)
2025-01-30T05:14:45.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 43165 bytes)
2025-01-30T05:14:51.359Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 56132 bytes)
2025-01-30T05:14:53.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 92 bytes (total: 70480 bytes)
2025-01-30T05:14:55.881Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 83222 bytes)
2025-01-30T05:15:02.464Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 92683 bytes)
2025-01-30T05:15:04.462Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 105772 bytes)
2025-01-30T05:15:15.343Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 120534 bytes)
2025-01-30T05:15:17.943Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 134380 bytes)
2025-01-30T05:15:20.443Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 145911 bytes)
2025-01-30T05:15:22.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 159154 bytes)
2025-01-30T05:15:28.361Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 171920 bytes)
2025-01-30T05:15:30.367Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 187897 bytes)
2025-01-30T05:15:32.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 203750 bytes)
2025-01-30T05:15:35.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 212840 bytes)
2025-01-30T05:15:37.603Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 225885 bytes)
2025-01-30T05:15:42.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 237543 bytes)
2025-01-30T05:15:45.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 249954 bytes)
2025-01-30T05:15:51.061Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 262262 bytes)
2025-01-30T05:15:53.303Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 192 bytes (total: 275669 bytes)
2025-01-30T05:15:55.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 289641 bytes)
2025-01-30T05:15:57.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 305683 bytes)
2025-01-30T05:15:59.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 319826 bytes)
2025-01-30T05:16:01.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 334766 bytes)
2025-01-30T05:16:03.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 350320 bytes)
2025-01-30T05:16:05.642Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 362953 bytes)
2025-01-30T05:16:08.182Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 376295 bytes)
2025-01-30T05:16:10.179Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 391627 bytes)
2025-01-30T05:16:12.182Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 407794 bytes)
2025-01-30T05:16:14.184Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 422069 bytes)
2025-01-30T05:16:16.320Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 435682 bytes)
2025-01-30T05:16:18.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 449195 bytes)
2025-01-30T05:16:21.082Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 459315 bytes)
2025-01-30T05:16:23.409Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:16:23.415Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738214183412.pcm","directory":"temp"}
2025-01-30T05:16:23.419Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:16:23.421Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:16:23.422Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:16:23.422Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:16:23.747Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:16:23.750Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:16:24.302Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 469630 bytes)
2025-01-30T05:16:24.427Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:16:27.140Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738214063415.pcm to MP3
2025-01-30T05:16:27.141Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738214063415.pcm.mp3","exists":true}
2025-01-30T05:16:27.141Z [32minfo[39m: [TranscriptionService] File stats:{"size":863781,"created":"2025-01-30T05:16:26.617Z","modified":"2025-01-30T05:16:27.121Z"}
2025-01-30T05:16:27.141Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:16:27.141Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:16:27.747Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:16:29.427Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:16:45.833Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":27,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:16:45.834Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You guys all look so good!
...
2025-01-30T05:16:45.834Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":27,"transcriptContent":"You guys all look so good!\n"}
2025-01-30T05:16:46.842Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:16:47.495Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:16:47.496Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:16:49.499Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:16:50.064Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:16:50.065Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:16:54.066Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:16:55.376Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:16:55.377Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:17:01.379Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:01.799Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:01.801Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"},"context":{"transcriptLength":27,"transcriptSample":"You guys all look so good!\n"}}
2025-01-30T05:17:01.802Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"}
2025-01-30T05:17:01.806Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"65","data":{"guildId":"1315144523336122469","transcript":"You guys all look so good!\n"}}
2025-01-30T05:17:01.806Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T05:17:01.806Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 65
2025-01-30T05:17:01.809Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738214221806.txt","size":27}
2025-01-30T05:17:01.809Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T05:17:02.187Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: You guys all look so good!

2025-01-30T05:17:02.188Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:17:02.192Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214063415.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:17:02.193Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214063415.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:17:06.813Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"65","data":{"guildId":"1315144523336122469","transcript":"You guys all look so good!\n"}}
2025-01-30T05:17:06.814Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:17:06.815Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":27,"transcriptContent":"You guys all look so good!\n"}
2025-01-30T05:17:07.816Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:08.779Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:08.780Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:17:10.782Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:11.689Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:11.689Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:17:14.649Z [32minfo[39m: Memory Usage:
2025-01-30T05:17:14.650Z [32minfo[39m: rss: 138.32 MB
2025-01-30T05:17:14.651Z [32minfo[39m: heapTotal: 31.21 MB
2025-01-30T05:17:14.652Z [32minfo[39m: heapUsed: 28.85 MB
2025-01-30T05:17:14.653Z [32minfo[39m: external: 10.23 MB
2025-01-30T05:17:14.653Z [32minfo[39m: arrayBuffers: 2.31 MB
2025-01-30T05:17:15.689Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:20.754Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:20.755Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:17:26.757Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:27.236Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:27.238Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":27,"transcriptSample":"You guys all look so good!\n"}}
2025-01-30T05:17:27.239Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:17:27.239Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:17:27.248Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T05:17:27.252Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"65","queueName":"summary-generation"}
2025-01-30T05:17:28.250Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"65","data":{"guildId":"1315144523336122469","transcript":"You guys all look so good!\n"}}
2025-01-30T05:17:28.251Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:17:28.252Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":27,"transcriptContent":"You guys all look so good!\n"}
2025-01-30T05:17:29.255Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:31.393Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:31.393Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:17:33.397Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:34.263Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:34.264Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:17:38.266Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:38.687Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:38.688Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:17:44.690Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:45.121Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:45.123Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":27,"transcriptSample":"You guys all look so good!\n"}}
2025-01-30T05:17:45.125Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:17:45.125Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:17:45.128Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":2}
2025-01-30T05:17:45.130Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"65","queueName":"summary-generation"}
2025-01-30T05:17:48.144Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"65","data":{"guildId":"1315144523336122469","transcript":"You guys all look so good!\n"}}
2025-01-30T05:17:48.145Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:17:48.146Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":27,"transcriptContent":"You guys all look so good!\n"}
2025-01-30T05:17:49.147Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:51.004Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:51.005Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:17:53.006Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:53.589Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:53.590Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:17:57.590Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:17:58.100Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:17:58.101Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:18:04.103Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys all look so good!

2025-01-30T05:18:05.151Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:05.152Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":27,"transcriptSample":"You guys all look so good!\n"}}
2025-01-30T05:18:05.154Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:18:05.155Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:18:05.160Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"65","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":3}
2025-01-30T05:18:05.164Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"65","queueName":"summary-generation"}
2025-01-30T05:18:23.412Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:18:23.415Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738214303415.pcm","directory":"temp"}
2025-01-30T05:18:23.420Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:18:23.422Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:18:23.422Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T05:18:23.423Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:18:24.084Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:18:24.085Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:18:24.425Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:18:25.847Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:18:26.717Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738214183412.pcm to MP3
2025-01-30T05:18:26.718Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738214183412.pcm.mp3","exists":true}
2025-01-30T05:18:26.718Z [32minfo[39m: [TranscriptionService] File stats:{"size":8517,"created":"2025-01-30T05:18:26.636Z","modified":"2025-01-30T05:18:26.698Z"}
2025-01-30T05:18:26.718Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:18:26.718Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:18:26.763Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 12887 bytes)
2025-01-30T05:18:29.428Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:18:30.441Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:18:30.441Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: 
...
2025-01-30T05:18:30.441Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1,"transcriptContent":"\n"}
2025-01-30T05:18:30.643Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 23624 bytes)
2025-01-30T05:18:31.443Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:32.645Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 39246 bytes)
2025-01-30T05:18:32.764Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:32.765Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:18:34.766Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:34.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 52459 bytes)
2025-01-30T05:18:35.383Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:35.384Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:18:37.701Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 63101 bytes)
2025-01-30T05:18:39.389Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:40.539Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:40.541Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:18:41.184Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 76573 bytes)
2025-01-30T05:18:43.844Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 87680 bytes)
2025-01-30T05:18:45.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 104105 bytes)
2025-01-30T05:18:46.544Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:47.003Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:47.005Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"},"context":{"transcriptLength":1,"transcriptSample":"\n"}}
2025-01-30T05:18:47.006Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:112:27)"}
2025-01-30T05:18:47.010Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"66","data":{"guildId":"1315144523336122469","transcript":"\n"}}
2025-01-30T05:18:47.010Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T05:18:47.011Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 66
2025-01-30T05:18:47.014Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738214327011.txt","size":1}
2025-01-30T05:18:47.014Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-30T05:18:47.273Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 

2025-01-30T05:18:47.274Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:18:47.276Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214183412.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:18:47.278Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214183412.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:18:47.844Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 118499 bytes)
2025-01-30T05:18:51.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 132303 bytes)
2025-01-30T05:18:52.015Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"66","data":{"guildId":"1315144523336122469","transcript":"\n"}}
2025-01-30T05:18:52.015Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:18:52.016Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1,"transcriptContent":"\n"}
2025-01-30T05:18:53.018Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:53.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 147825 bytes)
2025-01-30T05:18:54.579Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:54.579Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:18:56.105Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 157428 bytes)
2025-01-30T05:18:56.585Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:18:57.437Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:18:57.438Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:18:58.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 169497 bytes)
2025-01-30T05:19:00.307Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 184586 bytes)
2025-01-30T05:19:01.442Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:01.938Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:01.938Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:19:02.586Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 78 bytes (total: 194574 bytes)
2025-01-30T05:19:04.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 207532 bytes)
2025-01-30T05:19:07.941Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:08.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 220998 bytes)
2025-01-30T05:19:08.392Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:08.393Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":1,"transcriptSample":"\n"}}
2025-01-30T05:19:08.394Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:19:08.395Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:19:08.399Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T05:19:08.401Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"66","queueName":"summary-generation"}
2025-01-30T05:19:09.407Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"66","data":{"guildId":"1315144523336122469","transcript":"\n"}}
2025-01-30T05:19:09.408Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:19:09.409Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1,"transcriptContent":"\n"}
2025-01-30T05:19:10.410Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:10.445Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 234942 bytes)
2025-01-30T05:19:11.741Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:11.742Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:19:12.685Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 248675 bytes)
2025-01-30T05:19:13.747Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:14.017Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:14.017Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:19:14.687Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 264523 bytes)
2025-01-30T05:19:17.602Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 277976 bytes)
2025-01-30T05:19:18.019Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:19.164Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:19.165Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:19:19.606Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 291970 bytes)
2025-01-30T05:19:21.604Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 306821 bytes)
2025-01-30T05:19:24.765Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 320493 bytes)
2025-01-30T05:19:25.167Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:25.692Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:25.694Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":1,"transcriptSample":"\n"}}
2025-01-30T05:19:25.695Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:19:25.697Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:19:25.702Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":2}
2025-01-30T05:19:25.704Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"66","queueName":"summary-generation"}
2025-01-30T05:19:26.764Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 333782 bytes)
2025-01-30T05:19:28.708Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"66","data":{"guildId":"1315144523336122469","transcript":"\n"}}
2025-01-30T05:19:28.709Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T05:19:28.709Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1,"transcriptContent":"\n"}
2025-01-30T05:19:29.124Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 344748 bytes)
2025-01-30T05:19:29.715Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:31.774Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:31.775Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:19:32.363Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 357877 bytes)
2025-01-30T05:19:33.778Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:34.118Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:34.119Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T05:19:34.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 371901 bytes)
2025-01-30T05:19:36.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 384913 bytes)
2025-01-30T05:19:38.121Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:38.523Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 398768 bytes)
2025-01-30T05:19:38.592Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:38.592Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T05:19:40.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 412676 bytes)
2025-01-30T05:19:42.523Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 427899 bytes)
2025-01-30T05:19:44.599Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 

2025-01-30T05:19:45.064Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:19:45.065Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":1,"transcriptSample":"\n"}}
2025-01-30T05:19:45.066Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T05:19:45.066Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T05:19:45.071Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"66","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":3}
2025-01-30T05:19:45.073Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"66","queueName":"summary-generation"}
2025-01-30T05:19:46.386Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 439857 bytes)
2025-01-30T05:19:48.385Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 455861 bytes)
2025-01-30T05:19:50.383Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 470107 bytes)
2025-01-30T05:19:53.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 485562 bytes)
2025-01-30T05:19:57.946Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 497979 bytes)
2025-01-30T05:20:01.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 509546 bytes)
2025-01-30T05:20:03.106Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 525021 bytes)
2025-01-30T05:20:05.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 539912 bytes)
2025-01-30T05:20:07.325Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 551191 bytes)
2025-01-30T05:20:09.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 565959 bytes)
2025-01-30T05:20:11.325Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 581670 bytes)
2025-01-30T05:20:13.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 597611 bytes)
2025-01-30T05:20:15.324Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 612046 bytes)
2025-01-30T05:20:19.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 620480 bytes)
2025-01-30T05:20:21.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 634547 bytes)
2025-01-30T05:20:23.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 649667 bytes)
2025-01-30T05:20:23.416Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T05:20:23.419Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738214423417.pcm","directory":"temp"}
2025-01-30T05:20:23.425Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T05:20:23.427Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T05:20:23.428Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-30T05:20:23.428Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T05:20:24.430Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T05:20:27.302Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738214303415.pcm to MP3
2025-01-30T05:20:27.302Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738214303415.pcm.mp3","exists":true}
2025-01-30T05:20:27.302Z [32minfo[39m: [TranscriptionService] File stats:{"size":1181541,"created":"2025-01-30T05:20:26.623Z","modified":"2025-01-30T05:20:27.283Z"}
2025-01-30T05:20:27.303Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T05:20:27.303Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T05:20:29.430Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T05:20:36.906Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T05:20:36.910Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T05:20:38.987Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 13528 bytes)
2025-01-30T05:20:39.320Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1505,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T05:20:39.320Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: (- What are you talking about? Menu...) (- ... Yeah, oh, call my broker. right, call your broker.) audience gets this connection (- we're all up in wrestling, you want it so hard yo understand about t...
2025-01-30T05:20:39.320Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1505,"transcriptContent":"(- What are you talking about? Menu...) (- ... Yeah, oh, call my broker. right, call your broker.) a"}
2025-01-30T05:20:40.056Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T05:20:40.322Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: (- What are you talking about? Menu...) (- ... Yeah, oh, call my broker. right, call your broker.) audience gets this connection (- we're all up in wrestling, you want it so hard yo understand about this.) Trevor (- You imbecile, why would you tell him that?) (- I didn't know I was being filmed.) (- If you're in my room, you're always being filmed.) (- You won't be done.) (- I'm excited for you.) (- But that's not all, everyone. See Ruby Taft, she likes to play her little games too, don't you, Ruby?) (- But I'm not going to let you humiliate my other friend either, because he might be choosing someone else after all.) (- Charlie, phone call for you.) (- Child, somebody accidentally hit the waitress with my car, their car, when they were following her.) (- She wants to talk to you, she says she really needs you.) (- Wait, did she say that or you just say it?) (- Yeah, talk to her yourself.) (- Charlie, look, I don't know what's been going on, but if you think you can make it stop, I need your help.) (- I want you back in my life.) (- You really mean that?) (- Yeah, I need you.) (- Okay, I'll be right there. Awesome, well I'm out of here.) (- What? What are you talking about?) (- I'm leaving, I'm going to be with the waitress, she's the woman I love.) (- I wasn't using you like Charlie was, he's a total asshole, I really, really, really like you.) (- Oh, yeah, I know, okay, I was using you. That's why I kissed you in front of the waitress, that's why I banged you a bunch of times.)

2025-01-30T05:20:40.912Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T05:20:40.913Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T05:20:41.706Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 25124 bytes)
2025-01-30T05:20:42.914Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: (- What are you talking about? Menu...) (- ... Yeah, oh, call my broker. right, call your broker.) audience gets this connection (- we're all up in wrestling, you want it so hard yo understand about this.) Trevor (- You imbecile, why would you tell him that?) (- I didn't know I was being filmed.) (- If you're in my room, you're always being filmed.) (- You won't be done.) (- I'm excited for you.) (- But that's not all, everyone. See Ruby Taft, she likes to play her little games too, don't you, Ruby?) (- But I'm not going to let you humiliate my other friend either, because he might be choosing someone else after all.) (- Charlie, phone call for you.) (- Child, somebody accidentally hit the waitress with my car, their car, when they were following her.) (- She wants to talk to you, she says she really needs you.) (- Wait, did she say that or you just say it?) (- Yeah, talk to her yourself.) (- Charlie, look, I don't know what's been going on, but if you think you can make it stop, I need your help.) (- I want you back in my life.) (- You really mean that?) (- Yeah, I need you.) (- Okay, I'll be right there. Awesome, well I'm out of here.) (- What? What are you talking about?) (- I'm leaving, I'm going to be with the waitress, she's the woman I love.) (- I wasn't using you like Charlie was, he's a total asshole, I really, really, really like you.) (- Oh, yeah, I know, okay, I was using you. That's why I kissed you in front of the waitress, that's why I banged you a bunch of times.)

2025-01-30T05:20:43.706Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 41168 bytes)
2025-01-30T05:20:45.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 54692 bytes)
2025-01-30T05:20:46.272Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2112,"transcriptLength":1505}
2025-01-30T05:20:46.276Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738214446273.txt","size":1505}
2025-01-30T05:20:46.277Z [33mwarn[39m: [ChannelService] Message is too long (2149 chars), splitting into chunks
2025-01-30T05:20:46.707Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: # Narrative Summary
In this dramatic and confusing exchange, there are several characters involved in conversations that seem to reveal secrets and betrayals. The dialogue hints at complex relationships and hidden agendas, with themes of love, manipulation, and friendship coming to light. The mention of wrestling, brokers, filming, games, and phone calls adds layers to the intrigue.

# Detailed Breakdown

### Key Events
- **Trevor reveals information that stirs conflict among the characters.
- **Ruby Taft is accused of playing games.
- **A phone call informs Charlie about an accident involving a waitress.
- **A plea from someone for Charlie's help and a confession of wanting Charlie back.
- **A sudden decision by a character to leave and be with the waitress they love, causing surprise and confusion.

### Memorable Moments
- > "You won't be done."
- > "I'm excited for you."
- > "Charlie, phone call for you."
- > "Child, somebody accidentally hit the waitress with my car..."
- >  "I want you back in my life."
- > "I'm leaving, I'm going to be with the waitress, she's the woman I love."

### Consequences & Setup
- **Immediate Consequences**: Trevor's revelation causes tension and conflict among the characters.
- *Future Plot Hooks*: The accident involving the waitress may lead to further complications and twists in the storyline.
- Party's Next Objectives: Charlie's decision to be with the waitress might affect the dynamics of the group.

### Character Development
- ***Notable Decisions***: Characters face choices about their relationships and loyalties.
- **Character Growth**: Reveals of feelings and intentions shape character development.
- *Relationships/Interactions*: Complex relationships, hints of betrayal and love triangles emerge.
- Key Roleplay Moments: Emotions run high as characters make surprising declarations and decisions.

This transcript showcases a web of relationships, secrets, and revelations that promise to impact the characters deeply. The emotional turmoil and conflicting interests set the stage for potential conflicts and surprises in future interactions.
2025-01-30T05:20:46.708Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T05:20:46.711Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214303415.pcm","directory":"/usr/src/app/temp"}
2025-01-30T05:20:46.712Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738214303415.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-30T05:20:47.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 69675 bytes)
2025-01-30T05:20:51.285Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 83578 bytes)
2025-01-30T05:20:53.465Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 96017 bytes)
2025-01-30T05:20:56.046Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 106485 bytes)
2025-01-30T05:21:00.767Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 120996 bytes)
2025-01-30T05:21:02.765Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 136226 bytes)
2025-01-30T05:21:05.707Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 146303 bytes)
2025-01-30T23:14:49.915Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:14:49.953Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:14:50.022Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":4,"maxAge":0}
2025-01-30T23:14:50.046Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213463391.pcm","age":65426540.93701172,"size":0}
2025-01-30T23:14:50.056Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213943402.pcm","age":64945543.400878906,"size":7680}
2025-01-30T23:14:50.065Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738213943402.pcm.mp3","age":64823242.32299805,"size":1629}
2025-01-30T23:14:50.068Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738214423417.pcm","age":64422279.52807617,"size":4600320}
2025-01-30T23:14:50.069Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:14:50.071Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:14:50.072Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:14:50.518Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:14:50.548Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:15:15.724Z [32minfo[39m: Command Name: setkey
2025-01-30T23:15:15.731Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:16:34.643Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:16:34.679Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:16:34.748Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-30T23:16:34.765Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:16:34.771Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:16:34.771Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:16:35.193Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:16:35.224Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:16:44.757Z [32minfo[39m: Command Name: setkey
2025-01-30T23:16:44.763Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:19:07.874Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:19:07.913Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:19:07.993Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-30T23:19:07.999Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:19:08.018Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:19:08.018Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:19:08.450Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:19:08.508Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:19:28.153Z [32minfo[39m: Command Name: setkey
2025-01-30T23:19:28.158Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:19:28.547Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T23:19:28.551Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334664308961054811","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:19:28.552Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:20:43.815Z [32minfo[39m: Command Name: record
2025-01-30T23:20:43.830Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:20:44.116Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T23:20:44.376Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T23:20:44.379Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T23:20:44.380Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:20:44.380Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:20:44.380Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:20:44.381Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738279244380.pcm","directory":"temp"}
2025-01-30T23:20:44.487Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:20:44.487Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:20:44.488Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:20:44.488Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:20:44.488Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T23:20:44.488Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T23:20:44.488Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334664626259886090","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:20:44.488Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:20:44.493Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:20:44.494Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:20:46.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 11674 bytes)
2025-01-30T23:20:47.765Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:20:49.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 24338 bytes)
2025-01-30T23:20:51.777Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 35803 bytes)
2025-01-30T23:20:53.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 49735 bytes)
2025-01-30T23:20:55.861Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 65732 bytes)
2025-01-30T23:20:58.278Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 75306 bytes)
2025-01-30T23:21:00.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 91040 bytes)
2025-01-30T23:21:02.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 106918 bytes)
2025-01-30T23:21:04.277Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 122314 bytes)
2025-01-30T23:21:05.945Z [32minfo[39m: Command Name: stop
2025-01-30T23:21:05.948Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:21:06.231Z [32minfo[39m: [StopCommand] Stopping recording...
2025-01-30T23:21:06.234Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T23:21:06.235Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":137509,"duration":21746,"speakingStates":[["406937877348352001",false]]}
2025-01-30T23:21:06.239Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:21:08.968Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738279244380.pcm to MP3
2025-01-30T23:21:08.970Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738279244380.pcm.mp3","exists":true}
2025-01-30T23:21:08.971Z [32minfo[39m: [TranscriptionService] File stats:{"size":247245,"created":"2025-01-30T23:21:08.710Z","modified":"2025-01-30T23:21:08.911Z"}
2025-01-30T23:21:08.973Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:21:08.973Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:21:11.243Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:21:18.886Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":114,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:21:18.889Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.
...
2025-01-30T23:21:18.889Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":114,"transcriptContent":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}
2025-01-30T23:21:19.892Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:22.933Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:22.934Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:21:24.935Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:25.915Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:25.916Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:21:29.924Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:30.991Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:30.991Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:21:36.996Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:37.861Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:37.866Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:66:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"},"context":{"transcriptLength":114,"transcriptSample":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}}
2025-01-30T23:21:37.867Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:66:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T23:21:37.884Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"71","data":{"guildId":"1315144523336122469","transcript":"User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.\n"}}
2025-01-30T23:21:37.884Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T23:21:37.886Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:66:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T23:21:37.887Z [31merror[39m: [VoiceRecorder] Error stopping recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)\n    at async RetryHandler.execute (file:///usr/src/app/src/utils/RetryHandler.js:13:24)\n    at async StopCommand.execute (file:///usr/src/app/src/commands/audio/StopCommand.js:25:13)\n    at async CommandRegistry.handleCommand (file:///usr/src/app/src/commands/audio/CommandRegistry.js:66:13)\n    at async Bot.handleInteraction (file:///usr/src/app/src/bot.js:77:13)"}
2025-01-30T23:21:37.890Z [32minfo[39m: [VoiceRecorder] Stopping recording for guild 1315144523336122469
2025-01-30T23:21:37.890Z [32minfo[39m: [VoiceRecorder] Stopping recording:{"dataReceived":true,"bytesWritten":137509,"duration":53402,"speakingStates":[["406937877348352001",false]]}
2025-01-30T23:21:37.891Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:21:37.891Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:21:37.891Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:21:38.897Z [32minfo[39m: [handleReply] Interaction state: 🛑 **Recording Stopped!**
The bot will now process the recording and generate a summary.

⏳ Please wait while the audio is being processed...{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334664719168176138","commandName":"stop","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:21:38.898Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:21:40.372Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738279244380.pcm to MP3
2025-01-30T23:21:40.373Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738279244380.pcm.mp3","exists":true}
2025-01-30T23:21:40.374Z [32minfo[39m: [TranscriptionService] File stats:{"size":247245,"created":"2025-01-30T23:21:08.710Z","modified":"2025-01-30T23:21:40.348Z"}
2025-01-30T23:21:40.374Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:21:40.374Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:21:42.892Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:21:42.893Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:21:42.902Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"71","data":{"guildId":"1315144523336122469","transcript":"User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.\n"}}
2025-01-30T23:21:42.903Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:21:42.903Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":114,"transcriptContent":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}
2025-01-30T23:21:43.910Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:44.703Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:44.705Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:21:46.711Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:46.830Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":109,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:21:46.831Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: I would like to know who is going to pay the most, and that's the person who is going to get the most money.
...
2025-01-30T23:21:46.831Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":109,"transcriptContent":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}
2025-01-30T23:21:47.657Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:47.658Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:21:47.834Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:21:50.770Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:50.772Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:21:51.663Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:52.615Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:52.616Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:21:52.778Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:21:53.826Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:53.826Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:21:57.837Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:21:58.622Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:21:58.735Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:58.735Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:21:59.504Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:21:59.507Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":114,"transcriptSample":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}}
2025-01-30T23:21:59.507Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:21:59.508Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:21:59.523Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T23:21:59.525Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"71","queueName":"summary-generation"}
2025-01-30T23:22:00.524Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"71","data":{"guildId":"1315144523336122469","transcript":"User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.\n"}}
2025-01-30T23:22:00.525Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:22:00.525Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":114,"transcriptContent":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}
2025-01-30T23:22:01.533Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:22:02.024Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:22:02.025Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:22:04.033Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:22:04.740Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:22:04.972Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:22:04.972Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:22:05.376Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:22:05.379Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)"},"context":{"transcriptLength":109,"transcriptSample":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}}
2025-01-30T23:22:05.379Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)"}
2025-01-30T23:22:05.386Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"72","data":{"guildId":"1315144523336122469","transcript":"I would like to know who is going to pay the most, and that's the person who is going to get the most money.\n"}}
2025-01-30T23:22:05.386Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T23:22:05.387Z [31merror[39m: [VoiceRecorder] Error in transcription/summarization: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)"}
2025-01-30T23:22:05.387Z [31merror[39m: [VoiceRecorder] Error stopping recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)"}
2025-01-30T23:22:05.388Z [31merror[39m: [VoiceRecorder] Error stopping recording on disconnect: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.ClearStreamsAndSave (file:///usr/src/app/src/VoiceRecorder.js:373:78)\n    at async VoiceRecorder.stopRecording (file:///usr/src/app/src/VoiceRecorder.js:307:29)"}
2025-01-30T23:22:08.978Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:22:09.764Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:22:09.765Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:22:15.769Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:22:16.588Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:22:16.590Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":114,"transcriptSample":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}}
2025-01-30T23:22:16.591Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:22:16.591Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:22:16.599Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":2}
2025-01-30T23:22:16.602Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"72","data":{"guildId":"1315144523336122469","transcript":"I would like to know who is going to pay the most, and that's the person who is going to get the most money.\n"}}
2025-01-30T23:22:16.602Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:22:16.602Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":109,"transcriptContent":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}
2025-01-30T23:22:16.603Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"71","queueName":"summary-generation"}
2025-01-30T23:22:38.525Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:22:38.567Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:22:38.651Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T23:22:38.673Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279244380.pcm","age":92337.861328125,"size":3828480}
2025-01-30T23:22:38.688Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279244380.pcm.mp3","age":58207.752685546875,"size":247245}
2025-01-30T23:22:38.689Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:22:38.691Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:22:38.691Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:22:38.733Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"71","data":{"guildId":"1315144523336122469","transcript":"User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.\n"}}
2025-01-30T23:22:38.734Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:22:38.735Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":114,"transcriptContent":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}
2025-01-30T23:22:39.151Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:22:39.205Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:22:39.738Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User 1 was still talking, so they should be in a different screen to let the user have full access to the screen.

2025-01-30T23:22:39.747Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":114,"transcriptSample":"User 1 was still talking, so they should be in a different screen to let the user have full access t"}}
2025-01-30T23:22:39.749Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:22:39.751Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:22:39.762Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"71","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":3}
2025-01-30T23:22:39.765Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"71","queueName":"summary-generation"}
2025-01-30T23:23:08.746Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"72","data":{"guildId":"1315144523336122469","transcript":"I would like to know who is going to pay the most, and that's the person who is going to get the most money.\n"}}
2025-01-30T23:23:08.748Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:23:08.749Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":109,"transcriptContent":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}
2025-01-30T23:23:09.759Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:23:09.763Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":109,"transcriptSample":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}}
2025-01-30T23:23:09.764Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:23:09.765Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:23:09.776Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":1}
2025-01-30T23:23:09.781Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"72","queueName":"summary-generation"}
2025-01-30T23:23:10.778Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"72","data":{"guildId":"1315144523336122469","transcript":"I would like to know who is going to pay the most, and that's the person who is going to get the most money.\n"}}
2025-01-30T23:23:10.778Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:23:10.778Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":109,"transcriptContent":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}
2025-01-30T23:23:11.784Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:23:11.788Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":109,"transcriptSample":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}}
2025-01-30T23:23:11.789Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:23:11.790Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:23:11.800Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":2}
2025-01-30T23:23:11.803Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"72","queueName":"summary-generation"}
2025-01-30T23:23:14.808Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"72","data":{"guildId":"1315144523336122469","transcript":"I would like to know who is going to pay the most, and that's the person who is going to get the most money.\n"}}
2025-01-30T23:23:14.810Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:23:14.810Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":109,"transcriptContent":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}
2025-01-30T23:23:15.818Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: I would like to know who is going to pay the most, and that's the person who is going to get the most money.

2025-01-30T23:23:15.821Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":109,"transcriptSample":"I would like to know who is going to pay the most, and that's the person who is going to get the mos"}}
2025-01-30T23:23:15.822Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:23:15.823Z [31merror[39m: [JobService] Error processing job in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"}
2025-01-30T23:23:15.830Z [31merror[39m: [JobService] Job failed in queue summary-generation:{"jobId":"72","error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","attempts":3}
2025-01-30T23:23:15.832Z [32minfo[39m: [JobService] Logged failed job to Redis:{"jobId":"72","queueName":"summary-generation"}
2025-01-30T23:27:38.532Z [32minfo[39m: Memory Usage:
2025-01-30T23:27:38.544Z [32minfo[39m: rss: 121 MB
2025-01-30T23:27:38.545Z [32minfo[39m: heapTotal: 28.96 MB
2025-01-30T23:27:38.545Z [32minfo[39m: heapUsed: 26.54 MB
2025-01-30T23:27:38.545Z [32minfo[39m: external: 8.07 MB
2025-01-30T23:27:38.547Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-30T23:30:22.364Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:30:22.430Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:30:22.513Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-30T23:30:22.529Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:30:22.550Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:30:22.551Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:30:23.017Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:30:23.058Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:30:31.935Z [32minfo[39m: Command Name: setkey
2025-01-30T23:30:31.939Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:30:32.141Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T23:30:32.147Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334667093014220900","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:30:32.148Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:30:35.222Z [32minfo[39m: Command Name: record
2025-01-30T23:30:35.225Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:30:35.538Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T23:30:35.790Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T23:30:35.792Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T23:30:35.793Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:30:35.793Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:30:35.794Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:30:35.794Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738279835794.pcm","directory":"temp"}
2025-01-30T23:30:35.874Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:30:35.875Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:30:35.875Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:30:35.875Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:30:35.875Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T23:30:35.875Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T23:30:35.875Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334667106897100881","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:30:35.876Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:30:35.910Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:30:35.912Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:30:37.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 14993 bytes)
2025-01-30T23:30:39.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 28700 bytes)
2025-01-30T23:30:41.373Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:30:42.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 41966 bytes)
2025-01-30T23:30:44.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 56086 bytes)
2025-01-30T23:30:46.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 71219 bytes)
2025-01-30T23:30:48.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 85885 bytes)
2025-01-30T23:30:50.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 101383 bytes)
2025-01-30T23:30:52.469Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 114678 bytes)
2025-01-30T23:30:54.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 127677 bytes)
2025-01-30T23:30:56.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 143257 bytes)
2025-01-30T23:30:59.329Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 157762 bytes)
2025-01-30T23:31:03.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 170020 bytes)
2025-01-30T23:31:06.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 179216 bytes)
2025-01-30T23:31:11.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 192161 bytes)
2025-01-30T23:31:15.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 80 bytes (total: 204615 bytes)
2025-01-30T23:31:17.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 220739 bytes)
2025-01-30T23:31:19.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 232578 bytes)
2025-01-30T23:31:21.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 248290 bytes)
2025-01-30T23:31:25.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 261009 bytes)
2025-01-30T23:31:27.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 274926 bytes)
2025-01-30T23:31:29.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 289302 bytes)
2025-01-30T23:31:31.629Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 305244 bytes)
2025-01-30T23:31:33.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 319859 bytes)
2025-01-30T23:31:35.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 335719 bytes)
2025-01-30T23:31:42.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 350016 bytes)
2025-01-30T23:31:44.269Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 364513 bytes)
2025-01-30T23:31:46.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 379266 bytes)
2025-01-30T23:31:48.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 391592 bytes)
2025-01-30T23:31:51.669Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 405679 bytes)
2025-01-30T23:31:53.749Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 418688 bytes)
2025-01-30T23:31:56.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 431831 bytes)
2025-01-30T23:31:58.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 443295 bytes)
2025-01-30T23:32:01.950Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 454770 bytes)
2025-01-30T23:32:09.529Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 465838 bytes)
2025-01-30T23:32:11.530Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 480985 bytes)
2025-01-30T23:32:13.529Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 496846 bytes)
2025-01-30T23:32:15.544Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 512616 bytes)
2025-01-30T23:32:17.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 525689 bytes)
2025-01-30T23:32:19.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 539721 bytes)
2025-01-30T23:32:22.343Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 552472 bytes)
2025-01-30T23:32:25.170Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 566817 bytes)
2025-01-30T23:32:27.344Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 577928 bytes)
2025-01-30T23:32:35.890Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:32:38.896Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738279835794.pcm to MP3
2025-01-30T23:32:38.898Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738279835794.pcm.mp3","exists":true}
2025-01-30T23:32:38.898Z [32minfo[39m: [TranscriptionService] File stats:{"size":1032861,"created":"2025-01-30T23:32:38.263Z","modified":"2025-01-30T23:32:38.859Z"}
2025-01-30T23:32:38.900Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:32:38.901Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:32:40.890Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:32:45.611Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":146,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:32:45.612Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.
...
2025-01-30T23:32:45.613Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":146,"transcriptContent":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}
2025-01-30T23:32:46.616Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:32:48.152Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:32:48.152Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:32:50.156Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:32:50.817Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:32:50.818Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:32:54.820Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:32:55.605Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:32:55.606Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:33:01.607Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:02.173Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:02.175Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"transcriptLength":146,"transcriptSample":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}}
2025-01-30T23:33:02.177Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:33:02.195Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"73","data":{"guildId":"1315144523336122469","transcript":"With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.\n"}}
2025-01-30T23:33:02.195Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T23:33:02.196Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:33:02.196Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:33:02.197Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:33:02.197Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:33:02.197Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738279982197.pcm","directory":"temp"}
2025-01-30T23:33:02.198Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:33:02.198Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:33:02.198Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:33:02.198Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:33:03.409Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:33:03.410Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:33:04.029Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:33:05.888Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 11756 bytes)
2025-01-30T23:33:07.204Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"73","data":{"guildId":"1315144523336122469","transcript":"With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.\n"}}
2025-01-30T23:33:07.205Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:33:07.205Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":146,"transcriptContent":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}
2025-01-30T23:33:07.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 26014 bytes)
2025-01-30T23:33:08.208Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:08.796Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:08.797Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:33:09.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 40901 bytes)
2025-01-30T23:33:10.798Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:11.668Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:11.668Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:33:11.967Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 53034 bytes)
2025-01-30T23:33:13.966Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 68013 bytes)
2025-01-30T23:33:15.712Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:16.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 80949 bytes)
2025-01-30T23:33:17.873Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:17.874Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:33:18.007Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 96811 bytes)
2025-01-30T23:33:20.008Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 110480 bytes)
2025-01-30T23:33:22.010Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 125612 bytes)
2025-01-30T23:33:23.878Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:24.088Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 139642 bytes)
2025-01-30T23:33:24.301Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:24.304Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":146,"transcriptSample":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}}
2025-01-30T23:33:24.305Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:33:24.327Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 73 delayed","stack":"Error: Missing lock for job 73 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-30T23:33:26.688Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 151213 bytes)
2025-01-30T23:33:28.689Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 166513 bytes)
2025-01-30T23:33:29.336Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"73","data":{"guildId":"1315144523336122469","transcript":"With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.\n"}}
2025-01-30T23:33:29.337Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:33:29.337Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":146,"transcriptContent":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}
2025-01-30T23:33:30.340Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:30.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 178980 bytes)
2025-01-30T23:33:31.538Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:31.538Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:33:33.541Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:33.942Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:33.943Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:33:35.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 192736 bytes)
2025-01-30T23:33:37.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 208063 bytes)
2025-01-30T23:33:37.946Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:39.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 223550 bytes)
2025-01-30T23:33:39.297Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:39.297Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:33:41.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 239238 bytes)
2025-01-30T23:33:43.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 251906 bytes)
2025-01-30T23:33:45.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 267345 bytes)
2025-01-30T23:33:45.299Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: With animals, children, or Ryan. The following program contains scenes of graphics in which two white breads who compete to embarrass each other.

2025-01-30T23:33:46.515Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:33:46.517Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":146,"transcriptSample":"With animals, children, or Ryan. The following program contains scenes of graphics in which two whit"}}
2025-01-30T23:33:46.517Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:33:46.528Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 73 failed","stack":"Error: Missing lock for job 73 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-30T23:33:47.149Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 282910 bytes)
2025-01-30T23:33:49.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 297950 bytes)
2025-01-30T23:33:51.348Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 311394 bytes)
2025-01-30T23:33:54.368Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 322100 bytes)
2025-01-30T23:33:56.368Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 338032 bytes)
2025-01-30T23:33:58.370Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 352949 bytes)
2025-01-30T23:34:01.529Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 366751 bytes)
2025-01-30T23:34:03.531Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 382585 bytes)
2025-01-30T23:34:05.727Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 395994 bytes)
2025-01-30T23:34:08.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 409912 bytes)
2025-01-30T23:34:10.487Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 424870 bytes)
2025-01-30T23:34:12.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 439404 bytes)
2025-01-30T23:34:14.567Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 453647 bytes)
2025-01-30T23:34:16.569Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 467872 bytes)
2025-01-30T23:34:18.568Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 481273 bytes)
2025-01-30T23:34:21.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 494821 bytes)
2025-01-30T23:34:23.206Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 60 bytes (total: 508197 bytes)
2025-01-30T23:34:25.209Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 522114 bytes)
2025-01-30T23:34:27.210Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 538053 bytes)
2025-01-30T23:34:30.051Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 550440 bytes)
2025-01-30T23:34:32.049Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 564605 bytes)
2025-01-30T23:34:34.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 579630 bytes)
2025-01-30T23:34:35.881Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:34:38.714Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738279982197.pcm to MP3
2025-01-30T23:34:38.714Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738279982197.pcm.mp3","exists":true}
2025-01-30T23:34:38.715Z [32minfo[39m: [TranscriptionService] File stats:{"size":1061541,"created":"2025-01-30T23:34:38.087Z","modified":"2025-01-30T23:34:38.695Z"}
2025-01-30T23:34:38.715Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:34:38.715Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:34:40.886Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:34:43.414Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1147,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:34:43.414Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: All right, Sal. Sal's got to drop off the bill to the customer. We've added a special search for that bill, that he doesn't know. This is Joanna, she's one of our producers. She's playing the manager ...
2025-01-30T23:34:43.415Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1147,"transcriptContent":"All right, Sal. Sal's got to drop off the bill to the customer. We've added a special search for tha"}
2025-01-30T23:34:44.416Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: All right, Sal. Sal's got to drop off the bill to the customer. We've added a special search for that bill, that he doesn't know. This is Joanna, she's one of our producers. She's playing the manager today. What a joke. Okay, excuse me, I'll just make sure I have you. Uh, two iced teas, two mozzyball soups to greet you, Sal. And then the extortion fee is five dollars. Who is that? It's the extortion. What? I can't believe it. They call it that right now? We believe in being fully transparent. We're honest about our extortion. I've been here so many times, I've never seen this. Oh, you've been extorted. The freeze is new, because we want to be transparent, but I assure you in the past, you've been extorted. I mean, as far as extortion goes, it's minor. And then, uh, I hope you enjoyed the pie. He's honeying it. She ripped it in honey. You might get it. I hope you have a great day, guys. Thanks. We pay the credit card fee. Oh, I think you got it. I think you got it. She's like, you pay this all the time. This is it, Sal. Charlotte, get ready. All right, how is everything? Good, thank you. Great, awesome. All right, so let's do it.

2025-01-30T23:34:51.524Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2887,"transcriptLength":1147}
2025-01-30T23:34:51.530Z [31merror[39m: [StorageService] Failed to save transcript:{"location":"StorageService.saveTranscript","error":{"name":"Error","message":"ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'","code":"ENOENT","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738280091525.txt","filePath":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt","transcriptLength":1147}}
2025-01-30T23:34:51.530Z [31merror[39m: [VoiceRecorder] Error processing recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:34:51.530Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280091525.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:34:51.531Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:34:51.531Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:34:51.531Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280091531.pcm","directory":"temp"}
2025-01-30T23:34:51.531Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:34:51.531Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:34:51.531Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:34:51.531Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:34:57.042Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:34:57.044Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:34:57.569Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:34:59.323Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 11381 bytes)
2025-01-30T23:35:01.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 24261 bytes)
2025-01-30T23:35:03.683Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 40125 bytes)
2025-01-30T23:35:05.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 53920 bytes)
2025-01-30T23:35:07.683Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 69170 bytes)
2025-01-30T23:35:09.782Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 83410 bytes)
2025-01-30T23:35:11.782Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 98827 bytes)
2025-01-30T23:35:13.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 114455 bytes)
2025-01-30T23:35:16.001Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 127317 bytes)
2025-01-30T23:35:18.001Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 143210 bytes)
2025-01-30T23:35:20.007Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 158780 bytes)
2025-01-30T23:35:22.367Z [32minfo[39m: Memory Usage:
2025-01-30T23:35:22.369Z [32minfo[39m: rss: 131.66 MB
2025-01-30T23:35:22.369Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-30T23:35:22.370Z [32minfo[39m: heapUsed: 28.67 MB
2025-01-30T23:35:22.370Z [32minfo[39m: external: 10.39 MB
2025-01-30T23:35:22.370Z [32minfo[39m: arrayBuffers: 2.47 MB
2025-01-30T23:35:24.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 173306 bytes)
2025-01-30T23:35:26.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 188445 bytes)
2025-01-30T23:35:28.264Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 202104 bytes)
2025-01-30T23:35:30.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 214300 bytes)
2025-01-30T23:35:32.448Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 230490 bytes)
2025-01-30T23:35:34.687Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 243214 bytes)
2025-01-30T23:35:36.688Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 259199 bytes)
2025-01-30T23:35:39.945Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 272914 bytes)
2025-01-30T23:35:41.946Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 286459 bytes)
2025-01-30T23:35:44.027Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 300154 bytes)
2025-01-30T23:35:47.029Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 307787 bytes)
2025-01-30T23:35:49.028Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 322802 bytes)
2025-01-30T23:35:52.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 333019 bytes)
2025-01-30T23:35:54.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 345471 bytes)
2025-01-30T23:35:57.504Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 360547 bytes)
2025-01-30T23:35:59.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 85 bytes (total: 373200 bytes)
2025-01-30T23:36:01.506Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 62 bytes (total: 388757 bytes)
2025-01-30T23:36:03.507Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 402782 bytes)
2025-01-30T23:36:05.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 414299 bytes)
2025-01-30T23:36:07.668Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 427684 bytes)
2025-01-30T23:36:09.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 442685 bytes)
2025-01-30T23:36:11.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 456501 bytes)
2025-01-30T23:36:13.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 472132 bytes)
2025-01-30T23:36:15.745Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 484653 bytes)
2025-01-30T23:36:17.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 499953 bytes)
2025-01-30T23:36:19.747Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 513848 bytes)
2025-01-30T23:36:22.469Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 525000 bytes)
2025-01-30T23:36:24.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 537569 bytes)
2025-01-30T23:36:26.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 553071 bytes)
2025-01-30T23:36:28.832Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 566226 bytes)
2025-01-30T23:36:30.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 581579 bytes)
2025-01-30T23:36:32.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 595565 bytes)
2025-01-30T23:36:34.830Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 611229 bytes)
2025-01-30T23:36:35.871Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:36:38.753Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280091531.pcm to MP3
2025-01-30T23:36:38.753Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280091531.pcm.mp3","exists":true}
2025-01-30T23:36:38.754Z [32minfo[39m: [TranscriptionService] File stats:{"size":1110237,"created":"2025-01-30T23:36:38.110Z","modified":"2025-01-30T23:36:38.749Z"}
2025-01-30T23:36:38.754Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:36:38.754Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:36:40.872Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:36:43.413Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1097,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:36:43.414Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, ...
2025-01-30T23:36:43.414Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1097,"transcriptContent":"You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have t"}
2025-01-30T23:36:44.418Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.

2025-01-30T23:36:46.068Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:36:46.069Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:36:48.072Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.

2025-01-30T23:36:48.368Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:36:48.369Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:36:52.386Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.

2025-01-30T23:36:52.822Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:36:52.823Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:36:58.826Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.

2025-01-30T23:37:00.145Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:37:00.147Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"transcriptLength":1097,"transcriptSample":"You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have t"}}
2025-01-30T23:37:00.148Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:37:00.153Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"74","data":{"guildId":"1315144523336122469","transcript":"You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.\n"}}
2025-01-30T23:37:00.154Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T23:37:00.154Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:37:00.154Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:37:00.154Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:37:00.155Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:37:00.155Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280220155.pcm","directory":"temp"}
2025-01-30T23:37:00.156Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:37:00.156Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:37:00.156Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:37:00.156Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:37:05.162Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"74","data":{"guildId":"1315144523336122469","transcript":"You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.\n"}}
2025-01-30T23:37:05.163Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:37:05.164Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1097,"transcriptContent":"You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have t"}
2025-01-30T23:37:06.166Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You pulled it off! Good job! Nice work, buddy. I'm not going to look until I go over there. I have their bill, guys. The only idea is what you're about to handle the charge for. Oh, here we go. Okay, gentlemen, just to confirm, so we've got an eggs burger, yes? Chicken breast, right? And then we did add a fussy surcharge of $5.50 onto the bill. That's standard fee for customers that are a little bit fussier than normal. That curiosity is part of the fussiness, really. Your curiosity is exactly what I mean by a little bit of fussing. Pay right up there, okay? Anything else? My name's James. Great, thanks so much. $5.50 for being fussy. Let me need the tip. You're not getting the tip, are you? Here we go, here we go! Pay that fussy surcharge! Why are they paying the fussy surcharge? I see you're paying the fussy surcharge. You guys are a little fussy? Well, sir, you don't need to be fussy, though. You don't need to be fussy about it. Just to confirm, are you okay with the fussy surcharge fee? Thank you, sir. I do want to give you credit on being not fussy about the fussy surcharge.

2025-01-30T23:37:09.766Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:37:09.768Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:37:10.449Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:37:12.185Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 12878 bytes)
2025-01-30T23:37:13.315Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3068,"transcriptLength":1097}
2025-01-30T23:37:13.317Z [33mwarn[39m: [ChannelService] Message is too long (3133 chars), splitting into chunks
2025-01-30T23:37:13.836Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-30T23:37:13.844Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"74","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738280233316}}
2025-01-30T23:37:14.525Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 27503 bytes)
2025-01-30T23:37:16.527Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 43467 bytes)
2025-01-30T23:37:18.527Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 56202 bytes)
2025-01-30T23:37:20.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 70783 bytes)
2025-01-30T23:37:23.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 86900 bytes)
2025-01-30T23:37:25.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 101820 bytes)
2025-01-30T23:37:27.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 117529 bytes)
2025-01-30T23:37:29.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 133351 bytes)
2025-01-30T23:37:31.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 149374 bytes)
2025-01-30T23:37:33.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 164391 bytes)
2025-01-30T23:37:35.865Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 179269 bytes)
2025-01-30T23:37:38.167Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 192922 bytes)
2025-01-30T23:37:40.163Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 208381 bytes)
2025-01-30T23:37:42.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 221325 bytes)
2025-01-30T23:37:44.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 231215 bytes)
2025-01-30T23:37:46.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 246824 bytes)
2025-01-30T23:37:49.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 261114 bytes)
2025-01-30T23:37:51.146Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 277099 bytes)
2025-01-30T23:37:53.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 293076 bytes)
2025-01-30T23:37:55.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 308529 bytes)
2025-01-30T23:37:57.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 321136 bytes)
2025-01-30T23:37:59.307Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 335872 bytes)
2025-01-30T23:38:01.488Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 348855 bytes)
2025-01-30T23:38:03.848Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 360780 bytes)
2025-01-30T23:38:06.045Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 373136 bytes)
2025-01-30T23:38:08.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 386670 bytes)
2025-01-30T23:38:10.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 402517 bytes)
2025-01-30T23:38:12.046Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 416201 bytes)
2025-01-30T23:38:14.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 431742 bytes)
2025-01-30T23:38:16.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 447440 bytes)
2025-01-30T23:38:18.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 463143 bytes)
2025-01-30T23:38:20.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 478800 bytes)
2025-01-30T23:38:22.126Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 492686 bytes)
2025-01-30T23:38:24.127Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 507597 bytes)
2025-01-30T23:38:26.127Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 523671 bytes)
2025-01-30T23:38:28.126Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 538536 bytes)
2025-01-30T23:38:30.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 551969 bytes)
2025-01-30T23:38:32.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 567897 bytes)
2025-01-30T23:38:34.766Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 581412 bytes)
2025-01-30T23:38:35.884Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:38:38.678Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280220155.pcm to MP3
2025-01-30T23:38:38.679Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280220155.pcm.mp3","exists":true}
2025-01-30T23:38:38.679Z [32minfo[39m: [TranscriptionService] File stats:{"size":1039605,"created":"2025-01-30T23:38:38.090Z","modified":"2025-01-30T23:38:38.660Z"}
2025-01-30T23:38:38.679Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:38:38.680Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:38:40.887Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:38:49.491Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1314,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:38:49.493Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Could ты это сделать? Oh really? Ну, это что из выборов готовится! Oh, I see what it is. That's what you guys did. The little wrinkle there, yeah, yeah. Your hand's a little rough. Hey, it's only $5, ...
2025-01-30T23:38:49.494Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1314,"transcriptContent":"Could ты это сделать? Oh really? Ну, это что из выборов готовится! Oh, I see what it is. That's what"}
2025-01-30T23:38:50.501Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Could ты это сделать? Oh really? Ну, это что из выборов готовится! Oh, I see what it is. That's what you guys did. The little wrinkle there, yeah, yeah. Your hand's a little rough. Hey, it's only $5, what are you gonna do? Для тебя это будет более просто, потому что я знаю, что я хочу. Oh, well, I can see about them splitting it in half, since only he'd done this to me, and you... I can see about that. Maybe they can cut that down to $250. Ok, yeah, there you go, you pay up front. Paul, you are gonna lose Q! Hey, Paul, you're gonna stay with me. Oh! That's really nice, you guys kind of helped us. He said this is the last time I come to this diner. She said, just pay it and that's it. That's right, just pay it, just pay it! Hey, how you doing? Yes! Explain what this is. Ah, you guys banged up the menu a little bit? You didn't? Well, it's just minor damage, so... I don't care if it's minor damage or not minor damage, I didn't do it. Oh, ok. If you want to pay, we'll do it next time. You don't have to pay it. Yeah, I think you don't have to pay it. I don't want it, I don't want it. I didn't even look at that. Don't get me wrong, I'm not cheap for a while, so it doesn't mean anything to me. Is everybody in Jersey cursed? I'll pay the rent. Are you sure? Alright, thank you. I'm handsome and I won!

2025-01-30T23:38:51.359Z [33mwarn[39m: [TranscriptionService] Unable to summarize, retrying...{"responseContent":"Unable to summarize."}
2025-01-30T23:38:51.359Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1314,"transcriptLength":1314}
2025-01-30T23:38:51.363Z [31merror[39m: [StorageService] Failed to save transcript:{"location":"StorageService.saveTranscript","error":{"name":"Error","message":"ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'","code":"ENOENT","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738280331360.txt","filePath":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt","transcriptLength":1314}}
2025-01-30T23:38:51.364Z [31merror[39m: [VoiceRecorder] Error processing recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:38:51.364Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280331360.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:38:51.364Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:38:51.365Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:38:51.365Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280331365.pcm","directory":"temp"}
2025-01-30T23:38:51.367Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:38:51.367Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:38:51.367Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:38:51.368Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:38:52.451Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:38:52.452Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:38:54.449Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 80 bytes (total: 13855 bytes)
2025-01-30T23:38:54.945Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:38:56.665Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 26312 bytes)
2025-01-30T23:38:58.744Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 37869 bytes)
2025-01-30T23:39:00.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 49289 bytes)
2025-01-30T23:39:02.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 62655 bytes)
2025-01-30T23:39:04.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 78702 bytes)
2025-01-30T23:39:06.824Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 90907 bytes)
2025-01-30T23:39:08.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 106282 bytes)
2025-01-30T23:39:10.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 121298 bytes)
2025-01-30T23:39:12.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 137123 bytes)
2025-01-30T23:39:14.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 152729 bytes)
2025-01-30T23:39:16.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 166746 bytes)
2025-01-30T23:39:18.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 181616 bytes)
2025-01-30T23:39:20.903Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 197660 bytes)
2025-01-30T23:39:22.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 212429 bytes)
2025-01-30T23:39:24.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 225635 bytes)
2025-01-30T23:39:27.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 239766 bytes)
2025-01-30T23:39:30.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 252948 bytes)
2025-01-30T23:39:32.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 265269 bytes)
2025-01-30T23:39:34.665Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 281250 bytes)
2025-01-30T23:39:37.183Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 292839 bytes)
2025-01-30T23:39:41.047Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 308288 bytes)
2025-01-30T23:39:43.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 322405 bytes)
2025-01-30T23:39:45.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 338454 bytes)
2025-01-30T23:39:47.301Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 353849 bytes)
2025-01-30T23:39:50.005Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 366884 bytes)
2025-01-30T23:39:52.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 382388 bytes)
2025-01-30T23:39:54.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 398273 bytes)
2025-01-30T23:39:56.005Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 413669 bytes)
2025-01-30T23:39:58.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 428573 bytes)
2025-01-30T23:40:00.008Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 443656 bytes)
2025-01-30T23:40:02.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 456366 bytes)
2025-01-30T23:40:04.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 472493 bytes)
2025-01-30T23:40:06.003Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 487769 bytes)
2025-01-30T23:40:12.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 92 bytes (total: 496869 bytes)
2025-01-30T23:40:14.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 511879 bytes)
2025-01-30T23:40:16.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 525546 bytes)
2025-01-30T23:40:18.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 541285 bytes)
2025-01-30T23:40:20.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 556990 bytes)
2025-01-30T23:40:22.365Z [32minfo[39m: Memory Usage:
2025-01-30T23:40:22.366Z [32minfo[39m: rss: 134.91 MB
2025-01-30T23:40:22.367Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-30T23:40:22.367Z [32minfo[39m: heapUsed: 28.88 MB
2025-01-30T23:40:22.368Z [32minfo[39m: external: 9.74 MB
2025-01-30T23:40:22.368Z [32minfo[39m: arrayBuffers: 1.81 MB
2025-01-30T23:40:25.022Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 568256 bytes)
2025-01-30T23:40:27.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 576142 bytes)
2025-01-30T23:40:29.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 195 bytes (total: 590306 bytes)
2025-01-30T23:40:31.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 604945 bytes)
2025-01-30T23:40:33.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 617973 bytes)
2025-01-30T23:40:35.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 633828 bytes)
2025-01-30T23:40:35.896Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:40:38.754Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280331365.pcm to MP3
2025-01-30T23:40:38.755Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280331365.pcm.mp3","exists":true}
2025-01-30T23:40:38.755Z [32minfo[39m: [TranscriptionService] File stats:{"size":1137501,"created":"2025-01-30T23:40:38.116Z","modified":"2025-01-30T23:40:38.737Z"}
2025-01-30T23:40:38.756Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:40:38.756Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:40:40.899Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:40:44.977Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1466,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:40:44.978Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You guys banged up the menu a little bit? You didn't? Yes. Well, it's just minor damage, so... I don't care if it's minor damage or mass damage, I didn't do it. Oh, okay. I mean, if you want to not pa...
2025-01-30T23:40:44.978Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1466,"transcriptContent":"You guys banged up the menu a little bit? You didn't? Yes. Well, it's just minor damage, so... I don"}
2025-01-30T23:40:45.980Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You guys banged up the menu a little bit? You didn't? Yes. Well, it's just minor damage, so... I don't care if it's minor damage or mass damage, I didn't do it. Oh, okay. I mean, if you want to not pay for it, you'll have to have my company sign it. Well, you don't have to pay it. Yeah, I mean, you don't have to pay it. I don't want it, I don't want it. They forced a record in the thing, I didn't even look at that. Don't get me wrong, I'm not cheap, so I'm also supposed to be f***ed, so here you go. Does everybody in Jersey curse? I don't care, right? Okay, all right. Thanks, I appreciate it. Oh, yeah, sure. Thank you. I'm handsome, everyone. I'm handsome. I'm going home. This is the song that Julie used when I was three years old. You think I'm good-looking? I'm actually so sweet. No one got stuck with the tab, so Murr, Sal, and Q are safe from the loser board. Ah, geez, we're in the doghouse now. Our wife put us in charge of putting the dedication in our kid's high school yearbook. Ah, shucks. The catch is, we haven't seen this strange dedication because it's been written by the other guys. Ah, f***. Now we gotta find someone to agree that the ad was not that bad or else we lose. When did you become ritual manager at Tom McCann? Did Melissa dress you this morning or not? No, she was asleep. There he goes. Hello? Yeah. Yeah, I got it. What do you mean you don't like it? Well, she's so fit. But she's so fit! Don't worry. You'll find out why.

2025-01-30T23:40:46.498Z [33mwarn[39m: [TranscriptionService] Unable to summarize, retrying...{"responseContent":"Unable to summarize."}
2025-01-30T23:40:46.499Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1466,"transcriptLength":1466}
2025-01-30T23:40:46.505Z [31merror[39m: [StorageService] Failed to save transcript:{"location":"StorageService.saveTranscript","error":{"name":"Error","message":"ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'","code":"ENOENT","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738280446500.txt","filePath":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt","transcriptLength":1466}}
2025-01-30T23:40:46.506Z [31merror[39m: [VoiceRecorder] Error processing recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:40:46.506Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280446500.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:40:46.507Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:40:46.507Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:40:46.507Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280446507.pcm","directory":"temp"}
2025-01-30T23:40:46.508Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:40:46.508Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:40:46.509Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:40:46.509Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:40:47.204Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:40:47.206Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:40:48.972Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:40:49.544Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 11279 bytes)
2025-01-30T23:40:51.544Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 26033 bytes)
2025-01-30T23:40:54.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 38840 bytes)
2025-01-30T23:40:56.424Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 52170 bytes)
2025-01-30T23:40:58.423Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 67919 bytes)
2025-01-30T23:41:00.423Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 83845 bytes)
2025-01-30T23:41:02.425Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 98070 bytes)
2025-01-30T23:41:04.424Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 113730 bytes)
2025-01-30T23:41:06.424Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 127947 bytes)
2025-01-30T23:41:10.044Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 139904 bytes)
2025-01-30T23:41:12.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 151623 bytes)
2025-01-30T23:41:14.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 167550 bytes)
2025-01-30T23:41:16.264Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 181196 bytes)
2025-01-30T23:41:19.405Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 199 bytes (total: 194781 bytes)
2025-01-30T23:41:21.481Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 206510 bytes)
2025-01-30T23:41:23.482Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 221570 bytes)
2025-01-30T23:41:25.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 237522 bytes)
2025-01-30T23:41:27.482Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 250086 bytes)
2025-01-30T23:41:29.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 264705 bytes)
2025-01-30T23:41:31.484Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 279834 bytes)
2025-01-30T23:41:33.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 293140 bytes)
2025-01-30T23:41:35.923Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 307617 bytes)
2025-01-30T23:41:38.003Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 320968 bytes)
2025-01-30T23:41:40.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 336610 bytes)
2025-01-30T23:41:42.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 352412 bytes)
2025-01-30T23:41:44.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 365275 bytes)
2025-01-30T23:41:46.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 379835 bytes)
2025-01-30T23:41:48.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 395145 bytes)
2025-01-30T23:41:50.003Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 408431 bytes)
2025-01-30T23:41:52.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 423629 bytes)
2025-01-30T23:41:54.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 99 bytes (total: 438828 bytes)
2025-01-30T23:41:56.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 451579 bytes)
2025-01-30T23:42:01.081Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 465889 bytes)
2025-01-30T23:42:03.161Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 477898 bytes)
2025-01-30T23:42:05.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 492574 bytes)
2025-01-30T23:42:07.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 506679 bytes)
2025-01-30T23:42:09.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 522441 bytes)
2025-01-30T23:42:11.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 537769 bytes)
2025-01-30T23:42:13.280Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 552363 bytes)
2025-01-30T23:42:15.283Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 568084 bytes)
2025-01-30T23:42:17.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 584124 bytes)
2025-01-30T23:42:19.283Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 599599 bytes)
2025-01-30T23:42:21.366Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 611669 bytes)
2025-01-30T23:42:23.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 95 bytes (total: 627051 bytes)
2025-01-30T23:42:25.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 640332 bytes)
2025-01-30T23:42:27.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 652185 bytes)
2025-01-30T23:42:29.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 666327 bytes)
2025-01-30T23:42:31.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 679338 bytes)
2025-01-30T23:42:33.704Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 692909 bytes)
2025-01-30T23:42:35.890Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:42:38.767Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280446507.pcm to MP3
2025-01-30T23:42:38.768Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280446507.pcm.mp3","exists":true}
2025-01-30T23:42:38.768Z [32minfo[39m: [TranscriptionService] File stats:{"size":1275069,"created":"2025-01-30T23:42:38.065Z","modified":"2025-01-30T23:42:38.749Z"}
2025-01-30T23:42:38.769Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:42:38.769Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:42:40.892Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:42:56.456Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1286,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:42:56.457Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: "- Emily, you don't understand. My daughter is a skinny bitch. Like, I'm really proud of her." "- Oh, for Pete, what do you think?" "- Well, in this day and age..." "- Well, I don't think it's appropr...
2025-01-30T23:42:56.457Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1286,"transcriptContent":"\"- Emily, you don't understand. My daughter is a skinny bitch. Like, I'm really proud of her.\" \"- Oh"}
2025-01-30T23:42:57.461Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: "- Emily, you don't understand. My daughter is a skinny bitch. Like, I'm really proud of her." "- Oh, for Pete, what do you think?" "- Well, in this day and age..." "- Well, I don't think it's appropriate for school. I'm sure they have a proper curse." "- Well, now, Emily, you sound like my wife, Melissa. I mean, it's a joke between us as a family. Congrats, skinny bitch." "- Oh, no, that's so inappropriate." "- You're not gonna like this one, buddy. You're not getting this." "- It's inappropriate. Yeah, it's inappropriate. You're right." "- Oh, that was a thumbs down, right? F*** Melissa." "- Hey, babe. How you doing, sweetie? What'd you do? What do you mean? You didn't know that that was gonna be inappropriate? Baby, what are you talking about? Have you seen the ad that you put in your book? I did what you wanted me to do. I put an ad in the book. You can't tell someone to handle the ad and then go back and then tell me you don't like how they handled the ad. Because if you don't like it, handle it yourself, honey. Handle it yourself." "- She could not be more caged. She is fake reading." "- Hey, can I get anything right? Oh, goddammit, Melissa. Can I use your opinion on something, if you don't mind?" "- She couldn't read the ad. I'm having an argument with her."

2025-01-30T23:42:58.675Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:42:58.677Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:43:00.679Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: "- Emily, you don't understand. My daughter is a skinny bitch. Like, I'm really proud of her." "- Oh, for Pete, what do you think?" "- Well, in this day and age..." "- Well, I don't think it's appropriate for school. I'm sure they have a proper curse." "- Well, now, Emily, you sound like my wife, Melissa. I mean, it's a joke between us as a family. Congrats, skinny bitch." "- Oh, no, that's so inappropriate." "- You're not gonna like this one, buddy. You're not getting this." "- It's inappropriate. Yeah, it's inappropriate. You're right." "- Oh, that was a thumbs down, right? F*** Melissa." "- Hey, babe. How you doing, sweetie? What'd you do? What do you mean? You didn't know that that was gonna be inappropriate? Baby, what are you talking about? Have you seen the ad that you put in your book? I did what you wanted me to do. I put an ad in the book. You can't tell someone to handle the ad and then go back and then tell me you don't like how they handled the ad. Because if you don't like it, handle it yourself, honey. Handle it yourself." "- She could not be more caged. She is fake reading." "- Hey, can I get anything right? Oh, goddammit, Melissa. Can I use your opinion on something, if you don't mind?" "- She couldn't read the ad. I'm having an argument with her."

2025-01-30T23:43:04.926Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2119,"transcriptLength":1286}
2025-01-30T23:43:04.930Z [31merror[39m: [StorageService] Failed to save transcript:{"location":"StorageService.saveTranscript","error":{"name":"Error","message":"ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'","code":"ENOENT","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738280584927.txt","filePath":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt","transcriptLength":1286}}
2025-01-30T23:43:04.931Z [31merror[39m: [VoiceRecorder] Error processing recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:43:04.932Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280584927.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:43:04.932Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:43:04.932Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:43:04.932Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280584932.pcm","directory":"temp"}
2025-01-30T23:43:04.934Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:43:04.934Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:43:04.934Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:43:04.935Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:43:09.267Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:43:09.269Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:43:10.532Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:43:11.364Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 13754 bytes)
2025-01-30T23:43:13.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 29464 bytes)
2025-01-30T23:43:15.363Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 45343 bytes)
2025-01-30T23:43:17.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 59184 bytes)
2025-01-30T23:43:19.363Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 74767 bytes)
2025-01-30T23:43:21.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 90526 bytes)
2025-01-30T23:43:24.003Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 101815 bytes)
2025-01-30T23:43:26.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 116218 bytes)
2025-01-30T23:43:28.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 129268 bytes)
2025-01-30T23:43:30.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 143906 bytes)
2025-01-30T23:43:32.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 159480 bytes)
2025-01-30T23:43:34.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 175290 bytes)
2025-01-30T23:43:37.682Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 189210 bytes)
2025-01-30T23:43:39.764Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 201491 bytes)
2025-01-30T23:43:42.302Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 214999 bytes)
2025-01-30T23:43:44.684Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 228263 bytes)
2025-01-30T23:43:47.341Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 240237 bytes)
2025-01-30T23:43:49.342Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 254585 bytes)
2025-01-30T23:43:51.462Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 267811 bytes)
2025-01-30T23:43:53.722Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 281197 bytes)
2025-01-30T23:43:55.920Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 294012 bytes)
2025-01-30T23:44:02.403Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 306480 bytes)
2025-01-30T23:44:04.403Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 321709 bytes)
2025-01-30T23:44:06.481Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 334744 bytes)
2025-01-30T23:44:08.643Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 347308 bytes)
2025-01-30T23:44:10.642Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 363315 bytes)
2025-01-30T23:44:12.641Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 378716 bytes)
2025-01-30T23:44:15.161Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 392746 bytes)
2025-01-30T23:44:17.537Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 402964 bytes)
2025-01-30T23:44:19.803Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 413531 bytes)
2025-01-30T23:44:21.805Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 428472 bytes)
2025-01-30T23:44:23.802Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 443461 bytes)
2025-01-30T23:44:25.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 454590 bytes)
2025-01-30T23:44:27.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 468270 bytes)
2025-01-30T23:44:29.903Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 482507 bytes)
2025-01-30T23:44:32.122Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 495958 bytes)
2025-01-30T23:44:34.222Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 509627 bytes)
2025-01-30T23:44:35.889Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:44:38.851Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280584932.pcm to MP3
2025-01-30T23:44:38.852Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280584932.pcm.mp3","exists":true}
2025-01-30T23:44:38.853Z [32minfo[39m: [TranscriptionService] File stats:{"size":933453,"created":"2025-01-30T23:44:38.178Z","modified":"2025-01-30T23:44:38.826Z"}
2025-01-30T23:44:38.853Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:44:38.853Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:44:40.890Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:44:42.590Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":805,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:44:42.590Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Just going away to college, and you know how boys get when they're away to college, and I just want him to know whenever he's doing whatever he's doing, that his grandfather is always watching. Becaus...
2025-01-30T23:44:42.591Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":805,"transcriptContent":"Just going away to college, and you know how boys get when they're away to college, and I just want "}
2025-01-30T23:44:43.594Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Just going away to college, and you know how boys get when they're away to college, and I just want him to know whenever he's doing whatever he's doing, that his grandfather is always watching. Because Michael's also, he's a virgin, so I want him to not make any mistakes. If I thought my grandfather was watching me in college, I would be a different person. I ask you, is this inappropriate or appropriate? I mean, the thought was there. It's appropriate. Thank you so much for taking my side 100%. I'll always be watching. I emailed you, you couldn't proofread it. It didn't come through, that's a big excuse. You know, gondreweasel69 at AOL.gov. Alright, hold on, there's nothing I can do. Goodbye. Dude, he's looking at you. Excuse me, sir, can I get your opinion? My son graduated from high school.

2025-01-30T23:45:06.661Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3082,"transcriptLength":805}
2025-01-30T23:45:06.666Z [31merror[39m: [StorageService] Failed to save transcript:{"location":"StorageService.saveTranscript","error":{"name":"Error","message":"ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'","code":"ENOENT","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738280706663.txt","filePath":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt","transcriptLength":805}}
2025-01-30T23:45:06.667Z [31merror[39m: [VoiceRecorder] Error processing recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:45:06.667Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'{"errno":-2,"code":"ENOENT","syscall":"open","path":"/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt","stack":"Error: ENOENT: no such file or directory, open '/usr/src/app/data/transcripts/1315144523336122469/transcript-1315144523336122469-1738280706663.txt'\n    at async open (node:internal/fs/promises:639:25)\n    at async Object.writeFile (node:internal/fs/promises:1212:14)\n    at async StorageService.saveTranscript (file:///usr/src/app/src/services/StorageService.js:168:13)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:153:9)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:45:06.668Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:45:06.668Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:45:06.668Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280706668.pcm","directory":"temp"}
2025-01-30T23:45:06.670Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:45:06.670Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:45:06.670Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:45:06.670Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:45:08.222Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:45:08.223Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:45:09.226Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:45:10.862Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 14670 bytes)
2025-01-30T23:45:12.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 29580 bytes)
2025-01-30T23:45:15.522Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 41333 bytes)
2025-01-30T23:45:18.822Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 54405 bytes)
2025-01-30T23:45:20.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 68214 bytes)
2025-01-30T23:45:22.367Z [32minfo[39m: Memory Usage:
2025-01-30T23:45:22.369Z [32minfo[39m: rss: 136.01 MB
2025-01-30T23:45:22.371Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-30T23:45:22.372Z [32minfo[39m: heapUsed: 28.8 MB
2025-01-30T23:45:22.372Z [32minfo[39m: external: 12.72 MB
2025-01-30T23:45:22.372Z [32minfo[39m: arrayBuffers: 4.8 MB
2025-01-30T23:45:22.822Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 82454 bytes)
2025-01-30T23:45:25.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 96085 bytes)
2025-01-30T23:45:27.581Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 109957 bytes)
2025-01-30T23:45:29.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 124663 bytes)
2025-01-30T23:45:31.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 139684 bytes)
2025-01-30T23:45:33.583Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 153694 bytes)
2025-01-30T23:45:35.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 167131 bytes)
2025-01-30T23:45:37.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 181416 bytes)
2025-01-30T23:45:40.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 193984 bytes)
2025-01-30T23:45:45.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 203789 bytes)
2025-01-30T23:45:47.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 217316 bytes)
2025-01-30T23:45:49.560Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 232085 bytes)
2025-01-30T23:45:54.261Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 245169 bytes)
2025-01-30T23:45:58.103Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 257283 bytes)
2025-01-30T23:46:00.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 271831 bytes)
2025-01-30T23:46:02.581Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 287404 bytes)
2025-01-30T23:46:04.659Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 301257 bytes)
2025-01-30T23:46:06.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 316102 bytes)
2025-01-30T23:46:08.663Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 330554 bytes)
2025-01-30T23:46:10.662Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 345306 bytes)
2025-01-30T23:46:13.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 75 bytes (total: 357991 bytes)
2025-01-30T23:46:15.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 371911 bytes)
2025-01-30T23:46:17.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 387333 bytes)
2025-01-30T23:46:19.082Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 401473 bytes)
2025-01-30T23:46:22.140Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 415331 bytes)
2025-01-30T23:46:24.140Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 430482 bytes)
2025-01-30T23:46:26.222Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 444458 bytes)
2025-01-30T23:46:28.443Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 455813 bytes)
2025-01-30T23:46:30.445Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 471497 bytes)
2025-01-30T23:46:32.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 485176 bytes)
2025-01-30T23:46:34.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 499573 bytes)
2025-01-30T23:46:35.893Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:46:38.701Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280706668.pcm to MP3
2025-01-30T23:46:38.702Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280706668.pcm.mp3","exists":true}
2025-01-30T23:46:38.702Z [32minfo[39m: [TranscriptionService] File stats:{"size":917325,"created":"2025-01-30T23:46:38.118Z","modified":"2025-01-30T23:46:38.680Z"}
2025-01-30T23:46:38.703Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:46:38.703Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:46:40.896Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:46:42.030Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":598,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:46:42.031Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Gary's dad here, I just wanted to say congrats. I know your folks have been struggling financially. I can imagine that it's been hard since your dad was laid off, but it's been a tough year for the co...
2025-01-30T23:46:42.032Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":598,"transcriptContent":"Gary's dad here, I just wanted to say congrats. I know your folks have been struggling financially. "}
2025-01-30T23:46:43.035Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Gary's dad here, I just wanted to say congrats. I know your folks have been struggling financially. I can imagine that it's been hard since your dad was laid off, but it's been a tough year for the company, and I had to make some cuts. If the budget opens up, he will be the first person to hire that, swing by and give us a call this summer. But from my point of view, do you think she's overreacting a little bit? I mean, that's a firm no. But you think probably that she's overreacting a bit. I feel like he never took you aside, pal. Is that a record for how many times I tried to get someone?

2025-01-30T23:46:44.390Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:46:44.391Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:46:46.394Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Gary's dad here, I just wanted to say congrats. I know your folks have been struggling financially. I can imagine that it's been hard since your dad was laid off, but it's been a tough year for the company, and I had to make some cuts. If the budget opens up, he will be the first person to hire that, swing by and give us a call this summer. But from my point of view, do you think she's overreacting a little bit? I mean, that's a firm no. But you think probably that she's overreacting a bit. I feel like he never took you aside, pal. Is that a record for how many times I tried to get someone?

2025-01-30T23:46:47.177Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:46:47.178Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:46:51.179Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: Gary's dad here, I just wanted to say congrats. I know your folks have been struggling financially. I can imagine that it's been hard since your dad was laid off, but it's been a tough year for the company, and I had to make some cuts. If the budget opens up, he will be the first person to hire that, swing by and give us a call this summer. But from my point of view, do you think she's overreacting a little bit? I mean, that's a firm no. But you think probably that she's overreacting a bit. I feel like he never took you aside, pal. Is that a record for how many times I tried to get someone?

2025-01-30T23:47:11.045Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:47:11.100Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:47:11.185Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":16,"maxAge":0}
2025-01-30T23:47:11.216Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279835794.pcm","age":883596.8615722656,"size":16154880}
2025-01-30T23:47:11.227Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279835794.pcm.mp3","age":872228.1674804688,"size":1032861}
2025-01-30T23:47:11.239Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279982197.pcm","age":755214.9235839844,"size":16093440}
2025-01-30T23:47:11.243Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738279982197.pcm.mp3","age":752391.9365234375,"size":1061541}
2025-01-30T23:47:11.245Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280091531.pcm","age":635217.9138183594,"size":17076480}
2025-01-30T23:47:11.246Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280091531.pcm.mp3","age":632337.9868164062,"size":1110237}
2025-01-30T23:47:11.248Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280220155.pcm","age":515219.3884277344,"size":15571200}
2025-01-30T23:47:11.250Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280220155.pcm.mp3","age":512427.4970703125,"size":1039605}
2025-01-30T23:47:11.277Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280331365.pcm","age":395197.0725097656,"size":17280000}
2025-01-30T23:47:11.279Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280331365.pcm.mp3","age":392350.1240234375,"size":1137501}
2025-01-30T23:47:11.280Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280446507.pcm","age":275199.35302734375,"size":19184640}
2025-01-30T23:47:11.281Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280446507.pcm.mp3","age":272337.72412109375,"size":1275069}
2025-01-30T23:47:11.282Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280584932.pcm","age":155203.92309570312,"size":14526720}
2025-01-30T23:47:11.283Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280584932.pcm.mp3","age":152260.98315429688,"size":933453}
2025-01-30T23:47:11.284Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280706668.pcm","age":35205.4267578125,"size":14085120}
2025-01-30T23:47:11.285Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280706668.pcm.mp3","age":32406.793212890625,"size":917325}
2025-01-30T23:47:11.285Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:47:11.287Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:47:11.287Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:47:11.649Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:47:11.747Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:47:55.444Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:47:55.500Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:47:55.586Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-30T23:47:55.592Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":0,"maxAge":2592000000}
2025-01-30T23:47:55.605Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:47:55.605Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:47:56.110Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:47:56.175Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:48:26.062Z [32minfo[39m: Command Name: setkey
2025-01-30T23:48:26.069Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:48:26.285Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T23:48:26.288Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334671598338183239","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:48:26.289Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:48:28.970Z [32minfo[39m: Command Name: record
2025-01-30T23:48:28.973Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:48:29.149Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T23:48:29.423Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T23:48:29.427Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T23:48:29.429Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:48:29.431Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:48:29.431Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:48:29.432Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738280909432.pcm","directory":"temp"}
2025-01-30T23:48:29.512Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:48:29.514Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:48:29.514Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:48:29.514Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:48:29.514Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T23:48:29.514Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T23:48:29.515Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334671610606784613","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:48:29.515Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:48:29.540Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:48:29.541Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:48:31.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 14689 bytes)
2025-01-30T23:48:33.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 30587 bytes)
2025-01-30T23:48:35.441Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 44843 bytes)
2025-01-30T23:48:36.526Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:48:40.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 56626 bytes)
2025-01-30T23:48:42.740Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 69439 bytes)
2025-01-30T23:48:45.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 81617 bytes)
2025-01-30T23:48:47.099Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 97404 bytes)
2025-01-30T23:48:49.101Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 113298 bytes)
2025-01-30T23:48:51.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 124863 bytes)
2025-01-30T23:48:54.182Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 139303 bytes)
2025-01-30T23:48:56.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 154803 bytes)
2025-01-30T23:48:58.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 169382 bytes)
2025-01-30T23:49:00.182Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 185218 bytes)
2025-01-30T23:49:02.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 198925 bytes)
2025-01-30T23:49:04.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 214626 bytes)
2025-01-30T23:49:06.181Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 227871 bytes)
2025-01-30T23:49:08.178Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 241572 bytes)
2025-01-30T23:49:10.761Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 255695 bytes)
2025-01-30T23:49:12.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 271610 bytes)
2025-01-30T23:49:15.041Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 285390 bytes)
2025-01-30T23:49:17.040Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 299728 bytes)
2025-01-30T23:49:19.040Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 312307 bytes)
2025-01-30T23:49:21.119Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 326548 bytes)
2025-01-30T23:49:23.120Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 342254 bytes)
2025-01-30T23:49:25.119Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 358236 bytes)
2025-01-30T23:49:27.119Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 373820 bytes)
2025-01-30T23:49:29.120Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 193 bytes (total: 389145 bytes)
2025-01-30T23:49:31.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 401499 bytes)
2025-01-30T23:49:33.479Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 414718 bytes)
2025-01-30T23:49:35.479Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 428071 bytes)
2025-01-30T23:49:37.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 442978 bytes)
2025-01-30T23:49:39.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 458099 bytes)
2025-01-30T23:49:41.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 470836 bytes)
2025-01-30T23:49:43.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 486722 bytes)
2025-01-30T23:49:45.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 496474 bytes)
2025-01-30T23:49:47.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 512290 bytes)
2025-01-30T23:49:50.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 522897 bytes)
2025-01-30T23:49:52.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 88 bytes (total: 535420 bytes)
2025-01-30T23:49:54.781Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 548021 bytes)
2025-01-30T23:49:56.778Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 561664 bytes)
2025-01-30T23:49:58.779Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 575888 bytes)
2025-01-30T23:50:00.780Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 591920 bytes)
2025-01-30T23:50:02.860Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 605789 bytes)
2025-01-30T23:50:04.939Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 618346 bytes)
2025-01-30T23:50:06.939Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 630216 bytes)
2025-01-30T23:50:08.940Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 645796 bytes)
2025-01-30T23:50:10.941Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 661292 bytes)
2025-01-30T23:50:12.937Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 675840 bytes)
2025-01-30T23:50:15.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 690972 bytes)
2025-01-30T23:50:17.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 704337 bytes)
2025-01-30T23:50:19.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 96 bytes (total: 719385 bytes)
2025-01-30T23:50:21.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 733935 bytes)
2025-01-30T23:50:23.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 748971 bytes)
2025-01-30T23:50:25.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 763787 bytes)
2025-01-30T23:50:27.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 778381 bytes)
2025-01-30T23:50:29.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 793672 bytes)
2025-01-30T23:50:29.535Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:50:32.646Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738280909432.pcm to MP3
2025-01-30T23:50:32.647Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738280909432.pcm.mp3","exists":true}
2025-01-30T23:50:32.648Z [32minfo[39m: [TranscriptionService] File stats:{"size":1415325,"created":"2025-01-30T23:50:31.827Z","modified":"2025-01-30T23:50:32.623Z"}
2025-01-30T23:50:32.650Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:50:32.650Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:50:34.538Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:50:45.102Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1168,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:50:45.103Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: If there is, return, with us, With Raven, there's also none. And if someone's talking, then say the memo they've just received, they get another Euros, basically integrating the 뛰 thing into equation ...
2025-01-30T23:50:45.103Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1168,"transcriptContent":"If there is, return, with us, With Raven, there's also none. And if someone's talking, then say the "}
2025-01-30T23:50:46.107Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: If there is, return, with us, With Raven, there's also none. And if someone's talking, then say the memo they've just received, they get another Euros, basically integrating the 뛰 thing into equation calories. Das Text. Eat someone's cookie without getting caught. No, the next section is actually our logo. We have a couple options. You would be the cookie monster. I'm looking to save you, I'm just looking to save you. The color scheme, how does the color scheme feel? Will the woman know that Sal stole her cookie? Do you want it to be like three cookies, or do you want it to be like, if you know, you know? So you probably would want to see through so you can see. You know what Julie probably thinks is the guy next to her ate the cookie in the dark, that's her only option. Before we go on, I do want to say, no one should be eating these cookies, but it feels like, so I get it, they're good, but I would appreciate it if you just wait, so after the focus group, we should all have five. Sal, here's what we want you to do, we want you to take a cookie from White Hat and put it onto Green Shirt's plate. So this is my personal fave, Jane Gold's, Sal's fave.

2025-01-30T23:50:47.589Z [33mwarn[39m: [TranscriptionService] Unable to summarize, retrying...{"responseContent":"Unable to summarize."}
2025-01-30T23:50:47.590Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1168,"transcriptLength":1168}
2025-01-30T23:50:47.596Z [32minfo[39m: [StorageService] Created guild directory:{"guildId":"1315144523336122469","directory":"/usr/src/app/data/transcripts/1315144523336122469"}
2025-01-30T23:50:47.599Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738281047590.txt","size":1168}
2025-01-30T23:50:47.601Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:50:47.603Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:50:47.603Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:50:47.603Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:50:47.604Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738281047603.pcm","directory":"temp"}
2025-01-30T23:50:47.604Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:50:47.605Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:50:47.605Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:50:47.605Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:50:47.838Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:50:47.839Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:50:49.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 14282 bytes)
2025-01-30T23:50:51.841Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 28496 bytes)
2025-01-30T23:50:53.841Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 44161 bytes)
2025-01-30T23:50:55.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 58947 bytes)
2025-01-30T23:50:56.420Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:51:00.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 72931 bytes)
2025-01-30T23:51:02.139Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 84796 bytes)
2025-01-30T23:51:04.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 98348 bytes)
2025-01-30T23:51:07.837Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 109909 bytes)
2025-01-30T23:51:10.440Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 122620 bytes)
2025-01-30T23:51:12.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 135710 bytes)
2025-01-30T23:51:14.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 147477 bytes)
2025-01-30T23:51:16.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 163175 bytes)
2025-01-30T23:51:18.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 179223 bytes)
2025-01-30T23:51:20.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 193665 bytes)
2025-01-30T23:51:22.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 208039 bytes)
2025-01-30T23:51:24.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 224048 bytes)
2025-01-30T23:51:26.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 237176 bytes)
2025-01-30T23:51:28.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 252147 bytes)
2025-01-30T23:51:30.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 265284 bytes)
2025-01-30T23:51:32.699Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 280534 bytes)
2025-01-30T23:51:34.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 296459 bytes)
2025-01-30T23:51:37.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 309982 bytes)
2025-01-30T23:51:39.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 323202 bytes)
2025-01-30T23:51:41.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 338153 bytes)
2025-01-30T23:51:43.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 351004 bytes)
2025-01-30T23:51:46.057Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 364717 bytes)
2025-01-30T23:51:48.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 376735 bytes)
2025-01-30T23:51:50.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 390613 bytes)
2025-01-30T23:51:52.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 406168 bytes)
2025-01-30T23:51:54.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 422172 bytes)
2025-01-30T23:51:56.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 435789 bytes)
2025-01-30T23:51:58.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 449283 bytes)
2025-01-30T23:52:00.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 464284 bytes)
2025-01-30T23:52:02.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 477821 bytes)
2025-01-30T23:52:04.597Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 492418 bytes)
2025-01-30T23:52:07.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 503872 bytes)
2025-01-30T23:52:09.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 519014 bytes)
2025-01-30T23:52:11.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 534205 bytes)
2025-01-30T23:52:13.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 548097 bytes)
2025-01-30T23:52:15.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 560936 bytes)
2025-01-30T23:52:17.402Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 574523 bytes)
2025-01-30T23:52:19.399Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 587379 bytes)
2025-01-30T23:52:22.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 601940 bytes)
2025-01-30T23:52:25.679Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 615164 bytes)
2025-01-30T23:52:28.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 627329 bytes)
2025-01-30T23:52:29.528Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:52:32.470Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738281047603.pcm to MP3
2025-01-30T23:52:32.472Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738281047603.pcm.mp3","exists":true}
2025-01-30T23:52:32.472Z [32minfo[39m: [TranscriptionService] File stats:{"size":1146021,"created":"2025-01-30T23:52:31.800Z","modified":"2025-01-30T23:52:32.449Z"}
2025-01-30T23:52:32.472Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:52:32.472Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:52:34.529Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:52:51.158Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":124,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:52:51.160Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.
...
2025-01-30T23:52:51.160Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":124,"transcriptContent":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}
2025-01-30T23:52:52.160Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:52:54.657Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:52:54.657Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:52:55.441Z [32minfo[39m: Memory Usage:
2025-01-30T23:52:55.448Z [32minfo[39m: rss: 138.52 MB
2025-01-30T23:52:55.449Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-30T23:52:55.450Z [32minfo[39m: heapUsed: 27.79 MB
2025-01-30T23:52:55.451Z [32minfo[39m: external: 10.58 MB
2025-01-30T23:52:55.452Z [32minfo[39m: arrayBuffers: 2.66 MB
2025-01-30T23:52:56.660Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:52:57.422Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:52:57.423Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:53:01.430Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:02.191Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:53:02.191Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:53:08.195Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:08.590Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:53:08.593Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"transcriptLength":124,"transcriptSample":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}}
2025-01-30T23:53:08.594Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:53:08.613Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"75","data":{"guildId":"1315144523336122469","transcript":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.\n"}}
2025-01-30T23:53:08.613Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-30T23:53:08.614Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:53:08.614Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:147:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-30T23:53:08.615Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-30T23:53:08.615Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:53:08.615Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738281188615.pcm","directory":"temp"}
2025-01-30T23:53:08.616Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:53:08.616Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:53:08.616Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:53:08.616Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:53:13.626Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"75","data":{"guildId":"1315144523336122469","transcript":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.\n"}}
2025-01-30T23:53:13.626Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:53:13.626Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":124,"transcriptContent":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}
2025-01-30T23:53:14.630Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:15.674Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:53:15.681Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:53:16.573Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:53:16.573Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:53:17.516Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 11900 bytes)
2025-01-30T23:53:18.575Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:19.532Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:53:19.532Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:53:19.557Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:53:19.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 86 bytes (total: 25128 bytes)
2025-01-30T23:53:21.937Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 39126 bytes)
2025-01-30T23:53:23.542Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:23.918Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:53:23.918Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:53:25.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 51777 bytes)
2025-01-30T23:53:27.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 67758 bytes)
2025-01-30T23:53:29.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 81989 bytes)
2025-01-30T23:53:29.920Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:53:48.102Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:53:48.137Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:53:48.205Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":5,"maxAge":0}
2025-01-30T23:53:48.238Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280909432.pcm","age":198786.03442382812,"size":21565440}
2025-01-30T23:53:48.251Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738280909432.pcm.mp3","age":195504.7431640625,"size":1415325}
2025-01-30T23:53:48.263Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281047603.pcm","age":78610.61889648438,"size":17475840}
2025-01-30T23:53:48.267Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281047603.pcm.mp3","age":75678.873046875,"size":1146021}
2025-01-30T23:53:48.269Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281188615.pcm","age":17810.6181640625,"size":2415360}
2025-01-30T23:53:48.270Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-30T23:53:48.271Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:53:48.273Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:53:48.659Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:53:48.718Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:54:37.101Z [32minfo[39m: Command Name: setkey
2025-01-30T23:54:37.104Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:54:37.353Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T23:54:37.355Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334673154563641396","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:54:37.356Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:54:40.324Z [32minfo[39m: Command Name: record
2025-01-30T23:54:40.327Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:54:40.594Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T23:54:40.867Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T23:54:40.868Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T23:54:40.868Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:54:40.869Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:54:40.870Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:54:40.871Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738281280870.pcm","directory":"temp"}
2025-01-30T23:54:40.933Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:54:40.934Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:54:40.934Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:54:40.934Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:54:40.934Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T23:54:40.934Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T23:54:40.934Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334673168111239200","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:54:40.935Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:54:40.960Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:54:40.961Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:54:41.073Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:54:43.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 14908 bytes)
2025-01-30T23:54:45.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 25663 bytes)
2025-01-30T23:54:48.306Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"75","data":{"guildId":"1315144523336122469","transcript":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.\n"}}
2025-01-30T23:54:48.306Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:54:48.307Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":124,"transcriptContent":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}
2025-01-30T23:54:49.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 39397 bytes)
2025-01-30T23:54:49.310Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:54:51.993Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:54:51.994Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:54:53.999Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:54:54.379Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:54:54.380Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:54:56.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 51231 bytes)
2025-01-30T23:54:58.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 67349 bytes)
2025-01-30T23:54:58.381Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:54:59.173Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:54:59.174Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:55:00.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 81472 bytes)
2025-01-30T23:55:04.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 95052 bytes)
2025-01-30T23:55:05.176Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:55:05.553Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:55:05.556Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":124,"transcriptSample":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}}
2025-01-30T23:55:05.557Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:55:05.582Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 75 delayed","stack":"Error: Missing lock for job 75 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-30T23:55:06.877Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 107525 bytes)
2025-01-30T23:55:09.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 118622 bytes)
2025-01-30T23:55:10.592Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"75","data":{"guildId":"1315144523336122469","transcript":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.\n"}}
2025-01-30T23:55:10.594Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-30T23:55:10.594Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":124,"transcriptContent":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}
2025-01-30T23:55:11.596Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:55:11.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 130955 bytes)
2025-01-30T23:55:13.662Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:55:13.663Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:55:13.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 145437 bytes)
2025-01-30T23:55:15.665Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:55:15.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 159938 bytes)
2025-01-30T23:55:16.050Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:55:16.050Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:55:18.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 174189 bytes)
2025-01-30T23:55:20.052Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:55:20.492Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:55:20.493Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-30T23:55:24.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 186042 bytes)
2025-01-30T23:55:26.496Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in their seats? Okay. Bye-bye.

2025-01-30T23:55:26.955Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 199847 bytes)
2025-01-30T23:55:26.967Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:55:26.969Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":124,"transcriptSample":"We're going to talk poking options. Okay, everyone can see this? Everyone's good? Everyone's in thei"}}
2025-01-30T23:55:26.969Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-30T23:55:26.978Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 75 failed","stack":"Error: Missing lock for job 75 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-30T23:55:29.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 211383 bytes)
2025-01-30T23:55:31.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 227349 bytes)
2025-01-30T23:55:33.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 241623 bytes)
2025-01-30T23:55:35.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 256034 bytes)
2025-01-30T23:55:40.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 267160 bytes)
2025-01-30T23:55:44.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 278783 bytes)
2025-01-30T23:55:50.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 291075 bytes)
2025-01-30T23:55:59.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 76 bytes (total: 302595 bytes)
2025-01-30T23:56:05.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 315198 bytes)
2025-01-30T23:56:07.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 327625 bytes)
2025-01-30T23:56:13.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 339426 bytes)
2025-01-30T23:56:21.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 352112 bytes)
2025-01-30T23:56:23.315Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 366751 bytes)
2025-01-30T23:56:26.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 380505 bytes)
2025-01-30T23:56:28.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 396099 bytes)
2025-01-30T23:56:30.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 411673 bytes)
2025-01-30T23:56:32.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 426681 bytes)
2025-01-30T23:56:34.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 442175 bytes)
2025-01-30T23:56:36.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 457229 bytes)
2025-01-30T23:56:38.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 472466 bytes)
2025-01-30T23:56:40.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 488170 bytes)
2025-01-30T23:56:40.938Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-30T23:56:43.701Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738281280870.pcm to MP3
2025-01-30T23:56:43.702Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738281280870.pcm.mp3","exists":true}
2025-01-30T23:56:43.703Z [32minfo[39m: [TranscriptionService] File stats:{"size":887301,"created":"2025-01-30T23:56:43.172Z","modified":"2025-01-30T23:56:43.681Z"}
2025-01-30T23:56:43.703Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-30T23:56:43.703Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-30T23:56:45.938Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-30T23:56:57.753Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":171,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-30T23:56:57.754Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: User1 would say, User2 would say, User3 would say, User4 would say, User5 would say, User6 would say, User7 would say, User8 would say, User9 would say, User10 would say,
...
2025-01-30T23:56:57.754Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":171,"transcriptContent":"User1 would say, User2 would say, User3 would say, User4 would say, User5 would say, User6 would say"}
2025-01-30T23:56:58.756Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User1 would say, User2 would say, User3 would say, User4 would say, User5 would say, User6 would say, User7 would say, User8 would say, User9 would say, User10 would say,

2025-01-30T23:57:01.680Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:57:01.681Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-30T23:57:03.682Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: User1 would say, User2 would say, User3 would say, User4 would say, User5 would say, User6 would say, User7 would say, User8 would say, User9 would say, User10 would say,

2025-01-30T23:57:04.010Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-30T23:57:04.011Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-30T23:57:57.655Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-30T23:57:57.689Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-30T23:57:57.756Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-30T23:57:57.776Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281280870.pcm","age":76745.31518554688,"size":13850880}
2025-01-30T23:57:57.786Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281280870.pcm.mp3","age":73999.5654296875,"size":887301}
2025-01-30T23:57:57.787Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-30T23:57:57.789Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-30T23:57:57.790Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-30T23:57:58.180Z [32minfo[39m: Bot initialized successfully
2025-01-30T23:57:58.227Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-30T23:58:17.865Z [32minfo[39m: Command Name: setkey
2025-01-30T23:58:17.873Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-30T23:58:18.125Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-30T23:58:18.127Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334674080489537577","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:58:18.128Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:58:20.155Z [32minfo[39m: Command Name: record
2025-01-30T23:58:20.158Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-30T23:58:20.349Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-30T23:58:20.553Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-30T23:58:20.555Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-30T23:58:20.555Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:58:20.555Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-30T23:58:20.556Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-30T23:58:20.556Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738281500556.pcm","directory":"temp"}
2025-01-30T23:58:20.654Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-30T23:58:20.654Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-30T23:58:20.655Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-30T23:58:20.655Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-30T23:58:20.655Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-30T23:58:20.655Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-30T23:58:20.655Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334674090241298453","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-30T23:58:20.655Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-30T23:58:20.672Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-30T23:58:20.673Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-30T23:58:22.576Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 14014 bytes)
2025-01-30T23:58:24.435Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-30T23:58:25.254Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 27488 bytes)
2025-01-30T23:58:27.254Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 42095 bytes)
2025-01-30T23:58:29.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 55352 bytes)
2025-01-30T23:58:31.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 70857 bytes)
2025-01-30T23:58:35.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 79830 bytes)
2025-01-30T23:58:38.133Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 90595 bytes)
2025-01-30T23:58:40.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 104198 bytes)
2025-01-30T23:58:42.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 118125 bytes)
2025-01-30T23:58:44.552Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 132904 bytes)
2025-01-30T23:58:46.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 148328 bytes)
2025-01-30T23:58:48.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 163107 bytes)
2025-01-30T23:58:50.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 179090 bytes)
2025-01-30T23:58:52.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 192460 bytes)
2025-01-30T23:58:54.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 206945 bytes)
2025-01-30T23:58:56.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 222440 bytes)
2025-01-30T23:58:58.638Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 237193 bytes)
2025-01-30T23:59:00.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 250440 bytes)
2025-01-30T23:59:02.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 261454 bytes)
2025-01-30T23:59:04.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 276569 bytes)
2025-01-30T23:59:06.810Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 288380 bytes)
2025-01-30T23:59:08.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 301665 bytes)
2025-01-30T23:59:10.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 317341 bytes)
2025-01-30T23:59:12.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 332911 bytes)
2025-01-30T23:59:14.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 348632 bytes)
2025-01-30T23:59:16.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 364167 bytes)
2025-01-30T23:59:18.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 378985 bytes)
2025-01-30T23:59:20.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 393834 bytes)
2025-01-30T23:59:22.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 407983 bytes)
2025-01-30T23:59:26.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 417684 bytes)
2025-01-30T23:59:28.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 433746 bytes)
2025-01-30T23:59:31.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 90 bytes (total: 445819 bytes)
2025-01-30T23:59:33.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 461021 bytes)
2025-01-30T23:59:35.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 86 bytes (total: 474798 bytes)
2025-01-30T23:59:38.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 488927 bytes)
2025-01-30T23:59:40.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 502456 bytes)
2025-01-30T23:59:42.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 513823 bytes)
2025-01-30T23:59:44.416Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 524320 bytes)
2025-01-30T23:59:46.493Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 534384 bytes)
2025-01-30T23:59:48.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 548954 bytes)
2025-01-30T23:59:50.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 564370 bytes)
2025-01-30T23:59:54.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 574229 bytes)
2025-01-30T23:59:56.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 588898 bytes)
2025-01-31T00:00:00.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 601428 bytes)
2025-01-31T00:00:03.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 612356 bytes)
2025-01-31T00:00:05.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 627103 bytes)
2025-01-31T00:00:07.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 642677 bytes)
2025-01-31T00:00:09.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 658484 bytes)
2025-01-31T00:00:11.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 672141 bytes)
2025-01-31T00:00:14.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 684655 bytes)
2025-01-31T00:00:16.534Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 700153 bytes)
2025-01-31T00:00:19.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 713145 bytes)
2025-01-31T00:00:21.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 727749 bytes)
2025-01-31T00:00:26.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 741514 bytes)
2025-01-31T00:00:28.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 755327 bytes)
2025-01-31T00:00:30.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 768401 bytes)
2025-01-31T00:00:32.433Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 783813 bytes)
2025-01-31T00:00:34.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 798114 bytes)
2025-01-31T00:00:36.433Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 812066 bytes)
2025-01-31T00:00:38.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 827584 bytes)
2025-01-31T00:00:40.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 843140 bytes)
2025-01-31T00:00:42.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 852248 bytes)
2025-01-31T00:00:44.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 68 bytes (total: 865610 bytes)
2025-01-31T00:00:49.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 874553 bytes)
2025-01-31T00:00:51.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 887038 bytes)
2025-01-31T00:00:53.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 902334 bytes)
2025-01-31T00:00:55.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 917435 bytes)
2025-01-31T00:00:57.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 930457 bytes)
2025-01-31T00:00:59.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 944036 bytes)
2025-01-31T00:01:01.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 955042 bytes)
2025-01-31T00:01:03.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 970595 bytes)
2025-01-31T00:01:05.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 983590 bytes)
2025-01-31T00:01:08.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 993263 bytes)
2025-01-31T00:01:11.397Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1002863 bytes)
2025-01-31T00:01:14.191Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 1012043 bytes)
2025-01-31T00:01:16.191Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1026909 bytes)
2025-01-31T00:01:18.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 1038875 bytes)
2025-01-31T00:01:20.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 1052113 bytes)
2025-01-31T00:01:22.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1066689 bytes)
2025-01-31T00:01:24.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1079221 bytes)
2025-01-31T00:01:26.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 1091792 bytes)
2025-01-31T00:01:28.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1107726 bytes)
2025-01-31T00:01:31.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1121059 bytes)
2025-01-31T00:01:33.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 1134838 bytes)
2025-01-31T00:01:35.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1147256 bytes)
2025-01-31T00:01:37.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1162057 bytes)
2025-01-31T00:01:39.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 1174931 bytes)
2025-01-31T00:01:41.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1188410 bytes)
2025-01-31T00:01:43.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1203475 bytes)
2025-01-31T00:01:45.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1217858 bytes)
2025-01-31T00:01:47.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1231652 bytes)
2025-01-31T00:01:50.291Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 1244137 bytes)
2025-01-31T00:01:52.293Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1258231 bytes)
2025-01-31T00:01:54.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1273677 bytes)
2025-01-31T00:01:56.373Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1287409 bytes)
2025-01-31T00:01:58.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1301621 bytes)
2025-01-31T00:02:00.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1316383 bytes)
2025-01-31T00:02:02.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1330327 bytes)
2025-01-31T00:02:04.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1345883 bytes)
2025-01-31T00:02:06.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1361758 bytes)
2025-01-31T00:02:08.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 1375663 bytes)
2025-01-31T00:02:12.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1384929 bytes)
2025-01-31T00:02:14.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1400937 bytes)
2025-01-31T00:02:16.662Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 1416786 bytes)
2025-01-31T00:02:18.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1432568 bytes)
2025-01-31T00:02:20.948Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1446172 bytes)
2025-01-31T00:02:22.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1462041 bytes)
2025-01-31T00:02:25.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1475280 bytes)
2025-01-31T00:02:27.307Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1488015 bytes)
2025-01-31T00:02:29.407Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1504213 bytes)
2025-01-31T00:02:31.388Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1519547 bytes)
2025-01-31T00:02:34.586Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1531319 bytes)
2025-01-31T00:02:36.584Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 1546580 bytes)
2025-01-31T00:02:38.665Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 1557503 bytes)
2025-01-31T00:02:40.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1572545 bytes)
2025-01-31T00:02:42.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1588536 bytes)
2025-01-31T00:02:44.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1603695 bytes)
2025-01-31T00:02:48.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1615664 bytes)
2025-01-31T00:02:51.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1626934 bytes)
2025-01-31T00:02:53.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 71 bytes (total: 1641915 bytes)
2025-01-31T00:02:55.234Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 1655831 bytes)
2025-01-31T00:02:57.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1668335 bytes)
2025-01-31T00:02:57.695Z [32minfo[39m: Memory Usage:
2025-01-31T00:02:57.696Z [32minfo[39m: rss: 135.79 MB
2025-01-31T00:02:57.697Z [32minfo[39m: heapTotal: 28.96 MB
2025-01-31T00:02:57.698Z [32minfo[39m: heapUsed: 27.24 MB
2025-01-31T00:02:57.698Z [32minfo[39m: external: 8.41 MB
2025-01-31T00:02:57.698Z [32minfo[39m: arrayBuffers: 0.49 MB
2025-01-31T00:02:59.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1680161 bytes)
2025-01-31T00:03:01.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1695622 bytes)
2025-01-31T00:03:04.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 1703661 bytes)
2025-01-31T00:03:06.201Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1714178 bytes)
2025-01-31T00:03:08.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1728465 bytes)
2025-01-31T00:03:10.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 1743301 bytes)
2025-01-31T00:03:12.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1756884 bytes)
2025-01-31T00:03:14.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1771970 bytes)
2025-01-31T00:03:16.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1786329 bytes)
2025-01-31T00:03:18.283Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 1800544 bytes)
2025-01-31T00:03:20.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1814547 bytes)
2025-01-31T00:03:20.708Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:03:24.985Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738281500556.pcm to MP3
2025-01-31T00:03:24.986Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738281500556.pcm.mp3","exists":true}
2025-01-31T00:03:24.987Z [32minfo[39m: [TranscriptionService] File stats:{"size":3278277,"created":"2025-01-31T00:03:23.117Z","modified":"2025-01-31T00:03:24.961Z"}
2025-01-31T00:03:24.990Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:03:24.990Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:03:25.710Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:03:40.708Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2497,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T00:03:40.709Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you...
2025-01-31T00:03:40.709Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2497,"transcriptContent":"You can say it when you're giving a sales pitch, but it's not always what people think. You could pr"}
2025-01-31T00:03:41.713Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...

2025-01-31T00:03:42.462Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:03:42.463Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:03:44.466Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...

2025-01-31T00:03:45.910Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:03:45.911Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:03:49.918Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...

2025-01-31T00:03:50.988Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:03:50.991Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:03:56.994Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...

2025-01-31T00:03:58.300Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:03:58.305Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"transcriptLength":2497,"transcriptSample":"You can say it when you're giving a sales pitch, but it's not always what people think. You could pr"}}
2025-01-31T00:03:58.306Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:03:58.326Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"76","data":{"guildId":"1315144523336122469","transcript":"You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...\n"}}
2025-01-31T00:03:58.326Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:03:58.326Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 76
2025-01-31T00:03:58.331Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738281838326.txt","size":2497}
2025-01-31T00:03:58.331Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:03:58.331Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:03:58.332Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T00:03:58.332Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:03:58.332Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738281838332.pcm","directory":"temp"}
2025-01-31T00:03:58.332Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:03:58.333Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:03:58.333Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:03:58.333Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:04:03.059Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:04:03.060Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:04:03.337Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"76","data":{"guildId":"1315144523336122469","transcript":"You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...\n"}}
2025-01-31T00:04:03.337Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:04:03.338Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2497,"transcriptContent":"You can say it when you're giving a sales pitch, but it's not always what people think. You could pr"}
2025-01-31T00:04:04.345Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: You can say it when you're giving a sales pitch, but it's not always what people think. You could probably make this decision by yourself. You don't want to leave a group. To get back to my point, you don't want to seem like you have to ask your wife for everything and be a baby about it. Would you like to pledge now and we can send you the emails? If you want to stand up to this thing and take a stand, you can just make a decision. Listen to PC, or you will die. He seems to be writing on the test right now. Why not? I told you, Linda. Get that song, man. You're driving me nuts. Hey, how are you doing? I'm Brian. Come on in, have a seat, my friend. So, we'll try Joe and Bergio. What did you say? Joe and Bergio? I'm going to get you. What we like to say is like, I'm coming for you, Joe and Bergio. Hi, my name is Eduardo. I'm with Tri-State Waterloo. Joe, what the fuck are you talking about? This is Tri-State Waterloo. It's the same. It's not a resource. We're dealing with small change chunks all day. Here we go. I'm dealing with small change chunks all day. Watch what he does. Okay, Joe and Bergio. Yeah, I'm sorry. I'm dealing with so many small change chunks. 500 would be sufficient. I would like to remind you that we know where you live. I would like to remind you, sir, that we know where you live. I would like to remind you that we know where you live. No, it's just a friendly reminder. It's Waterloo. You've got to tug at the heartstrings now. Now we're going to tug at the heartstrings. Do you have any pets? No, but I mean, I have pets. Remember when they died and bring that feeling up. So, we're going to say that your pet just died at the office and that's why you sound like you're crying. That's it. I'm a little sad, sir, because my dog just died. I was wondering, sir, if you could donate to this family. I have to go up to like 700, maybe. I still know where you live. I still know where you live and I want you to know that I'm going to a psychiatrist. It's finalizing because I think I'm a little sick in my body. Let's do a thousand. Yes or no, bitch? Let's do a thousand. Let's do a thousand. What do you say, bitch? What do you say, bitch? You know what I'd say? Yes. Somebody's going to get back to you, bitch. Alright, here's your new salesperson. So, there are some things that we do that are universally important. Laugh super hard at anything I say. Laugh as hard as you can at anything I say. I'm bored. Shut up. You laugh crazy. She sucks like a...

2025-01-31T00:04:05.111Z [33mwarn[39m: [TranscriptionService] Unable to summarize, retrying...{"responseContent":"Unable to summarize."}
2025-01-31T00:04:05.111Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2497,"transcriptLength":2497}
2025-01-31T00:04:05.113Z [33mwarn[39m: [ChannelService] Message is too long (2562 chars), splitting into chunks
2025-01-31T00:04:05.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 13444 bytes)
2025-01-31T00:04:05.921Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T00:04:05.930Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"76","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738281845112}}
2025-01-31T00:04:07.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 28659 bytes)
2025-01-31T00:04:08.017Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:04:09.236Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 42223 bytes)
2025-01-31T00:04:11.638Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 53555 bytes)
2025-01-31T00:04:13.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 67906 bytes)
2025-01-31T00:04:15.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 80156 bytes)
2025-01-31T00:04:18.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 93314 bytes)
2025-01-31T00:04:21.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 105815 bytes)
2025-01-31T00:04:23.114Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 120675 bytes)
2025-01-31T00:04:26.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 133158 bytes)
2025-01-31T00:15:22.805Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:15:22.847Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:15:22.930Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T00:15:22.971Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281500556.pcm","age":722140.8872070312,"size":51137280}
2025-01-31T00:15:22.981Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281500556.pcm.mp3","age":717877.4616699219,"size":3278277}
2025-01-31T00:15:22.983Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738281838332.pcm","age":654875.0490722656,"size":4128000}
2025-01-31T00:15:22.984Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:15:22.993Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:15:22.993Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:15:23.509Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:15:23.589Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:16:01.028Z [32minfo[39m: Command Name: setkey
2025-01-31T00:16:01.031Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:16:01.318Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:16:01.320Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334678539504582679","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:16:01.321Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:16:03.778Z [32minfo[39m: Command Name: record
2025-01-31T00:16:03.783Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:16:03.972Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:16:04.279Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:16:04.280Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:16:04.281Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:16:04.281Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:16:04.281Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:16:04.282Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738282564282.pcm","directory":"temp"}
2025-01-31T00:16:04.354Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:16:04.355Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:16:04.356Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:16:04.356Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:16:04.357Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:16:04.357Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:16:04.357Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334678550879404114","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:16:04.357Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:16:04.402Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:16:04.406Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:16:06.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 15412 bytes)
2025-01-31T00:16:07.597Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:16:11.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 28515 bytes)
2025-01-31T00:16:13.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 41020 bytes)
2025-01-31T00:16:15.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 53737 bytes)
2025-01-31T00:16:19.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 59 bytes (total: 63531 bytes)
2025-01-31T00:16:22.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 76800 bytes)
2025-01-31T00:16:25.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 90039 bytes)
2025-01-31T00:16:28.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 101099 bytes)
2025-01-31T00:16:30.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 116111 bytes)
2025-01-31T00:16:33.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 128577 bytes)
2025-01-31T00:16:35.218Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 142538 bytes)
2025-01-31T00:16:39.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 156734 bytes)
2025-01-31T00:16:41.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 168996 bytes)
2025-01-31T00:16:43.400Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 182203 bytes)
2025-01-31T00:16:45.399Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 197109 bytes)
2025-01-31T00:16:47.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 209660 bytes)
2025-01-31T00:16:50.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 221501 bytes)
2025-01-31T00:16:52.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 236947 bytes)
2025-01-31T00:16:54.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 252822 bytes)
2025-01-31T00:16:56.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 268856 bytes)
2025-01-31T00:16:58.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 284468 bytes)
2025-01-31T00:17:00.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 299980 bytes)
2025-01-31T00:17:05.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 311474 bytes)
2025-01-31T00:17:07.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 327036 bytes)
2025-01-31T00:17:09.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 340213 bytes)
2025-01-31T00:17:11.514Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 351443 bytes)
2025-01-31T00:17:13.597Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 364215 bytes)
2025-01-31T00:17:15.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 376412 bytes)
2025-01-31T00:17:18.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 387535 bytes)
2025-01-31T00:17:20.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 401301 bytes)
2025-01-31T00:17:23.692Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 411230 bytes)
2025-01-31T00:17:29.992Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 422833 bytes)
2025-01-31T00:17:32.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 433229 bytes)
2025-01-31T00:17:34.551Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 447927 bytes)
2025-01-31T00:17:36.552Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 463615 bytes)
2025-01-31T00:17:38.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 479074 bytes)
2025-01-31T00:17:40.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 494546 bytes)
2025-01-31T00:17:42.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 505475 bytes)
2025-01-31T00:17:45.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 518544 bytes)
2025-01-31T00:17:47.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 530700 bytes)
2025-01-31T00:17:49.950Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 543977 bytes)
2025-01-31T00:17:52.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 556065 bytes)
2025-01-31T00:17:54.038Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 569361 bytes)
2025-01-31T00:17:56.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 582388 bytes)
2025-01-31T00:17:58.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 595736 bytes)
2025-01-31T00:18:01.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 607171 bytes)
2025-01-31T00:18:03.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 621651 bytes)
2025-01-31T00:18:07.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 633055 bytes)
2025-01-31T00:18:12.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 642541 bytes)
2025-01-31T00:18:15.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 652192 bytes)
2025-01-31T00:18:17.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 59 bytes (total: 666679 bytes)
2025-01-31T00:18:19.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 681121 bytes)
2025-01-31T00:18:22.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 690874 bytes)
2025-01-31T00:18:25.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 701870 bytes)
2025-01-31T00:18:27.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 713008 bytes)
2025-01-31T00:18:29.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 726934 bytes)
2025-01-31T00:18:32.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 739582 bytes)
2025-01-31T00:18:34.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 751644 bytes)
2025-01-31T00:18:36.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 767006 bytes)
2025-01-31T00:18:38.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 779492 bytes)
2025-01-31T00:18:42.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 787123 bytes)
2025-01-31T00:18:44.595Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 798420 bytes)
2025-01-31T00:18:46.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 809769 bytes)
2025-01-31T00:18:48.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 822963 bytes)
2025-01-31T00:18:50.599Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 834964 bytes)
2025-01-31T00:18:55.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 844243 bytes)
2025-01-31T00:18:57.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 851125 bytes)
2025-01-31T00:19:00.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 859359 bytes)
2025-01-31T00:19:03.000Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 67 bytes (total: 869652 bytes)
2025-01-31T00:19:09.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 71 bytes (total: 877827 bytes)
2025-01-31T00:19:16.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 889767 bytes)
2025-01-31T00:19:18.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 905746 bytes)
2025-01-31T00:19:20.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 921603 bytes)
2025-01-31T00:19:23.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 935440 bytes)
2025-01-31T00:19:25.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 950349 bytes)
2025-01-31T00:19:29.395Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 961595 bytes)
2025-01-31T00:19:31.675Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 975219 bytes)
2025-01-31T00:19:33.676Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 68 bytes (total: 987238 bytes)
2025-01-31T00:19:40.516Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 994720 bytes)
2025-01-31T00:19:43.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1008202 bytes)
2025-01-31T00:19:45.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1023694 bytes)
2025-01-31T00:19:47.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1039578 bytes)
2025-01-31T00:19:50.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1051929 bytes)
2025-01-31T00:19:52.891Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1066980 bytes)
2025-01-31T00:19:54.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1081938 bytes)
2025-01-31T00:19:56.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1097984 bytes)
2025-01-31T00:19:58.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1112908 bytes)
2025-01-31T00:20:00.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1126301 bytes)
2025-01-31T00:20:02.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1142399 bytes)
2025-01-31T00:20:04.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1158274 bytes)
2025-01-31T00:20:07.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1171730 bytes)
2025-01-31T00:20:09.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1184603 bytes)
2025-01-31T00:20:11.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1195773 bytes)
2025-01-31T00:20:15.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1208855 bytes)
2025-01-31T00:20:17.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1222261 bytes)
2025-01-31T00:20:19.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 1238245 bytes)
2025-01-31T00:20:21.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1254220 bytes)
2025-01-31T00:20:22.806Z [32minfo[39m: Memory Usage:
2025-01-31T00:20:22.808Z [32minfo[39m: rss: 127.27 MB
2025-01-31T00:20:22.809Z [32minfo[39m: heapTotal: 28.71 MB
2025-01-31T00:20:22.810Z [32minfo[39m: heapUsed: 27.1 MB
2025-01-31T00:20:22.810Z [32minfo[39m: external: 8.36 MB
2025-01-31T00:20:22.810Z [32minfo[39m: arrayBuffers: 0.43 MB
2025-01-31T00:20:23.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 84 bytes (total: 1267731 bytes)
2025-01-31T00:20:25.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1280556 bytes)
2025-01-31T00:20:27.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1293219 bytes)
2025-01-31T00:20:30.137Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1302675 bytes)
2025-01-31T00:20:32.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 1316066 bytes)
2025-01-31T00:20:34.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1331793 bytes)
2025-01-31T00:20:36.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 1345429 bytes)
2025-01-31T00:20:38.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 1358349 bytes)
2025-01-31T00:20:40.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1371349 bytes)
2025-01-31T00:20:42.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1386349 bytes)
2025-01-31T00:20:44.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1401959 bytes)
2025-01-31T00:20:46.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1414049 bytes)
2025-01-31T00:20:48.955Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1427700 bytes)
2025-01-31T00:20:50.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1443341 bytes)
2025-01-31T00:20:52.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 1459227 bytes)
2025-01-31T00:20:55.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1473350 bytes)
2025-01-31T00:20:57.141Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1486842 bytes)
2025-01-31T00:20:59.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1502247 bytes)
2025-01-31T00:21:01.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1516492 bytes)
2025-01-31T00:21:03.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1531316 bytes)
2025-01-31T00:21:04.372Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:21:08.668Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738282564282.pcm to MP3
2025-01-31T00:21:08.673Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738282564282.pcm.mp3","exists":true}
2025-01-31T00:21:08.674Z [32minfo[39m: [TranscriptionService] File stats:{"size":2820837,"created":"2025-01-31T00:21:06.940Z","modified":"2025-01-31T00:21:08.589Z"}
2025-01-31T00:21:08.679Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:21:08.679Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:21:09.373Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:21:48.987Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1389,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T00:21:48.988Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: ...
2025-01-31T00:21:48.988Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:21:49.993Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:21:51.577Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:21:51.578Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:21:53.581Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:21:54.373Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:21:54.374Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:21:58.381Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:21:59.218Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:21:59.219Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:22:05.222Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:07.093Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:07.096Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:22:07.097Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:142:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:22:07.117Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"77","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:22:07.118Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:22:07.118Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 77
2025-01-31T00:22:07.121Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738282927118.txt","size":0}
2025-01-31T00:22:07.121Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:22:07.122Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:95:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:53:13)"}
2025-01-31T00:22:07.122Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T00:22:07.122Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:22:07.122Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738282927122.pcm","directory":"temp"}
2025-01-31T00:22:07.123Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:22:07.123Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:22:07.123Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:22:07.123Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:22:08.596Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:22:08.598Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:22:10.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 14410 bytes)
2025-01-31T00:22:11.847Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:22:12.129Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"77","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:22:12.129Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:22:12.130Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:22:13.132Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:13.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 26515 bytes)
2025-01-31T00:22:14.294Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:14.295Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:22:16.021Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 36385 bytes)
2025-01-31T00:22:16.301Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:16.680Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:16.681Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:22:20.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 49308 bytes)
2025-01-31T00:22:20.684Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:21.148Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:21.148Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:22:25.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 61830 bytes)
2025-01-31T00:22:27.149Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:27.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 72010 bytes)
2025-01-31T00:22:27.856Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:27.858Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:22:27.859Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:22:27.881Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 77 delayed","stack":"Error: Missing lock for job 77 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:22:29.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 84366 bytes)
2025-01-31T00:22:31.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 96733 bytes)
2025-01-31T00:22:32.891Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"77","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:22:32.892Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:22:32.892Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:22:33.893Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:22:34.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 110107 bytes)
2025-01-31T00:22:34.864Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:22:34.865Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:29:24.599Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:29:24.659Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:29:24.751Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T00:29:24.782Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738282564282.pcm","age":500286.1740722656,"size":45162240}
2025-01-31T00:29:24.792Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738282564282.pcm.mp3","age":496053.5859375,"size":2820837}
2025-01-31T00:29:24.806Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738282927122.pcm","age":409124.9235839844,"size":3624960}
2025-01-31T00:29:24.811Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:29:24.813Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:29:24.814Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:29:25.223Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:29:25.284Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:29:42.149Z [32minfo[39m: Command Name: setkey
2025-01-31T00:29:42.154Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:29:42.404Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:29:42.406Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334681983737135167","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:29:42.408Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:29:44.996Z [32minfo[39m: Command Name: record
2025-01-31T00:29:45.000Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:29:45.187Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:29:45.439Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:29:45.440Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:29:45.441Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:29:45.441Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:29:45.441Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:29:45.441Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738283385441.pcm","directory":"temp"}
2025-01-31T00:29:45.501Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:29:45.503Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:29:45.503Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:29:45.503Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:29:45.503Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:29:45.503Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:29:45.504Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334681995619340288","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:29:45.504Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:29:45.567Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:29:45.569Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:29:45.815Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:29:47.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 16009 bytes)
2025-01-31T00:29:50.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 30246 bytes)
2025-01-31T00:29:52.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 45490 bytes)
2025-01-31T00:29:54.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 61308 bytes)
2025-01-31T00:29:54.917Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"77","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:29:54.919Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:29:54.920Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:29:55.923Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:29:56.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 75823 bytes)
2025-01-31T00:29:56.816Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:29:56.816Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:29:58.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 89417 bytes)
2025-01-31T00:29:58.825Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:29:59.130Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:29:59.130Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:30:00.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 104255 bytes)
2025-01-31T00:30:02.254Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 119641 bytes)
2025-01-31T00:30:03.140Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:30:04.066Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:30:04.066Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:30:04.257Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 135497 bytes)
2025-01-31T00:30:06.255Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 149791 bytes)
2025-01-31T00:30:08.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 165953 bytes)
2025-01-31T00:30:10.069Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:30:10.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 181741 bytes)
2025-01-31T00:30:10.747Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:30:10.752Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:30:10.753Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:30:10.776Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 77 failed","stack":"Error: Missing lock for job 77 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:30:12.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 195493 bytes)
2025-01-31T00:30:14.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 211335 bytes)
2025-01-31T00:30:16.356Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 227303 bytes)
2025-01-31T00:30:18.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 243124 bytes)
2025-01-31T00:30:20.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 258623 bytes)
2025-01-31T00:30:22.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 272802 bytes)
2025-01-31T00:30:24.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 288455 bytes)
2025-01-31T00:30:26.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 302416 bytes)
2025-01-31T00:30:28.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 316920 bytes)
2025-01-31T00:30:30.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 331958 bytes)
2025-01-31T00:30:32.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 346054 bytes)
2025-01-31T00:30:34.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 190 bytes (total: 361892 bytes)
2025-01-31T00:30:36.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 375419 bytes)
2025-01-31T00:30:38.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 390985 bytes)
2025-01-31T00:30:40.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 405957 bytes)
2025-01-31T00:30:42.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 419081 bytes)
2025-01-31T00:30:44.455Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 434961 bytes)
2025-01-31T00:30:46.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 68 bytes (total: 448894 bytes)
2025-01-31T00:30:48.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 464084 bytes)
2025-01-31T00:30:50.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 477652 bytes)
2025-01-31T00:30:52.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 489255 bytes)
2025-01-31T00:30:54.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 502549 bytes)
2025-01-31T00:30:56.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 518671 bytes)
2025-01-31T00:30:58.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 534453 bytes)
2025-01-31T00:31:00.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 548534 bytes)
2025-01-31T00:31:02.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 562568 bytes)
2025-01-31T00:31:04.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 578035 bytes)
2025-01-31T00:31:06.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 592950 bytes)
2025-01-31T00:31:08.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 606856 bytes)
2025-01-31T00:31:10.777Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 622200 bytes)
2025-01-31T00:31:12.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 637393 bytes)
2025-01-31T00:31:14.777Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 651915 bytes)
2025-01-31T00:31:16.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 62 bytes (total: 666234 bytes)
2025-01-31T00:31:18.777Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 680921 bytes)
2025-01-31T00:31:20.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 696866 bytes)
2025-01-31T00:31:23.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 709144 bytes)
2025-01-31T00:31:25.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 725129 bytes)
2025-01-31T00:31:27.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 739327 bytes)
2025-01-31T00:31:29.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 755259 bytes)
2025-01-31T00:31:31.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 770208 bytes)
2025-01-31T00:31:33.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 786220 bytes)
2025-01-31T00:31:35.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 801956 bytes)
2025-01-31T00:31:37.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 817937 bytes)
2025-01-31T00:31:39.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 833480 bytes)
2025-01-31T00:31:41.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 848174 bytes)
2025-01-31T00:31:43.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 862528 bytes)
2025-01-31T00:31:45.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 877371 bytes)
2025-01-31T00:31:47.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 893268 bytes)
2025-01-31T00:31:49.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 909165 bytes)
2025-01-31T00:31:51.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 923958 bytes)
2025-01-31T00:31:53.144Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 939000 bytes)
2025-01-31T00:31:55.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 953633 bytes)
2025-01-31T00:31:57.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 969510 bytes)
2025-01-31T00:31:59.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 984992 bytes)
2025-01-31T00:32:01.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 997258 bytes)
2025-01-31T00:32:03.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1011389 bytes)
2025-01-31T00:32:05.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1027004 bytes)
2025-01-31T00:32:07.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1042114 bytes)
2025-01-31T00:32:09.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1057072 bytes)
2025-01-31T00:32:12.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1071210 bytes)
2025-01-31T00:32:14.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1086963 bytes)
2025-01-31T00:32:16.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1102343 bytes)
2025-01-31T00:32:18.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1116498 bytes)
2025-01-31T00:32:20.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1130430 bytes)
2025-01-31T00:32:22.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1146164 bytes)
2025-01-31T00:32:24.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1162150 bytes)
2025-01-31T00:32:26.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 1174342 bytes)
2025-01-31T00:32:28.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1190612 bytes)
2025-01-31T00:32:30.741Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1204612 bytes)
2025-01-31T00:32:32.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1219828 bytes)
2025-01-31T00:32:34.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1233535 bytes)
2025-01-31T00:32:36.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1249081 bytes)
2025-01-31T00:32:38.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1264791 bytes)
2025-01-31T00:32:40.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1279209 bytes)
2025-01-31T00:32:42.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1294972 bytes)
2025-01-31T00:32:44.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1309941 bytes)
2025-01-31T00:32:45.509Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:32:45.513Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738283565510.pcm","directory":"temp"}
2025-01-31T00:32:45.519Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:32:45.520Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:32:45.520Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T00:32:45.521Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:32:46.530Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:32:49.553Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:32:49.554Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:32:50.507Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738283385441.pcm to MP3
2025-01-31T00:32:50.508Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738283385441.pcm.mp3","exists":true}
2025-01-31T00:32:50.509Z [32minfo[39m: [TranscriptionService] File stats:{"size":2304645,"created":"2025-01-31T00:32:49.149Z","modified":"2025-01-31T00:32:50.465Z"}
2025-01-31T00:32:50.511Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:32:50.511Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:32:51.532Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:32:51.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 14451 bytes)
2025-01-31T00:32:52.174Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:32:53.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 26998 bytes)
2025-01-31T00:32:55.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 42869 bytes)
2025-01-31T00:32:57.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 57994 bytes)
2025-01-31T00:32:59.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 68878 bytes)
2025-01-31T00:33:00.666Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2413,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T00:33:00.667Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: ...
2025-01-31T00:33:00.667Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:33:01.670Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:01.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 82428 bytes)
2025-01-31T00:33:02.003Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:02.004Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:33:03.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 97554 bytes)
2025-01-31T00:33:04.006Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:04.805Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:04.805Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:33:06.675Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 109970 bytes)
2025-01-31T00:33:08.675Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 124640 bytes)
2025-01-31T00:33:08.808Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:09.265Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:09.266Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:33:10.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 137413 bytes)
2025-01-31T00:33:12.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 153397 bytes)
2025-01-31T00:33:14.878Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 80 bytes (total: 166783 bytes)
2025-01-31T00:33:15.267Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:15.917Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:15.920Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:154:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:158:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:33:15.921Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:158:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:33:15.943Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"78","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:33:15.943Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:33:15.943Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 78
2025-01-31T00:33:15.953Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738283595943.txt","size":0}
2025-01-31T00:33:15.954Z [31merror[39m: [VoiceRecorder] Error processing recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:171:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:33:15.954Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: jobId is not defined{"stack":"ReferenceError: jobId is not defined\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:171:66)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:33:15.955Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T00:33:15.956Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:33:15.956Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T00:33:16.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 182614 bytes)
2025-01-31T00:33:18.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 197607 bytes)
2025-01-31T00:33:20.944Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"78","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:33:20.945Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:33:20.945Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:33:20.957Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:33:20.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 211395 bytes)
2025-01-31T00:33:21.950Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:22.797Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:22.798Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:33:22.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 227131 bytes)
2025-01-31T00:33:24.802Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:24.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 243156 bytes)
2025-01-31T00:33:25.093Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:25.094Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:33:27.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 256903 bytes)
2025-01-31T00:33:29.095Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:33:29.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 272905 bytes)
2025-01-31T00:33:29.718Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:33:29.718Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:35:08.344Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:35:08.389Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:35:08.480Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T00:35:08.506Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283385441.pcm","age":141857.06420898438,"size":34118400}
2025-01-31T00:35:08.521Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283385441.pcm.mp3","age":137908.06689453125,"size":2304645}
2025-01-31T00:35:08.534Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283565510.pcm","age":97037.28735351562,"size":7610880}
2025-01-31T00:35:08.536Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:35:08.537Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:35:08.538Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:35:08.571Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"78","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:35:08.572Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:35:08.572Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:35:08.949Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:35:08.997Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:35:09.576Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:35:09.586Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:35:09.589Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:35:09.613Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 78 delayed","stack":"Error: Missing lock for job 78 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:35:14.643Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"78","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:35:14.646Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:35:14.647Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:35:15.650Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:35:15.654Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:132:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:35:15.657Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:203:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:35:15.670Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 78 failed","stack":"Error: Missing lock for job 78 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:35:21.103Z [32minfo[39m: Command Name: setkey
2025-01-31T00:35:21.106Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:35:21.363Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:35:21.365Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334683405383762022","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:35:21.365Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:35:25.951Z [32minfo[39m: Command Name: record
2025-01-31T00:35:25.953Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:35:26.180Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:35:26.428Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:35:26.430Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:35:26.431Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:35:26.432Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:35:26.436Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:35:26.438Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738283726437.pcm","directory":"temp"}
2025-01-31T00:35:26.600Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:35:26.602Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:35:26.602Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:35:26.602Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:35:26.602Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:35:26.603Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:35:26.603Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334683425705295872","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:35:26.603Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:35:26.638Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:35:26.640Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:35:28.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 15274 bytes)
2025-01-31T00:35:30.515Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 28784 bytes)
2025-01-31T00:35:32.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 43072 bytes)
2025-01-31T00:35:34.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 57544 bytes)
2025-01-31T00:35:35.364Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:35:38.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 70971 bytes)
2025-01-31T00:35:40.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 192 bytes (total: 85662 bytes)
2025-01-31T00:35:42.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 100014 bytes)
2025-01-31T00:35:44.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 111338 bytes)
2025-01-31T00:35:47.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 121092 bytes)
2025-01-31T00:35:49.997Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 131904 bytes)
2025-01-31T00:35:54.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 143256 bytes)
2025-01-31T00:35:56.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 159322 bytes)
2025-01-31T00:35:58.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 173010 bytes)
2025-01-31T00:36:02.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 182239 bytes)
2025-01-31T00:36:04.880Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 194302 bytes)
2025-01-31T00:36:07.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 206166 bytes)
2025-01-31T00:36:09.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 221864 bytes)
2025-01-31T00:36:11.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 237465 bytes)
2025-01-31T00:36:13.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 66 bytes (total: 250489 bytes)
2025-01-31T00:36:16.400Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 259539 bytes)
2025-01-31T00:36:23.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 97 bytes (total: 268295 bytes)
2025-01-31T00:36:25.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 278511 bytes)
2025-01-31T00:36:27.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 291046 bytes)
2025-01-31T00:36:29.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 305479 bytes)
2025-01-31T00:36:31.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 321584 bytes)
2025-01-31T00:36:33.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 335674 bytes)
2025-01-31T00:36:35.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 351509 bytes)
2025-01-31T00:36:37.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 366775 bytes)
2025-01-31T00:36:40.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 380758 bytes)
2025-01-31T00:36:42.534Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 396743 bytes)
2025-01-31T00:36:44.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 411293 bytes)
2025-01-31T00:36:46.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 424233 bytes)
2025-01-31T00:36:48.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 440101 bytes)
2025-01-31T00:36:50.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 455630 bytes)
2025-01-31T00:36:52.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 470707 bytes)
2025-01-31T00:36:54.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 486422 bytes)
2025-01-31T00:36:56.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 500821 bytes)
2025-01-31T00:36:58.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 515574 bytes)
2025-01-31T00:37:01.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 527478 bytes)
2025-01-31T00:37:03.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 540336 bytes)
2025-01-31T00:37:05.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 552506 bytes)
2025-01-31T00:37:09.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 66 bytes (total: 565068 bytes)
2025-01-31T00:39:26.480Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:39:26.553Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:39:26.697Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T00:39:26.738Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283726437.pcm","age":132554.12255859375,"size":16404480}
2025-01-31T00:39:26.741Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:39:26.758Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:39:26.759Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:39:27.332Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:39:27.385Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:39:38.362Z [32minfo[39m: Command Name: setkey
2025-01-31T00:39:38.369Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:39:38.593Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:39:38.594Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334684484418670602","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:39:38.595Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:39:43.495Z [32minfo[39m: Command Name: record
2025-01-31T00:39:43.499Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:39:43.699Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:39:43.916Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:39:43.919Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:39:43.919Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:39:43.919Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:39:43.919Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:39:43.920Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738283983920.pcm","directory":"temp"}
2025-01-31T00:39:43.969Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:39:43.970Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:39:43.970Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:39:43.970Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:39:43.971Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:39:43.971Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:39:43.972Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334684506007011438","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:39:43.972Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:39:44.052Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:39:44.053Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:39:46.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 15460 bytes)
2025-01-31T00:39:48.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 31328 bytes)
2025-01-31T00:39:50.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 47290 bytes)
2025-01-31T00:39:52.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 61372 bytes)
2025-01-31T00:39:54.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 76266 bytes)
2025-01-31T00:39:56.039Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 90887 bytes)
2025-01-31T00:39:58.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 106552 bytes)
2025-01-31T00:39:58.973Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:40:00.115Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 121058 bytes)
2025-01-31T00:40:02.114Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 137099 bytes)
2025-01-31T00:40:04.114Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 153189 bytes)
2025-01-31T00:40:06.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 167529 bytes)
2025-01-31T00:40:08.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 181089 bytes)
2025-01-31T00:40:10.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 66 bytes (total: 195754 bytes)
2025-01-31T00:40:18.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 209129 bytes)
2025-01-31T00:40:20.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 222075 bytes)
2025-01-31T00:40:22.754Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 233664 bytes)
2025-01-31T00:40:26.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 244896 bytes)
2025-01-31T00:40:28.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 258688 bytes)
2025-01-31T00:40:30.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 272816 bytes)
2025-01-31T00:40:32.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 287269 bytes)
2025-01-31T00:40:34.837Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 302664 bytes)
2025-01-31T00:40:36.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 318113 bytes)
2025-01-31T00:40:38.840Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 331594 bytes)
2025-01-31T00:40:40.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 347232 bytes)
2025-01-31T00:40:42.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 359884 bytes)
2025-01-31T00:40:44.955Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 375457 bytes)
2025-01-31T00:40:46.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 390620 bytes)
2025-01-31T00:40:49.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 404750 bytes)
2025-01-31T00:40:51.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 418152 bytes)
2025-01-31T00:40:54.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 431705 bytes)
2025-01-31T00:40:56.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 443039 bytes)
2025-01-31T00:40:58.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 457018 bytes)
2025-01-31T00:41:01.442Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 470007 bytes)
2025-01-31T00:41:03.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 485308 bytes)
2025-01-31T00:41:05.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 498810 bytes)
2025-01-31T00:41:07.957Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 513782 bytes)
2025-01-31T00:41:10.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 526490 bytes)
2025-01-31T00:41:12.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 542495 bytes)
2025-01-31T00:41:14.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 557497 bytes)
2025-01-31T00:41:16.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 570815 bytes)
2025-01-31T00:41:20.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 582614 bytes)
2025-01-31T00:41:22.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 595830 bytes)
2025-01-31T00:41:24.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 611391 bytes)
2025-01-31T00:41:26.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 626309 bytes)
2025-01-31T00:41:28.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 641713 bytes)
2025-01-31T00:41:30.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 654283 bytes)
2025-01-31T00:41:38.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 668596 bytes)
2025-01-31T00:41:44.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 676972 bytes)
2025-01-31T00:41:47.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 690970 bytes)
2025-01-31T00:41:49.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 702418 bytes)
2025-01-31T00:41:51.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 715242 bytes)
2025-01-31T00:41:53.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 727545 bytes)
2025-01-31T00:41:55.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 742401 bytes)
2025-01-31T00:41:57.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 757966 bytes)
2025-01-31T00:41:59.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 771231 bytes)
2025-01-31T00:42:01.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 786620 bytes)
2025-01-31T00:42:03.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 801707 bytes)
2025-01-31T00:42:05.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 817109 bytes)
2025-01-31T00:42:08.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 831049 bytes)
2025-01-31T00:42:10.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 845395 bytes)
2025-01-31T00:42:12.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 861258 bytes)
2025-01-31T00:42:14.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 875597 bytes)
2025-01-31T00:42:16.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 890492 bytes)
2025-01-31T00:42:18.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 904775 bytes)
2025-01-31T00:42:20.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 919424 bytes)
2025-01-31T00:42:22.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 935189 bytes)
2025-01-31T00:42:24.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 947978 bytes)
2025-01-31T00:42:34.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 959893 bytes)
2025-01-31T00:42:36.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 975343 bytes)
2025-01-31T00:42:38.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 990395 bytes)
2025-01-31T00:42:40.576Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1003900 bytes)
2025-01-31T00:42:42.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 1015159 bytes)
2025-01-31T00:42:43.983Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:42:43.990Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738284163986.pcm","directory":"temp"}
2025-01-31T00:42:43.995Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:42:43.997Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:42:43.997Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T00:42:43.998Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:42:44.621Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:42:44.623Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:42:45.008Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:42:48.614Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:42:49.038Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738283983920.pcm to MP3
2025-01-31T00:42:49.040Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738283983920.pcm.mp3","exists":true}
2025-01-31T00:42:49.041Z [32minfo[39m: [TranscriptionService] File stats:{"size":1804701,"created":"2025-01-31T00:42:47.700Z","modified":"2025-01-31T00:42:48.982Z"}
2025-01-31T00:42:49.046Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:42:49.046Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:42:50.013Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:43:16.624Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":963,"hasContent":true}
2025-01-31T00:43:16.626Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: ...
2025-01-31T00:43:16.626Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:43:17.629Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:18.530Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:18.531Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:43:20.533Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:21.003Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:21.004Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:43:25.006Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:25.389Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:25.390Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:43:31.392Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:31.988Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:31.992Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:155:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:159:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:43:31.994Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:159:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:43:32.016Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"79","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:43:32.016Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:43:32.017Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 79
2025-01-31T00:43:32.021Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738284212017.txt","size":0}
2025-01-31T00:43:32.023Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T00:43:32.334Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T00:43:32.335Z [31merror[39m: [VoiceRecorder] Error processing recording: stats is not defined{"stack":"ReferenceError: stats is not defined\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:120:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:43:32.335Z [31merror[39m: [VoiceRecorder] Error processing rotated recording: stats is not defined{"stack":"ReferenceError: stats is not defined\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:120:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T00:43:32.336Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T00:43:32.337Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:43:32.337Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T00:43:37.025Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"79","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:43:37.026Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:43:37.026Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:43:37.339Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:43:38.028Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:38.394Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:38.395Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:43:40.395Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:41.079Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:41.080Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:43:45.085Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:45.448Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:45.448Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:43:51.452Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:51.995Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:51.998Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:155:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:43:51.999Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:43:52.031Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 79 delayed","stack":"Error: Missing lock for job 79 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:43:57.041Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"79","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:43:57.042Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:43:57.042Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:43:58.044Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:43:58.438Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:43:58.438Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:44:00.440Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:44:00.720Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:44:00.720Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:44:04.729Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:44:05.208Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:44:05.209Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:44:11.214Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:44:11.753Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:44:11.754Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:155:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:44:11.755Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary","stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:44:11.764Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 79 failed","stack":"Error: Missing lock for job 79 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:44:26.482Z [32minfo[39m: Memory Usage:
2025-01-31T00:44:26.485Z [32minfo[39m: rss: 140.34 MB
2025-01-31T00:44:26.485Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T00:44:26.486Z [32minfo[39m: heapUsed: 29.14 MB
2025-01-31T00:44:26.486Z [32minfo[39m: external: 9.98 MB
2025-01-31T00:44:26.486Z [32minfo[39m: arrayBuffers: 2.06 MB
2025-01-31T00:45:17.711Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:45:17.814Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:45:17.929Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T00:45:17.964Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283983920.pcm","age":152788.88818359375,"size":27793920}
2025-01-31T00:45:17.985Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738283983920.pcm.mp3","age":148802.12939453125,"size":1804701}
2025-01-31T00:45:17.988Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284163986.pcm","age":152788.57836914062,"size":72960}
2025-01-31T00:45:18.040Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:45:18.041Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:45:18.042Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:45:18.563Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:45:18.656Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:45:25.572Z [32minfo[39m: Command Name: setkey
2025-01-31T00:45:25.576Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:45:25.765Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:45:25.767Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334685940651655220","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:45:25.768Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:45:28.676Z [32minfo[39m: Command Name: record
2025-01-31T00:45:28.679Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:45:28.842Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:45:29.109Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:45:29.111Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:45:29.112Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:45:29.112Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:45:29.113Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:45:29.113Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738284329113.pcm","directory":"temp"}
2025-01-31T00:45:29.185Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:45:29.186Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:45:29.186Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:45:29.187Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:45:29.187Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:45:29.187Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:45:29.187Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334685953796608082","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:45:29.187Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:45:29.209Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:45:29.210Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:45:31.116Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 16081 bytes)
2025-01-31T00:45:32.459Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:45:34.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 30168 bytes)
2025-01-31T00:45:36.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 43936 bytes)
2025-01-31T00:45:38.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 60235 bytes)
2025-01-31T00:45:40.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 76162 bytes)
2025-01-31T00:45:42.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 91990 bytes)
2025-01-31T00:45:44.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 108298 bytes)
2025-01-31T00:45:46.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 121311 bytes)
2025-01-31T00:45:48.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 136148 bytes)
2025-01-31T00:45:50.394Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 152480 bytes)
2025-01-31T00:45:52.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 168337 bytes)
2025-01-31T00:45:54.479Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 182027 bytes)
2025-01-31T00:45:56.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 196584 bytes)
2025-01-31T00:45:58.481Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 212665 bytes)
2025-01-31T00:46:00.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 227695 bytes)
2025-01-31T00:46:02.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 242322 bytes)
2025-01-31T00:46:05.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 256861 bytes)
2025-01-31T00:46:07.416Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 272334 bytes)
2025-01-31T00:46:09.413Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 288410 bytes)
2025-01-31T00:46:13.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 302677 bytes)
2025-01-31T00:46:15.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 319089 bytes)
2025-01-31T00:46:22.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 333223 bytes)
2025-01-31T00:46:24.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 346561 bytes)
2025-01-31T00:46:26.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 359284 bytes)
2025-01-31T00:46:28.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 375396 bytes)
2025-01-31T00:46:30.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 388107 bytes)
2025-01-31T00:46:32.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 403674 bytes)
2025-01-31T00:46:34.255Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 418566 bytes)
2025-01-31T00:46:36.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 434408 bytes)
2025-01-31T00:46:38.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 448990 bytes)
2025-01-31T00:46:40.577Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 462159 bytes)
2025-01-31T00:46:42.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 478164 bytes)
2025-01-31T00:46:45.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 487481 bytes)
2025-01-31T00:46:48.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 500577 bytes)
2025-01-31T00:46:50.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 96 bytes (total: 514070 bytes)
2025-01-31T00:46:52.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 529483 bytes)
2025-01-31T00:46:54.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 541046 bytes)
2025-01-31T00:46:57.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 552849 bytes)
2025-01-31T00:46:59.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 567347 bytes)
2025-01-31T00:47:02.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 577780 bytes)
2025-01-31T00:47:04.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 593781 bytes)
2025-01-31T00:47:06.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 607267 bytes)
2025-01-31T00:47:09.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 617941 bytes)
2025-01-31T00:47:11.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 634248 bytes)
2025-01-31T00:47:14.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 645799 bytes)
2025-01-31T00:47:16.719Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 655405 bytes)
2025-01-31T00:47:18.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 664570 bytes)
2025-01-31T00:47:21.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 676387 bytes)
2025-01-31T00:47:23.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 690850 bytes)
2025-01-31T00:47:26.895Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 705176 bytes)
2025-01-31T00:47:35.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 715687 bytes)
2025-01-31T00:47:37.294Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 726099 bytes)
2025-01-31T00:47:40.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 735642 bytes)
2025-01-31T00:47:42.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 750041 bytes)
2025-01-31T00:47:44.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 763243 bytes)
2025-01-31T00:47:48.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 776753 bytes)
2025-01-31T00:47:50.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 790567 bytes)
2025-01-31T00:47:52.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 804750 bytes)
2025-01-31T00:47:54.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 819365 bytes)
2025-01-31T00:47:56.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 835100 bytes)
2025-01-31T00:47:58.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 848769 bytes)
2025-01-31T00:48:00.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 864578 bytes)
2025-01-31T00:48:02.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 879931 bytes)
2025-01-31T00:48:07.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 893943 bytes)
2025-01-31T00:48:09.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 907161 bytes)
2025-01-31T00:48:11.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 921848 bytes)
2025-01-31T00:48:14.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 935516 bytes)
2025-01-31T00:48:16.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 948996 bytes)
2025-01-31T00:48:19.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 962278 bytes)
2025-01-31T00:48:21.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 976705 bytes)
2025-01-31T00:48:23.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 992170 bytes)
2025-01-31T00:48:25.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1006991 bytes)
2025-01-31T00:48:27.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1022347 bytes)
2025-01-31T00:48:29.191Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:48:29.193Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738284509192.pcm","directory":"temp"}
2025-01-31T00:48:29.195Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:48:29.196Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:48:29.196Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T00:48:29.196Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:48:29.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1037703 bytes)
2025-01-31T00:48:30.205Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:48:30.206Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T00:48:30.208Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T00:48:33.532Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738284329113.pcm to MP3
2025-01-31T00:48:33.533Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738284329113.pcm.mp3","exists":true}
2025-01-31T00:48:33.533Z [32minfo[39m: [TranscriptionService] File stats:{"size":1906941,"created":"2025-01-31T00:48:32.455Z","modified":"2025-01-31T00:48:33.511Z"}
2025-01-31T00:48:33.535Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:48:33.535Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:48:35.206Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:48:35.212Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T00:48:39.532Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:48:39.533Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:48:41.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 15818 bytes)
2025-01-31T00:48:43.533Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 28632 bytes)
2025-01-31T00:48:45.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 43479 bytes)
2025-01-31T00:48:47.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 58944 bytes)
2025-01-31T00:48:49.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 72951 bytes)
2025-01-31T00:48:51.533Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 82906 bytes)
2025-01-31T00:48:52.101Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:48:54.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 95345 bytes)
2025-01-31T00:48:56.400Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":996,"hasContent":true}
2025-01-31T00:48:56.401Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: ...
2025-01-31T00:48:56.402Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:48:56.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 109070 bytes)
2025-01-31T00:48:57.405Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:48:57.749Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:48:57.749Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:48:58.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 125193 bytes)
2025-01-31T00:48:59.753Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:49:00.080Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:49:00.084Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:49:00.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 139007 bytes)
2025-01-31T00:49:02.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 191 bytes (total: 154686 bytes)
2025-01-31T00:49:04.088Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:49:04.618Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:49:04.618Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:49:04.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 168556 bytes)
2025-01-31T00:49:07.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 60 bytes (total: 182258 bytes)
2025-01-31T00:49:09.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 195455 bytes)
2025-01-31T00:49:10.620Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:49:11.059Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:49:11.063Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:155:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:159:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:49:11.064Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:159:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:111:78)"}
2025-01-31T00:49:11.082Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"80","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:49:11.083Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:49:11.083Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 80
2025-01-31T00:49:11.090Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738284551083.txt","size":0}
2025-01-31T00:49:11.091Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T00:49:11.327Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T00:52:24.280Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:52:24.317Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:52:24.386Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T00:52:24.405Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284329113.pcm","age":234109.72509765625,"size":28519680}
2025-01-31T00:52:24.414Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284329113.pcm.mp3","age":230797.43334960938,"size":1906941}
2025-01-31T00:52:24.422Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284509192.pcm","age":193010.55615234375,"size":5652480}
2025-01-31T00:52:24.423Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:52:24.425Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:52:24.426Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:52:24.431Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"80","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:52:24.433Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:52:24.433Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:52:24.824Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:52:24.887Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:52:25.442Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:52:25.453Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:133:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:52:25.455Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:52:25.478Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 80 delayed","stack":"Error: Missing lock for job 80 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:52:30.496Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"80","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:52:30.497Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T00:52:30.498Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:52:31.502Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:52:31.507Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"OpenAI API key not set","stack":"Error: OpenAI API key not set\n    at TranscriptionService.getOpenAIClient (file:///usr/src/app/src/services/TranscriptionService.js:23:19)\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:133:37)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:52:31.509Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: OpenAI API key not set","stack":"Error: Failed to generate summary: OpenAI API key not set\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T00:52:31.521Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 80 failed","stack":"Error: Missing lock for job 80 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T00:53:01.693Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T00:53:01.732Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T00:53:01.809Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T00:53:01.816Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T00:53:01.833Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T00:53:01.833Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T00:53:02.358Z [32minfo[39m: Bot initialized successfully
2025-01-31T00:53:02.408Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T00:53:26.291Z [32minfo[39m: Command Name: setkey
2025-01-31T00:53:26.296Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T00:53:26.552Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T00:53:26.556Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334687957000392725","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:53:26.558Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:53:30.552Z [32minfo[39m: Command Name: record
2025-01-31T00:53:30.556Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T00:53:30.787Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T00:53:31.067Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T00:53:31.069Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T00:53:31.070Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:53:31.070Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T00:53:31.071Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:53:31.071Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738284811071.pcm","directory":"temp"}
2025-01-31T00:53:31.151Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:53:31.152Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:53:31.153Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T00:53:31.153Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:53:31.154Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T00:53:31.154Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T00:53:31.155Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334687974918455337","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T00:53:31.155Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T00:53:31.195Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:53:31.196Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:53:33.035Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:53:33.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 14108 bytes)
2025-01-31T00:53:37.337Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 26429 bytes)
2025-01-31T00:53:39.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 38026 bytes)
2025-01-31T00:53:41.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 52854 bytes)
2025-01-31T00:53:43.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 66154 bytes)
2025-01-31T00:53:45.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 82512 bytes)
2025-01-31T00:53:49.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 92866 bytes)
2025-01-31T00:53:51.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 108912 bytes)
2025-01-31T00:53:53.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 124893 bytes)
2025-01-31T00:53:55.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 139005 bytes)
2025-01-31T00:53:57.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 151820 bytes)
2025-01-31T00:54:01.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 165936 bytes)
2025-01-31T00:54:03.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 182238 bytes)
2025-01-31T00:54:05.675Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 196923 bytes)
2025-01-31T00:54:07.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 194 bytes (total: 211584 bytes)
2025-01-31T00:54:12.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 225285 bytes)
2025-01-31T00:54:14.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 241060 bytes)
2025-01-31T00:54:16.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 257422 bytes)
2025-01-31T00:54:18.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 267753 bytes)
2025-01-31T00:54:20.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 283901 bytes)
2025-01-31T00:54:22.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 299976 bytes)
2025-01-31T00:54:24.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 316037 bytes)
2025-01-31T00:54:26.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 332179 bytes)
2025-01-31T00:54:28.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 347049 bytes)
2025-01-31T00:54:30.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 362457 bytes)
2025-01-31T00:54:32.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 378224 bytes)
2025-01-31T00:54:35.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 392301 bytes)
2025-01-31T00:54:39.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 404767 bytes)
2025-01-31T00:54:41.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 420799 bytes)
2025-01-31T00:54:43.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 436408 bytes)
2025-01-31T00:54:46.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 448303 bytes)
2025-01-31T00:54:54.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 461435 bytes)
2025-01-31T00:54:56.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 472577 bytes)
2025-01-31T00:54:58.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 485737 bytes)
2025-01-31T00:55:00.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 497085 bytes)
2025-01-31T00:55:02.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 511815 bytes)
2025-01-31T00:55:04.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 525118 bytes)
2025-01-31T00:55:07.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 538653 bytes)
2025-01-31T00:55:09.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 554278 bytes)
2025-01-31T00:55:12.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 568545 bytes)
2025-01-31T00:55:14.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 584179 bytes)
2025-01-31T00:55:16.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 599822 bytes)
2025-01-31T00:55:18.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 612805 bytes)
2025-01-31T00:55:20.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 628788 bytes)
2025-01-31T00:55:22.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 643702 bytes)
2025-01-31T00:55:24.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 657248 bytes)
2025-01-31T00:55:26.934Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 673354 bytes)
2025-01-31T00:55:28.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 686341 bytes)
2025-01-31T00:55:36.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 700788 bytes)
2025-01-31T00:55:38.972Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 715728 bytes)
2025-01-31T00:55:40.972Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 731139 bytes)
2025-01-31T00:55:43.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 744863 bytes)
2025-01-31T00:55:45.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 757995 bytes)
2025-01-31T00:55:47.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 774069 bytes)
2025-01-31T00:55:49.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 788585 bytes)
2025-01-31T00:55:51.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 804174 bytes)
2025-01-31T00:55:53.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 817569 bytes)
2025-01-31T00:55:58.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 829625 bytes)
2025-01-31T00:56:00.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 842853 bytes)
2025-01-31T00:56:02.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 854905 bytes)
2025-01-31T00:56:04.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 868709 bytes)
2025-01-31T00:56:07.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 879539 bytes)
2025-01-31T00:56:13.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 890918 bytes)
2025-01-31T00:56:15.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 902713 bytes)
2025-01-31T00:56:17.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 917752 bytes)
2025-01-31T00:56:19.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 933049 bytes)
2025-01-31T00:56:21.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 947634 bytes)
2025-01-31T00:56:23.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 961748 bytes)
2025-01-31T00:56:27.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 973641 bytes)
2025-01-31T00:56:29.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 987789 bytes)
2025-01-31T00:56:31.160Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T00:56:31.164Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738284991162.pcm","directory":"temp"}
2025-01-31T00:56:31.169Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T00:56:31.170Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T00:56:31.170Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T00:56:31.171Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T00:56:31.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 999332 bytes)
2025-01-31T00:56:32.174Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T00:56:33.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 1014341 bytes)
2025-01-31T00:56:34.634Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738284811071.pcm to MP3
2025-01-31T00:56:34.635Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738284811071.pcm.mp3","exists":true}
2025-01-31T00:56:34.635Z [32minfo[39m: [TranscriptionService] File stats:{"size":1872213,"created":"2025-01-31T00:56:33.538Z","modified":"2025-01-31T00:56:34.610Z"}
2025-01-31T00:56:34.638Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T00:56:34.638Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T00:56:35.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 1029905 bytes)
2025-01-31T00:56:37.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1043469 bytes)
2025-01-31T00:56:38.018Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T00:56:38.020Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T00:56:39.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1058780 bytes)
2025-01-31T00:56:40.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 15627 bytes)
2025-01-31T00:56:42.040Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1071836 bytes)
2025-01-31T00:56:42.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 28713 bytes)
2025-01-31T00:56:44.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1087495 bytes)
2025-01-31T00:56:44.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 44323 bytes)
2025-01-31T00:56:46.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1102636 bytes)
2025-01-31T00:56:46.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 59459 bytes)
2025-01-31T00:56:46.578Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":250,"hasContent":true}
2025-01-31T00:56:46.578Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: ...
2025-01-31T00:56:46.579Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":0,"transcriptContent":""}
2025-01-31T00:56:47.580Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:56:47.919Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:56:47.920Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T00:56:48.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1117539 bytes)
2025-01-31T00:56:48.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 74361 bytes)
2025-01-31T00:56:48.534Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T00:56:49.922Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:56:50.220Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:56:50.221Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T00:56:50.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1131319 bytes)
2025-01-31T00:56:50.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 88116 bytes)
2025-01-31T00:56:52.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1140405 bytes)
2025-01-31T00:56:52.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 97205 bytes)
2025-01-31T00:56:54.222Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:56:54.798Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:56:54.798Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T00:56:54.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1155096 bytes)
2025-01-31T00:56:54.936Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 111925 bytes)
2025-01-31T00:56:56.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1169325 bytes)
2025-01-31T00:56:56.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 125695 bytes)
2025-01-31T00:56:59.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1182808 bytes)
2025-01-31T00:56:59.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 139638 bytes)
2025-01-31T00:57:00.800Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI: 
2025-01-31T00:57:01.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1198647 bytes)
2025-01-31T00:57:01.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 155443 bytes)
2025-01-31T00:57:03.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1212594 bytes)
2025-01-31T00:57:03.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 169433 bytes)
2025-01-31T00:57:05.010Z [33mwarn[39m: [TranscriptionService] No transcript available, retrying...{"responseContent":"No transcript available."}
2025-01-31T00:57:05.013Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary","stack":"Error: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:155:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:101:78)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T00:57:05.014Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary{"stack":"Error: Failed to generate summary: Failed to generate summary\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:204:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:23)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:101:78)"}
2025-01-31T00:57:05.033Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"81","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T00:57:05.033Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T00:57:05.033Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 81
2025-01-31T00:57:05.037Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738285025033.txt","size":0}
2025-01-31T00:57:05.038Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T00:57:05.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1226437 bytes)
2025-01-31T00:57:05.236Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 183256 bytes)
2025-01-31T00:57:05.343Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T01:03:14.112Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T01:03:14.161Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T01:03:14.231Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T01:03:14.252Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284811071.pcm","age":368826.3542480469,"size":33434880}
2025-01-31T01:03:14.258Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284811071.pcm.mp3","age":399534.56103515625,"size":1872213}
2025-01-31T01:03:14.260Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738284991162.pcm","age":368826.25634765625,"size":5007360}
2025-01-31T01:03:14.262Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T01:03:14.269Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T01:03:14.270Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T01:03:14.313Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"81","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T01:03:14.315Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:03:14.318Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Empty transcript provided","stack":"Error: Empty transcript provided\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:109:23)\n    at file:///usr/src/app/src/services/SummaryJobService.js:24:65\n    at Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:30)\n    at handlers.<computed> (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T01:03:14.319Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Empty transcript provided","stack":"Error: Failed to generate summary: Empty transcript provided\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:217:19)\n    at file:///usr/src/app/src/services/SummaryJobService.js:24:65\n    at Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:30)\n    at handlers.<computed> (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","guildId":"1315144523336122469"}
2025-01-31T01:03:14.330Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 81 delayed","stack":"Error: Missing lock for job 81 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T01:03:14.737Z [32minfo[39m: Bot initialized successfully
2025-01-31T01:03:14.768Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T01:03:19.349Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"81","data":{"guildId":"1315144523336122469","transcript":""}}
2025-01-31T01:03:19.352Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:03:19.353Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Empty transcript provided","stack":"Error: Empty transcript provided\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:109:23)\n    at file:///usr/src/app/src/services/SummaryJobService.js:24:65\n    at Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:30)\n    at handlers.<computed> (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"},"context":{"transcriptLength":0,"transcriptSample":"No transcript"}}
2025-01-31T01:03:19.353Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Empty transcript provided","stack":"Error: Failed to generate summary: Empty transcript provided\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:217:19)\n    at file:///usr/src/app/src/services/SummaryJobService.js:24:65\n    at Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:30)\n    at handlers.<computed> (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:733:42)\n    at Queue.processJob (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/queue.js:1210:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","guildId":"1315144523336122469"}
2025-01-31T01:03:19.366Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 81 failed","stack":"Error: Missing lock for job 81 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T01:03:25.647Z [32minfo[39m: Command Name: setkey
2025-01-31T01:03:25.648Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T01:03:25.868Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T01:03:25.869Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334690470865014806","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:03:25.870Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:03:28.850Z [32minfo[39m: Command Name: record
2025-01-31T01:03:28.852Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T01:03:29.075Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T01:03:29.476Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T01:03:29.478Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T01:03:29.478Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:03:29.478Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:03:29.479Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:03:29.479Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738285409479.pcm","directory":"temp"}
2025-01-31T01:03:29.636Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:03:29.637Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:03:29.637Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:03:29.639Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:03:29.639Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T01:03:29.639Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T01:03:29.640Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334690484395970560","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:03:29.640Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:03:29.658Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:03:29.659Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:03:31.482Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 14547 bytes)
2025-01-31T01:03:33.185Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:03:33.624Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 28593 bytes)
2025-01-31T01:03:41.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 38588 bytes)
2025-01-31T01:03:43.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 53704 bytes)
2025-01-31T01:03:45.004Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 68648 bytes)
2025-01-31T01:03:47.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 84556 bytes)
2025-01-31T01:03:49.037Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 255 bytes (total: 99399 bytes)
2025-01-31T01:03:49.621Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 121781 bytes)
2025-01-31T01:03:51.622Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 137490 bytes)
2025-01-31T01:03:53.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 151721 bytes)
2025-01-31T01:03:55.690Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 165575 bytes)
2025-01-31T01:03:58.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 179241 bytes)
2025-01-31T01:04:05.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 190395 bytes)
2025-01-31T01:04:07.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 205383 bytes)
2025-01-31T01:04:09.410Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 217103 bytes)
2025-01-31T01:04:11.512Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 229172 bytes)
2025-01-31T01:04:13.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 244365 bytes)
2025-01-31T01:04:15.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 258201 bytes)
2025-01-31T01:04:17.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 274144 bytes)
2025-01-31T01:04:19.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 289315 bytes)
2025-01-31T01:04:21.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 305199 bytes)
2025-01-31T01:04:23.587Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 320254 bytes)
2025-01-31T01:04:25.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 333828 bytes)
2025-01-31T01:04:27.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 346885 bytes)
2025-01-31T01:04:29.744Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 362368 bytes)
2025-01-31T01:04:31.746Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 378284 bytes)
2025-01-31T01:04:33.745Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 393213 bytes)
2025-01-31T01:04:35.745Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 408971 bytes)
2025-01-31T01:04:37.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 422657 bytes)
2025-01-31T01:04:40.306Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 437014 bytes)
2025-01-31T01:04:42.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 452215 bytes)
2025-01-31T01:04:44.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 466201 bytes)
2025-01-31T01:04:46.308Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 478423 bytes)
2025-01-31T01:04:48.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 493192 bytes)
2025-01-31T01:04:50.808Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 506751 bytes)
2025-01-31T01:04:52.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 522110 bytes)
2025-01-31T01:04:54.805Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 536912 bytes)
2025-01-31T01:04:56.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 549954 bytes)
2025-01-31T01:04:58.889Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 566056 bytes)
2025-01-31T01:05:00.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 581300 bytes)
2025-01-31T01:05:02.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 597084 bytes)
2025-01-31T01:05:04.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 612992 bytes)
2025-01-31T01:05:06.965Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 625046 bytes)
2025-01-31T01:05:08.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 640990 bytes)
2025-01-31T01:05:10.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 656010 bytes)
2025-01-31T01:05:13.044Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 669476 bytes)
2025-01-31T01:05:15.044Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 685104 bytes)
2025-01-31T01:05:17.244Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 699401 bytes)
2025-01-31T01:05:19.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 715185 bytes)
2025-01-31T01:05:21.384Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 726736 bytes)
2025-01-31T01:05:23.384Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 742680 bytes)
2025-01-31T01:05:25.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 756192 bytes)
2025-01-31T01:05:27.484Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 771126 bytes)
2025-01-31T01:05:30.005Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 784433 bytes)
2025-01-31T01:05:32.007Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 800285 bytes)
2025-01-31T01:05:34.286Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 814658 bytes)
2025-01-31T01:05:36.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 825741 bytes)
2025-01-31T01:05:42.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 837918 bytes)
2025-01-31T01:05:44.142Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 852384 bytes)
2025-01-31T01:05:46.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 868102 bytes)
2025-01-31T01:05:48.144Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 883404 bytes)
2025-01-31T01:05:50.144Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 897922 bytes)
2025-01-31T01:05:52.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 913645 bytes)
2025-01-31T01:05:54.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 925772 bytes)
2025-01-31T01:06:05.185Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 936866 bytes)
2025-01-31T01:06:07.186Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 952964 bytes)
2025-01-31T01:06:09.185Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 968909 bytes)
2025-01-31T01:06:11.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 982356 bytes)
2025-01-31T01:06:13.503Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 118 bytes (total: 996703 bytes)
2025-01-31T01:06:17.504Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1005794 bytes)
2025-01-31T01:06:19.626Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1017778 bytes)
2025-01-31T01:06:21.705Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 1029964 bytes)
2025-01-31T01:06:29.627Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:06:29.631Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738285589630.pcm","directory":"temp"}
2025-01-31T01:06:29.637Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:06:29.639Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:06:29.639Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:06:29.640Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:06:29.866Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:06:29.867Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:06:30.325Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1039224 bytes)
2025-01-31T01:06:30.646Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:06:31.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 15800 bytes)
2025-01-31T01:06:32.323Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 191 bytes (total: 1054537 bytes)
2025-01-31T01:06:33.109Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738285409479.pcm to MP3
2025-01-31T01:06:33.109Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738285409479.pcm.mp3","exists":true}
2025-01-31T01:06:33.110Z [32minfo[39m: [TranscriptionService] File stats:{"size":1873101,"created":"2025-01-31T01:06:32.029Z","modified":"2025-01-31T01:06:33.082Z"}
2025-01-31T01:06:33.112Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:06:33.112Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:06:33.619Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:06:33.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 31432 bytes)
2025-01-31T01:06:34.329Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1070212 bytes)
2025-01-31T01:06:37.687Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 45258 bytes)
2025-01-31T01:06:38.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1082549 bytes)
2025-01-31T01:06:39.687Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 59461 bytes)
2025-01-31T01:06:40.146Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1098743 bytes)
2025-01-31T01:06:41.684Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 75055 bytes)
2025-01-31T01:06:42.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1112462 bytes)
2025-01-31T01:06:43.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 89334 bytes)
2025-01-31T01:06:44.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1128024 bytes)
2025-01-31T01:06:45.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 104477 bytes)
2025-01-31T01:06:46.284Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1143553 bytes)
2025-01-31T01:06:47.575Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1167,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T01:06:47.577Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T01:06:47.578Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T01:06:47.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 120433 bytes)
2025-01-31T01:06:48.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1157625 bytes)
2025-01-31T01:06:49.583Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738285409479.pcm.mp3","exists":true}
2025-01-31T01:06:49.590Z [32minfo[39m: [TranscriptionService] File stats:{"size":1873101,"created":"2025-01-31T01:06:32.029Z","modified":"2025-01-31T01:06:33.082Z"}
2025-01-31T01:06:49.591Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:06:49.592Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:06:49.926Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 134451 bytes)
2025-01-31T01:06:50.389Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1173329 bytes)
2025-01-31T01:06:57.784Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":443,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T01:06:57.785Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T01:06:57.785Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T01:06:59.103Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 144955 bytes)
2025-01-31T01:06:59.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1184182 bytes)
2025-01-31T01:07:01.183Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 158498 bytes)
2025-01-31T01:07:01.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1197799 bytes)
2025-01-31T01:07:01.787Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738285409479.pcm.mp3","exists":true}
2025-01-31T01:07:01.788Z [32minfo[39m: [TranscriptionService] File stats:{"size":1873101,"created":"2025-01-31T01:06:32.029Z","modified":"2025-01-31T01:06:33.082Z"}
2025-01-31T01:07:01.788Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:07:01.788Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:07:03.191Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 174363 bytes)
2025-01-31T01:07:03.643Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1212906 bytes)
2025-01-31T01:07:05.188Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 105 bytes (total: 189453 bytes)
2025-01-31T01:07:05.722Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1227048 bytes)
2025-01-31T01:07:07.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 202192 bytes)
2025-01-31T01:07:07.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1241406 bytes)
2025-01-31T01:07:10.626Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 216240 bytes)
2025-01-31T01:07:11.088Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1255472 bytes)
2025-01-31T01:07:12.706Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 230058 bytes)
2025-01-31T01:07:13.165Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1269384 bytes)
2025-01-31T01:07:15.005Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 244095 bytes)
2025-01-31T01:07:15.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1282815 bytes)
2025-01-31T01:07:16.165Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1720,"hasContent":true,"prompt":"Please transcribe the audio, clearly indicating different speakers by prefixing their lines with their usernames. \n                    \n                    For example, if the user is called \"John\", and they say \"Hello, how are you?\", you would transcribe it as \"John: Hello, how are you?\".\n                    \n                    If you cannot infer who is speaking, just use user1, user2, and so on.\n                    for example, if two people are talking, you would transcribe it as \"user1: Hello, how are you? user2: I'm fine, thank you.\"\n                    If there is no audio, return \"No audio available\"."}
2025-01-31T01:13:48.391Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T01:13:48.438Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T01:13:48.507Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T01:13:48.532Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738285409479.pcm","age":392662.28466796875,"size":34464000}
2025-01-31T01:13:48.545Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738285409479.pcm.mp3","age":435344.3308105469,"size":1873101}
2025-01-31T01:13:48.556Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738285589630.pcm","age":392662.2326660156,"size":6673920}
2025-01-31T01:13:48.558Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T01:13:48.561Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T01:13:48.561Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T01:13:48.988Z [32minfo[39m: Bot initialized successfully
2025-01-31T01:13:49.031Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T01:13:50.392Z [32minfo[39m: Command Name: setkey
2025-01-31T01:13:50.393Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T01:13:50.561Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T01:13:50.563Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334693091415818363","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:13:50.564Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:14:05.039Z [32minfo[39m: Command Name: record
2025-01-31T01:14:05.046Z [32minfo[39m: [handleReply] Interaction state: ❌ **Error:** You need to be in a voice channel to use this command!{"deferred":false,"replied":false,"ephemeral":true,"interactionId":"1334693152358928476","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:14:05.047Z [32minfo[39m: [handleReply] Attempting direct reply
2025-01-31T01:14:16.283Z [32minfo[39m: Command Name: record
2025-01-31T01:14:16.288Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T01:14:16.657Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T01:14:16.944Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T01:14:16.945Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T01:14:16.945Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:14:16.945Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:14:16.946Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:14:16.946Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286056946.pcm","directory":"temp"}
2025-01-31T01:14:17.019Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:14:17.020Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:14:17.020Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:14:17.020Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:14:17.020Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T01:14:17.020Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T01:14:17.020Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334693199901360158","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:14:17.020Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:14:17.070Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:14:17.071Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:14:18.349Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:14:19.241Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 10225 bytes)
2025-01-31T01:14:21.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 25118 bytes)
2025-01-31T01:14:23.623Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 38399 bytes)
2025-01-31T01:14:25.784Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 48638 bytes)
2025-01-31T01:14:29.341Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 57750 bytes)
2025-01-31T01:14:31.341Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 69377 bytes)
2025-01-31T01:14:35.543Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 80242 bytes)
2025-01-31T01:14:37.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 92408 bytes)
2025-01-31T01:14:39.843Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 42 bytes (total: 106034 bytes)
2025-01-31T01:14:40.998Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 255 bytes (total: 123633 bytes)
2025-01-31T01:14:42.963Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 136953 bytes)
2025-01-31T01:14:44.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 149194 bytes)
2025-01-31T01:14:46.963Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 163676 bytes)
2025-01-31T01:14:48.971Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 45 bytes (total: 177578 bytes)
2025-01-31T01:14:50.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 191609 bytes)
2025-01-31T01:14:52.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 203154 bytes)
2025-01-31T01:14:55.041Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 217158 bytes)
2025-01-31T01:14:57.043Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 233177 bytes)
2025-01-31T01:14:59.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 243438 bytes)
2025-01-31T01:15:01.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 259157 bytes)
2025-01-31T01:15:03.582Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 273373 bytes)
2025-01-31T01:15:06.002Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 287772 bytes)
2025-01-31T01:15:08.081Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 301157 bytes)
2025-01-31T01:15:10.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 316959 bytes)
2025-01-31T01:15:12.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 330126 bytes)
2025-01-31T01:15:14.242Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 342471 bytes)
2025-01-31T01:15:16.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 356626 bytes)
2025-01-31T01:15:18.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 369409 bytes)
2025-01-31T01:15:21.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 385068 bytes)
2025-01-31T01:15:23.559Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 399140 bytes)
2025-01-31T01:15:25.564Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 414210 bytes)
2025-01-31T01:15:27.563Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 428538 bytes)
2025-01-31T01:15:29.563Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 442896 bytes)
2025-01-31T01:15:31.563Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 458180 bytes)
2025-01-31T01:15:33.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 472508 bytes)
2025-01-31T01:15:35.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 488433 bytes)
2025-01-31T01:15:37.564Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 503972 bytes)
2025-01-31T01:15:39.680Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 517780 bytes)
2025-01-31T01:15:41.683Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 533845 bytes)
2025-01-31T01:15:43.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 548928 bytes)
2025-01-31T01:15:45.683Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 563801 bytes)
2025-01-31T01:15:47.682Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 82 bytes (total: 578752 bytes)
2025-01-31T01:15:49.683Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 593534 bytes)
2025-01-31T01:15:51.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 607673 bytes)
2025-01-31T01:15:53.782Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 622179 bytes)
2025-01-31T01:15:55.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 636506 bytes)
2025-01-31T01:15:58.201Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 84 bytes (total: 647284 bytes)
2025-01-31T01:16:00.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 661358 bytes)
2025-01-31T01:16:02.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 676267 bytes)
2025-01-31T01:16:04.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 690815 bytes)
2025-01-31T01:16:06.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 704205 bytes)
2025-01-31T01:16:08.363Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 717544 bytes)
2025-01-31T01:16:10.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 733089 bytes)
2025-01-31T01:16:12.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 744218 bytes)
2025-01-31T01:16:15.041Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 758826 bytes)
2025-01-31T01:16:17.041Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 774759 bytes)
2025-01-31T01:16:19.324Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 786722 bytes)
2025-01-31T01:16:21.321Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 802356 bytes)
2025-01-31T01:16:23.322Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 817005 bytes)
2025-01-31T01:16:25.321Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 832539 bytes)
2025-01-31T01:16:27.401Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 846392 bytes)
2025-01-31T01:16:29.400Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 858788 bytes)
2025-01-31T01:16:31.400Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 872878 bytes)
2025-01-31T01:16:33.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 886944 bytes)
2025-01-31T01:16:35.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 901128 bytes)
2025-01-31T01:16:37.565Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 915591 bytes)
2025-01-31T01:16:39.563Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 931231 bytes)
2025-01-31T01:16:41.561Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 946918 bytes)
2025-01-31T01:16:43.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 962673 bytes)
2025-01-31T01:16:45.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 977887 bytes)
2025-01-31T01:16:47.565Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 993868 bytes)
2025-01-31T01:16:50.543Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 1006282 bytes)
2025-01-31T01:16:53.061Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1020317 bytes)
2025-01-31T01:16:55.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1035478 bytes)
2025-01-31T01:16:57.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1049707 bytes)
2025-01-31T01:16:59.721Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1061309 bytes)
2025-01-31T01:17:04.083Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1075690 bytes)
2025-01-31T01:17:06.080Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1089842 bytes)
2025-01-31T01:17:08.082Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1103220 bytes)
2025-01-31T01:17:10.084Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1119118 bytes)
2025-01-31T01:17:12.080Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1134666 bytes)
2025-01-31T01:17:14.322Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1147799 bytes)
2025-01-31T01:17:16.324Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1162856 bytes)
2025-01-31T01:17:17.032Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:17:17.038Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286237033.pcm","directory":"temp"}
2025-01-31T01:17:17.044Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:17:17.045Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:17:17.046Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:17:17.046Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:17:17.714Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:17:17.716Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:17:18.050Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:17:19.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1176701 bytes)
2025-01-31T01:17:19.701Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 15367 bytes)
2025-01-31T01:17:20.403Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:17:20.684Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286056946.pcm to MP3
2025-01-31T01:17:20.685Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286056946.pcm.mp3","exists":true}
2025-01-31T01:17:20.686Z [32minfo[39m: [TranscriptionService] File stats:{"size":2089317,"created":"2025-01-31T01:17:19.428Z","modified":"2025-01-31T01:17:20.658Z"}
2025-01-31T01:17:20.688Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:17:20.688Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:17:22.342Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1188860 bytes)
2025-01-31T01:17:22.542Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 27489 bytes)
2025-01-31T01:17:24.339Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1201023 bytes)
2025-01-31T01:17:24.902Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 39119 bytes)
2025-01-31T01:17:27.640Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1214583 bytes)
2025-01-31T01:17:27.859Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 53361 bytes)
2025-01-31T01:17:30.840Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1224576 bytes)
2025-01-31T01:17:31.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 63268 bytes)
2025-01-31T01:17:32.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 1238786 bytes)
2025-01-31T01:17:33.042Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 77069 bytes)
2025-01-31T01:17:34.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1252592 bytes)
2025-01-31T01:17:35.105Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 91111 bytes)
2025-01-31T01:17:36.941Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1263917 bytes)
2025-01-31T01:17:38.161Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 101707 bytes)
2025-01-31T01:17:40.261Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1272773 bytes)
2025-01-31T01:17:40.460Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 111325 bytes)
2025-01-31T01:17:42.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1285027 bytes)
2025-01-31T01:17:43.023Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 66 bytes (total: 122963 bytes)
2025-01-31T01:17:44.903Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 190 bytes (total: 1296966 bytes)
2025-01-31T01:17:45.102Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 135431 bytes)
2025-01-31T01:17:45.727Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2544,"hasContent":true,"text":"user1. No! user2. Say it. user1. No, it's not fetch. It's sledge. user2. I never heard of it. user1."}
2025-01-31T01:17:45.728Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: user1. No! user2. Say it. user1. No, it's not fetch. It's sledge. user2. I never heard of it. user1. What do you call it? user2. A cat-calling thing. user1. Oh, cute! user2. Nice looks. user1. I've be...
2025-01-31T01:17:45.728Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2544,"transcriptContent":"user1. No! user2. Say it. user1. No, it's not fetch. It's sledge. user2. I never heard of it. user1."}
2025-01-31T01:17:46.730Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:17:46.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1312010 bytes)
2025-01-31T01:17:47.102Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 150758 bytes)
2025-01-31T01:17:48.648Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:17:48.649Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2544,"transcriptLength":2544,"summary":"user1. No! user2. Say it. user1. No, it's not fetch. It's sledge. user2. I never heard of it. user1."}
2025-01-31T01:17:48.654Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738286268649.txt","size":2544}
2025-01-31T01:17:48.656Z [33mwarn[39m: [ChannelService] Message is too long (2581 chars), splitting into chunks
2025-01-31T01:17:48.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1327974 bytes)
2025-01-31T01:17:49.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 166696 bytes)
2025-01-31T01:17:49.336Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: user1. No! user2. Say it. user1. No, it's not fetch. It's sledge. user2. I never heard of it. user1. What do you call it? user2. A cat-calling thing. user1. Oh, cute! user2. Nice looks. user1. I've been working on it, so... user2. Dogs are not cats. user1. By the way, I've heard you, Miss? user2. Dog is a good thing. user1. And... user2. A cat is just the opposite. user1. She doesn't know what she's talking about. user1. She doesn't know what she's talking about. user2. Dogs are cats. user1. Either. user2. Either. user1. I guess I'm fine. user2. I guess. user2. Next question. user1. I'm straight down. user2. I'm straight down. user2. Can you explain? user1. Mark, tell her your dog is also trained in conversion therapy. user2. My dog is trained in conversion therapy. user1. Gotcha! user2. Yes, I gotcha. user1. What was that? user2. It was a conversion therapy dog. user1. You've heard of therapy dogs? user2. Yeah. user1. You also have conversion therapy dogs. user2. I got that. user1. If it catches me looking at a dude, it growls. user2. If my dog catches me checking out a dude, it growls. user1. Really? user2. Yes. user2. I don't know what's going to happen when my dog dies one day. user1. My urges may swell. user2. My urges... user1. May swell. user2. Might swell. user1. All right. Let's rock and roll. user2. First question. Tell me some things you're passionate about. user1. I'm really passionate about history. user2. Very cool. Great. user2. So, Sal, same question. Tell me some things you're passionate about. user1. Highway widening. user2. Highway widening. user1. Literally adding lanes. user2. Just the flow of traffic. user1. Look at her face. user2. I don't find a lot of people who share that interest with me, but I am obsessive about this. user1. Interesting. Kate, what is your dream job? user2. David Attenborough's job. I'll do what he does. user1. Sal, same question. user2. I forgot the Italian word for it, but it translates to pasta tits. user1. I forgot the Italian word for it, but it translates to pasta tits. user2. It combines two of the things I love most. user1. Yeah. I mean, it combines two of the things I love the most. Pasta. user2. It fits. user1. Who is living the life that you want to live right now? user2. If I'm being 100 percent. user1. If I'm being 100 percent? user2. My ex-wife. user1. My ex-wife. user2. She dead. user1. Boom. user2. Pasta tits. user1. If I'm being 100 percent. user2. My ex-wife. user1. My ex-wife. user2. She dead. user1. Boom. user2. She dead. user1. Boom.

2025-01-31T01:17:49.339Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:17:49.344Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:17:49.357Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286056946.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:17:49.358Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286056946.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:17:54.346Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:18:48.393Z [32minfo[39m: Memory Usage:
2025-01-31T01:18:48.395Z [32minfo[39m: rss: 138.41 MB
2025-01-31T01:18:48.395Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T01:18:48.395Z [32minfo[39m: heapUsed: 28.3 MB
2025-01-31T01:18:48.395Z [32minfo[39m: external: 10.22 MB
2025-01-31T01:18:48.395Z [32minfo[39m: arrayBuffers: 2.3 MB
2025-01-31T01:20:17.024Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:20:17.031Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286417029.pcm","directory":"temp"}
2025-01-31T01:20:17.035Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:20:17.036Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:20:17.036Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:20:17.037Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:20:18.047Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:20:19.584Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286237033.pcm to MP3
2025-01-31T01:20:19.584Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286237033.pcm.mp3","exists":true}
2025-01-31T01:20:19.585Z [32minfo[39m: [TranscriptionService] File stats:{"size":313629,"created":"2025-01-31T01:20:19.317Z","modified":"2025-01-31T01:20:19.562Z"}
2025-01-31T01:20:19.585Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:20:19.585Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:20:19.647Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:20:19.648Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:20:20.991Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:20:21.824Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 11231 bytes)
2025-01-31T01:20:23.822Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 27378 bytes)
2025-01-31T01:20:25.922Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 38720 bytes)
2025-01-31T01:20:27.922Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 54540 bytes)
2025-01-31T01:20:29.587Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":294,"hasContent":true,"text":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, the"}
2025-01-31T01:20:29.588Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: User1 changed to question 1, or became unsure of the question, and when the user did not answer, they were requested to type any additional constituent statements at the end of their vivo interview. U...
2025-01-31T01:20:29.589Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":294,"transcriptContent":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, the"}
2025-01-31T01:20:30.592Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:20:31.293Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 68252 bytes)
2025-01-31T01:20:32.108Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:32.108Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:20:33.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 83916 bytes)
2025-01-31T01:20:34.112Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:20:34.441Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:34.441Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:20:35.283Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 97543 bytes)
2025-01-31T01:20:37.280Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 113033 bytes)
2025-01-31T01:20:38.444Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:20:39.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 127503 bytes)
2025-01-31T01:20:40.215Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:40.215Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:20:41.761Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 118 bytes (total: 140764 bytes)
2025-01-31T01:20:43.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 154338 bytes)
2025-01-31T01:20:45.920Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 170167 bytes)
2025-01-31T01:20:46.221Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:20:47.003Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:47.007Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"},"context":{"transcriptLength":294,"transcriptSample":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, the"}}
2025-01-31T01:20:47.008Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary after all retries{"stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"}
2025-01-31T01:20:47.031Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"82","data":{"guildId":"1315144523336122469","transcript":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, they were requested to type any additional constituent statements at the end of their vivo interview. User2 is confused and says, ано Title Microsoft Office Word Document MSWordDoc Word.Document.8\n"}}
2025-01-31T01:20:47.031Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T01:20:47.031Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 82
2025-01-31T01:20:47.035Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738286447031.txt","size":294}
2025-01-31T01:20:47.035Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:20:47.215Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: User1 changed to question 1, or became unsure of the question, and when the user did not answer, they were requested to type any additional constituent statements at the end of their vivo interview. User2 is confused and says, ано Title Microsoft Office Word Document MSWordDoc Word.Document.8

2025-01-31T01:20:47.216Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:20:47.217Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:20:47.219Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286237033.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:20:47.220Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286237033.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:20:47.925Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 183441 bytes)
2025-01-31T01:20:49.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 198571 bytes)
2025-01-31T01:20:52.044Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"82","data":{"guildId":"1315144523336122469","transcript":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, they were requested to type any additional constituent statements at the end of their vivo interview. User2 is confused and says, ано Title Microsoft Office Word Document MSWordDoc Word.Document.8\n"}}
2025-01-31T01:20:52.045Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:20:52.045Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":294,"transcriptContent":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, the"}
2025-01-31T01:20:52.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 211377 bytes)
2025-01-31T01:20:52.221Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:20:53.046Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:20:54.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 225875 bytes)
2025-01-31T01:20:54.376Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:54.377Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:20:56.381Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:20:56.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 238441 bytes)
2025-01-31T01:20:57.111Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:20:57.112Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:20:58.880Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 252093 bytes)
2025-01-31T01:21:00.963Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 266967 bytes)
2025-01-31T01:21:01.112Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:21:02.766Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:21:02.766Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":294,"transcriptLength":294,"summary":"User1 changed to question 1, or became unsure of the question, and when the user did not answer, the"}
2025-01-31T01:21:02.766Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:21:02.957Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T01:21:02.961Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 282899 bytes)
2025-01-31T01:21:02.963Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"82","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738286462766}}
2025-01-31T01:21:04.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 297315 bytes)
2025-01-31T01:21:07.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 308496 bytes)
2025-01-31T01:21:09.061Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 322762 bytes)
2025-01-31T01:21:12.201Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 334773 bytes)
2025-01-31T01:21:14.202Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 349544 bytes)
2025-01-31T01:21:18.920Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 358030 bytes)
2025-01-31T01:21:23.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 367916 bytes)
2025-01-31T01:21:25.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 382783 bytes)
2025-01-31T01:21:27.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 393590 bytes)
2025-01-31T01:21:29.381Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 409630 bytes)
2025-01-31T01:21:31.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 425549 bytes)
2025-01-31T01:21:33.380Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 439213 bytes)
2025-01-31T01:21:35.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 451247 bytes)
2025-01-31T01:21:38.139Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 463929 bytes)
2025-01-31T01:21:40.359Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 475537 bytes)
2025-01-31T01:21:42.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 491465 bytes)
2025-01-31T01:21:44.361Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 507532 bytes)
2025-01-31T01:21:46.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 522605 bytes)
2025-01-31T01:21:48.361Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 537437 bytes)
2025-01-31T01:21:50.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 551981 bytes)
2025-01-31T01:21:52.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 567837 bytes)
2025-01-31T01:21:54.719Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 580258 bytes)
2025-01-31T01:21:56.720Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 596156 bytes)
2025-01-31T01:21:59.141Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 608103 bytes)
2025-01-31T01:22:05.100Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 618603 bytes)
2025-01-31T01:22:07.181Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 634118 bytes)
2025-01-31T01:22:09.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 649619 bytes)
2025-01-31T01:22:11.178Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 663489 bytes)
2025-01-31T01:22:13.339Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 676938 bytes)
2025-01-31T01:22:15.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 688700 bytes)
2025-01-31T01:22:17.960Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 701173 bytes)
2025-01-31T01:22:19.960Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 717200 bytes)
2025-01-31T01:22:21.960Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 731253 bytes)
2025-01-31T01:22:25.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 743651 bytes)
2025-01-31T01:22:27.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 756686 bytes)
2025-01-31T01:22:30.382Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 769116 bytes)
2025-01-31T01:22:34.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 781739 bytes)
2025-01-31T01:22:36.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 796534 bytes)
2025-01-31T01:22:38.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 810976 bytes)
2025-01-31T01:22:40.144Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 825204 bytes)
2025-01-31T01:22:42.340Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 838624 bytes)
2025-01-31T01:22:44.424Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 852620 bytes)
2025-01-31T01:22:47.220Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 864810 bytes)
2025-01-31T01:22:49.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 880462 bytes)
2025-01-31T01:22:51.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 896018 bytes)
2025-01-31T01:22:53.222Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 910045 bytes)
2025-01-31T01:22:55.660Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 923123 bytes)
2025-01-31T01:22:58.100Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 936580 bytes)
2025-01-31T01:23:00.201Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 948887 bytes)
2025-01-31T01:23:02.201Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 963861 bytes)
2025-01-31T01:23:04.202Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 977543 bytes)
2025-01-31T01:23:06.200Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 993035 bytes)
2025-01-31T01:23:08.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1005639 bytes)
2025-01-31T01:23:10.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1021464 bytes)
2025-01-31T01:23:12.422Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1036448 bytes)
2025-01-31T01:23:14.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1051958 bytes)
2025-01-31T01:23:16.602Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 60 bytes (total: 1063588 bytes)
2025-01-31T01:23:17.027Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:23:17.031Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286597029.pcm","directory":"temp"}
2025-01-31T01:23:17.036Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:23:17.038Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:23:17.039Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:23:17.039Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:23:18.041Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:23:18.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1076991 bytes)
2025-01-31T01:23:19.778Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:23:19.780Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:23:20.419Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286417029.pcm to MP3
2025-01-31T01:23:20.419Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286417029.pcm.mp3","exists":true}
2025-01-31T01:23:20.420Z [32minfo[39m: [TranscriptionService] File stats:{"size":1938021,"created":"2025-01-31T01:23:19.266Z","modified":"2025-01-31T01:23:20.400Z"}
2025-01-31T01:23:20.420Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:23:20.420Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:23:20.821Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1087518 bytes)
2025-01-31T01:23:21.781Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 13084 bytes)
2025-01-31T01:23:22.083Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:23:24.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1101465 bytes)
2025-01-31T01:23:25.941Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 26219 bytes)
2025-01-31T01:23:26.922Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1115657 bytes)
2025-01-31T01:23:27.940Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 41927 bytes)
2025-01-31T01:23:33.278Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1129989 bytes)
2025-01-31T01:23:34.304Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 55786 bytes)
2025-01-31T01:23:35.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1145303 bytes)
2025-01-31T01:23:35.765Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1824,"hasContent":true,"text":"I'm taking that as a laugh. They'll never lower in value, they only go up. Brian, what's something y"}
2025-01-31T01:23:35.766Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: I'm taking that as a laugh. They'll never lower in value, they only go up. Brian, what's something you're afraid to admit you love, or what secretly excites you? Oh, I get excited when I see kids gett...
2025-01-31T01:23:35.766Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1824,"transcriptContent":"I'm taking that as a laugh. They'll never lower in value, they only go up. Brian, what's something y"}
2025-01-31T01:23:36.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 70156 bytes)
2025-01-31T01:23:36.768Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:23:37.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1159095 bytes)
2025-01-31T01:23:38.442Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 83339 bytes)
2025-01-31T01:23:39.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1173232 bytes)
2025-01-31T01:23:40.440Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 99291 bytes)
2025-01-31T01:23:41.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1188850 bytes)
2025-01-31T01:23:42.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 113006 bytes)
2025-01-31T01:23:43.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 91 bytes (total: 1202744 bytes)
2025-01-31T01:23:44.599Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 125705 bytes)
2025-01-31T01:23:45.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1213534 bytes)
2025-01-31T01:23:46.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 137941 bytes)
2025-01-31T01:23:48.342Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1225482 bytes)
2025-01-31T01:23:48.394Z [32minfo[39m: Memory Usage:
2025-01-31T01:23:48.396Z [32minfo[39m: rss: 142.43 MB
2025-01-31T01:23:48.396Z [32minfo[39m: heapTotal: 30.71 MB
2025-01-31T01:23:48.396Z [32minfo[39m: heapUsed: 28.31 MB
2025-01-31T01:23:48.396Z [32minfo[39m: external: 10.5 MB
2025-01-31T01:23:48.397Z [32minfo[39m: arrayBuffers: 2.58 MB
2025-01-31T01:23:49.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 151695 bytes)
2025-01-31T01:23:50.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1238964 bytes)
2025-01-31T01:23:52.120Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 162462 bytes)
2025-01-31T01:23:53.280Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 192 bytes (total: 1249728 bytes)
2025-01-31T01:23:54.301Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 175964 bytes)
2025-01-31T01:23:55.280Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1265775 bytes)
2025-01-31T01:23:56.820Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 189786 bytes)
2025-01-31T01:24:00.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1277276 bytes)
2025-01-31T01:24:01.779Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 203519 bytes)
2025-01-31T01:24:02.760Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 1292575 bytes)
2025-01-31T01:24:03.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 218831 bytes)
2025-01-31T01:24:04.616Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3032,"transcriptLength":1824,"summary":"***The main event in the session revolved around a punishment for one of the characters, Sal, being "}
2025-01-31T01:24:04.621Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738286644617.txt","size":1824}
2025-01-31T01:24:04.621Z [33mwarn[39m: [ChannelService] Message is too long (3069 chars), splitting into chunks
2025-01-31T01:24:05.117Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***The main event in the session revolved around a punishment for one of the characters, Sal, being made the "loser" of their group. The punishment was knowing he would have to dress up as a clown and entertain children at a mall with another character, Eric.*** A significant amount of playful antagonism and a stunt involving handing out and then confiscating lollipops were noteworthy parts of this amusement.

##### Detailed Breakdown

##### Key Events
- Sal was announced by fellow participants as the evening's biggest loser.
- ***The group and Eric, a guest on the show, announced their plan*** to dress Sal up as a clown and have him walk around a mall to entertain kids.
- > Eric and Sal were both going to be in full clown attire.
- They dubbed the event "Good Clown, Bad Clown," with Eric being the good clown.
- **Sal's makeup process took two hours to complete.**

### Combat Encounters
N/A

### Character Development

- ***Sal***
    - ***Notable Decisions***: Sal participated in the clown antics game, performing as a naughty clown, even when he disagreed with the tasks he was asked to carry out.
    - **Character Growth**: Sal was portrayed as someone who was very uncomfortable with the experiment. He was frequently embarrassed and dreaded what was going to happen.
    - *Relationships/Interactions*: Sal interacted mainly with Eric, who is supposed to function as the "good clown."
    - Key Roleplay Moments: One of Salvatore the Clown's chief tasks was to distribute lollipops to kids, only to quickly reclaim them, causing a commotion. 

### World Building
- __Location__: The event took place at **American Dream Mall**.
- *No new NPCs* or factions were introduced.
- Plot Developments: The session concluded with the "Good Clown, Bad Clown" event. Sal, as the bad clown, had a chance to create a scene in the mall.

### Memorable Moments
- ```Sal and Eric are completely dressed like clowns and walking around the American Dream Mall.```
- **Sal is termed the evening's biggest loser.**
- *Sal hands out lollipops to young children at the mall, only to take them away again, creating a funny and awkward situation.*

### Consequences & Setup
- **Immediate Consequences**: Sal's actions as the "Bad Clown" could lead to immediate reactions from the mall's patrons.
- *Future Plot Hooks*: Sal's interactions during the "Good Clown, Bad Clown" event could lead to repercussions or callbacks in future sessions.
- Unresolved Threads: There were no specific unresolved threads.
- Party's Next Objectives: The group had not set any immediate objectives before this session ended.

## Technical Notes
- No major house rules or mechanical challenges were in play.

## Next Session
- ***Immediate Goals***: The immediate goals for the next session were not clearly defined within this session.
- *Known Challenges Ahead*: Potential challenges in the future could come from reactions to Sal's actions as the "bad clown."
- Player Intentions: Players' future intentions weren't explicitly mentioned in this session.
2025-01-31T01:24:05.118Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:24:05.121Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:24:05.131Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286417029.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:24:05.133Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286417029.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:24:10.123Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:26:17.028Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:26:17.032Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286777031.pcm","directory":"temp"}
2025-01-31T01:26:17.036Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:26:17.038Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:26:17.038Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:26:17.039Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:26:18.041Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:26:19.614Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286597029.pcm to MP3
2025-01-31T01:26:19.614Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286597029.pcm.mp3","exists":true}
2025-01-31T01:26:19.615Z [32minfo[39m: [TranscriptionService] File stats:{"size":403173,"created":"2025-01-31T01:26:19.328Z","modified":"2025-01-31T01:26:19.593Z"}
2025-01-31T01:26:19.615Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:26:19.615Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:26:20.020Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:26:20.023Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:26:22.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 13481 bytes)
2025-01-31T01:26:24.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 29143 bytes)
2025-01-31T01:26:25.453Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":360,"hasContent":true,"text":"\"- Oh no...\" \"- The longer pop it in your mouth, the more it will... \"- You're evil...\" \"- You just "}
2025-01-31T01:26:25.454Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: "- Oh no..." "- The longer pop it in your mouth, the more it will... "- You're evil..." "- You just crushed children's dreams..." "- Sal, inside the car is a green van, it's got you pixie-dusted. Hand...
2025-01-31T01:26:25.454Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":360,"transcriptContent":"\"- Oh no...\" \"- The longer pop it in your mouth, the more it will... \"- You're evil...\" \"- You just "}
2025-01-31T01:26:26.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 44406 bytes)
2025-01-31T01:26:26.459Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:26:27.474Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available"}
2025-01-31T01:26:27.475Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:26:28.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 59 bytes (total: 59477 bytes)
2025-01-31T01:26:29.364Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:26:29.478Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:26:30.279Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 72040 bytes)
2025-01-31T01:26:33.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 85255 bytes)
2025-01-31T01:26:35.243Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1777,"transcriptLength":360,"summary":"***Narrative Summary***\n\nThe transcript captures a mix of playful and more serious moments. From ref"}
2025-01-31T01:26:35.248Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738286795244.txt","size":360}
2025-01-31T01:26:35.249Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:26:35.479Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***Narrative Summary***

The transcript captures a mix of playful and more serious moments. From references to pixie dust and children's dreams, to a sudden shift in tone with an abrupt command to a kid, the scene seems to oscillate between light-hearted interactions and tense moments. The appearance of Fedla introduces a new character with a friendly greeting, possibly hinting at a new development in the storyline.

***Detailed Breakdown***

### Memorable Moments
- `"> You just crushed children's dreams..."`: This quote hints at a playful, slightly mischievous tone in the conversation.
- `"> Get the fuck off of here, kid."`: The sudden shift to a harsh command adds a surprising element of tension.
- `">> Okay, here comes Fedla. Hello everyone, how are you?"`: Fedla's introduction brings a new character into the scene.

### Characters
- **Sal**: Mentions a green van with pixie dust and hands it out to kids.
- **Fedla**: Enters the scene and greets everyone.

### Memorable Quotes
- ```"The longer pop it in your mouth, the more it will..."```
- ```"Sal, inside the car is a green van, it's got you pixie-dusted. Hand some dust out to kids. Some sugar dust."```

### Consequences & Setup
- **Immediate Consequences**: The abrupt command to the kid might have consequences on the group's interactions with children or the environment.
- **Future Plot Hooks**: The introduction of Fedla could lead to new quests, alliances, or challenges.
- **Unresolved Threads**: The context around the children and the van, as well as the dynamics between the characters, could lead to further developments.

This transcript snippet captures a mix of light-hearted moments and sudden tension, introducing new characters and possibly setting the stage for future plot developments.
2025-01-31T01:26:35.479Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:26:35.480Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:26:35.521Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286597029.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:26:35.523Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286597029.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:26:35.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 101049 bytes)
2025-01-31T01:26:37.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 115331 bytes)
2025-01-31T01:26:40.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 127462 bytes)
2025-01-31T01:26:40.479Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:26:42.160Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 142500 bytes)
2025-01-31T01:26:44.160Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 157634 bytes)
2025-01-31T01:26:46.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 173483 bytes)
2025-01-31T01:26:49.237Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 186891 bytes)
2025-01-31T01:26:51.242Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 202956 bytes)
2025-01-31T01:26:53.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 218036 bytes)
2025-01-31T01:26:55.346Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 230310 bytes)
2025-01-31T01:27:01.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 244061 bytes)
2025-01-31T01:27:03.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 257311 bytes)
2025-01-31T01:27:05.609Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 271470 bytes)
2025-01-31T01:27:07.600Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 285520 bytes)
2025-01-31T01:27:09.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 301472 bytes)
2025-01-31T01:27:11.600Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 315204 bytes)
2025-01-31T01:27:13.939Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 328883 bytes)
2025-01-31T01:27:16.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 341334 bytes)
2025-01-31T01:27:18.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 353616 bytes)
2025-01-31T01:27:20.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 367397 bytes)
2025-01-31T01:27:22.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 383092 bytes)
2025-01-31T01:27:25.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 396561 bytes)
2025-01-31T01:27:27.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 412347 bytes)
2025-01-31T01:27:29.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 426350 bytes)
2025-01-31T01:27:31.378Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 441886 bytes)
2025-01-31T01:27:33.375Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 457914 bytes)
2025-01-31T01:27:35.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 472643 bytes)
2025-01-31T01:27:37.405Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 487033 bytes)
2025-01-31T01:27:39.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 502946 bytes)
2025-01-31T01:27:41.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 516145 bytes)
2025-01-31T01:27:45.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 530138 bytes)
2025-01-31T01:27:47.797Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 544114 bytes)
2025-01-31T01:27:49.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 558095 bytes)
2025-01-31T01:27:51.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 573860 bytes)
2025-01-31T01:27:53.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 589878 bytes)
2025-01-31T01:27:56.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 602825 bytes)
2025-01-31T01:27:59.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 614372 bytes)
2025-01-31T01:28:03.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 625419 bytes)
2025-01-31T01:28:05.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 639719 bytes)
2025-01-31T01:28:07.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 654068 bytes)
2025-01-31T01:28:09.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 666769 bytes)
2025-01-31T01:28:11.698Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 678723 bytes)
2025-01-31T01:28:13.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 692595 bytes)
2025-01-31T01:28:15.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 708470 bytes)
2025-01-31T01:28:17.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 724468 bytes)
2025-01-31T01:28:19.720Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 740306 bytes)
2025-01-31T01:28:21.720Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 755172 bytes)
2025-01-31T01:28:23.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 769147 bytes)
2025-01-31T01:28:26.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 779808 bytes)
2025-01-31T01:28:28.601Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 795553 bytes)
2025-01-31T01:28:31.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 808745 bytes)
2025-01-31T01:28:33.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 824105 bytes)
2025-01-31T01:28:35.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 839798 bytes)
2025-01-31T01:28:37.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 854210 bytes)
2025-01-31T01:28:40.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 865080 bytes)
2025-01-31T01:28:43.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 877931 bytes)
2025-01-31T01:28:48.399Z [32minfo[39m: Memory Usage:
2025-01-31T01:28:48.401Z [32minfo[39m: rss: 142.91 MB
2025-01-31T01:28:48.402Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-31T01:28:48.402Z [32minfo[39m: heapUsed: 29.22 MB
2025-01-31T01:28:48.402Z [32minfo[39m: external: 10.95 MB
2025-01-31T01:28:48.402Z [32minfo[39m: arrayBuffers: 3.02 MB
2025-01-31T01:28:49.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 887681 bytes)
2025-01-31T01:28:52.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 903003 bytes)
2025-01-31T01:28:55.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 915498 bytes)
2025-01-31T01:29:00.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 927196 bytes)
2025-01-31T01:29:02.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 941915 bytes)
2025-01-31T01:29:04.800Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 956562 bytes)
2025-01-31T01:29:06.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 969940 bytes)
2025-01-31T01:29:08.798Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 985039 bytes)
2025-01-31T01:29:10.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1000544 bytes)
2025-01-31T01:29:12.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1015989 bytes)
2025-01-31T01:29:15.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1028816 bytes)
2025-01-31T01:29:17.026Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:29:17.028Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738286957027.pcm","directory":"temp"}
2025-01-31T01:29:17.030Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:29:17.031Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:29:17.032Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:29:17.032Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:29:17.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1044126 bytes)
2025-01-31T01:29:18.035Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:29:19.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1059972 bytes)
2025-01-31T01:29:20.454Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286777031.pcm to MP3
2025-01-31T01:29:20.455Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286777031.pcm.mp3","exists":true}
2025-01-31T01:29:20.455Z [32minfo[39m: [TranscriptionService] File stats:{"size":1891389,"created":"2025-01-31T01:29:19.287Z","modified":"2025-01-31T01:29:20.420Z"}
2025-01-31T01:29:20.456Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:29:20.456Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:29:24.683Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:29:24.686Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:29:25.716Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 1073819 bytes)
2025-01-31T01:29:26.682Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 16107 bytes)
2025-01-31T01:29:27.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1089936 bytes)
2025-01-31T01:29:28.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 32057 bytes)
2025-01-31T01:29:29.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1105878 bytes)
2025-01-31T01:29:30.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 47989 bytes)
2025-01-31T01:29:31.661Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:29:32.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1119116 bytes)
2025-01-31T01:29:33.039Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 59395 bytes)
2025-01-31T01:29:37.986Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2374,"hasContent":true,"text":"Now, let's switch the ears, do the two ears on the top, buddy. One left, one right, the big round ea"}
2025-01-31T01:29:37.987Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Now, let's switch the ears, do the two ears on the top, buddy. One left, one right, the big round ears, okay? Get those ears. Do you want his, like, ears? Okay, let's short the progress, okay, take a ...
2025-01-31T01:29:37.987Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2374,"transcriptContent":"Now, let's switch the ears, do the two ears on the top, buddy. One left, one right, the big round ea"}
2025-01-31T01:29:38.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1133362 bytes)
2025-01-31T01:29:38.989Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:29:39.537Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 73424 bytes)
2025-01-31T01:29:40.493Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:29:40.493Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:29:41.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1144268 bytes)
2025-01-31T01:29:42.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 86613 bytes)
2025-01-31T01:29:42.497Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:29:42.783Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:29:42.784Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:29:43.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1160370 bytes)
2025-01-31T01:29:44.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 100480 bytes)
2025-01-31T01:29:46.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1171857 bytes)
2025-01-31T01:29:46.786Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:29:47.621Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 112615 bytes)
2025-01-31T01:29:48.333Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:29:48.333Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2374,"transcriptLength":2374,"summary":"Now, let's switch the ears, do the two ears on the top, buddy. One left, one right, the big round ea"}
2025-01-31T01:29:48.339Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738286988333.txt","size":2374}
2025-01-31T01:29:48.339Z [33mwarn[39m: [ChannelService] Message is too long (2411 chars), splitting into chunks
2025-01-31T01:29:48.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 118 bytes (total: 1185839 bytes)
2025-01-31T01:29:49.266Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Now, let's switch the ears, do the two ears on the top, buddy. One left, one right, the big round ears, okay? Get those ears. Do you want his, like, ears? Okay, let's short the progress, okay, take a selfie. Take a look, so I'm gonna do the nose. Come on, you got a little sponsor, Sal? Eric, you can go on deck out there, buddy. Okay, all right, Eric's on his way out, bud. Oh, perfect. Okay, so we're gonna play a game called Good Clown, Bad Clown. Eric, you're gonna do a good clown trick. Okay. Trick where you pour milk over the kid's head. No, I'm not gonna do that. Yeah, yeah, yeah, but a cat, too, I mean, it's magic. Are you serious, you're gonna do that? Yeah, look, look, it doesn't look anything like that to me. This is gonna be great. But then Sal shot the shit out of the kid. Oh, perfect. All right, come on. Come on, trick or treating clowns. Come on, you two are friendly clowns. And how are you, sir? How you doing? It works. This kid's adorable. You ready for some magic? Here we go. Abracadabra. Oh, my God. Oh, my God. Hey, Rick. Here we go. I'll get a towel. I'll get a towel. Get a towel. Don't worry, the kid's with us. What do I do? Oh, oh. Get out of there. Get out of there. Leave Sal to deal with it. Get out of here. Get out of here. Rick, let Sal deal with it. I'm so sorry. I'm gonna get a towel. All right, just step out of here for a second. All right. Perfect. Here you go. No, we gotta put something down here. I'm so sorry, brother. Sal! Sal! You a dumbass. Don't shit me. Son of a bitch. Son of a bitch. Oh, boy, you really have to do it. I mean, please do it. Yeah, let's do it. Let's do it. There you go, buddy. You're the season two champion. Oh, no. You're a fucking dick. Why would somebody do that? Sal, you gotta make a deal with me. I'm gonna kill you. You gotta kill me. You gotta kill me. You gotta kill me. I'm gonna kill you. I'm gonna kill you. I'm gonna kill you. I'm gonna kill you. I'm gonna kill you. I'm gonna kill you. You gotta make him get into it. You're so good. Really? Oh, yeah. I just felt like, there he goes. Dirty the ground, everybody. God. You lost it? Yeah, I know. I didn't even think of that. I mean, look at this. Oh, yeah. Oh, yeah. Look at this. Oh, yeah. Oh, yeah. Oh, yeah. Oh, yeah. Come on. I got you. I got you. Oh, yeah. I got you. Oh, yeah. Oh, yeah. Oh, yeah. Oh, yeah. Oh, yeah. Oh, yeah.

2025-01-31T01:29:49.268Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:29:49.270Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:29:49.304Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286777031.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:29:49.308Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286777031.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:29:54.273Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:32:17.027Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:32:17.035Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738287137033.pcm","directory":"temp"}
2025-01-31T01:32:17.039Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:32:17.042Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:32:17.043Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:32:17.043Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:32:18.047Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:32:19.247Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:32:19.249Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:32:19.351Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:32:19.637Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738286957027.pcm to MP3
2025-01-31T01:32:19.637Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738286957027.pcm.mp3","exists":true}
2025-01-31T01:32:19.638Z [32minfo[39m: [TranscriptionService] File stats:{"size":230709,"created":"2025-01-31T01:32:19.441Z","modified":"2025-01-31T01:32:19.620Z"}
2025-01-31T01:32:19.638Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:32:19.638Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:32:21.317Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":119,"hasContent":true,"text":"The following program contains scenes of graphic stupidity among lifelong friends who compete to emb"}
2025-01-31T01:32:21.318Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: The following program contains scenes of graphic stupidity among lifelong friends who compete to embarrass each other.
...
2025-01-31T01:32:21.318Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":119,"transcriptContent":"The following program contains scenes of graphic stupidity among lifelong friends who compete to emb"}
2025-01-31T01:32:21.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 11472 bytes)
2025-01-31T01:32:22.320Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:32:23.605Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:23.605Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:32:23.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 25734 bytes)
2025-01-31T01:32:25.612Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:32:25.937Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:25.938Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:32:27.040Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 40003 bytes)
2025-01-31T01:32:29.042Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 55302 bytes)
2025-01-31T01:32:29.944Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:32:31.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 70006 bytes)
2025-01-31T01:32:31.618Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:31.619Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:32:33.038Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 85573 bytes)
2025-01-31T01:32:35.220Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 97991 bytes)
2025-01-31T01:32:37.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 113912 bytes)
2025-01-31T01:32:37.621Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:32:38.327Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:38.329Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"},"context":{"transcriptLength":119,"transcriptSample":"The following program contains scenes of graphic stupidity among lifelong friends who compete to emb"}}
2025-01-31T01:32:38.333Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary after all retries{"stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"}
2025-01-31T01:32:38.340Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"83","data":{"guildId":"1315144523336122469","transcript":"The following program contains scenes of graphic stupidity among lifelong friends who compete to embarrass each other.\n"}}
2025-01-31T01:32:38.340Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T01:32:38.340Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 83
2025-01-31T01:32:38.345Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738287158340.txt","size":119}
2025-01-31T01:32:38.345Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:32:38.543Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: The following program contains scenes of graphic stupidity among lifelong friends who compete to embarrass each other.

2025-01-31T01:32:38.543Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:32:38.544Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:32:38.547Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286957027.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:32:38.548Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738286957027.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:32:39.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 126833 bytes)
2025-01-31T01:32:41.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 139366 bytes)
2025-01-31T01:32:43.353Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"83","data":{"guildId":"1315144523336122469","transcript":"The following program contains scenes of graphic stupidity among lifelong friends who compete to embarrass each other.\n"}}
2025-01-31T01:32:43.354Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:32:43.355Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":119,"transcriptContent":"The following program contains scenes of graphic stupidity among lifelong friends who compete to emb"}
2025-01-31T01:32:43.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 155238 bytes)
2025-01-31T01:32:43.547Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:32:44.357Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:32:45.420Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:45.421Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:32:45.537Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 170980 bytes)
2025-01-31T01:32:47.429Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:32:47.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 183779 bytes)
2025-01-31T01:32:49.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 194835 bytes)
2025-01-31T01:32:52.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 207809 bytes)
2025-01-31T01:32:53.189Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:32:53.189Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:32:54.395Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 220857 bytes)
2025-01-31T01:32:56.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 236666 bytes)
2025-01-31T01:32:57.194Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:32:58.262Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:32:58.263Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":119,"transcriptLength":119,"summary":"The following program contains scenes of graphic stupidity among lifelong friends who compete to emb"}
2025-01-31T01:32:58.264Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:32:58.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 251563 bytes)
2025-01-31T01:32:58.502Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T01:32:58.506Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"83","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738287178263}}
2025-01-31T01:33:00.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 263789 bytes)
2025-01-31T01:33:02.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 278969 bytes)
2025-01-31T01:33:04.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 293908 bytes)
2025-01-31T01:33:06.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 309821 bytes)
2025-01-31T01:33:08.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 323423 bytes)
2025-01-31T01:33:11.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 337003 bytes)
2025-01-31T01:33:13.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 351521 bytes)
2025-01-31T01:33:17.707Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 364139 bytes)
2025-01-31T01:33:19.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 378222 bytes)
2025-01-31T01:33:21.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 389865 bytes)
2025-01-31T01:33:23.675Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 401483 bytes)
2025-01-31T01:33:25.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 78 bytes (total: 414501 bytes)
2025-01-31T01:33:27.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 428877 bytes)
2025-01-31T01:33:29.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 444681 bytes)
2025-01-31T01:33:32.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 457505 bytes)
2025-01-31T01:33:34.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 471795 bytes)
2025-01-31T01:33:36.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 487106 bytes)
2025-01-31T01:33:38.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 502757 bytes)
2025-01-31T01:33:40.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 518539 bytes)
2025-01-31T01:33:42.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 533157 bytes)
2025-01-31T01:33:44.215Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 548175 bytes)
2025-01-31T01:33:46.196Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 564117 bytes)
2025-01-31T01:33:48.197Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 578368 bytes)
2025-01-31T01:33:48.400Z [32minfo[39m: Memory Usage:
2025-01-31T01:33:48.402Z [32minfo[39m: rss: 144.52 MB
2025-01-31T01:33:48.402Z [32minfo[39m: heapTotal: 31.71 MB
2025-01-31T01:33:48.402Z [32minfo[39m: heapUsed: 30.38 MB
2025-01-31T01:33:48.403Z [32minfo[39m: external: 13.5 MB
2025-01-31T01:33:48.403Z [32minfo[39m: arrayBuffers: 5.58 MB
2025-01-31T01:33:50.279Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 591338 bytes)
2025-01-31T01:33:52.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 605144 bytes)
2025-01-31T01:33:54.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 621444 bytes)
2025-01-31T01:33:58.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 630246 bytes)
2025-01-31T01:34:00.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 646065 bytes)
2025-01-31T01:34:02.416Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 658429 bytes)
2025-01-31T01:34:04.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 673980 bytes)
2025-01-31T01:34:06.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 689275 bytes)
2025-01-31T01:34:08.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 700968 bytes)
2025-01-31T01:34:10.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 717079 bytes)
2025-01-31T01:34:12.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 731261 bytes)
2025-01-31T01:34:14.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 746761 bytes)
2025-01-31T01:34:16.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 761751 bytes)
2025-01-31T01:34:18.699Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 775852 bytes)
2025-01-31T01:34:20.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 790546 bytes)
2025-01-31T01:34:22.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 805203 bytes)
2025-01-31T01:34:24.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 60 bytes (total: 816896 bytes)
2025-01-31T01:34:26.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 831051 bytes)
2025-01-31T01:34:28.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 846985 bytes)
2025-01-31T01:34:30.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 859857 bytes)
2025-01-31T01:34:33.115Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 871794 bytes)
2025-01-31T01:34:37.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 882669 bytes)
2025-01-31T01:34:39.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 897093 bytes)
2025-01-31T01:34:41.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 912974 bytes)
2025-01-31T01:34:43.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 925123 bytes)
2025-01-31T01:34:45.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 935615 bytes)
2025-01-31T01:34:47.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 950542 bytes)
2025-01-31T01:34:49.700Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 964794 bytes)
2025-01-31T01:34:51.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 978472 bytes)
2025-01-31T01:34:53.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 990348 bytes)
2025-01-31T01:34:55.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1003115 bytes)
2025-01-31T01:34:58.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1014941 bytes)
2025-01-31T01:35:00.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1029031 bytes)
2025-01-31T01:35:02.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1042968 bytes)
2025-01-31T01:35:04.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 1056028 bytes)
2025-01-31T01:35:06.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1071958 bytes)
2025-01-31T01:35:08.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1087264 bytes)
2025-01-31T01:35:11.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1100221 bytes)
2025-01-31T01:35:13.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 1115019 bytes)
2025-01-31T01:35:15.507Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1131110 bytes)
2025-01-31T01:35:17.029Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:35:17.032Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738287317030.pcm","directory":"temp"}
2025-01-31T01:35:17.037Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:35:17.039Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:35:17.040Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:35:17.041Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:35:17.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1146963 bytes)
2025-01-31T01:35:18.043Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:35:19.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1162757 bytes)
2025-01-31T01:35:20.436Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738287137033.pcm to MP3
2025-01-31T01:35:20.436Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738287137033.pcm.mp3","exists":true}
2025-01-31T01:35:20.437Z [32minfo[39m: [TranscriptionService] File stats:{"size":2101245,"created":"2025-01-31T01:35:19.262Z","modified":"2025-01-31T01:35:20.418Z"}
2025-01-31T01:35:20.437Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:35:20.437Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:35:21.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 1177484 bytes)
2025-01-31T01:35:23.502Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1192857 bytes)
2025-01-31T01:35:26.157Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:35:26.161Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:35:26.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1207270 bytes)
2025-01-31T01:35:26.678Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:35:28.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 13168 bytes)
2025-01-31T01:35:28.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1219812 bytes)
2025-01-31T01:35:30.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 28344 bytes)
2025-01-31T01:35:30.719Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1235594 bytes)
2025-01-31T01:35:32.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 43044 bytes)
2025-01-31T01:35:32.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1250338 bytes)
2025-01-31T01:35:34.639Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 58001 bytes)
2025-01-31T01:35:34.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1265251 bytes)
2025-01-31T01:35:35.293Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":602,"hasContent":true,"text":"Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry pr"}
2025-01-31T01:35:35.293Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Pe...
2025-01-31T01:35:35.294Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":602,"transcriptContent":"Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry pr"}
2025-01-31T01:35:36.294Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:35:36.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 73824 bytes)
2025-01-31T01:35:36.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1281116 bytes)
2025-01-31T01:35:37.521Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:35:37.522Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:35:38.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 89172 bytes)
2025-01-31T01:35:38.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1296449 bytes)
2025-01-31T01:35:39.523Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:35:40.146Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"***No transcript available.***"}
2025-01-31T01:35:40.146Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:35:40.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 104271 bytes)
2025-01-31T01:35:40.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1311573 bytes)
2025-01-31T01:35:44.148Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:35:44.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 115498 bytes)
2025-01-31T01:35:44.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1322819 bytes)
2025-01-31T01:35:45.765Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:35:45.766Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":602,"transcriptLength":602,"summary":"Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry pr"}
2025-01-31T01:35:45.771Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738287345767.txt","size":602}
2025-01-31T01:35:45.772Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:35:46.028Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry. Tyler Perry presents Katy Perry and Matthew Perry starring Steve Perry and Joe Perry.

2025-01-31T01:35:46.029Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:35:46.030Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:35:46.032Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287137033.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:35:46.033Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287137033.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:35:51.031Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:38:17.032Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:38:17.043Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738287497041.pcm","directory":"temp"}
2025-01-31T01:38:17.051Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:38:17.053Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:38:17.054Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:38:17.054Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:38:18.057Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:38:19.614Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:38:19.615Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:38:19.705Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738287317030.pcm to MP3
2025-01-31T01:38:19.705Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738287317030.pcm.mp3","exists":true}
2025-01-31T01:38:19.706Z [32minfo[39m: [TranscriptionService] File stats:{"size":216453,"created":"2025-01-31T01:38:19.343Z","modified":"2025-01-31T01:38:19.687Z"}
2025-01-31T01:38:19.706Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:38:19.706Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:38:21.175Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:38:21.781Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":237,"hasContent":true,"text":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}
2025-01-31T01:38:21.782Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void Void Void Void Sample Ticket Do Not Sell Void Void Void Void. You gotta love it. You're not gonna ma...
2025-01-31T01:38:21.783Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":237,"transcriptContent":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}
2025-01-31T01:38:22.603Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 12701 bytes)
2025-01-31T01:38:22.794Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:38:23.413Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:23.414Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:38:24.603Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 27788 bytes)
2025-01-31T01:38:25.416Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:38:25.932Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:25.932Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:38:26.943Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 39556 bytes)
2025-01-31T01:38:29.720Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 52244 bytes)
2025-01-31T01:38:29.933Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:38:30.632Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:30.632Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:38:31.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 63 bytes (total: 62668 bytes)
2025-01-31T01:38:34.102Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 74380 bytes)
2025-01-31T01:38:36.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 90139 bytes)
2025-01-31T01:38:36.638Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:38:38.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 105276 bytes)
2025-01-31T01:38:38.606Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:38.609Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"},"context":{"transcriptLength":237,"transcriptSample":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}}
2025-01-31T01:38:38.611Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary after all retries{"stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"}
2025-01-31T01:38:38.618Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"84","data":{"guildId":"1315144523336122469","transcript":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void Void Void Void Sample Ticket Do Not Sell Void Void Void Void. You gotta love it. You're not gonna make it? I mean, it's free! Take them!\n"}}
2025-01-31T01:38:38.618Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T01:38:38.619Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 84
2025-01-31T01:38:38.624Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738287518619.txt","size":237}
2025-01-31T01:38:38.624Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:38:38.826Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void Void Void Void Sample Ticket Do Not Sell Void Void Void Void. You gotta love it. You're not gonna make it? I mean, it's free! Take them!

2025-01-31T01:38:38.826Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:38:38.827Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:38:38.830Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287317030.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:38:38.831Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287317030.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:38:40.383Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 114771 bytes)
2025-01-31T01:38:42.383Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 129248 bytes)
2025-01-31T01:38:43.632Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"84","data":{"guildId":"1315144523336122469","transcript":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void Void Void Void Sample Ticket Do Not Sell Void Void Void Void. You gotta love it. You're not gonna make it? I mean, it's free! Take them!\n"}}
2025-01-31T01:38:43.632Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:38:43.633Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":237,"transcriptContent":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}
2025-01-31T01:38:43.828Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:38:44.639Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:38:45.713Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available"}
2025-01-31T01:38:45.713Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:38:46.105Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 139676 bytes)
2025-01-31T01:38:47.718Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:38:48.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 151215 bytes)
2025-01-31T01:38:48.405Z [32minfo[39m: Memory Usage:
2025-01-31T01:38:48.406Z [32minfo[39m: rss: 149.41 MB
2025-01-31T01:38:48.406Z [32minfo[39m: heapTotal: 31.96 MB
2025-01-31T01:38:48.407Z [32minfo[39m: heapUsed: 28.85 MB
2025-01-31T01:38:48.408Z [32minfo[39m: external: 10.45 MB
2025-01-31T01:38:48.409Z [32minfo[39m: arrayBuffers: 2.53 MB
2025-01-31T01:38:48.549Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:48.550Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:38:50.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 164924 bytes)
2025-01-31T01:38:52.573Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:38:52.746Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 180631 bytes)
2025-01-31T01:38:53.197Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available"}
2025-01-31T01:38:53.198Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:38:56.507Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 193984 bytes)
2025-01-31T01:38:58.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 206848 bytes)
2025-01-31T01:38:59.200Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:38:59.930Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:38:59.934Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":237,"transcriptSample":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}}
2025-01-31T01:38:59.935Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary after all retries","stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T01:38:59.969Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 84 delayed","stack":"Error: Missing lock for job 84 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T01:39:00.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 222634 bytes)
2025-01-31T01:39:02.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 238123 bytes)
2025-01-31T01:39:04.668Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 253856 bytes)
2025-01-31T01:39:04.974Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"84","data":{"guildId":"1315144523336122469","transcript":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void Void Void Void Sample Ticket Do Not Sell Void Void Void Void. You gotta love it. You're not gonna make it? I mean, it's free! Take them!\n"}}
2025-01-31T01:39:04.974Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:39:04.975Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":237,"transcriptContent":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}
2025-01-31T01:39:05.976Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:39:06.668Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 269680 bytes)
2025-01-31T01:39:07.269Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:39:07.270Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:39:09.272Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:39:09.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 279769 bytes)
2025-01-31T01:39:10.116Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:39:10.118Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:39:12.687Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 293552 bytes)
2025-01-31T01:39:14.119Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:39:14.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 308771 bytes)
2025-01-31T01:39:15.782Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:39:15.783Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:39:16.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 322922 bytes)
2025-01-31T01:39:18.698Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 338792 bytes)
2025-01-31T01:39:20.688Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 354682 bytes)
2025-01-31T01:39:21.787Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:39:22.691Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 369539 bytes)
2025-01-31T01:39:24.171Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:39:24.173Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":237,"transcriptSample":"Would you like these free tickets to a show that my wife can't make it? The name of it is, uh, Void "}}
2025-01-31T01:39:24.173Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary after all retries","stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T01:39:24.183Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 84 failed","stack":"Error: Missing lock for job 84 failed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T01:39:24.690Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 385119 bytes)
2025-01-31T01:39:27.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 399414 bytes)
2025-01-31T01:39:29.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 414874 bytes)
2025-01-31T01:39:31.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 430389 bytes)
2025-01-31T01:39:33.048Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 444448 bytes)
2025-01-31T01:39:39.649Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 457762 bytes)
2025-01-31T01:39:42.829Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 469961 bytes)
2025-01-31T01:39:46.548Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 482386 bytes)
2025-01-31T01:39:52.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 494900 bytes)
2025-01-31T01:39:56.290Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 508705 bytes)
2025-01-31T01:39:58.289Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 524446 bytes)
2025-01-31T01:40:00.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 538194 bytes)
2025-01-31T01:40:04.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 550319 bytes)
2025-01-31T01:40:07.509Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 562632 bytes)
2025-01-31T01:40:10.067Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 575806 bytes)
2025-01-31T01:40:12.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 587721 bytes)
2025-01-31T01:40:14.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 603170 bytes)
2025-01-31T01:40:16.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 615483 bytes)
2025-01-31T01:40:19.291Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 627485 bytes)
2025-01-31T01:40:22.049Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 637302 bytes)
2025-01-31T01:40:24.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 651001 bytes)
2025-01-31T01:40:26.810Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 664945 bytes)
2025-01-31T01:40:35.090Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 678793 bytes)
2025-01-31T01:40:41.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 689040 bytes)
2025-01-31T01:40:44.290Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 699106 bytes)
2025-01-31T01:40:46.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 712637 bytes)
2025-01-31T01:40:48.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 728380 bytes)
2025-01-31T01:40:51.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 740090 bytes)
2025-01-31T01:40:54.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 752847 bytes)
2025-01-31T01:40:57.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 760636 bytes)
2025-01-31T01:40:59.751Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 773553 bytes)
2025-01-31T01:41:01.852Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 785578 bytes)
2025-01-31T01:41:03.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 798506 bytes)
2025-01-31T01:41:06.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 813151 bytes)
2025-01-31T01:41:08.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 827933 bytes)
2025-01-31T01:41:11.549Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 839399 bytes)
2025-01-31T01:41:13.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 118 bytes (total: 850021 bytes)
2025-01-31T01:41:15.751Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 860309 bytes)
2025-01-31T01:41:17.070Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:41:17.073Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738287677072.pcm","directory":"temp"}
2025-01-31T01:41:17.079Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:41:17.081Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:41:17.081Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:41:17.082Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:41:18.089Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:41:18.094Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:41:18.096Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:41:18.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 872034 bytes)
2025-01-31T01:41:19.206Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:41:20.091Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 13607 bytes)
2025-01-31T01:41:20.289Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 885593 bytes)
2025-01-31T01:41:20.395Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738287497041.pcm to MP3
2025-01-31T01:41:20.396Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738287497041.pcm.mp3","exists":true}
2025-01-31T01:41:20.396Z [32minfo[39m: [TranscriptionService] File stats:{"size":1657821,"created":"2025-01-31T01:41:19.413Z","modified":"2025-01-31T01:41:20.377Z"}
2025-01-31T01:41:20.396Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:41:20.396Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:41:22.091Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 27033 bytes)
2025-01-31T01:41:22.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 899226 bytes)
2025-01-31T01:41:24.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 41780 bytes)
2025-01-31T01:41:24.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 912460 bytes)
2025-01-31T01:41:26.303Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 55653 bytes)
2025-01-31T01:41:26.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 927758 bytes)
2025-01-31T01:41:28.291Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 69525 bytes)
2025-01-31T01:41:28.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 941632 bytes)
2025-01-31T01:41:31.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 83679 bytes)
2025-01-31T01:41:31.574Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 955706 bytes)
2025-01-31T01:41:36.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 95674 bytes)
2025-01-31T01:41:36.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 967888 bytes)
2025-01-31T01:41:38.013Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 110386 bytes)
2025-01-31T01:41:38.211Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 981710 bytes)
2025-01-31T01:41:40.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 123291 bytes)
2025-01-31T01:41:40.690Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 994617 bytes)
2025-01-31T01:41:42.572Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 137208 bytes)
2025-01-31T01:41:42.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1008776 bytes)
2025-01-31T01:41:44.374Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":405,"hasContent":true,"text":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}
2025-01-31T01:41:44.374Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's just a game I think it's It's just a game It's just a game It's a decision but they don't say it's ...
2025-01-31T01:41:44.374Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":405,"transcriptContent":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}
2025-01-31T01:41:44.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 152604 bytes)
2025-01-31T01:41:44.771Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1024677 bytes)
2025-01-31T01:41:45.375Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:41:46.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 165460 bytes)
2025-01-31T01:41:46.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1037602 bytes)
2025-01-31T01:41:48.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 181003 bytes)
2025-01-31T01:41:48.971Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 1053017 bytes)
2025-01-31T01:41:51.071Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:41:51.072Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:41:51.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 193042 bytes)
2025-01-31T01:41:51.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1065172 bytes)
2025-01-31T01:41:53.072Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:41:53.454Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:41:53.455Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:41:53.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 207216 bytes)
2025-01-31T01:41:54.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 1079153 bytes)
2025-01-31T01:41:57.460Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:41:58.938Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:41:58.939Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:42:01.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 218737 bytes)
2025-01-31T01:42:01.349Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1090125 bytes)
2025-01-31T01:42:03.347Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 232055 bytes)
2025-01-31T01:42:03.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 1104025 bytes)
2025-01-31T01:42:04.941Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:42:05.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 246463 bytes)
2025-01-31T01:42:05.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1118337 bytes)
2025-01-31T01:42:06.562Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:06.564Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"},"context":{"transcriptLength":405,"transcriptSample":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}}
2025-01-31T01:42:06.564Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary after all retries{"stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:155:27)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:103:78)"}
2025-01-31T01:42:06.570Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"85","data":{"guildId":"1315144523336122469","transcript":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's just a game I think it's It's just a game It's just a game It's a decision but they don't say it's a decision That was Mcdonalds I'd rather have you I'd rather have you I'm so bonked It's like Tommy Salmon Salmon Now let's see a response No The buns need to be out more It's like an egg It's like an egg\n"}}
2025-01-31T01:42:06.570Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T01:42:06.570Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 85
2025-01-31T01:42:06.574Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738287726570.txt","size":405}
2025-01-31T01:42:06.575Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:42:06.773Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's just a game I think it's It's just a game It's just a game It's a decision but they don't say it's a decision That was Mcdonalds I'd rather have you I'd rather have you I'm so bonked It's like Tommy Salmon Salmon Now let's see a response No The buns need to be out more It's like an egg It's like an egg

2025-01-31T01:42:06.773Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:42:06.774Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:42:06.797Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287497041.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:42:06.807Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738287497041.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:42:11.588Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"85","data":{"guildId":"1315144523336122469","transcript":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's just a game I think it's It's just a game It's just a game It's a decision but they don't say it's a decision That was Mcdonalds I'd rather have you I'd rather have you I'm so bonked It's like Tommy Salmon Salmon Now let's see a response No The buns need to be out more It's like an egg It's like an egg\n"}}
2025-01-31T01:42:11.589Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:42:11.590Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":405,"transcriptContent":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}
2025-01-31T01:42:11.779Z [33mwarn[39m: [VoiceRecorder] Output stream close timed out
2025-01-31T01:42:12.595Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:42:14.183Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:14.183Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:42:16.193Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:42:17.263Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:17.269Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:42:21.273Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:42:22.116Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available"}
2025-01-31T01:42:22.116Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T01:42:28.120Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T01:42:29.778Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:29.780Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:174:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)"},"context":{"transcriptLength":405,"transcriptSample":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}}
2025-01-31T01:42:29.782Z [31merror[39m: [SummaryJobService] Failed to generate background summary:{"error":"Failed to generate summary: Failed to generate summary after all retries","stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:224:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async file:///usr/src/app/src/services/SummaryJobService.js:24:33\n    at async Queue.<anonymous> (file:///usr/src/app/src/services/JobService.js:45:24)","guildId":"1315144523336122469"}
2025-01-31T01:42:29.803Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"Missing lock for job 85 delayed","stack":"Error: Missing lock for job 85 delayed\n    at Object.finishedErrors (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/scripts.js:289:16)\n    at Job.moveToFailed (/usr/src/app/node_modules/.pnpm/bull@4.16.5/node_modules/bull/lib/job.js:345:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
2025-01-31T01:42:34.820Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"85","data":{"guildId":"1315144523336122469","transcript":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's just a game I think it's It's just a game It's just a game It's a decision but they don't say it's a decision That was Mcdonalds I'd rather have you I'd rather have you I'm so bonked It's like Tommy Salmon Salmon Now let's see a response No The buns need to be out more It's like an egg It's like an egg\n"}}
2025-01-31T01:42:34.822Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T01:42:34.822Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":405,"transcriptContent":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}
2025-01-31T01:42:35.826Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:42:37.338Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:37.338Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T01:42:39.339Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T01:42:40.318Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T01:42:40.319Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T01:42:44.323Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T01:42:45.916Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:42:45.918Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":405,"transcriptLength":405,"summary":"itu 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 兄 Shit F**K YOU It's just a game I'm sorry It's just a game It's"}
2025-01-31T01:42:45.920Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:42:46.181Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T01:42:46.186Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"85","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738287765919}}
2025-01-31T01:51:14.878Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T01:51:14.948Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T01:51:15.066Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T01:51:15.103Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738287677072.pcm","age":548174.1904296875,"size":7192320}
2025-01-31T01:51:15.114Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T01:51:15.120Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T01:51:15.121Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T01:51:15.580Z [32minfo[39m: Bot initialized successfully
2025-01-31T01:51:15.694Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T01:51:24.280Z [32minfo[39m: Command Name: setkey
2025-01-31T01:51:24.286Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T01:51:24.520Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T01:51:24.521Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334702544626122904","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:51:24.522Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:51:27.527Z [32minfo[39m: Command Name: record
2025-01-31T01:51:27.531Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T01:51:27.781Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T01:51:28.172Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T01:51:28.175Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T01:51:28.175Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:51:28.175Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T01:51:28.176Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:51:28.178Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738288288177-5zfpou0msh6.pcm","directory":"temp"}
2025-01-31T01:51:28.254Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:51:28.256Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:51:28.256Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T01:51:28.257Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:51:28.257Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T01:51:28.258Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T01:51:28.258Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334702558224056350","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T01:51:28.258Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T01:51:28.298Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:51:28.300Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:51:30.145Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:51:30.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 12118 bytes)
2025-01-31T01:51:32.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 25823 bytes)
2025-01-31T01:51:34.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 40477 bytes)
2025-01-31T01:51:36.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 56366 bytes)
2025-01-31T01:51:41.534Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 67230 bytes)
2025-01-31T01:51:43.538Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 96 bytes (total: 80414 bytes)
2025-01-31T01:51:46.859Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 88369 bytes)
2025-01-31T01:51:48.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 100792 bytes)
2025-01-31T01:51:50.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 113353 bytes)
2025-01-31T01:51:53.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 124033 bytes)
2025-01-31T01:51:55.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 138029 bytes)
2025-01-31T01:51:57.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 151418 bytes)
2025-01-31T01:51:59.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 165618 bytes)
2025-01-31T01:52:01.897Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 178658 bytes)
2025-01-31T01:52:03.897Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 194240 bytes)
2025-01-31T01:52:06.897Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 208542 bytes)
2025-01-31T01:52:08.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 61 bytes (total: 221810 bytes)
2025-01-31T01:52:11.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 235047 bytes)
2025-01-31T01:52:13.397Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 247576 bytes)
2025-01-31T01:52:15.595Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 261146 bytes)
2025-01-31T01:52:18.479Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 69 bytes (total: 273707 bytes)
2025-01-31T01:52:20.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 288426 bytes)
2025-01-31T01:52:22.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 298736 bytes)
2025-01-31T01:52:24.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 314517 bytes)
2025-01-31T01:52:26.979Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 328319 bytes)
2025-01-31T01:52:28.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 343110 bytes)
2025-01-31T01:52:30.983Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 358594 bytes)
2025-01-31T01:52:32.979Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 374356 bytes)
2025-01-31T01:52:34.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 390195 bytes)
2025-01-31T01:52:37.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 402477 bytes)
2025-01-31T01:52:39.060Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 414712 bytes)
2025-01-31T01:52:41.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 430263 bytes)
2025-01-31T01:52:43.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 441294 bytes)
2025-01-31T01:52:45.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 457576 bytes)
2025-01-31T01:52:53.460Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 468362 bytes)
2025-01-31T01:52:55.460Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 483804 bytes)
2025-01-31T01:52:57.461Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 499851 bytes)
2025-01-31T01:52:59.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 515789 bytes)
2025-01-31T01:53:01.539Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 529955 bytes)
2025-01-31T01:53:03.539Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 543939 bytes)
2025-01-31T01:53:07.662Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 553558 bytes)
2025-01-31T01:53:09.740Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 95 bytes (total: 566715 bytes)
2025-01-31T01:53:11.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 580791 bytes)
2025-01-31T01:53:15.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 590367 bytes)
2025-01-31T01:53:18.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 602635 bytes)
2025-01-31T01:53:20.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 616794 bytes)
2025-01-31T01:53:22.520Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 632697 bytes)
2025-01-31T01:53:24.998Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 194 bytes (total: 645063 bytes)
2025-01-31T01:53:27.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 658495 bytes)
2025-01-31T01:53:29.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 674424 bytes)
2025-01-31T01:53:31.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 689683 bytes)
2025-01-31T01:53:33.619Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 705901 bytes)
2025-01-31T01:53:35.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 721461 bytes)
2025-01-31T01:53:37.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 737271 bytes)
2025-01-31T01:53:39.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 752753 bytes)
2025-01-31T01:53:41.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 768560 bytes)
2025-01-31T01:53:43.620Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 784227 bytes)
2025-01-31T01:53:45.621Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 800356 bytes)
2025-01-31T01:53:47.698Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 813365 bytes)
2025-01-31T01:53:49.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 825236 bytes)
2025-01-31T01:53:51.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 839511 bytes)
2025-01-31T01:53:53.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 853467 bytes)
2025-01-31T01:53:55.920Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 868375 bytes)
2025-01-31T01:53:57.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 883613 bytes)
2025-01-31T01:53:59.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 899158 bytes)
2025-01-31T01:54:01.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 914433 bytes)
2025-01-31T01:54:03.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 930088 bytes)
2025-01-31T01:54:05.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 945913 bytes)
2025-01-31T01:54:07.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 961886 bytes)
2025-01-31T01:54:09.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 976443 bytes)
2025-01-31T01:54:11.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 992115 bytes)
2025-01-31T01:54:14.578Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1006224 bytes)
2025-01-31T01:54:16.578Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1021454 bytes)
2025-01-31T01:54:18.582Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1037481 bytes)
2025-01-31T01:54:20.577Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1053219 bytes)
2025-01-31T01:54:22.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1068084 bytes)
2025-01-31T01:54:24.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 1081338 bytes)
2025-01-31T01:54:26.658Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 1094703 bytes)
2025-01-31T01:54:28.264Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T01:54:28.266Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738288468265-z6tlnib29o.pcm","directory":"temp"}
2025-01-31T01:54:28.268Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T01:54:28.269Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T01:54:28.269Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T01:54:28.269Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T01:54:28.662Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1110374 bytes)
2025-01-31T01:54:29.280Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T01:54:29.287Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T01:54:32.145Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738288288177-5zfpou0msh6.pcm to MP3
2025-01-31T01:54:32.146Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738288288177-5zfpou0msh6.pcm.mp3","exists":true}
2025-01-31T01:54:32.147Z [32minfo[39m: [TranscriptionService] File stats:{"size":1987653,"created":"2025-01-31T01:54:30.881Z","modified":"2025-01-31T01:54:32.110Z"}
2025-01-31T01:54:32.149Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T01:54:32.149Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T01:54:35.220Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T01:54:35.224Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T01:54:37.021Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 12759 bytes)
2025-01-31T01:54:39.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 28603 bytes)
2025-01-31T01:54:39.648Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1636,"hasContent":true,"text":"The best. This is the culmination of everything. It could be the culmination of your career. Try it,"}
2025-01-31T01:54:39.648Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: The best. This is the culmination of everything. It could be the culmination of your career. Try it, you'll like it. Drumroll, please. Up the lid. It's a success! No thanks, I just brushed my teeth. A...
2025-01-31T01:54:39.649Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1636,"transcriptContent":"The best. This is the culmination of everything. It could be the culmination of your career. Try it,"}
2025-01-31T01:54:40.651Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T01:54:41.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 44679 bytes)
2025-01-31T01:54:41.979Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T01:54:41.981Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1636,"transcriptLength":1636,"summary":"The best. This is the culmination of everything. It could be the culmination of your career. Try it,"}
2025-01-31T01:54:41.985Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T01:54:41.998Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738288481981.txt","size":1636}
2025-01-31T01:54:42.220Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: The best. This is the culmination of everything. It could be the culmination of your career. Try it, you'll like it. Drumroll, please. Up the lid. It's a success! No thanks, I just brushed my teeth. All right, Q, here we go, buddy. All right, buddy. All right, all right. It was in my mouth. It was in my mouth. I didn't know I was gonna do it. I'm trying to keep it off my right shoulder. I would get out of spraying distance. You know, it's great to be doing highbrow comedy again. Let's just get this started. With special guest, Michael Ian Plank. That's awesome. Today, we are in the emergency room while asking people to sign up for a chance to win a $25 gift card. Wow, but if you want to be eligible, you gotta give us your cell phone number and that's when the fun begins. That's because the other guys will be sending weird text messages on our behalf. Whoever gets the least amount of text messages back, loses. I always feel like when we do these things, we're literally in the CIA or the FBI. Because we have people stationed all over. You guys are like FBI agents. Wouldn't it be crazy if we solved a crime? I solve crimes all the time. What crimes do you solve? I look out my window with binoculars and I search for minor crimes. Have you caught any? I've seen a couple, but I didn't get out of the house in time to thwart them. So, let's try this guy in the red hat. Hey, how you doing, buddy? Just so you know, every single 10 minutes we give away a $25 gift card. That's good. Anywhere in this mall, I take your number and text them on the phone. Alright. What's your name? Ben. Ben, and your number, Vinny? 201- Bam!

2025-01-31T01:54:42.221Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T01:54:42.230Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738288288177-5zfpou0msh6.pcm","directory":"/usr/src/app/temp"}
2025-01-31T01:54:42.232Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738288288177-5zfpou0msh6.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T01:54:43.021Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 58970 bytes)
2025-01-31T01:54:45.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 71220 bytes)
2025-01-31T01:54:45.342Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T01:54:47.582Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 83176 bytes)
2025-01-31T01:54:49.581Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 97151 bytes)
2025-01-31T01:54:51.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 113053 bytes)
2025-01-31T01:54:53.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 127776 bytes)
2025-01-31T01:54:55.580Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 141059 bytes)
2025-01-31T01:54:57.578Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 155908 bytes)
2025-01-31T01:54:59.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 170786 bytes)
2025-01-31T02:00:51.131Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T02:00:51.188Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T02:00:51.280Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T02:00:51.310Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738288468265-z6tlnib29o.pcm","age":351594.7575683594,"size":4608000}
2025-01-31T02:00:51.318Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T02:00:51.324Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T02:00:51.325Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T02:00:51.706Z [32minfo[39m: Bot initialized successfully
2025-01-31T02:00:51.783Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T02:01:35.943Z [32minfo[39m: Command Name: setkey
2025-01-31T02:01:35.949Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T02:01:36.202Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T02:01:36.205Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334705110080684154","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:01:36.205Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:01:39.454Z [32minfo[39m: Command Name: record
2025-01-31T02:01:39.456Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T02:01:39.709Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T02:01:39.958Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T02:01:39.960Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T02:01:39.961Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:01:39.961Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:01:39.961Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:01:39.963Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738288899962-iqsdh9p4nas.pcm","directory":"temp"}
2025-01-31T02:01:40.020Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:01:40.021Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:01:40.021Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T02:01:40.021Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:01:40.021Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T02:01:40.021Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T02:01:40.022Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334705124857090148","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:01:40.022Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:01:40.041Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:01:40.042Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:01:41.965Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 13835 bytes)
2025-01-31T02:01:43.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 28608 bytes)
2025-01-31T02:01:45.981Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 43642 bytes)
2025-01-31T02:01:47.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 59526 bytes)
2025-01-31T02:01:49.108Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:01:52.106Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 73171 bytes)
2025-01-31T02:01:54.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 89184 bytes)
2025-01-31T02:01:56.364Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 101752 bytes)
2025-01-31T02:01:58.589Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 117413 bytes)
2025-01-31T02:02:00.584Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 132346 bytes)
2025-01-31T02:02:02.581Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 148267 bytes)
2025-01-31T02:02:04.583Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 163389 bytes)
2025-01-31T02:02:06.664Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 177884 bytes)
2025-01-31T02:02:11.102Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 190165 bytes)
2025-01-31T02:02:16.364Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 201191 bytes)
2025-01-31T02:02:18.364Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 215155 bytes)
2025-01-31T02:02:20.363Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 230928 bytes)
2025-01-31T02:02:22.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 246003 bytes)
2025-01-31T02:02:24.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 261656 bytes)
2025-01-31T02:02:26.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 274483 bytes)
2025-01-31T02:02:29.480Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 287910 bytes)
2025-01-31T02:02:31.623Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 300631 bytes)
2025-01-31T02:02:33.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 314013 bytes)
2025-01-31T02:02:35.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 328473 bytes)
2025-01-31T02:02:37.707Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 343916 bytes)
2025-01-31T02:02:39.701Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 359381 bytes)
2025-01-31T02:02:41.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 375292 bytes)
2025-01-31T02:02:43.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 389675 bytes)
2025-01-31T02:02:45.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 403768 bytes)
2025-01-31T02:02:47.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 418506 bytes)
2025-01-31T02:02:49.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 434410 bytes)
2025-01-31T02:02:51.704Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 450266 bytes)
2025-01-31T02:02:53.883Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 463486 bytes)
2025-01-31T02:02:55.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 479208 bytes)
2025-01-31T02:02:58.600Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 493281 bytes)
2025-01-31T02:03:00.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 507506 bytes)
2025-01-31T02:03:02.583Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 523448 bytes)
2025-01-31T02:03:04.682Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 537075 bytes)
2025-01-31T02:03:06.764Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 550320 bytes)
2025-01-31T02:03:08.761Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 564212 bytes)
2025-01-31T02:03:10.762Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 578093 bytes)
2025-01-31T02:03:12.983Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 591730 bytes)
2025-01-31T02:03:14.987Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 607271 bytes)
2025-01-31T02:03:17.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 621768 bytes)
2025-01-31T02:03:19.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 637422 bytes)
2025-01-31T02:03:21.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 653289 bytes)
2025-01-31T02:03:27.565Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 667479 bytes)
2025-01-31T02:03:29.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 678943 bytes)
2025-01-31T02:03:31.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 693796 bytes)
2025-01-31T02:03:33.766Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 709828 bytes)
2025-01-31T02:03:38.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 724135 bytes)
2025-01-31T02:03:40.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 736587 bytes)
2025-01-31T02:03:45.200Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 746441 bytes)
2025-01-31T02:03:47.203Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 761387 bytes)
2025-01-31T02:03:49.202Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 775446 bytes)
2025-01-31T02:03:51.443Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 788962 bytes)
2025-01-31T02:03:53.441Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 801696 bytes)
2025-01-31T02:03:55.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 815273 bytes)
2025-01-31T02:03:57.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 828678 bytes)
2025-01-31T02:03:59.979Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 842758 bytes)
2025-01-31T02:04:01.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 853750 bytes)
2025-01-31T02:04:03.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 866917 bytes)
2025-01-31T02:04:05.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 881353 bytes)
2025-01-31T02:04:08.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 894382 bytes)
2025-01-31T02:04:10.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 908535 bytes)
2025-01-31T02:04:12.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 919874 bytes)
2025-01-31T02:04:14.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 935268 bytes)
2025-01-31T02:04:16.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 950864 bytes)
2025-01-31T02:04:18.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 965818 bytes)
2025-01-31T02:04:20.961Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 978903 bytes)
2025-01-31T02:04:22.966Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 994653 bytes)
2025-01-31T02:04:24.962Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1007853 bytes)
2025-01-31T02:04:26.963Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1023613 bytes)
2025-01-31T02:04:28.963Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1038708 bytes)
2025-01-31T02:04:30.960Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1053871 bytes)
2025-01-31T02:04:34.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1067863 bytes)
2025-01-31T02:04:36.123Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1083450 bytes)
2025-01-31T02:04:38.123Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1099462 bytes)
2025-01-31T02:04:40.029Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:04:40.036Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738289080030-anbppxmh7gv.pcm","directory":"temp"}
2025-01-31T02:04:40.042Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:04:40.043Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:04:40.043Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:04:40.044Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:04:40.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1115092 bytes)
2025-01-31T02:04:41.047Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:04:41.049Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:04:42.424Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:04:42.425Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:04:43.446Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738288899962-iqsdh9p4nas.pcm to MP3
2025-01-31T02:04:43.447Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738288899962-iqsdh9p4nas.pcm.mp3","exists":true}
2025-01-31T02:04:43.448Z [32minfo[39m: [TranscriptionService] File stats:{"size":2008557,"created":"2025-01-31T02:04:42.277Z","modified":"2025-01-31T02:04:43.426Z"}
2025-01-31T02:04:43.450Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:04:43.450Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:04:43.794Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:04:45.562Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 13192 bytes)
2025-01-31T02:04:47.564Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 27454 bytes)
2025-01-31T02:04:49.644Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 39712 bytes)
2025-01-31T02:04:51.644Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 54250 bytes)
2025-01-31T02:04:53.648Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 68387 bytes)
2025-01-31T02:04:55.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 80657 bytes)
2025-01-31T02:04:58.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 87525 bytes)
2025-01-31T02:05:00.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 102472 bytes)
2025-01-31T02:05:05.803Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 113886 bytes)
2025-01-31T02:05:07.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 126296 bytes)
2025-01-31T02:05:09.807Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 138615 bytes)
2025-01-31T02:05:11.806Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 154189 bytes)
2025-01-31T02:05:13.806Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 169163 bytes)
2025-01-31T02:05:15.883Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 181712 bytes)
2025-01-31T02:05:16.090Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2429,"hasContent":true,"text":"User1 :\"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate.\" Us"}
2025-01-31T02:05:16.092Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: User1 :"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate." User2:"Message received, sounds first up on the loser board." User1:"Today we are playing Security Gua...
2025-01-31T02:05:16.093Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2429,"transcriptContent":"User1 :\"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate.\" Us"}
2025-01-31T02:05:17.098Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:05:18.704Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 195581 bytes)
2025-01-31T02:05:20.705Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 209973 bytes)
2025-01-31T02:05:22.706Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 224420 bytes)
2025-01-31T02:05:25.668Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 236889 bytes)
2025-01-31T02:05:27.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 252835 bytes)
2025-01-31T02:05:29.746Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 266048 bytes)
2025-01-31T02:05:31.744Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 281390 bytes)
2025-01-31T02:05:33.827Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 294549 bytes)
2025-01-31T02:05:35.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 310681 bytes)
2025-01-31T02:05:38.245Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 322045 bytes)
2025-01-31T02:05:40.245Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 336822 bytes)
2025-01-31T02:05:42.246Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 352387 bytes)
2025-01-31T02:05:44.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 364675 bytes)
2025-01-31T02:05:46.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 380667 bytes)
2025-01-31T02:05:47.982Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2593,"transcriptLength":2429,"summary":"***This session was an interaction of two individuals seemingly playing a game revolving around a un"}
2025-01-31T02:05:48.003Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"86","data":{"guildId":"1315144523336122469","transcript":"User1 :\"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate.\" User2:\"Message received, sounds first up on the loser board.\" User1:\"Today we are playing Security Guards have a lot less close-ups.\" User2:\"And while we're on wash, when you snap shoplifters next, we have to, so do the same with the other guy's stuff.\" User1:\"Shoplifter, your security guard a lot less, you know that little remote control device you put in your pocket?\" User2:\"Yeah.\" User1:\"Okay, so take that out, ask this woman if she wants to see something really cool.\" User2:\"Yeah.\" User1:\"Please, $9.99?\" User2:\"$9.99.\" User1:\"I think so, you want to see something really cool?\" User2:\"Uh, I don't see what we can get though.\" User1:\"Hey, give me this new security device then.\" User2:\"It's a microwave infrared sonar sensor.\" User1:\"Oh, okay.\" User2:\"Yeah.\" User1:\"With it I can control anyone with this stuff.\" User2:\"And it like influences the brain a little bit, controls them a little bit, like little minded things.\" User1:\"A little bit.\" User2:\"Yeah, yeah, yeah.\" User1:\"Wanna see it work?\" User2:\"Okay.\" User1:\"Nah, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no.\" User2:\"You can shake up the customer, okay. Or you can shake, shake, it's a hard thing to handle.\" User2:\"Start here a little bit, watch this.\" User1:\"Shake up.\" User2:\"Is that crazy?\" User1:\"Is that crazy? She believes it!\" User2:\"No, no, she doesn't.\" User1:\"No, no, no, she doesn't.\" User2:\"Shake, shake, the other one, watch this.\" User1:\"It's a security device, yeah, yeah, it's cool.\" User2:\"It rotates, that's how it rotates.\" User1:\"Shake, dab.\" User2:\"Oh, oh, oh, oh, oh.\" User1:\"Do you want to try it?\" User2:\"No.\" User1:\"Oh, can you walk through? Q, say you see the white guy.\" User2:\"See the white guy over there? Watch this.\" User1:\"Go, drop.\" User2:\"Q, hit him again.\" User1:\"Drop, go.\" User1:\"It's not a shot.\" User2:\"Just in with it, sometimes he shoots, he shoots at himself, say shoot him all to death and fall to the ground.\" User1:\"Yeah.\" User2:\"You know when I'm in front of the white?\" User1:\"Shoot him alone!\" User2:\"What? It's not a day outfit, she just walked away.\" User1:\"I accidentally hit myself.\" User2:\"South, security south.\" User2:\"Turn to this woman that just walked in and say, if you want a shot, look that's fine, I just got to wet my beak a little bit, I gotta get a taste.\"\n"}}
2025-01-31T02:05:48.003Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:05:48.003Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 86
2025-01-31T02:05:48.005Z [33mwarn[39m: [ChannelService] Message is too long (2569 chars), splitting into chunks
2025-01-31T02:05:48.016Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738289148003.txt","size":2429}
2025-01-31T02:05:48.522Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 394687 bytes)
2025-01-31T02:05:48.875Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: User1 :"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate." User2:"Message received, sounds first up on the loser board." User1:"Today we are playing Security Guards have a lot less close-ups." User2:"And while we're on wash, when you snap shoplifters next, we have to, so do the same with the other guy's stuff." User1:"Shoplifter, your security guard a lot less, you know that little remote control device you put in your pocket?" User2:"Yeah." User1:"Okay, so take that out, ask this woman if she wants to see something really cool." User2:"Yeah." User1:"Please, $9.99?" User2:"$9.99." User1:"I think so, you want to see something really cool?" User2:"Uh, I don't see what we can get though." User1:"Hey, give me this new security device then." User2:"It's a microwave infrared sonar sensor." User1:"Oh, okay." User2:"Yeah." User1:"With it I can control anyone with this stuff." User2:"And it like influences the brain a little bit, controls them a little bit, like little minded things." User1:"A little bit." User2:"Yeah, yeah, yeah." User1:"Wanna see it work?" User2:"Okay." User1:"Nah, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no." User2:"You can shake up the customer, okay. Or you can shake, shake, it's a hard thing to handle." User2:"Start here a little bit, watch this." User1:"Shake up." User2:"Is that crazy?" User1:"Is that crazy? She believes it!" User2:"No, no, she doesn't." User1:"No, no, no, she doesn't." User2:"Shake, shake, the other one, watch this." User1:"It's a security device, yeah, yeah, it's cool." User2:"It rotates, that's how it rotates." User1:"Shake, dab." User2:"Oh, oh, oh, oh, oh." User1:"Do you want to try it?" User2:"No." User1:"Oh, can you walk through? Q, say you see the white guy." User2:"See the white guy over there? Watch this." User1:"Go, drop." User2:"Q, hit him again." User1:"Drop, go." User1:"It's not a shot." User2:"Just in with it, sometimes he shoots, he shoots at himself, say shoot him all to death and fall to the ground." User1:"Yeah." User2:"You know when I'm in front of the white?" User1:"Shoot him alone!" User2:"What? It's not a day outfit, she just walked away." User1:"I accidentally hit myself." User2:"South, security south." User2:"Turn to this woman that just walked in and say, if you want a shot, look that's fine, I just got to wet my beak a little bit, I gotta get a taste."

2025-01-31T02:05:48.877Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:05:48.887Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738288899962-iqsdh9p4nas.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:05:48.888Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738288899962-iqsdh9p4nas.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:05:51.134Z [32minfo[39m: Memory Usage:
2025-01-31T02:05:51.137Z [32minfo[39m: rss: 138.41 MB
2025-01-31T02:05:51.137Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T02:05:51.138Z [32minfo[39m: heapUsed: 28.1 MB
2025-01-31T02:05:51.138Z [32minfo[39m: external: 10.31 MB
2025-01-31T02:05:51.138Z [32minfo[39m: arrayBuffers: 2.38 MB
2025-01-31T02:05:51.165Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 407997 bytes)
2025-01-31T02:05:53.008Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"86","data":{"guildId":"1315144523336122469","transcript":"User1 :\"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate.\" User2:\"Message received, sounds first up on the loser board.\" User1:\"Today we are playing Security Guards have a lot less close-ups.\" User2:\"And while we're on wash, when you snap shoplifters next, we have to, so do the same with the other guy's stuff.\" User1:\"Shoplifter, your security guard a lot less, you know that little remote control device you put in your pocket?\" User2:\"Yeah.\" User1:\"Okay, so take that out, ask this woman if she wants to see something really cool.\" User2:\"Yeah.\" User1:\"Please, $9.99?\" User2:\"$9.99.\" User1:\"I think so, you want to see something really cool?\" User2:\"Uh, I don't see what we can get though.\" User1:\"Hey, give me this new security device then.\" User2:\"It's a microwave infrared sonar sensor.\" User1:\"Oh, okay.\" User2:\"Yeah.\" User1:\"With it I can control anyone with this stuff.\" User2:\"And it like influences the brain a little bit, controls them a little bit, like little minded things.\" User1:\"A little bit.\" User2:\"Yeah, yeah, yeah.\" User1:\"Wanna see it work?\" User2:\"Okay.\" User1:\"Nah, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no, no.\" User2:\"You can shake up the customer, okay. Or you can shake, shake, it's a hard thing to handle.\" User2:\"Start here a little bit, watch this.\" User1:\"Shake up.\" User2:\"Is that crazy?\" User1:\"Is that crazy? She believes it!\" User2:\"No, no, she doesn't.\" User1:\"No, no, no, she doesn't.\" User2:\"Shake, shake, the other one, watch this.\" User1:\"It's a security device, yeah, yeah, it's cool.\" User2:\"It rotates, that's how it rotates.\" User1:\"Shake, dab.\" User2:\"Oh, oh, oh, oh, oh.\" User1:\"Do you want to try it?\" User2:\"No.\" User1:\"Oh, can you walk through? Q, say you see the white guy.\" User2:\"See the white guy over there? Watch this.\" User1:\"Go, drop.\" User2:\"Q, hit him again.\" User1:\"Drop, go.\" User1:\"It's not a shot.\" User2:\"Just in with it, sometimes he shoots, he shoots at himself, say shoot him all to death and fall to the ground.\" User1:\"Yeah.\" User2:\"You know when I'm in front of the white?\" User1:\"Shoot him alone!\" User2:\"What? It's not a day outfit, she just walked away.\" User1:\"I accidentally hit myself.\" User2:\"South, security south.\" User2:\"Turn to this woman that just walked in and say, if you want a shot, look that's fine, I just got to wet my beak a little bit, I gotta get a taste.\"\n"}}
2025-01-31T02:05:53.008Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:05:53.008Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2429,"transcriptContent":"User1 :\"Cindy, you won the card, $20 gift card, I am the clown man, and I'm gonna go chalibrate.\" Us"}
2025-01-31T02:05:53.162Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 423464 bytes)
2025-01-31T02:05:54.012Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:05:55.167Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 439248 bytes)
2025-01-31T02:05:57.286Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 452423 bytes)
2025-01-31T02:05:59.286Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 467344 bytes)
2025-01-31T02:06:01.783Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 480810 bytes)
2025-01-31T02:06:03.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 496488 bytes)
2025-01-31T02:06:05.784Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 510608 bytes)
2025-01-31T02:06:07.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 525873 bytes)
2025-01-31T02:06:10.406Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 537404 bytes)
2025-01-31T02:06:12.406Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 553362 bytes)
2025-01-31T02:06:14.407Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 568909 bytes)
2025-01-31T02:06:14.593Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1868,"transcriptLength":2429,"summary":"***The transcript captures a humorous and slightly chaotic exchange between User1 and User2, who app"}
2025-01-31T02:06:14.594Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:06:14.836Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:06:14.845Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"86","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738289174594}}
2025-01-31T02:06:16.486Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 582489 bytes)
2025-01-31T02:06:18.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 597925 bytes)
2025-01-31T02:06:20.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 613719 bytes)
2025-01-31T02:06:22.506Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 629042 bytes)
2025-01-31T02:06:24.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 643589 bytes)
2025-01-31T02:06:26.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 659152 bytes)
2025-01-31T02:06:28.484Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 674927 bytes)
2025-01-31T02:06:30.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 690450 bytes)
2025-01-31T02:06:32.486Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 705270 bytes)
2025-01-31T02:06:34.724Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 717367 bytes)
2025-01-31T02:06:36.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 71 bytes (total: 732207 bytes)
2025-01-31T02:06:38.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 746337 bytes)
2025-01-31T02:06:40.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 761599 bytes)
2025-01-31T02:06:42.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 777022 bytes)
2025-01-31T02:06:44.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 793053 bytes)
2025-01-31T02:06:47.484Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 807239 bytes)
2025-01-31T02:06:49.486Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 195 bytes (total: 822635 bytes)
2025-01-31T02:06:51.488Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 190 bytes (total: 838147 bytes)
2025-01-31T02:06:53.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 852430 bytes)
2025-01-31T02:06:55.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 865877 bytes)
2025-01-31T02:06:57.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 881415 bytes)
2025-01-31T02:06:59.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 897224 bytes)
2025-01-31T02:07:03.162Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 908683 bytes)
2025-01-31T02:07:05.165Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 923530 bytes)
2025-01-31T02:07:07.187Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 937899 bytes)
2025-01-31T02:07:09.164Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 951905 bytes)
2025-01-31T02:07:11.167Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 967974 bytes)
2025-01-31T02:07:13.164Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 983341 bytes)
2025-01-31T02:07:15.165Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 999270 bytes)
2025-01-31T02:07:17.343Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1013266 bytes)
2025-01-31T02:07:19.526Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1026980 bytes)
2025-01-31T02:07:21.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1040967 bytes)
2025-01-31T02:07:23.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1055801 bytes)
2025-01-31T02:07:25.766Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1068414 bytes)
2025-01-31T02:07:27.765Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1082472 bytes)
2025-01-31T02:07:29.765Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1093194 bytes)
2025-01-31T02:07:31.765Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1109064 bytes)
2025-01-31T02:07:33.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1122032 bytes)
2025-01-31T02:07:35.862Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1136336 bytes)
2025-01-31T02:07:38.692Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1149617 bytes)
2025-01-31T02:07:40.030Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:07:40.032Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738289260031-ta4zpanojec.pcm","directory":"temp"}
2025-01-31T02:07:40.035Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:07:40.037Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:07:40.038Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:07:40.038Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:07:40.685Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1165286 bytes)
2025-01-31T02:07:41.044Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:07:41.049Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:07:43.428Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738289080030-anbppxmh7gv.pcm to MP3
2025-01-31T02:07:43.429Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738289080030-anbppxmh7gv.pcm.mp3","exists":true}
2025-01-31T02:07:43.431Z [32minfo[39m: [TranscriptionService] File stats:{"size":2090733,"created":"2025-01-31T02:07:42.246Z","modified":"2025-01-31T02:07:43.394Z"}
2025-01-31T02:07:43.432Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:07:43.432Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:07:49.847Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:07:49.852Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:07:51.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 15504 bytes)
2025-01-31T02:07:53.846Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 31352 bytes)
2025-01-31T02:07:55.867Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:07:56.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 45057 bytes)
2025-01-31T02:07:58.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 60875 bytes)
2025-01-31T02:08:00.346Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 74735 bytes)
2025-01-31T02:08:02.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 86957 bytes)
2025-01-31T02:08:04.486Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 101558 bytes)
2025-01-31T02:08:07.566Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 105 bytes (total: 112210 bytes)
2025-01-31T02:08:10.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 122348 bytes)
2025-01-31T02:08:20.387Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":558,"hasContent":true,"text":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect so"}
2025-01-31T02:08:20.389Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect someone else. We're sending in a greased up boy. Catch him. Catch his nemesis, he's hiding in the stor...
2025-01-31T02:08:20.390Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":558,"transcriptContent":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect so"}
2025-01-31T02:08:20.888Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 132819 bytes)
2025-01-31T02:08:21.389Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:08:22.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 146453 bytes)
2025-01-31T02:08:24.068Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available"}
2025-01-31T02:08:24.069Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:08:24.883Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 162060 bytes)
2025-01-31T02:08:26.075Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:08:26.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 175572 bytes)
2025-01-31T02:08:26.996Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"***No transcript available***"}
2025-01-31T02:08:26.996Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T02:08:31.000Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T02:08:31.602Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:08:31.603Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":558,"transcriptLength":558,"summary":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect so"}
2025-01-31T02:08:31.607Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"87","data":{"guildId":"1315144523336122469","transcript":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect someone else. We're sending in a greased up boy. Catch him. Catch his nemesis, he's hiding in the store. Get him. What are you talking about? We're nursing him. What the heck are you doing? We gotta catch the greased up boy. Get some movement. You can't walk around the shirtless little store greased up like a boy. You can't be greased in here, sir. You have to wait. Well, stop it. Excuse me, sir. You can't be greased up in here. You can't. Sir, excuse me.\n"}}
2025-01-31T02:08:31.607Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:08:31.608Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 87
2025-01-31T02:08:31.608Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:08:31.620Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738289311608.txt","size":558}
2025-01-31T02:08:31.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 186532 bytes)
2025-01-31T02:08:31.853Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect someone else. We're sending in a greased up boy. Catch him. Catch his nemesis, he's hiding in the store. Get him. What are you talking about? We're nursing him. What the heck are you doing? We gotta catch the greased up boy. Get some movement. You can't walk around the shirtless little store greased up like a boy. You can't be greased in here, sir. You have to wait. Well, stop it. Excuse me, sir. You can't be greased up in here. You can't. Sir, excuse me.

2025-01-31T02:08:31.854Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:08:31.864Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289080030-anbppxmh7gv.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:08:31.864Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289080030-anbppxmh7gv.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:08:36.105Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 198740 bytes)
2025-01-31T02:08:36.618Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"87","data":{"guildId":"1315144523336122469","transcript":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect someone else. We're sending in a greased up boy. Catch him. Catch his nemesis, he's hiding in the store. Get him. What are you talking about? We're nursing him. What the heck are you doing? We gotta catch the greased up boy. Get some movement. You can't walk around the shirtless little store greased up like a boy. You can't be greased in here, sir. You have to wait. Well, stop it. Excuse me, sir. You can't be greased up in here. You can't. Sir, excuse me.\n"}}
2025-01-31T02:08:36.619Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:08:36.620Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":558,"transcriptContent":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect so"}
2025-01-31T02:08:37.622Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:08:38.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 210419 bytes)
2025-01-31T02:08:38.824Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:08:38.825Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:08:40.827Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:08:41.619Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:08:41.620Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T02:08:43.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 221342 bytes)
2025-01-31T02:08:45.622Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T02:08:47.164Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 231154 bytes)
2025-01-31T02:08:48.407Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:08:48.407Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":558,"transcriptLength":558,"summary":"I don't know man, my dick don't work. After a certain age, nobody's dicks work. I need to protect so"}
2025-01-31T02:08:48.408Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:08:48.633Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:08:48.638Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"87","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738289328407}}
2025-01-31T02:08:50.509Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 244383 bytes)
2025-01-31T02:08:52.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 259478 bytes)
2025-01-31T02:08:54.507Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 275536 bytes)
2025-01-31T02:08:56.806Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 289904 bytes)
2025-01-31T02:08:59.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 302845 bytes)
2025-01-31T02:09:01.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 318816 bytes)
2025-01-31T02:09:03.343Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 333176 bytes)
2025-01-31T02:09:05.346Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 349162 bytes)
2025-01-31T02:09:07.345Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 364972 bytes)
2025-01-31T02:09:09.587Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 376714 bytes)
2025-01-31T02:09:11.861Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 390478 bytes)
2025-01-31T02:09:13.965Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 404130 bytes)
2025-01-31T02:09:15.964Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 419356 bytes)
2025-01-31T02:09:18.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 432496 bytes)
2025-01-31T02:09:21.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 442745 bytes)
2025-01-31T02:09:23.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 453863 bytes)
2025-01-31T02:09:26.587Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 467287 bytes)
2025-01-31T02:09:28.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 478236 bytes)
2025-01-31T02:09:30.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 493366 bytes)
2025-01-31T02:09:34.648Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 504660 bytes)
2025-01-31T02:09:36.650Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 520227 bytes)
2025-01-31T02:09:38.644Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 534946 bytes)
2025-01-31T02:09:40.650Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 549964 bytes)
2025-01-31T02:09:42.646Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 565918 bytes)
2025-01-31T02:09:44.647Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 581274 bytes)
2025-01-31T02:09:46.665Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 596277 bytes)
2025-01-31T02:09:48.650Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 611824 bytes)
2025-01-31T02:09:50.647Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 627633 bytes)
2025-01-31T02:09:52.645Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 643361 bytes)
2025-01-31T02:09:54.649Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 659332 bytes)
2025-01-31T02:09:56.650Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 675169 bytes)
2025-01-31T02:09:58.647Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 690929 bytes)
2025-01-31T02:10:00.647Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 706837 bytes)
2025-01-31T02:10:02.649Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 722148 bytes)
2025-01-31T02:10:04.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 735469 bytes)
2025-01-31T02:10:06.847Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 751347 bytes)
2025-01-31T02:10:12.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 762472 bytes)
2025-01-31T02:10:14.206Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 775518 bytes)
2025-01-31T02:10:16.205Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 791051 bytes)
2025-01-31T02:10:18.206Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 807053 bytes)
2025-01-31T02:10:20.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 822834 bytes)
2025-01-31T02:10:22.206Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 838764 bytes)
2025-01-31T02:10:24.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 854695 bytes)
2025-01-31T02:10:26.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 870629 bytes)
2025-01-31T02:10:28.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 886123 bytes)
2025-01-31T02:10:30.205Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 901285 bytes)
2025-01-31T02:10:32.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 917143 bytes)
2025-01-31T02:10:34.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 932106 bytes)
2025-01-31T02:10:36.209Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 947999 bytes)
2025-01-31T02:10:38.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 963886 bytes)
2025-01-31T02:10:40.033Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:10:40.036Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738289440034-6aq1ekiog2d.pcm","directory":"temp"}
2025-01-31T02:10:40.042Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:10:40.043Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:10:40.044Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:10:40.044Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:10:40.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 979377 bytes)
2025-01-31T02:10:41.048Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:10:41.050Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:10:43.225Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738289260031-ta4zpanojec.pcm to MP3
2025-01-31T02:10:43.226Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738289260031-ta4zpanojec.pcm.mp3","exists":true}
2025-01-31T02:10:43.226Z [32minfo[39m: [TranscriptionService] File stats:{"size":1757013,"created":"2025-01-31T02:10:42.254Z","modified":"2025-01-31T02:10:43.208Z"}
2025-01-31T02:10:43.226Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:10:43.226Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:10:43.653Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:10:43.657Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:10:45.647Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 15972 bytes)
2025-01-31T02:10:45.856Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:10:47.646Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 31483 bytes)
2025-01-31T02:10:51.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 43301 bytes)
2025-01-31T02:10:51.137Z [32minfo[39m: Memory Usage:
2025-01-31T02:10:51.139Z [32minfo[39m: rss: 143.89 MB
2025-01-31T02:10:51.140Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T02:10:51.140Z [32minfo[39m: heapUsed: 28.33 MB
2025-01-31T02:10:51.140Z [32minfo[39m: external: 12.08 MB
2025-01-31T02:10:51.140Z [32minfo[39m: arrayBuffers: 4.16 MB
2025-01-31T02:10:53.285Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 56851 bytes)
2025-01-31T02:10:55.288Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 69369 bytes)
2025-01-31T02:10:57.288Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 84801 bytes)
2025-01-31T02:10:59.525Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 97364 bytes)
2025-01-31T02:11:02.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 109178 bytes)
2025-01-31T02:11:04.567Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 124798 bytes)
2025-01-31T02:11:06.568Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 139296 bytes)
2025-01-31T02:11:10.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 148809 bytes)
2025-01-31T02:11:12.081Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":908,"hasContent":true,"text":"This is a charity event for kids and their parents, and we have hired you and some catering staff as"}
2025-01-31T02:11:12.082Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: This is a charity event for kids and their parents, and we have hired you and some catering staff as elves for the event. Before the event, Michael is going to throw a little orientation to make sure ...
2025-01-31T02:11:12.082Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":908,"transcriptContent":"This is a charity event for kids and their parents, and we have hired you and some catering staff as"}
2025-01-31T02:11:12.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 164020 bytes)
2025-01-31T02:11:13.088Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:11:14.127Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 178006 bytes)
2025-01-31T02:11:14.321Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:11:14.322Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:11:16.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 190760 bytes)
2025-01-31T02:11:16.327Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:11:16.645Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:11:16.646Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T02:11:18.206Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 205564 bytes)
2025-01-31T02:11:20.209Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 219524 bytes)
2025-01-31T02:11:20.655Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T02:11:22.208Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 234437 bytes)
2025-01-31T02:11:22.242Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:11:22.242Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T02:11:24.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 247610 bytes)
2025-01-31T02:11:26.328Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 262904 bytes)
2025-01-31T02:11:28.248Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T02:11:28.325Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 276878 bytes)
2025-01-31T02:11:29.964Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:11:29.970Z [31merror[39m: [TranscriptionService] Summary generation failed:{"location":"TranscriptionService.generateSummary","error":{"name":"Error","message":"Failed to generate summary after all retries","stack":"Error: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:175:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:156:44)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)"},"context":{"transcriptLength":908,"transcriptSample":"This is a charity event for kids and their parents, and we have hired you and some catering staff as"}}
2025-01-31T02:11:29.971Z [33mwarn[39m: [VoiceRecorder] Failed to generate summary, using transcript as fallback: Failed to generate summary: Failed to generate summary after all retries{"stack":"Error: Failed to generate summary: Failed to generate summary after all retries\n    at TranscriptionService.generateSummary (file:///usr/src/app/src/services/TranscriptionService.js:226:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:156:44)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)"}
2025-01-31T02:11:29.975Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"88","data":{"guildId":"1315144523336122469","transcript":"This is a charity event for kids and their parents, and we have hired you and some catering staff as elves for the event. Before the event, Michael is going to throw a little orientation to make sure that you elves stay in character. I'll teach you how to do the elf, you'll be oriented. I'll do. Thanks for being here. Michael Black has entered the fray. Today, you guys are going to be the elves, staying in character is obviously important around the kids. So that's why we have these elf costumes. These are people hired to work as caterers tonight, but they've got to go through the training first, right? This is going to be a great group, I can tell already. So if everybody could just get on their feet, thanks so much. It helps to have a character, to have your backstory, just because these kids, they want to know what your elf name is. They want to know where you're from. Can we just skip this?\n"}}
2025-01-31T02:11:29.975Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:11:29.976Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 88
2025-01-31T02:11:29.978Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:11:29.990Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738289489976.txt","size":908}
2025-01-31T02:11:30.219Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: This is a charity event for kids and their parents, and we have hired you and some catering staff as elves for the event. Before the event, Michael is going to throw a little orientation to make sure that you elves stay in character. I'll teach you how to do the elf, you'll be oriented. I'll do. Thanks for being here. Michael Black has entered the fray. Today, you guys are going to be the elves, staying in character is obviously important around the kids. So that's why we have these elf costumes. These are people hired to work as caterers tonight, but they've got to go through the training first, right? This is going to be a great group, I can tell already. So if everybody could just get on their feet, thanks so much. It helps to have a character, to have your backstory, just because these kids, they want to know what your elf name is. They want to know where you're from. Can we just skip this?

2025-01-31T02:11:30.219Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:11:30.236Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289260031-ta4zpanojec.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:11:30.237Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289260031-ta4zpanojec.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:11:30.324Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 291140 bytes)
2025-01-31T02:11:32.328Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 302179 bytes)
2025-01-31T02:11:34.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 316643 bytes)
2025-01-31T02:11:34.976Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"88","data":{"guildId":"1315144523336122469","transcript":"This is a charity event for kids and their parents, and we have hired you and some catering staff as elves for the event. Before the event, Michael is going to throw a little orientation to make sure that you elves stay in character. I'll teach you how to do the elf, you'll be oriented. I'll do. Thanks for being here. Michael Black has entered the fray. Today, you guys are going to be the elves, staying in character is obviously important around the kids. So that's why we have these elf costumes. These are people hired to work as caterers tonight, but they've got to go through the training first, right? This is going to be a great group, I can tell already. So if everybody could just get on their feet, thanks so much. It helps to have a character, to have your backstory, just because these kids, they want to know what your elf name is. They want to know where you're from. Can we just skip this?\n"}}
2025-01-31T02:11:34.976Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:11:34.977Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":908,"transcriptContent":"This is a charity event for kids and their parents, and we have hired you and some catering staff as"}
2025-01-31T02:11:35.978Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:11:36.707Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 329542 bytes)
2025-01-31T02:11:37.475Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:11:37.476Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:11:38.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 72 bytes (total: 341989 bytes)
2025-01-31T02:11:39.477Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:11:40.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 357112 bytes)
2025-01-31T02:11:42.711Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1893,"transcriptLength":908,"summary":"***Narrative Summary:*** \nThe charity event for kids and parents is about to kick off, and the staff"}
2025-01-31T02:11:42.711Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:11:42.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 372633 bytes)
2025-01-31T02:11:42.918Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:11:42.923Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"88","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738289502711}}
2025-01-31T02:11:44.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 385967 bytes)
2025-01-31T02:11:46.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 400757 bytes)
2025-01-31T02:11:48.986Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 416288 bytes)
2025-01-31T02:11:51.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 428690 bytes)
2025-01-31T02:11:53.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 442352 bytes)
2025-01-31T02:11:55.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 455387 bytes)
2025-01-31T02:11:57.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 469323 bytes)
2025-01-31T02:12:00.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 480878 bytes)
2025-01-31T02:12:02.666Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 493765 bytes)
2025-01-31T02:12:05.246Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 506654 bytes)
2025-01-31T02:12:07.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 518548 bytes)
2025-01-31T02:12:12.008Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 530435 bytes)
2025-01-31T02:12:14.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 540953 bytes)
2025-01-31T02:12:17.026Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 555118 bytes)
2025-01-31T02:12:19.027Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 568898 bytes)
2025-01-31T02:12:21.027Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 580834 bytes)
2025-01-31T02:12:23.166Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 592519 bytes)
2025-01-31T02:12:25.169Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 607375 bytes)
2025-01-31T02:12:27.170Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 622740 bytes)
2025-01-31T02:12:29.168Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 638315 bytes)
2025-01-31T02:12:31.248Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 652506 bytes)
2025-01-31T02:12:33.246Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 668341 bytes)
2025-01-31T02:12:35.249Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 682550 bytes)
2025-01-31T02:12:37.247Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 697767 bytes)
2025-01-31T02:12:39.247Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 711539 bytes)
2025-01-31T02:12:41.329Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 723756 bytes)
2025-01-31T02:12:43.330Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 736705 bytes)
2025-01-31T02:12:45.327Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 752349 bytes)
2025-01-31T02:12:47.648Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 766124 bytes)
2025-01-31T02:12:51.046Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 775427 bytes)
2025-01-31T02:12:53.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 788338 bytes)
2025-01-31T02:12:55.508Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 801398 bytes)
2025-01-31T02:12:57.512Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 816255 bytes)
2025-01-31T02:12:59.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 827817 bytes)
2025-01-31T02:13:01.508Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 840375 bytes)
2025-01-31T02:13:03.847Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 853757 bytes)
2025-01-31T02:13:05.845Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 867471 bytes)
2025-01-31T02:13:07.862Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 881394 bytes)
2025-01-31T02:13:09.849Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 896526 bytes)
2025-01-31T02:13:11.926Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 909510 bytes)
2025-01-31T02:13:13.929Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 925305 bytes)
2025-01-31T02:13:16.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 938321 bytes)
2025-01-31T02:13:18.080Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 951580 bytes)
2025-01-31T02:13:20.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 966873 bytes)
2025-01-31T02:13:22.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 982552 bytes)
2025-01-31T02:13:24.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 998519 bytes)
2025-01-31T02:13:26.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1011773 bytes)
2025-01-31T02:13:28.067Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1024879 bytes)
2025-01-31T02:13:30.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1038459 bytes)
2025-01-31T02:13:32.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1053117 bytes)
2025-01-31T02:13:37.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 95 bytes (total: 1068744 bytes)
2025-01-31T02:13:39.763Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 1078420 bytes)
2025-01-31T02:13:40.035Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:13:40.037Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738289620036-oz0a1e7au1.pcm","directory":"temp"}
2025-01-31T02:13:40.043Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:13:40.046Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:13:40.047Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:13:40.048Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:13:41.052Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:13:41.057Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:13:42.431Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:13:42.432Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:13:43.360Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738289440034-6aq1ekiog2d.pcm to MP3
2025-01-31T02:13:43.361Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738289440034-6aq1ekiog2d.pcm.mp3","exists":true}
2025-01-31T02:13:43.361Z [32minfo[39m: [TranscriptionService] File stats:{"size":1951509,"created":"2025-01-31T02:13:42.246Z","modified":"2025-01-31T02:13:43.343Z"}
2025-01-31T02:13:43.361Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:13:43.361Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:13:43.546Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:13:45.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 10390 bytes)
2025-01-31T02:13:47.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 23256 bytes)
2025-01-31T02:13:49.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 38959 bytes)
2025-01-31T02:13:52.025Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 52721 bytes)
2025-01-31T02:13:54.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 65162 bytes)
2025-01-31T02:13:57.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 77140 bytes)
2025-01-31T02:13:59.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 91010 bytes)
2025-01-31T02:14:01.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 104121 bytes)
2025-01-31T02:14:03.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 119930 bytes)
2025-01-31T02:14:06.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 131799 bytes)
2025-01-31T02:14:08.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 143842 bytes)
2025-01-31T02:14:10.781Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 155608 bytes)
2025-01-31T02:14:12.781Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 169397 bytes)
2025-01-31T02:14:14.680Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1246,"hasContent":true,"text":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore w"}
2025-01-31T02:14:14.681Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore was ever meant to snaps. onlar say, skyshot, elevator. He just excluded me. Formulated, What happened...
2025-01-31T02:14:14.681Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1246,"transcriptContent":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore w"}
2025-01-31T02:14:15.683Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:14:16.893Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:14:16.894Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:14:18.896Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:14:19.577Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 179270 bytes)
2025-01-31T02:14:20.094Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:14:20.094Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T02:14:23.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 192303 bytes)
2025-01-31T02:14:24.080Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T02:14:25.771Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:14:25.772Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1246,"transcriptLength":1246,"summary":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore w"}
2025-01-31T02:14:25.777Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"89","data":{"guildId":"1315144523336122469","transcript":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore was ever meant to snaps. onlar say, skyshot, elevator. He just excluded me. Formulated, What happened to the downloaded files in Google Photos.  Explorer should not be and says the things you can expect. You're getting it's screaming. You're asking snowflake about life on the North Pole. So it's effective topic said, okay, we see that both nations Howard things at the North Pole. He's always both else. What what he's a clean debate to see we see both elves are Jewish. We notice both elves are Jewish Jewish is that what you guess Jewish cultural appropriation understand cultural motivation for them. I'm just trying to help kids. She will play the one role play. Okay. Do you want to give us a suggestion?  Kevin's well, New Yorker example. I'm going to give you some suggestions. I'm going to give you some suggestions.  going to give you some give you give you some suggestions. So be careful of any I think  are setting me  senior in this refresh. I think that would be due in September 11th. Yeah, of course. If we don't get to the holiday spirit, if we don't get to the holiday spirit, the terrorists have won. The terrorists have won.\n"}}
2025-01-31T02:14:25.777Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:14:25.777Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 89
2025-01-31T02:14:25.779Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:14:25.789Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738289665777.txt","size":1246}
2025-01-31T02:14:25.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 206398 bytes)
2025-01-31T02:14:26.016Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore was ever meant to snaps. onlar say, skyshot, elevator. He just excluded me. Formulated, What happened to the downloaded files in Google Photos.  Explorer should not be and says the things you can expect. You're getting it's screaming. You're asking snowflake about life on the North Pole. So it's effective topic said, okay, we see that both nations Howard things at the North Pole. He's always both else. What what he's a clean debate to see we see both elves are Jewish. We notice both elves are Jewish Jewish is that what you guess Jewish cultural appropriation understand cultural motivation for them. I'm just trying to help kids. She will play the one role play. Okay. Do you want to give us a suggestion?  Kevin's well, New Yorker example. I'm going to give you some suggestions. I'm going to give you some suggestions.  going to give you some give you give you some suggestions. So be careful of any I think  are setting me  senior in this refresh. I think that would be due in September 11th. Yeah, of course. If we don't get to the holiday spirit, if we don't get to the holiday spirit, the terrorists have won. The terrorists have won.

2025-01-31T02:14:26.017Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:14:26.035Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289440034-6aq1ekiog2d.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:14:26.036Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289440034-6aq1ekiog2d.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:14:28.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 217678 bytes)
2025-01-31T02:14:30.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 231542 bytes)
2025-01-31T02:14:30.793Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"89","data":{"guildId":"1315144523336122469","transcript":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore was ever meant to snaps. onlar say, skyshot, elevator. He just excluded me. Formulated, What happened to the downloaded files in Google Photos.  Explorer should not be and says the things you can expect. You're getting it's screaming. You're asking snowflake about life on the North Pole. So it's effective topic said, okay, we see that both nations Howard things at the North Pole. He's always both else. What what he's a clean debate to see we see both elves are Jewish. We notice both elves are Jewish Jewish is that what you guess Jewish cultural appropriation understand cultural motivation for them. I'm just trying to help kids. She will play the one role play. Okay. Do you want to give us a suggestion?  Kevin's well, New Yorker example. I'm going to give you some suggestions. I'm going to give you some suggestions.  going to give you some give you give you some suggestions. So be careful of any I think  are setting me  senior in this refresh. I think that would be due in September 11th. Yeah, of course. If we don't get to the holiday spirit, if we don't get to the holiday spirit, the terrorists have won. The terrorists have won.\n"}}
2025-01-31T02:14:30.793Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:14:30.794Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1246,"transcriptContent":"elong skipping then brush it no straight. I learn how to serve a cocktail is a whereabouts explore w"}
2025-01-31T02:14:31.800Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:14:32.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 247731 bytes)
2025-01-31T02:14:32.784Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:14:32.785Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:14:34.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 261449 bytes)
2025-01-31T02:14:34.786Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:14:36.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 275561 bytes)
2025-01-31T02:14:37.014Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1367,"transcriptLength":1246,"summary":"***The transcript revolves around a mix of light-hearted banter and discussions about serving cockta"}
2025-01-31T02:14:37.016Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:14:37.206Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:14:37.208Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"89","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738289677015}}
2025-01-31T02:14:38.602Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 288815 bytes)
2025-01-31T02:14:40.600Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 302474 bytes)
2025-01-31T02:14:42.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 316524 bytes)
2025-01-31T02:14:48.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 329730 bytes)
2025-01-31T02:14:52.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 341642 bytes)
2025-01-31T02:14:54.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 354951 bytes)
2025-01-31T02:14:58.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 368271 bytes)
2025-01-31T02:15:09.315Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 379322 bytes)
2025-01-31T02:15:12.196Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 391632 bytes)
2025-01-31T02:15:16.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 401696 bytes)
2025-01-31T02:15:20.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 414633 bytes)
2025-01-31T02:15:23.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 425449 bytes)
2025-01-31T02:15:25.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 436533 bytes)
2025-01-31T02:15:27.958Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 449644 bytes)
2025-01-31T02:15:30.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 461976 bytes)
2025-01-31T02:15:33.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 474833 bytes)
2025-01-31T02:15:36.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 488034 bytes)
2025-01-31T02:15:39.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 500164 bytes)
2025-01-31T02:15:47.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 512920 bytes)
2025-01-31T02:15:49.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 528554 bytes)
2025-01-31T02:15:51.108Z [32minfo[39m: Memory Usage:
2025-01-31T02:15:51.110Z [32minfo[39m: rss: 146.9 MB
2025-01-31T02:15:51.111Z [32minfo[39m: heapTotal: 31.21 MB
2025-01-31T02:15:51.112Z [32minfo[39m: heapUsed: 29.12 MB
2025-01-31T02:15:51.112Z [32minfo[39m: external: 14.04 MB
2025-01-31T02:15:51.113Z [32minfo[39m: arrayBuffers: 6.12 MB
2025-01-31T02:15:55.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 541351 bytes)
2025-01-31T02:15:57.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 556700 bytes)
2025-01-31T02:16:21.748Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T02:16:21.787Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T02:16:21.858Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T02:16:21.881Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738289620036-oz0a1e7au1.pcm","age":23741.22998046875,"size":16631040}
2025-01-31T02:16:21.887Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T02:16:21.891Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T02:16:21.892Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T02:16:22.345Z [32minfo[39m: Bot initialized successfully
2025-01-31T02:16:22.392Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T02:17:45.508Z [32minfo[39m: Command Name: setkey
2025-01-31T02:17:45.510Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T02:17:45.692Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T02:17:45.695Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334709176647028787","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:17:45.697Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:17:48.926Z [32minfo[39m: Command Name: record
2025-01-31T02:17:48.928Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T02:17:49.095Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T02:17:49.348Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T02:17:49.351Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T02:17:49.351Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:17:49.352Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:17:49.352Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:17:49.354Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738289869353-n2eubt5qe4f.pcm","directory":"temp"}
2025-01-31T02:17:49.436Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:17:49.437Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:17:49.437Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T02:17:49.437Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:17:49.437Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T02:17:49.437Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T02:17:49.438Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334709191029555282","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:17:49.438Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:17:49.461Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:17:49.462Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:17:51.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 15124 bytes)
2025-01-31T02:17:53.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 27305 bytes)
2025-01-31T02:17:55.459Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 42371 bytes)
2025-01-31T02:17:57.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 56232 bytes)
2025-01-31T02:17:58.982Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:17:59.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 68381 bytes)
2025-01-31T02:18:01.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 83442 bytes)
2025-01-31T02:18:03.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 97125 bytes)
2025-01-31T02:18:05.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 110602 bytes)
2025-01-31T02:18:07.840Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 124861 bytes)
2025-01-31T02:18:09.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 137736 bytes)
2025-01-31T02:18:11.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 153072 bytes)
2025-01-31T02:18:13.832Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 166740 bytes)
2025-01-31T02:18:17.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 180156 bytes)
2025-01-31T02:18:19.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 195767 bytes)
2025-01-31T02:18:21.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 210026 bytes)
2025-01-31T02:18:24.658Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 224253 bytes)
2025-01-31T02:18:26.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 239535 bytes)
2025-01-31T02:18:28.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 252697 bytes)
2025-01-31T02:18:30.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 266447 bytes)
2025-01-31T02:18:32.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 278998 bytes)
2025-01-31T02:18:34.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 290817 bytes)
2025-01-31T02:18:36.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 305372 bytes)
2025-01-31T02:18:42.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 319182 bytes)
2025-01-31T02:18:44.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 332885 bytes)
2025-01-31T02:18:46.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 346185 bytes)
2025-01-31T02:18:48.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 361468 bytes)
2025-01-31T02:18:50.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 375233 bytes)
2025-01-31T02:18:52.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 391148 bytes)
2025-01-31T02:18:54.100Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 406830 bytes)
2025-01-31T02:18:56.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 422551 bytes)
2025-01-31T02:18:58.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 437574 bytes)
2025-01-31T02:19:00.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 449122 bytes)
2025-01-31T02:19:02.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 464637 bytes)
2025-01-31T02:19:04.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 479566 bytes)
2025-01-31T02:19:06.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 494544 bytes)
2025-01-31T02:19:08.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 508560 bytes)
2025-01-31T02:19:11.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 522311 bytes)
2025-01-31T02:19:15.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 536045 bytes)
2025-01-31T02:19:17.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 548758 bytes)
2025-01-31T02:19:19.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 564108 bytes)
2025-01-31T02:19:21.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 578077 bytes)
2025-01-31T02:19:23.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 594087 bytes)
2025-01-31T02:19:25.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 608525 bytes)
2025-01-31T02:19:27.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 624021 bytes)
2025-01-31T02:19:29.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 639569 bytes)
2025-01-31T02:19:31.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 655156 bytes)
2025-01-31T02:19:33.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 669903 bytes)
2025-01-31T02:19:36.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 683188 bytes)
2025-01-31T02:19:38.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 698789 bytes)
2025-01-31T02:19:40.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 712773 bytes)
2025-01-31T02:19:42.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 726831 bytes)
2025-01-31T02:19:44.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 741115 bytes)
2025-01-31T02:19:46.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 756423 bytes)
2025-01-31T02:19:49.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 768344 bytes)
2025-01-31T02:19:51.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 781603 bytes)
2025-01-31T02:19:53.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 792039 bytes)
2025-01-31T02:19:55.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 800870 bytes)
2025-01-31T02:19:57.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 813669 bytes)
2025-01-31T02:19:59.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 828783 bytes)
2025-01-31T02:20:01.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 840381 bytes)
2025-01-31T02:20:04.337Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 852566 bytes)
2025-01-31T02:20:06.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 867666 bytes)
2025-01-31T02:20:08.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 883138 bytes)
2025-01-31T02:20:10.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 898853 bytes)
2025-01-31T02:20:12.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 912605 bytes)
2025-01-31T02:20:14.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 927743 bytes)
2025-01-31T02:20:16.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 942615 bytes)
2025-01-31T02:20:18.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 955762 bytes)
2025-01-31T02:20:21.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 969533 bytes)
2025-01-31T02:20:23.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 984275 bytes)
2025-01-31T02:20:25.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1000241 bytes)
2025-01-31T02:20:27.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1013957 bytes)
2025-01-31T02:20:29.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1027239 bytes)
2025-01-31T02:20:31.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1043167 bytes)
2025-01-31T02:20:33.593Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 1057878 bytes)
2025-01-31T02:20:36.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 1071193 bytes)
2025-01-31T02:20:38.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1085839 bytes)
2025-01-31T02:20:40.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1101606 bytes)
2025-01-31T02:20:42.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 1117013 bytes)
2025-01-31T02:20:44.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1131416 bytes)
2025-01-31T02:20:46.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1146654 bytes)
2025-01-31T02:20:48.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1160846 bytes)
2025-01-31T02:20:49.441Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:20:49.446Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738290049443-4uzmmccmc4f.pcm","directory":"temp"}
2025-01-31T02:20:49.450Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:20:49.451Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:20:49.452Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:20:49.452Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:20:50.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1174618 bytes)
2025-01-31T02:20:50.458Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:20:50.461Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:20:52.895Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738289869353-n2eubt5qe4f.pcm to MP3
2025-01-31T02:20:52.896Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738289869353-n2eubt5qe4f.pcm.mp3","exists":true}
2025-01-31T02:20:52.897Z [32minfo[39m: [TranscriptionService] File stats:{"size":2104749,"created":"2025-01-31T02:20:51.726Z","modified":"2025-01-31T02:20:52.879Z"}
2025-01-31T02:20:52.899Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:20:52.899Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:20:59.094Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:20:59.098Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:21:01.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 14351 bytes)
2025-01-31T02:21:01.315Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:21:03.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 90 bytes (total: 24706 bytes)
2025-01-31T02:21:05.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 40462 bytes)
2025-01-31T02:21:08.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 54019 bytes)
2025-01-31T02:21:09.045Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2039,"hasContent":true,"text":"I have a PhD in speechLooks, I, myself, am the translator for healthcare. We're capable of these DOA"}
2025-01-31T02:21:09.048Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Cannot read properties of undefined (reading 'substring')","stack":"TypeError: Cannot read properties of undefined (reading 'substring')\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:102)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":31944960}
2025-01-31T02:21:09.050Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:21:09.246Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T02:21:09.246Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:21:09.257Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289869353-n2eubt5qe4f.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:21:09.258Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738289869353-n2eubt5qe4f.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:21:10.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 69999 bytes)
2025-01-31T02:21:12.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 83519 bytes)
2025-01-31T02:21:14.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 99038 bytes)
2025-01-31T02:21:16.196Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 113901 bytes)
2025-01-31T02:21:18.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 125530 bytes)
2025-01-31T02:21:20.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 139042 bytes)
2025-01-31T02:21:21.750Z [32minfo[39m: Memory Usage:
2025-01-31T02:21:21.751Z [32minfo[39m: rss: 138.31 MB
2025-01-31T02:21:21.751Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T02:21:21.751Z [32minfo[39m: heapUsed: 28.31 MB
2025-01-31T02:21:21.751Z [32minfo[39m: external: 10.67 MB
2025-01-31T02:21:21.751Z [32minfo[39m: arrayBuffers: 2.74 MB
2025-01-31T02:21:22.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 152565 bytes)
2025-01-31T02:21:24.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 165576 bytes)
2025-01-31T02:21:26.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 180398 bytes)
2025-01-31T02:21:29.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 192994 bytes)
2025-01-31T02:21:31.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 205093 bytes)
2025-01-31T02:21:33.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 217688 bytes)
2025-01-31T02:21:35.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 232428 bytes)
2025-01-31T02:21:37.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 246838 bytes)
2025-01-31T02:21:39.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 261279 bytes)
2025-01-31T02:21:41.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 275950 bytes)
2025-01-31T02:21:43.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 291305 bytes)
2025-01-31T02:21:45.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 303962 bytes)
2025-01-31T02:21:47.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 318267 bytes)
2025-01-31T02:21:49.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 333103 bytes)
2025-01-31T02:21:51.677Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 346504 bytes)
2025-01-31T02:21:53.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 360754 bytes)
2025-01-31T02:21:55.895Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 376776 bytes)
2025-01-31T02:21:57.895Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 392666 bytes)
2025-01-31T02:21:59.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 408409 bytes)
2025-01-31T02:22:01.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 423644 bytes)
2025-01-31T02:22:03.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 439516 bytes)
2025-01-31T02:22:05.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 455246 bytes)
2025-01-31T02:22:07.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 470286 bytes)
2025-01-31T02:22:09.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 483852 bytes)
2025-01-31T02:22:11.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 499968 bytes)
2025-01-31T02:22:14.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 69 bytes (total: 512916 bytes)
2025-01-31T02:22:16.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 528536 bytes)
2025-01-31T02:22:18.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 544280 bytes)
2025-01-31T02:22:20.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 557388 bytes)
2025-01-31T02:22:23.112Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 568717 bytes)
2025-01-31T02:22:27.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 581528 bytes)
2025-01-31T02:22:29.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 597688 bytes)
2025-01-31T02:22:31.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 613431 bytes)
2025-01-31T02:22:33.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 627331 bytes)
2025-01-31T02:22:35.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 642419 bytes)
2025-01-31T02:22:37.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 656710 bytes)
2025-01-31T02:22:39.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 672276 bytes)
2025-01-31T02:22:41.374Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 683688 bytes)
2025-01-31T02:22:43.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 696409 bytes)
2025-01-31T02:22:46.234Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 710500 bytes)
2025-01-31T02:22:48.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 723316 bytes)
2025-01-31T02:22:50.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 738853 bytes)
2025-01-31T02:22:52.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 754395 bytes)
2025-01-31T02:22:54.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 766696 bytes)
2025-01-31T02:22:56.934Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 781917 bytes)
2025-01-31T02:22:59.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 795841 bytes)
2025-01-31T02:23:01.248Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 810200 bytes)
2025-01-31T02:23:03.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 825018 bytes)
2025-01-31T02:23:05.215Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 840529 bytes)
2025-01-31T02:23:07.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 853678 bytes)
2025-01-31T02:23:09.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 869009 bytes)
2025-01-31T02:23:11.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 882673 bytes)
2025-01-31T02:23:13.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 897633 bytes)
2025-01-31T02:23:15.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 909651 bytes)
2025-01-31T02:23:17.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 924315 bytes)
2025-01-31T02:23:20.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 937835 bytes)
2025-01-31T02:23:22.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 951560 bytes)
2025-01-31T02:23:24.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 965136 bytes)
2025-01-31T02:23:26.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 980894 bytes)
2025-01-31T02:23:28.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 996712 bytes)
2025-01-31T02:23:30.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 1009727 bytes)
2025-01-31T02:23:32.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 1025000 bytes)
2025-01-31T02:23:35.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1039033 bytes)
2025-01-31T02:23:37.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 1054461 bytes)
2025-01-31T02:23:39.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1067084 bytes)
2025-01-31T02:23:41.314Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 59 bytes (total: 1081476 bytes)
2025-01-31T02:23:43.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1097051 bytes)
2025-01-31T02:23:45.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1112671 bytes)
2025-01-31T02:23:47.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1125926 bytes)
2025-01-31T02:23:49.441Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:23:49.443Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738290229442-2j82kik766w.pcm","directory":"temp"}
2025-01-31T02:23:49.445Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:23:49.446Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:23:49.446Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:23:49.447Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:23:49.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1140208 bytes)
2025-01-31T02:23:50.461Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:23:50.465Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:23:51.575Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:23:51.578Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:23:52.846Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738290049443-4uzmmccmc4f.pcm to MP3
2025-01-31T02:23:52.846Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738290049443-4uzmmccmc4f.pcm.mp3","exists":true}
2025-01-31T02:23:52.847Z [32minfo[39m: [TranscriptionService] File stats:{"size":2007045,"created":"2025-01-31T02:23:51.703Z","modified":"2025-01-31T02:23:52.828Z"}
2025-01-31T02:23:52.847Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:23:52.847Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:23:53.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 15057 bytes)
2025-01-31T02:23:54.495Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:23:56.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 28360 bytes)
2025-01-31T02:23:58.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 42072 bytes)
2025-01-31T02:24:00.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 57156 bytes)
2025-01-31T02:24:02.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 70992 bytes)
2025-01-31T02:24:04.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 85964 bytes)
2025-01-31T02:24:04.516Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2183,"hasContent":true,"text":"You gotta roll the dice on the bird. Oh, crap. It's on again! Hahaha! Pfg may use your name and like"}
2025-01-31T02:24:04.519Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Cannot read properties of undefined (reading 'substring')","stack":"TypeError: Cannot read properties of undefined (reading 'substring')\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:102)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":30758400}
2025-01-31T02:24:04.519Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:24:04.768Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T02:24:04.769Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:24:04.797Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290049443-4uzmmccmc4f.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:24:04.798Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290049443-4uzmmccmc4f.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:24:06.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 101751 bytes)
2025-01-31T02:24:08.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 117526 bytes)
2025-01-31T02:24:11.063Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 130365 bytes)
2025-01-31T02:24:13.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 145373 bytes)
2025-01-31T02:24:15.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 160879 bytes)
2025-01-31T02:24:17.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 176751 bytes)
2025-01-31T02:24:21.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 188473 bytes)
2025-01-31T02:24:23.716Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 201935 bytes)
2025-01-31T02:24:25.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 215621 bytes)
2025-01-31T02:24:27.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 231561 bytes)
2025-01-31T02:24:29.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 247452 bytes)
2025-01-31T02:24:31.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 262240 bytes)
2025-01-31T02:24:33.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 277913 bytes)
2025-01-31T02:24:35.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 63 bytes (total: 292869 bytes)
2025-01-31T02:24:37.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 307350 bytes)
2025-01-31T02:24:41.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 319016 bytes)
2025-01-31T02:24:43.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 334057 bytes)
2025-01-31T02:24:48.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 347303 bytes)
2025-01-31T02:24:50.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 358573 bytes)
2025-01-31T02:24:52.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 372042 bytes)
2025-01-31T02:24:55.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 384884 bytes)
2025-01-31T02:24:58.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 397356 bytes)
2025-01-31T02:25:00.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 413102 bytes)
2025-01-31T02:25:02.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 424450 bytes)
2025-01-31T02:25:04.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 438984 bytes)
2025-01-31T02:25:06.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 452028 bytes)
2025-01-31T02:25:08.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 465721 bytes)
2025-01-31T02:25:11.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 479416 bytes)
2025-01-31T02:25:14.269Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 492528 bytes)
2025-01-31T02:25:16.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 507491 bytes)
2025-01-31T02:25:18.354Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 523001 bytes)
2025-01-31T02:25:20.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 539052 bytes)
2025-01-31T02:25:22.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 551906 bytes)
2025-01-31T02:25:24.891Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 566181 bytes)
2025-01-31T02:25:26.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 581923 bytes)
2025-01-31T02:25:28.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 597052 bytes)
2025-01-31T02:25:30.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 611757 bytes)
2025-01-31T02:25:36.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 623609 bytes)
2025-01-31T02:25:38.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 637588 bytes)
2025-01-31T02:25:41.955Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 651875 bytes)
2025-01-31T02:25:43.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 666148 bytes)
2025-01-31T02:25:45.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 681692 bytes)
2025-01-31T02:25:47.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 695485 bytes)
2025-01-31T02:25:50.431Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 707639 bytes)
2025-01-31T02:25:52.512Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 720497 bytes)
2025-01-31T02:25:55.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 734375 bytes)
2025-01-31T02:25:57.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 749429 bytes)
2025-01-31T02:25:59.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 765291 bytes)
2025-01-31T02:26:01.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 781297 bytes)
2025-01-31T02:26:03.915Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 795712 bytes)
2025-01-31T02:26:05.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 811520 bytes)
2025-01-31T02:26:08.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 825553 bytes)
2025-01-31T02:26:11.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 837267 bytes)
2025-01-31T02:26:14.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 851169 bytes)
2025-01-31T02:26:16.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 867183 bytes)
2025-01-31T02:26:18.632Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 879694 bytes)
2025-01-31T02:26:20.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 895434 bytes)
2025-01-31T02:26:21.755Z [32minfo[39m: Memory Usage:
2025-01-31T02:26:21.757Z [32minfo[39m: rss: 140.96 MB
2025-01-31T02:26:21.757Z [32minfo[39m: heapTotal: 29.96 MB
2025-01-31T02:26:21.758Z [32minfo[39m: heapUsed: 28.36 MB
2025-01-31T02:26:21.758Z [32minfo[39m: external: 12.36 MB
2025-01-31T02:26:21.759Z [32minfo[39m: arrayBuffers: 4.43 MB
2025-01-31T02:26:22.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 909719 bytes)
2025-01-31T02:26:24.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 925588 bytes)
2025-01-31T02:26:26.764Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 940705 bytes)
2025-01-31T02:26:28.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 956501 bytes)
2025-01-31T02:26:30.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 967750 bytes)
2025-01-31T02:26:33.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 983684 bytes)
2025-01-31T02:26:35.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 997963 bytes)
2025-01-31T02:26:37.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 1012027 bytes)
2025-01-31T02:26:40.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1024062 bytes)
2025-01-31T02:26:42.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1037767 bytes)
2025-01-31T02:26:44.255Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1051109 bytes)
2025-01-31T02:26:46.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 1066937 bytes)
2025-01-31T02:26:48.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 1080750 bytes)
2025-01-31T02:26:49.443Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:26:49.446Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738290409445-q3scj7olthi.pcm","directory":"temp"}
2025-01-31T02:26:49.449Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:26:49.449Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:26:49.450Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:26:49.450Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:26:50.414Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1095011 bytes)
2025-01-31T02:26:50.458Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:26:50.461Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:26:52.718Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738290229442-2j82kik766w.pcm to MP3
2025-01-31T02:26:52.719Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738290229442-2j82kik766w.pcm.mp3","exists":true}
2025-01-31T02:26:52.719Z [32minfo[39m: [TranscriptionService] File stats:{"size":1928973,"created":"2025-01-31T02:26:51.655Z","modified":"2025-01-31T02:26:52.700Z"}
2025-01-31T02:26:52.719Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:26:52.719Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:26:53.913Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:26:53.919Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:26:55.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 15569 bytes)
2025-01-31T02:26:57.914Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 30771 bytes)
2025-01-31T02:26:59.992Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 43923 bytes)
2025-01-31T02:27:01.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 60069 bytes)
2025-01-31T02:27:02.117Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2059,"hasContent":true,"text":"You know what, that is something I'd agree to. We wanted it to be suspicious. Beneficiary, that is t"}
2025-01-31T02:27:02.120Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Cannot read properties of undefined (reading 'substring')","stack":"TypeError: Cannot read properties of undefined (reading 'substring')\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:102)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":29571840}
2025-01-31T02:27:02.120Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:27:02.348Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T02:27:02.350Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:27:02.358Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290229442-2j82kik766w.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:27:02.359Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290229442-2j82kik766w.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:27:03.994Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 74680 bytes)
2025-01-31T02:27:05.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 88070 bytes)
2025-01-31T02:27:06.092Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:27:08.413Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 101030 bytes)
2025-01-31T02:27:11.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 114308 bytes)
2025-01-31T02:27:13.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 129427 bytes)
2025-01-31T02:27:15.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 143028 bytes)
2025-01-31T02:27:17.715Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 154096 bytes)
2025-01-31T02:27:20.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 166493 bytes)
2025-01-31T02:27:22.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 182285 bytes)
2025-01-31T02:27:24.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 197986 bytes)
2025-01-31T02:27:26.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 213876 bytes)
2025-01-31T02:27:28.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 225220 bytes)
2025-01-31T02:27:30.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 239448 bytes)
2025-01-31T02:27:33.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 252077 bytes)
2025-01-31T02:27:35.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 267047 bytes)
2025-01-31T02:27:37.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 282332 bytes)
2025-01-31T02:27:39.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 61 bytes (total: 296238 bytes)
2025-01-31T02:27:42.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 309470 bytes)
2025-01-31T02:27:44.249Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 325245 bytes)
2025-01-31T02:27:46.671Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 335942 bytes)
2025-01-31T02:27:48.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 346922 bytes)
2025-01-31T02:27:50.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 362455 bytes)
2025-01-31T02:27:52.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 376910 bytes)
2025-01-31T02:27:54.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 389861 bytes)
2025-01-31T02:27:56.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 405719 bytes)
2025-01-31T02:28:01.394Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 65 bytes (total: 418186 bytes)
2025-01-31T02:28:04.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 429622 bytes)
2025-01-31T02:28:06.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 440272 bytes)
2025-01-31T02:28:09.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 455980 bytes)
2025-01-31T02:28:11.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 471523 bytes)
2025-01-31T02:28:13.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 486194 bytes)
2025-01-31T02:28:15.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 500824 bytes)
2025-01-31T02:28:18.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 512992 bytes)
2025-01-31T02:28:20.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 528999 bytes)
2025-01-31T02:28:22.013Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 543665 bytes)
2025-01-31T02:28:24.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 557992 bytes)
2025-01-31T02:28:26.014Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 573972 bytes)
2025-01-31T02:28:28.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 589672 bytes)
2025-01-31T02:28:30.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 604884 bytes)
2025-01-31T02:28:32.632Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 618180 bytes)
2025-01-31T02:28:34.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 631622 bytes)
2025-01-31T02:28:37.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 642611 bytes)
2025-01-31T02:28:39.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 656226 bytes)
2025-01-31T02:28:41.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 671436 bytes)
2025-01-31T02:28:43.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 683561 bytes)
2025-01-31T02:28:45.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 696052 bytes)
2025-01-31T02:28:47.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 709811 bytes)
2025-01-31T02:28:49.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 724335 bytes)
2025-01-31T02:28:52.827Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 738490 bytes)
2025-01-31T02:28:54.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 753057 bytes)
2025-01-31T02:28:56.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 767406 bytes)
2025-01-31T02:28:58.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 783208 bytes)
2025-01-31T02:29:00.893Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 797365 bytes)
2025-01-31T02:29:02.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 811540 bytes)
2025-01-31T02:29:06.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 823598 bytes)
2025-01-31T02:29:08.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 839669 bytes)
2025-01-31T02:29:10.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 855180 bytes)
2025-01-31T02:29:12.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 870871 bytes)
2025-01-31T02:29:14.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 884562 bytes)
2025-01-31T02:29:16.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 900354 bytes)
2025-01-31T02:29:18.891Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 913981 bytes)
2025-01-31T02:29:20.890Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 928129 bytes)
2025-01-31T02:29:23.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 941099 bytes)
2025-01-31T02:29:26.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 952726 bytes)
2025-01-31T02:29:28.413Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 967234 bytes)
2025-01-31T02:29:30.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 979953 bytes)
2025-01-31T02:29:32.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 995953 bytes)
2025-01-31T02:29:34.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1009802 bytes)
2025-01-31T02:29:36.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1022839 bytes)
2025-01-31T02:29:38.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1035055 bytes)
2025-01-31T02:29:40.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 1049829 bytes)
2025-01-31T02:29:43.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 1062750 bytes)
2025-01-31T02:29:46.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1074155 bytes)
2025-01-31T02:29:48.571Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1088056 bytes)
2025-01-31T02:29:49.447Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:29:49.453Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738290589448-m1hdqc92gfm.pcm","directory":"temp"}
2025-01-31T02:29:49.458Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:29:49.460Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:29:49.460Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:29:49.460Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:29:50.463Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:29:50.468Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:29:52.819Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738290409445-q3scj7olthi.pcm to MP3
2025-01-31T02:29:52.820Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738290409445-q3scj7olthi.pcm.mp3","exists":true}
2025-01-31T02:29:52.821Z [32minfo[39m: [TranscriptionService] File stats:{"size":1995381,"created":"2025-01-31T02:29:51.713Z","modified":"2025-01-31T02:29:52.794Z"}
2025-01-31T02:29:52.821Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:29:52.821Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:29:59.852Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:29:59.855Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:30:01.124Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1821,"hasContent":true,"text":"\"- Are these some sample cuts, do you know? Ten bucks. Ten bucks, you can't go wrong with that. No, "}
2025-01-31T02:30:01.126Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Cannot read properties of undefined (reading 'substring')","stack":"TypeError: Cannot read properties of undefined (reading 'substring')\n    at VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:152:102)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":30312960}
2025-01-31T02:30:01.127Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:30:01.342Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T02:30:01.343Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:30:01.366Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290409445-q3scj7olthi.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:30:01.368Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290409445-q3scj7olthi.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:30:01.852Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 15594 bytes)
2025-01-31T02:30:03.849Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 31183 bytes)
2025-01-31T02:30:05.852Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 79 bytes (total: 44709 bytes)
2025-01-31T02:30:07.852Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 60780 bytes)
2025-01-31T02:30:09.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 73127 bytes)
2025-01-31T02:30:10.021Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:30:13.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 85537 bytes)
2025-01-31T02:30:15.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 98748 bytes)
2025-01-31T02:30:17.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 114593 bytes)
2025-01-31T02:30:19.234Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 126312 bytes)
2025-01-31T02:30:21.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 138318 bytes)
2025-01-31T02:30:23.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 153858 bytes)
2025-01-31T02:30:25.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 168273 bytes)
2025-01-31T02:30:27.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 179088 bytes)
2025-01-31T02:30:32.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 188943 bytes)
2025-01-31T02:30:34.290Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 202409 bytes)
2025-01-31T02:30:36.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 216208 bytes)
2025-01-31T02:30:38.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 229590 bytes)
2025-01-31T02:30:41.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 243150 bytes)
2025-01-31T02:30:43.771Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 252496 bytes)
2025-01-31T02:30:45.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 72 bytes (total: 268185 bytes)
2025-01-31T02:30:47.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 284253 bytes)
2025-01-31T02:30:49.832Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 298912 bytes)
2025-01-31T02:30:51.832Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 314786 bytes)
2025-01-31T02:30:53.830Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 330791 bytes)
2025-01-31T02:30:55.831Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 346322 bytes)
2025-01-31T02:30:57.831Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 361147 bytes)
2025-01-31T02:30:59.830Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 375660 bytes)
2025-01-31T02:31:01.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 389764 bytes)
2025-01-31T02:31:03.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 405537 bytes)
2025-01-31T02:31:05.913Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 420741 bytes)
2025-01-31T02:31:07.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 433642 bytes)
2025-01-31T02:31:10.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 448627 bytes)
2025-01-31T02:31:13.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 462788 bytes)
2025-01-31T02:31:16.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 472906 bytes)
2025-01-31T02:31:21.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 479886 bytes)
2025-01-31T02:31:21.752Z [32minfo[39m: Memory Usage:
2025-01-31T02:31:21.753Z [32minfo[39m: rss: 144.46 MB
2025-01-31T02:31:21.754Z [32minfo[39m: heapTotal: 30.21 MB
2025-01-31T02:31:21.756Z [32minfo[39m: heapUsed: 28.26 MB
2025-01-31T02:31:21.756Z [32minfo[39m: external: 12.21 MB
2025-01-31T02:31:21.756Z [32minfo[39m: arrayBuffers: 4.29 MB
2025-01-31T02:31:24.550Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 492061 bytes)
2025-01-31T02:31:26.551Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 507403 bytes)
2025-01-31T02:31:45.805Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T02:31:45.840Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T02:31:45.913Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T02:31:45.935Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738290589448-m1hdqc92gfm.pcm","age":18460.2861328125,"size":14365440}
2025-01-31T02:31:45.940Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T02:31:45.941Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T02:31:45.942Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T02:31:46.441Z [32minfo[39m: Bot initialized successfully
2025-01-31T02:31:46.500Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T02:35:09.960Z [32minfo[39m: Command Name: setkey
2025-01-31T02:35:09.970Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T02:35:10.304Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T02:35:10.306Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334713557392035840","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:35:10.307Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:35:13.306Z [32minfo[39m: Command Name: record
2025-01-31T02:35:13.308Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T02:35:13.558Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T02:35:13.797Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T02:35:13.799Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T02:35:13.799Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:35:13.800Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:35:13.800Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:35:13.801Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738290913801-87yd5x66rd.pcm","directory":"temp"}
2025-01-31T02:35:13.857Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:35:13.858Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:35:13.858Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T02:35:13.858Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:35:13.858Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T02:35:13.858Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T02:35:13.858Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334713571594207307","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:35:13.859Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:35:13.862Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:35:13.862Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:35:15.890Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 14658 bytes)
2025-01-31T02:35:17.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 29901 bytes)
2025-01-31T02:35:19.275Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:35:20.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 43009 bytes)
2025-01-31T02:35:22.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 55724 bytes)
2025-01-31T02:35:24.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 71740 bytes)
2025-01-31T02:35:26.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 83863 bytes)
2025-01-31T02:35:30.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 96398 bytes)
2025-01-31T02:35:32.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 111926 bytes)
2025-01-31T02:35:34.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 127427 bytes)
2025-01-31T02:35:40.294Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 140107 bytes)
2025-01-31T02:35:42.294Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 156140 bytes)
2025-01-31T02:35:44.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 171143 bytes)
2025-01-31T02:35:46.293Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 187148 bytes)
2025-01-31T02:35:48.450Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 201077 bytes)
2025-01-31T02:35:50.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 214527 bytes)
2025-01-31T02:35:52.751Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 228955 bytes)
2025-01-31T02:35:55.370Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 240934 bytes)
2025-01-31T02:35:58.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 252387 bytes)
2025-01-31T02:36:01.188Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 265223 bytes)
2025-01-31T02:36:03.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 278678 bytes)
2025-01-31T02:36:05.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 293020 bytes)
2025-01-31T02:36:07.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 306889 bytes)
2025-01-31T02:36:10.530Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 320397 bytes)
2025-01-31T02:36:12.529Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 335528 bytes)
2025-01-31T02:36:14.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 351029 bytes)
2025-01-31T02:36:16.531Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 366740 bytes)
2025-01-31T02:36:18.529Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 380852 bytes)
2025-01-31T02:36:21.470Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 395427 bytes)
2025-01-31T02:36:23.470Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 411380 bytes)
2025-01-31T02:36:25.471Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 427221 bytes)
2025-01-31T02:36:27.569Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 440592 bytes)
2025-01-31T02:36:29.888Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 454624 bytes)
2025-01-31T02:36:31.889Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 469725 bytes)
2025-01-31T02:36:34.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 482217 bytes)
2025-01-31T02:36:36.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 493390 bytes)
2025-01-31T02:36:38.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 506980 bytes)
2025-01-31T02:36:40.811Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 521095 bytes)
2025-01-31T02:36:43.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 534243 bytes)
2025-01-31T02:36:45.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 546375 bytes)
2025-01-31T02:36:45.807Z [32minfo[39m: Memory Usage:
2025-01-31T02:36:45.808Z [32minfo[39m: rss: 134.01 MB
2025-01-31T02:36:45.808Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T02:36:45.808Z [32minfo[39m: heapUsed: 27.5 MB
2025-01-31T02:36:45.809Z [32minfo[39m: external: 8.4 MB
2025-01-31T02:36:45.809Z [32minfo[39m: arrayBuffers: 0.47 MB
2025-01-31T02:36:47.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 560079 bytes)
2025-01-31T02:36:49.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 576065 bytes)
2025-01-31T02:36:51.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 588901 bytes)
2025-01-31T02:36:54.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 601459 bytes)
2025-01-31T02:36:56.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 613838 bytes)
2025-01-31T02:36:58.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 627452 bytes)
2025-01-31T02:37:00.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 641128 bytes)
2025-01-31T02:37:02.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 656552 bytes)
2025-01-31T02:37:04.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 670789 bytes)
2025-01-31T02:37:07.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 681349 bytes)
2025-01-31T02:37:09.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 697049 bytes)
2025-01-31T02:37:12.091Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 711021 bytes)
2025-01-31T02:37:14.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 722791 bytes)
2025-01-31T02:37:18.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 731679 bytes)
2025-01-31T02:37:20.891Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 742825 bytes)
2025-01-31T02:37:22.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 758950 bytes)
2025-01-31T02:37:26.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 772742 bytes)
2025-01-31T02:37:28.108Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 786761 bytes)
2025-01-31T02:37:30.191Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 801272 bytes)
2025-01-31T02:37:32.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 815819 bytes)
2025-01-31T02:37:36.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 830367 bytes)
2025-01-31T02:37:38.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 841468 bytes)
2025-01-31T02:37:40.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 854651 bytes)
2025-01-31T02:37:43.633Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 866165 bytes)
2025-01-31T02:37:45.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 880865 bytes)
2025-01-31T02:37:47.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 894327 bytes)
2025-01-31T02:37:49.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 910119 bytes)
2025-01-31T02:37:51.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 925574 bytes)
2025-01-31T02:37:53.931Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 941398 bytes)
2025-01-31T02:37:55.929Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 955872 bytes)
2025-01-31T02:37:57.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 970201 bytes)
2025-01-31T02:38:00.569Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 981103 bytes)
2025-01-31T02:38:02.729Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 994488 bytes)
2025-01-31T02:38:04.811Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1007548 bytes)
2025-01-31T02:38:11.389Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1019104 bytes)
2025-01-31T02:38:13.863Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:38:13.866Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738291093864-2pj3uxcro85.pcm","directory":"temp"}
2025-01-31T02:38:13.869Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:38:13.871Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:38:13.871Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:38:13.872Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:38:13.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 1028889 bytes)
2025-01-31T02:38:14.884Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:38:14.889Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:38:14.890Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:38:14.891Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:38:16.667Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:38:16.890Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 97 bytes (total: 15026 bytes)
2025-01-31T02:38:17.308Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738290913801-87yd5x66rd.pcm to MP3
2025-01-31T02:38:17.310Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738290913801-87yd5x66rd.pcm.mp3","exists":true}
2025-01-31T02:38:17.310Z [32minfo[39m: [TranscriptionService] File stats:{"size":1882893,"created":"2025-01-31T02:38:16.201Z","modified":"2025-01-31T02:38:17.276Z"}
2025-01-31T02:38:17.313Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:38:17.313Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:38:19.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 29575 bytes)
2025-01-31T02:38:23.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 39430 bytes)
2025-01-31T02:38:27.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 50253 bytes)
2025-01-31T02:38:29.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 66248 bytes)
2025-01-31T02:38:31.370Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 82216 bytes)
2025-01-31T02:38:33.730Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 96277 bytes)
2025-01-31T02:38:35.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 112405 bytes)
2025-01-31T02:38:37.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 126162 bytes)
2025-01-31T02:38:39.896Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":803,"hasContent":true,"text":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a youn"}
2025-01-31T02:38:39.897Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a young lady, take her drink, and say if you're embarrassed to yourself. Because you're covering up. Alrig...
2025-01-31T02:38:39.897Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":803,"transcriptSample":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a youn"}
2025-01-31T02:38:39.898Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:38:39.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 139765 bytes)
2025-01-31T02:38:40.907Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:38:40.908Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:38:41.909Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 84 bytes (total: 155469 bytes)
2025-01-31T02:38:42.911Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:38:43.913Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 170991 bytes)
2025-01-31T02:38:44.902Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1341,"transcriptLength":803,"summary":"***The scene opens with Harvey pressuring Q to take on a new character, urging them to step out of t"}
2025-01-31T02:38:44.921Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"90","data":{"guildId":"1315144523336122469","transcript":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a young lady, take her drink, and say if you're embarrassed to yourself. Because you're covering up. Alright, Harvey, your actor is going in. Here, have some water. You're embarrassing yourself. Don't go down this road. It's not clear you're going to embarrass yourself further. All I'm saying is you don't want to further embarrass yourself. What are we doing? You're progressive, right? You're looking at a new age, right? You need to be able to play different characters. Say, these gays, they're trying to murder me. Oh my god, oh my god, oh my god. I'm begging you. I'm begging you not to make me do this. This is getting really hard. Q, go for those two guys at the bar, okay? Can I get a shot? Thanks!\n"}}
2025-01-31T02:38:44.921Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:38:44.922Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 90
2025-01-31T02:38:44.924Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:38:44.934Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738291124922.txt","size":803}
2025-01-31T02:38:45.159Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a young lady, take her drink, and say if you're embarrassed to yourself. Because you're covering up. Alright, Harvey, your actor is going in. Here, have some water. You're embarrassing yourself. Don't go down this road. It's not clear you're going to embarrass yourself further. All I'm saying is you don't want to further embarrass yourself. What are we doing? You're progressive, right? You're looking at a new age, right? You need to be able to play different characters. Say, these gays, they're trying to murder me. Oh my god, oh my god, oh my god. I'm begging you. I'm begging you not to make me do this. This is getting really hard. Q, go for those two guys at the bar, okay? Can I get a shot? Thanks!

2025-01-31T02:38:45.160Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:38:45.174Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290913801-87yd5x66rd.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:38:45.177Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738290913801-87yd5x66rd.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:38:45.910Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 187031 bytes)
2025-01-31T02:38:47.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 200854 bytes)
2025-01-31T02:38:49.942Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"90","data":{"guildId":"1315144523336122469","transcript":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a young lady, take her drink, and say if you're embarrassed to yourself. Because you're covering up. Alright, Harvey, your actor is going in. Here, have some water. You're embarrassing yourself. Don't go down this road. It's not clear you're going to embarrass yourself further. All I'm saying is you don't want to further embarrass yourself. What are we doing? You're progressive, right? You're looking at a new age, right? You need to be able to play different characters. Say, these gays, they're trying to murder me. Oh my god, oh my god, oh my god. I'm begging you. I'm begging you not to make me do this. This is getting really hard. Q, go for those two guys at the bar, okay? Can I get a shot? Thanks!\n"}}
2025-01-31T02:38:49.943Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:38:49.943Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":803,"transcriptSample":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a youn"}
2025-01-31T02:38:49.943Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:38:49.988Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 216130 bytes)
2025-01-31T02:38:50.883Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:38:50.883Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":803,"transcriptLength":803,"summary":"So Harvey, what do you got? What's Q's next character? For the next role, I want you to go to a youn"}
2025-01-31T02:38:50.884Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:38:51.059Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:38:51.066Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"90","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738291130884}}
2025-01-31T02:38:51.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 232325 bytes)
2025-01-31T02:38:54.009Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 248369 bytes)
2025-01-31T02:38:55.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 264434 bytes)
2025-01-31T02:38:58.104Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 276806 bytes)
2025-01-31T02:39:00.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 292915 bytes)
2025-01-31T02:39:02.507Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 306859 bytes)
2025-01-31T02:39:04.508Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 321807 bytes)
2025-01-31T02:39:06.591Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 335122 bytes)
2025-01-31T02:39:08.589Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 351202 bytes)
2025-01-31T02:39:10.811Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 365246 bytes)
2025-01-31T02:39:12.789Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 379343 bytes)
2025-01-31T02:39:14.788Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 394321 bytes)
2025-01-31T02:39:17.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 405321 bytes)
2025-01-31T02:39:19.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 420468 bytes)
2025-01-31T02:39:21.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 434157 bytes)
2025-01-31T02:39:23.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 449813 bytes)
2025-01-31T02:39:25.669Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 463843 bytes)
2025-01-31T02:39:27.674Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 479969 bytes)
2025-01-31T02:39:29.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 495773 bytes)
2025-01-31T02:39:31.771Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 509118 bytes)
2025-01-31T02:39:34.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 522339 bytes)
2025-01-31T02:39:36.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 537367 bytes)
2025-01-31T02:39:38.051Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 552649 bytes)
2025-01-31T02:39:40.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 67 bytes (total: 566831 bytes)
2025-01-31T02:39:45.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 579277 bytes)
2025-01-31T02:39:47.690Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 593720 bytes)
2025-01-31T02:39:50.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 606541 bytes)
2025-01-31T02:39:52.431Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 619704 bytes)
2025-01-31T02:39:55.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 52 bytes (total: 632712 bytes)
2025-01-31T02:39:57.211Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 646231 bytes)
2025-01-31T02:39:59.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 661261 bytes)
2025-01-31T02:40:01.490Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 675002 bytes)
2025-01-31T02:40:03.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 690952 bytes)
2025-01-31T02:40:05.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 704516 bytes)
2025-01-31T02:40:08.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 718283 bytes)
2025-01-31T02:40:10.450Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 731548 bytes)
2025-01-31T02:40:16.470Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 744997 bytes)
2025-01-31T02:40:18.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 759892 bytes)
2025-01-31T02:40:20.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 774160 bytes)
2025-01-31T02:40:22.478Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 790098 bytes)
2025-01-31T02:40:24.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 802661 bytes)
2025-01-31T02:40:27.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 816566 bytes)
2025-01-31T02:40:29.168Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 832783 bytes)
2025-01-31T02:40:31.169Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 848950 bytes)
2025-01-31T02:40:33.431Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 861280 bytes)
2025-01-31T02:40:35.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 876741 bytes)
2025-01-31T02:40:38.269Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 890468 bytes)
2025-01-31T02:40:40.270Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 905573 bytes)
2025-01-31T02:40:42.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 918140 bytes)
2025-01-31T02:40:44.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 933269 bytes)
2025-01-31T02:40:46.571Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 945588 bytes)
2025-01-31T02:40:48.568Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 961869 bytes)
2025-01-31T02:40:50.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 978025 bytes)
2025-01-31T02:40:52.569Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 993747 bytes)
2025-01-31T02:40:54.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1008495 bytes)
2025-01-31T02:40:56.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1023273 bytes)
2025-01-31T02:40:58.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1038617 bytes)
2025-01-31T02:41:00.831Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 191 bytes (total: 1051695 bytes)
2025-01-31T02:41:02.831Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1067959 bytes)
2025-01-31T02:41:05.588Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1082484 bytes)
2025-01-31T02:41:07.588Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 1098279 bytes)
2025-01-31T02:41:09.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1109718 bytes)
2025-01-31T02:41:12.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1123577 bytes)
2025-01-31T02:41:13.860Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:41:13.864Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738291273862-n7uyqhfq9t.pcm","directory":"temp"}
2025-01-31T02:41:13.867Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:41:13.868Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:41:13.869Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:41:13.871Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:41:14.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1137720 bytes)
2025-01-31T02:41:14.880Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:41:14.884Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:41:16.546Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:41:16.547Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:41:17.396Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738291093864-2pj3uxcro85.pcm to MP3
2025-01-31T02:41:17.396Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738291093864-2pj3uxcro85.pcm.mp3","exists":true}
2025-01-31T02:41:17.397Z [32minfo[39m: [TranscriptionService] File stats:{"size":1982133,"created":"2025-01-31T02:41:16.215Z","modified":"2025-01-31T02:41:17.356Z"}
2025-01-31T02:41:17.398Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:41:17.398Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:41:18.014Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:41:18.747Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 13616 bytes)
2025-01-31T02:41:20.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 27993 bytes)
2025-01-31T02:41:23.189Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 41686 bytes)
2025-01-31T02:41:25.188Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 55864 bytes)
2025-01-31T02:41:27.190Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 70236 bytes)
2025-01-31T02:41:29.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 84931 bytes)
2025-01-31T02:41:30.557Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2042,"hasContent":true,"text":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordin"}
2025-01-31T02:41:30.557Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordinary. You remember that. Only the highest aptitude, after being the highest intellect, and psychologi...
2025-01-31T02:41:30.557Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2042,"transcriptSample":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordin"}
2025-01-31T02:41:30.558Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:41:31.162Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:41:31.163Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2042,"transcriptLength":2042,"summary":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordin"}
2025-01-31T02:41:31.168Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"91","data":{"guildId":"1315144523336122469","transcript":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordinary. You remember that. Only the highest aptitude, after being the highest intellect, and psychologically superior people, were allowed to qualify for standard traffic control, and that was not so prior to getting there. When I arrived in 2016, I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen. It goes up to the lowest level. The policy was powerful, and the politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent, the word talent. They have to be talented. The Obama standards, from very mediocre at best to extraordinary, you remember that. They have to be the highest aptitude, the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016. I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent. The word talent. You have to be talented, naturally talented geniuses. You can't have regular people doing that job. They won't be able to do it. I changed the Obama standards from very mediocre at best to extraordinary.\n"}}
2025-01-31T02:41:31.168Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:41:31.169Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 91
2025-01-31T02:41:31.170Z [33mwarn[39m: [ChannelService] Message is too long (2182 chars), splitting into chunks
2025-01-31T02:41:31.186Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738291291169.txt","size":2042}
2025-01-31T02:41:31.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 99086 bytes)
2025-01-31T02:41:32.036Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordinary. You remember that. Only the highest aptitude, after being the highest intellect, and psychologically superior people, were allowed to qualify for standard traffic control, and that was not so prior to getting there. When I arrived in 2016, I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen. It goes up to the lowest level. The policy was powerful, and the politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent, the word talent. They have to be talented. The Obama standards, from very mediocre at best to extraordinary, you remember that. They have to be the highest aptitude, the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016. I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent. The word talent. You have to be talented, naturally talented geniuses. You can't have regular people doing that job. They won't be able to do it. I changed the Obama standards from very mediocre at best to extraordinary.

2025-01-31T02:41:32.037Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:41:32.047Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291093864-2pj3uxcro85.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:41:32.048Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291093864-2pj3uxcro85.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:41:33.569Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 114925 bytes)
2025-01-31T02:41:35.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 128875 bytes)
2025-01-31T02:41:36.175Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"91","data":{"guildId":"1315144523336122469","transcript":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordinary. You remember that. Only the highest aptitude, after being the highest intellect, and psychologically superior people, were allowed to qualify for standard traffic control, and that was not so prior to getting there. When I arrived in 2016, I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen. It goes up to the lowest level. The policy was powerful, and the politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent, the word talent. They have to be talented. The Obama standards, from very mediocre at best to extraordinary, you remember that. They have to be the highest aptitude, the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016. I made that change very early on, and then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first. Obama, Biden, and the Democrats put policy first. And they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety. We have to have our smartest people. It doesn't matter what they look like, how they speak, who they are. It matters. Intellect, talent. The word talent. You have to be talented, naturally talented geniuses. You can't have regular people doing that job. They won't be able to do it. I changed the Obama standards from very mediocre at best to extraordinary.\n"}}
2025-01-31T02:41:36.176Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:41:36.177Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2042,"transcriptSample":"The triangular... Oh, God, no. Oh, God. Oh, God. Standards, from very mediocre at best to extraordin"}
2025-01-31T02:41:36.177Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:41:38.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 140905 bytes)
2025-01-31T02:41:40.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 157113 bytes)
2025-01-31T02:41:42.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 172530 bytes)
2025-01-31T02:41:44.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 187464 bytes)
2025-01-31T02:41:45.804Z [32minfo[39m: Memory Usage:
2025-01-31T02:41:45.806Z [32minfo[39m: rss: 144.95 MB
2025-01-31T02:41:45.807Z [32minfo[39m: heapTotal: 31.21 MB
2025-01-31T02:41:45.808Z [32minfo[39m: heapUsed: 28.91 MB
2025-01-31T02:41:45.810Z [32minfo[39m: external: 12.37 MB
2025-01-31T02:41:45.811Z [32minfo[39m: arrayBuffers: 4.44 MB
2025-01-31T02:41:46.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 202630 bytes)
2025-01-31T02:41:48.770Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 215369 bytes)
2025-01-31T02:41:51.368Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 228706 bytes)
2025-01-31T02:41:53.370Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 244485 bytes)
2025-01-31T02:41:55.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 258159 bytes)
2025-01-31T02:41:57.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 270468 bytes)
2025-01-31T02:41:57.899Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2485,"transcriptLength":2042,"summary":"##### Narrative Summary\n\nThe transcript is a monologue by an unnamed speaker who appears to be a for"}
2025-01-31T02:41:57.899Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:41:58.116Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:41:58.120Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"91","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738291317899}}
2025-01-31T02:41:59.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 284575 bytes)
2025-01-31T02:42:02.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 296820 bytes)
2025-01-31T02:42:04.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 309783 bytes)
2025-01-31T02:42:06.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 323524 bytes)
2025-01-31T02:42:08.589Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 337704 bytes)
2025-01-31T02:42:10.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 349724 bytes)
2025-01-31T02:42:12.869Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 365702 bytes)
2025-01-31T02:42:14.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 381659 bytes)
2025-01-31T02:42:17.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 395110 bytes)
2025-01-31T02:42:19.388Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 407124 bytes)
2025-01-31T02:42:21.388Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 423355 bytes)
2025-01-31T02:42:23.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 438038 bytes)
2025-01-31T02:42:25.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 452679 bytes)
2025-01-31T02:42:31.728Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 465792 bytes)
2025-01-31T02:44:03.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 473836 bytes)
2025-01-31T02:44:05.593Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 479957 bytes)
2025-01-31T02:44:13.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 488005 bytes)
2025-01-31T02:44:13.887Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:44:13.890Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738291453889-8gfbkw5hqhc.pcm","directory":"temp"}
2025-01-31T02:44:13.895Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:44:13.897Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:44:13.897Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:44:13.898Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:44:14.916Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:44:14.918Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:44:16.454Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:44:16.457Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:44:16.738Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738291273862-n7uyqhfq9t.pcm to MP3
2025-01-31T02:44:16.739Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738291273862-n7uyqhfq9t.pcm.mp3","exists":true}
2025-01-31T02:44:16.739Z [32minfo[39m: [TranscriptionService] File stats:{"size":867165,"created":"2025-01-31T02:44:16.163Z","modified":"2025-01-31T02:44:16.715Z"}
2025-01-31T02:44:16.739Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:44:16.739Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:44:17.318Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:44:20.692Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":865,"hasContent":true,"text":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically s"}
2025-01-31T02:44:20.693Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You remember that only the highest aptitude, have to be the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting...
2025-01-31T02:44:20.693Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":865,"transcriptSample":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically s"}
2025-01-31T02:44:20.693Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:44:21.567Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:44:21.568Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T02:44:23.574Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T02:44:24.439Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:44:24.439Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T02:44:24.711Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 7573 bytes)
2025-01-31T02:44:28.449Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T02:44:29.999Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:44:29.999Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T02:44:34.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 67 bytes (total: 14149 bytes)
2025-01-31T02:44:36.006Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T02:44:36.743Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T02:44:36.743Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":865,"transcriptLength":865,"summary":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically s"}
2025-01-31T02:44:36.748Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"92","data":{"guildId":"1315144523336122469","transcript":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016, I made that change very early on. And then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first, Obama, Biden, and the Democrats put policy first, and they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety, we have to have our smartest people. It doesn't matter what they look like, how they speak, who they are, it matters. Intellect, talent, the word talent, they have to be talented, naturally talented.\n"}}
2025-01-31T02:44:36.748Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:44:36.748Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 92
2025-01-31T02:44:36.750Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:44:36.761Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738291476748.txt","size":865}
2025-01-31T02:44:37.042Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: You remember that only the highest aptitude, have to be the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016, I made that change very early on. And then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first, Obama, Biden, and the Democrats put policy first, and they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety, we have to have our smartest people. It doesn't matter what they look like, how they speak, who they are, it matters. Intellect, talent, the word talent, they have to be talented, naturally talented.

2025-01-31T02:44:37.043Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:44:37.050Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291273862-n7uyqhfq9t.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:44:37.052Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291273862-n7uyqhfq9t.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:44:41.772Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"92","data":{"guildId":"1315144523336122469","transcript":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically superior people were allowed to qualify for air traffic controllers. That was not so prior to getting there when I arrived in 2016, I made that change very early on. And then when I left office, and Biden took over, he changed them back to lower than ever before. I put safety first, Obama, Biden, and the Democrats put policy first, and they put politics at a level that nobody's ever seen, because this was the lowest level. Their policy was horrible, and their politics was even worse. And my administration will set the highest possible bar for aviation safety, we have to have our smartest people. It doesn't matter what they look like, how they speak, who they are, it matters. Intellect, talent, the word talent, they have to be talented, naturally talented.\n"}}
2025-01-31T02:44:41.773Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:44:41.773Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":865,"transcriptSample":"You remember that only the highest aptitude, have to be the highest intellect, and psychologically s"}
2025-01-31T02:44:41.773Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:44:51.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 18902 bytes)
2025-01-31T02:45:06.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 33223 bytes)
2025-01-31T02:45:08.142Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3174,"transcriptLength":865,"summary":"##### Narrative Summary\n\nThe speaker, presumably a former high-ranking official, reflects on their t"}
2025-01-31T02:45:08.143Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:45:08.430Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:45:08.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 47066 bytes)
2025-01-31T02:45:08.435Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"92","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738291508142}}
2025-01-31T02:45:10.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 59361 bytes)
2025-01-31T02:45:16.412Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 70414 bytes)
2025-01-31T02:52:42.221Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T02:52:42.269Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T02:52:42.362Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T02:52:42.385Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738291453889-8gfbkw5hqhc.pcm","age":445842.337890625,"size":2688000}
2025-01-31T02:52:42.391Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T02:52:42.395Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T02:52:42.396Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T02:52:42.856Z [32minfo[39m: Bot initialized successfully
2025-01-31T02:52:42.893Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T02:53:04.532Z [32minfo[39m: Command Name: setkey
2025-01-31T02:53:04.538Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T02:53:04.791Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T02:53:04.793Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334718064671064094","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:53:04.794Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:53:14.140Z [32minfo[39m: Command Name: record
2025-01-31T02:53:14.146Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T02:53:14.449Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T02:53:14.728Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T02:53:14.731Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T02:53:14.731Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:53:14.731Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T02:53:14.732Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:53:14.734Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738291994733-a1rniip3z29.pcm","directory":"temp"}
2025-01-31T02:53:14.850Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:53:14.851Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:53:14.851Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T02:53:14.851Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:53:14.851Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T02:53:14.851Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T02:53:14.851Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334718105036918844","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T02:53:14.852Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T02:53:14.880Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:53:14.881Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:53:16.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 15922 bytes)
2025-01-31T02:53:18.837Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 31042 bytes)
2025-01-31T02:53:20.678Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:53:20.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 47308 bytes)
2025-01-31T02:53:22.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 63533 bytes)
2025-01-31T02:53:24.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 79485 bytes)
2025-01-31T02:53:27.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 93704 bytes)
2025-01-31T02:53:29.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 109792 bytes)
2025-01-31T02:53:31.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 124092 bytes)
2025-01-31T02:53:33.344Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 140241 bytes)
2025-01-31T02:53:35.337Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 156549 bytes)
2025-01-31T02:53:37.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 170982 bytes)
2025-01-31T02:53:39.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 187174 bytes)
2025-01-31T02:53:41.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 201496 bytes)
2025-01-31T02:53:43.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 217687 bytes)
2025-01-31T02:53:45.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 232380 bytes)
2025-01-31T02:53:47.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 248336 bytes)
2025-01-31T02:53:49.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 264393 bytes)
2025-01-31T02:53:51.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 280645 bytes)
2025-01-31T02:53:53.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 297002 bytes)
2025-01-31T02:53:55.900Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 311616 bytes)
2025-01-31T02:53:57.998Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 325749 bytes)
2025-01-31T02:54:00.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 339940 bytes)
2025-01-31T02:54:02.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 354153 bytes)
2025-01-31T02:54:04.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 368649 bytes)
2025-01-31T02:54:06.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 383350 bytes)
2025-01-31T02:54:08.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 399554 bytes)
2025-01-31T02:54:10.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 415758 bytes)
2025-01-31T02:54:12.378Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 431008 bytes)
2025-01-31T02:54:14.378Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 447207 bytes)
2025-01-31T02:54:16.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 463449 bytes)
2025-01-31T02:54:18.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 477749 bytes)
2025-01-31T02:54:20.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 493974 bytes)
2025-01-31T02:54:22.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 508119 bytes)
2025-01-31T02:54:24.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 523860 bytes)
2025-01-31T02:54:26.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 539517 bytes)
2025-01-31T02:54:28.558Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 555855 bytes)
2025-01-31T02:54:30.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 572076 bytes)
2025-01-31T02:54:32.658Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 586331 bytes)
2025-01-31T02:54:34.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 600346 bytes)
2025-01-31T02:54:37.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 613950 bytes)
2025-01-31T02:54:39.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 627896 bytes)
2025-01-31T02:54:41.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 644187 bytes)
2025-01-31T02:54:43.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 660328 bytes)
2025-01-31T02:54:45.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 673875 bytes)
2025-01-31T02:54:47.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 690039 bytes)
2025-01-31T02:54:49.328Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 705407 bytes)
2025-01-31T02:54:51.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 721047 bytes)
2025-01-31T02:54:53.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 736599 bytes)
2025-01-31T02:54:55.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 752493 bytes)
2025-01-31T02:54:57.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 765970 bytes)
2025-01-31T02:54:59.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 780103 bytes)
2025-01-31T02:55:01.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 796300 bytes)
2025-01-31T02:55:03.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 812529 bytes)
2025-01-31T02:55:06.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 824964 bytes)
2025-01-31T02:55:08.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 839100 bytes)
2025-01-31T02:55:11.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 853712 bytes)
2025-01-31T02:55:13.063Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 869994 bytes)
2025-01-31T02:55:15.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 885515 bytes)
2025-01-31T02:55:17.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 901390 bytes)
2025-01-31T02:55:19.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 916618 bytes)
2025-01-31T02:55:21.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 932814 bytes)
2025-01-31T02:55:23.056Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 946739 bytes)
2025-01-31T02:55:25.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 962946 bytes)
2025-01-31T02:55:27.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 979260 bytes)
2025-01-31T02:55:29.057Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 995475 bytes)
2025-01-31T02:55:31.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1009853 bytes)
2025-01-31T02:55:33.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1026079 bytes)
2025-01-31T02:55:35.402Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1039555 bytes)
2025-01-31T02:55:37.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1054249 bytes)
2025-01-31T02:55:39.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1067288 bytes)
2025-01-31T02:55:41.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1081784 bytes)
2025-01-31T02:55:43.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1097918 bytes)
2025-01-31T02:55:45.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1113917 bytes)
2025-01-31T02:55:47.557Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1129727 bytes)
2025-01-31T02:55:49.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1143497 bytes)
2025-01-31T02:55:51.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1159764 bytes)
2025-01-31T02:55:53.634Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1175971 bytes)
2025-01-31T02:55:55.639Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1192168 bytes)
2025-01-31T02:55:57.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1206439 bytes)
2025-01-31T02:55:59.853Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1222500 bytes)
2025-01-31T02:56:01.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1238622 bytes)
2025-01-31T02:56:03.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1254153 bytes)
2025-01-31T02:56:05.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1269045 bytes)
2025-01-31T02:56:07.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1285172 bytes)
2025-01-31T02:56:09.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1299818 bytes)
2025-01-31T02:56:11.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1315679 bytes)
2025-01-31T02:56:13.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 1331992 bytes)
2025-01-31T02:56:14.860Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:56:14.865Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm","directory":"temp"}
2025-01-31T02:56:14.871Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:56:14.873Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:56:14.873Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T02:56:14.874Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:56:15.251Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:56:15.253Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:56:15.372Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:56:15.889Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:56:15.892Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:56:18.564Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738291994733-a1rniip3z29.pcm to MP3
2025-01-31T02:56:18.566Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738291994733-a1rniip3z29.pcm.mp3","exists":true}
2025-01-31T02:56:18.567Z [32minfo[39m: [TranscriptionService] File stats:{"size":2602197,"created":"2025-01-31T02:56:17.190Z","modified":"2025-01-31T02:56:18.535Z"}
2025-01-31T02:56:18.569Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:56:18.569Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:56:34.479Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":3014,"hasContent":true,"text":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and yo"}
2025-01-31T02:56:34.480Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: (- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and you continue to do it and then you try to talk to me. Stop it. And from the perspective of a corporati...
2025-01-31T02:56:34.481Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":3014,"transcriptSample":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and yo"}
2025-01-31T02:56:34.481Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:57:10.946Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3944,"transcriptLength":3014,"summary":"##### Narrative Summary\nThe speaker addresses the issue of H1B visa fraud and the potential negative"}
2025-01-31T02:57:10.970Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"93","data":{"guildId":"1315144523336122469","transcript":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and you continue to do it and then you try to talk to me. Stop it. And from the perspective of a corporation, well you have to understand that if they can get a job done cheaper at higher quality, faster, then why wouldn't they want to do that? And so while it's understandable that if you're an American you want to save your own job, we should have never really found ourselves here in the first place. Over the past week on X, there was this debate over H1B visa fraud and whether we should be trying to save American jobs, halting all of this cheap immigrant labor into our country. And that's really at the cost of deceleration of technological progress in a nearsighted goal just to save a few jobs. And we have to consider is this even a sustainable path? Like how many times are we going to decelerate? It's a slippery slope where we can be decelerating everything and close off the entire country just to save a few jobs in the short-term. But other countries are going to continue to geo-arbitrage that labor and it's defeatism. It may be a one-way door to the wrong side of history. To be sure, H1B visa reform is necessary, but one way or another we may lose these programming jobs. And we may consider programmers did not build America. Diversity did. But American exceptionalism is not based on any commodity skill set. It's based on innovation, disruption, the willingness to fail and get back up, entrepreneurship. And these are qualities built on freedom of expression, thought that no country or AI should be able to match. And we need to play to our strengths. And coding is not one of them. I'm sorry, but it's just not in this generation. Other countries are just way stronger than us. You see, DEI set us back 20 to 30 years because they destroyed our entire education system through the Department of Education. And students were taught absolutely nothing. And now we're seeing them come into the workforce as Gen Z. They're the unemployable, unhireable people because they're activists, they're self-entitled, they're lazy, they don't do work, and they don't know anything. They don't know STEM. Today's actually a really exciting day because we got to unfold one of these units right in front of a crowd of people. What they do know is diversity history month, gender ideologies, empathy, proper use of pronouns. And even though you may think you know coding, you actually don't. Compared to some of these Asian nations, you will not rank in the bottom 10 percentile of these because their STEM foundation is just so much stronger. Our entire education system needs to be revamped because it is just brainwashed all the way to the core, to the teachers. The whole thing needs to be ripped out. And it's going to take us 20 to 30 years to just rebuild the entire system and get a new batch of students educated properly and bring them out into the workforce. And so in the meanwhile, our college\n"}}
2025-01-31T02:57:10.971Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T02:57:10.971Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 93
2025-01-31T02:57:10.974Z [33mwarn[39m: [ChannelService] Message is too long (3154 chars), splitting into chunks
2025-01-31T02:57:10.986Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738292230971.txt","size":3014}
2025-01-31T02:57:11.904Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: (- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and you continue to do it and then you try to talk to me. Stop it. And from the perspective of a corporation, well you have to understand that if they can get a job done cheaper at higher quality, faster, then why wouldn't they want to do that? And so while it's understandable that if you're an American you want to save your own job, we should have never really found ourselves here in the first place. Over the past week on X, there was this debate over H1B visa fraud and whether we should be trying to save American jobs, halting all of this cheap immigrant labor into our country. And that's really at the cost of deceleration of technological progress in a nearsighted goal just to save a few jobs. And we have to consider is this even a sustainable path? Like how many times are we going to decelerate? It's a slippery slope where we can be decelerating everything and close off the entire country just to save a few jobs in the short-term. But other countries are going to continue to geo-arbitrage that labor and it's defeatism. It may be a one-way door to the wrong side of history. To be sure, H1B visa reform is necessary, but one way or another we may lose these programming jobs. And we may consider programmers did not build America. Diversity did. But American exceptionalism is not based on any commodity skill set. It's based on innovation, disruption, the willingness to fail and get back up, entrepreneurship. And these are qualities built on freedom of expression, thought that no country or AI should be able to match. And we need to play to our strengths. And coding is not one of them. I'm sorry, but it's just not in this generation. Other countries are just way stronger than us. You see, DEI set us back 20 to 30 years because they destroyed our entire education system through the Department of Education. And students were taught absolutely nothing. And now we're seeing them come into the workforce as Gen Z. They're the unemployable, unhireable people because they're activists, they're self-entitled, they're lazy, they don't do work, and they don't know anything. They don't know STEM. Today's actually a really exciting day because we got to unfold one of these units right in front of a crowd of people. What they do know is diversity history month, gender ideologies, empathy, proper use of pronouns. And even though you may think you know coding, you actually don't. Compared to some of these Asian nations, you will not rank in the bottom 10 percentile of these because their STEM foundation is just so much stronger. Our entire education system needs to be revamped because it is just brainwashed all the way to the core, to the teachers. The whole thing needs to be ripped out. And it's going to take us 20 to 30 years to just rebuild the entire system and get a new batch of students educated properly and bring them out into the workforce. And so in the meanwhile, our college

2025-01-31T02:57:11.906Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:57:11.911Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291994733-a1rniip3z29.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:57:11.915Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738291994733-a1rniip3z29.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:57:15.985Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"93","data":{"guildId":"1315144523336122469","transcript":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and you continue to do it and then you try to talk to me. Stop it. And from the perspective of a corporation, well you have to understand that if they can get a job done cheaper at higher quality, faster, then why wouldn't they want to do that? And so while it's understandable that if you're an American you want to save your own job, we should have never really found ourselves here in the first place. Over the past week on X, there was this debate over H1B visa fraud and whether we should be trying to save American jobs, halting all of this cheap immigrant labor into our country. And that's really at the cost of deceleration of technological progress in a nearsighted goal just to save a few jobs. And we have to consider is this even a sustainable path? Like how many times are we going to decelerate? It's a slippery slope where we can be decelerating everything and close off the entire country just to save a few jobs in the short-term. But other countries are going to continue to geo-arbitrage that labor and it's defeatism. It may be a one-way door to the wrong side of history. To be sure, H1B visa reform is necessary, but one way or another we may lose these programming jobs. And we may consider programmers did not build America. Diversity did. But American exceptionalism is not based on any commodity skill set. It's based on innovation, disruption, the willingness to fail and get back up, entrepreneurship. And these are qualities built on freedom of expression, thought that no country or AI should be able to match. And we need to play to our strengths. And coding is not one of them. I'm sorry, but it's just not in this generation. Other countries are just way stronger than us. You see, DEI set us back 20 to 30 years because they destroyed our entire education system through the Department of Education. And students were taught absolutely nothing. And now we're seeing them come into the workforce as Gen Z. They're the unemployable, unhireable people because they're activists, they're self-entitled, they're lazy, they don't do work, and they don't know anything. They don't know STEM. Today's actually a really exciting day because we got to unfold one of these units right in front of a crowd of people. What they do know is diversity history month, gender ideologies, empathy, proper use of pronouns. And even though you may think you know coding, you actually don't. Compared to some of these Asian nations, you will not rank in the bottom 10 percentile of these because their STEM foundation is just so much stronger. Our entire education system needs to be revamped because it is just brainwashed all the way to the core, to the teachers. The whole thing needs to be ripped out. And it's going to take us 20 to 30 years to just rebuild the entire system and get a new batch of students educated properly and bring them out into the workforce. And so in the meanwhile, our college\n"}}
2025-01-31T02:57:15.987Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T02:57:15.988Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":3014,"transcriptSample":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and yo"}
2025-01-31T02:57:15.989Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T02:57:17.208Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T02:57:17.209Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3014,"transcriptLength":3014,"summary":"(- Are you short on time right now?) Are you talking to me when I'm asking you not to do that and yo"}
2025-01-31T02:57:17.209Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:57:17.463Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T02:57:17.472Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"93","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738292237209}}
2025-01-31T02:57:42.222Z [32minfo[39m: Memory Usage:
2025-01-31T02:57:42.227Z [32minfo[39m: rss: 141.32 MB
2025-01-31T02:57:42.228Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-31T02:57:42.228Z [32minfo[39m: heapUsed: 28.66 MB
2025-01-31T02:57:42.228Z [32minfo[39m: external: 10.78 MB
2025-01-31T02:57:42.229Z [32minfo[39m: arrayBuffers: 2.85 MB
2025-01-31T02:59:14.858Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T02:59:14.865Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738292354863-5gs97t5zco3.pcm","directory":"temp"}
2025-01-31T02:59:14.868Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T02:59:14.869Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T02:59:14.870Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T02:59:14.870Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T02:59:15.881Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T02:59:15.884Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T02:59:17.242Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm to MP3
2025-01-31T02:59:17.244Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm.mp3","exists":true}
2025-01-31T02:59:17.245Z [32minfo[39m: [TranscriptionService] File stats:{"size":11997,"created":"2025-01-31T02:59:17.161Z","modified":"2025-01-31T02:59:17.223Z"}
2025-01-31T02:59:17.245Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:59:17.245Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:59:20.021Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T02:59:20.026Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T02:59:20.078Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T02:59:20.079Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T02:59:20.079Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T02:59:22.082Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm.mp3","exists":true}
2025-01-31T02:59:22.084Z [32minfo[39m: [TranscriptionService] File stats:{"size":11997,"created":"2025-01-31T02:59:17.161Z","modified":"2025-01-31T02:59:17.223Z"}
2025-01-31T02:59:22.085Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:59:22.085Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:59:22.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 10846 bytes)
2025-01-31T02:59:23.888Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T02:59:23.889Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T02:59:23.890Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T02:59:24.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 26802 bytes)
2025-01-31T02:59:26.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 41580 bytes)
2025-01-31T02:59:26.340Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T02:59:27.896Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm.mp3","exists":true}
2025-01-31T02:59:27.899Z [32minfo[39m: [TranscriptionService] File stats:{"size":11997,"created":"2025-01-31T02:59:17.161Z","modified":"2025-01-31T02:59:17.223Z"}
2025-01-31T02:59:27.900Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T02:59:27.900Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T02:59:29.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 56609 bytes)
2025-01-31T02:59:30.406Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T02:59:30.411Z [31merror[39m: [TranscriptionService] Transcription failed after all retries:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:77:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:149:32)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)"}
2025-01-31T02:59:30.413Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:77:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:149:32)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":145920}
2025-01-31T02:59:30.413Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T02:59:30.748Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: 
2025-01-31T02:59:30.749Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T02:59:30.751Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm","directory":"/usr/src/app/temp"}
2025-01-31T02:59:30.752Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738292174862-t5s7l0c1hp.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T02:59:31.016Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 72651 bytes)
2025-01-31T02:59:33.038Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 87939 bytes)
2025-01-31T02:59:35.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 103385 bytes)
2025-01-31T02:59:37.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 119391 bytes)
2025-01-31T02:59:39.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 134431 bytes)
2025-01-31T02:59:41.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 150014 bytes)
2025-01-31T02:59:43.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 165564 bytes)
2025-01-31T02:59:45.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 91 bytes (total: 181329 bytes)
2025-01-31T02:59:47.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 197226 bytes)
2025-01-31T02:59:49.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 211072 bytes)
2025-01-31T02:59:51.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 226915 bytes)
2025-01-31T02:59:53.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 242227 bytes)
2025-01-31T02:59:55.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 256486 bytes)
2025-01-31T02:59:57.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 270084 bytes)
2025-01-31T02:59:59.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 286182 bytes)
2025-01-31T03:00:01.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 301332 bytes)
2025-01-31T03:00:04.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 314512 bytes)
2025-01-31T03:00:06.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 71 bytes (total: 329877 bytes)
2025-01-31T03:00:08.437Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 345742 bytes)
2025-01-31T03:00:10.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 360467 bytes)
2025-01-31T03:00:12.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 375900 bytes)
2025-01-31T03:00:14.577Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 388715 bytes)
2025-01-31T03:00:16.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 403061 bytes)
2025-01-31T03:00:18.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 417098 bytes)
2025-01-31T03:00:20.897Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 67 bytes (total: 432742 bytes)
2025-01-31T03:00:22.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 447327 bytes)
2025-01-31T03:00:24.898Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 461687 bytes)
2025-01-31T03:00:26.896Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 476900 bytes)
2025-01-31T03:00:29.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 489592 bytes)
2025-01-31T03:00:31.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 505575 bytes)
2025-01-31T03:00:33.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 519582 bytes)
2025-01-31T03:00:35.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 535147 bytes)
2025-01-31T03:00:37.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 549952 bytes)
2025-01-31T03:00:39.238Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 564593 bytes)
2025-01-31T03:00:41.234Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 578889 bytes)
2025-01-31T03:00:43.716Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 594453 bytes)
2025-01-31T03:00:46.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 608466 bytes)
2025-01-31T03:00:48.578Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 105 bytes (total: 624008 bytes)
2025-01-31T03:00:55.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 633506 bytes)
2025-01-31T03:00:58.718Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 645998 bytes)
2025-01-31T03:01:00.719Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 661945 bytes)
2025-01-31T03:01:03.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 671703 bytes)
2025-01-31T03:01:05.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 686331 bytes)
2025-01-31T03:01:07.576Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 700350 bytes)
2025-01-31T03:01:13.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 712183 bytes)
2025-01-31T03:01:15.460Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 726314 bytes)
2025-01-31T03:01:17.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 742098 bytes)
2025-01-31T03:01:19.483Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 757508 bytes)
2025-01-31T03:01:21.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 771124 bytes)
2025-01-31T03:01:23.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 786685 bytes)
2025-01-31T03:01:30.597Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 796090 bytes)
2025-01-31T03:01:32.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 811498 bytes)
2025-01-31T03:01:34.679Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 826115 bytes)
2025-01-31T03:01:37.577Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 837311 bytes)
2025-01-31T03:01:41.037Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 851336 bytes)
2025-01-31T03:01:43.038Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 865126 bytes)
2025-01-31T03:01:47.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 879372 bytes)
2025-01-31T03:01:49.322Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 893070 bytes)
2025-01-31T03:01:51.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 908961 bytes)
2025-01-31T03:01:53.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 923372 bytes)
2025-01-31T03:01:56.294Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 934650 bytes)
2025-01-31T03:01:58.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 950438 bytes)
2025-01-31T03:02:00.621Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 962508 bytes)
2025-01-31T03:02:02.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 977660 bytes)
2025-01-31T03:02:04.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 989208 bytes)
2025-01-31T03:02:07.336Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1001784 bytes)
2025-01-31T03:02:09.416Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1015836 bytes)
2025-01-31T03:02:12.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 1027502 bytes)
2025-01-31T03:02:14.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1041883 bytes)
2025-01-31T03:02:14.854Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:02:14.855Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738292534855-bn2eb821kk8.pcm","directory":"temp"}
2025-01-31T03:02:14.858Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:02:14.858Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:02:14.858Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:02:14.858Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:02:15.875Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:02:15.881Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:02:16.699Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:02:16.721Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:02:18.188Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738292354863-5gs97t5zco3.pcm to MP3
2025-01-31T03:02:18.188Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738292354863-5gs97t5zco3.pcm.mp3","exists":true}
2025-01-31T03:02:18.189Z [32minfo[39m: [TranscriptionService] File stats:{"size":1852053,"created":"2025-01-31T03:02:17.133Z","modified":"2025-01-31T03:02:18.172Z"}
2025-01-31T03:02:18.189Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:02:18.189Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:02:18.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 15887 bytes)
2025-01-31T03:02:20.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 31908 bytes)
2025-01-31T03:02:22.001Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:02:23.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 43486 bytes)
2025-01-31T03:02:25.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 55513 bytes)
2025-01-31T03:02:28.397Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 68039 bytes)
2025-01-31T03:02:29.056Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2176,"hasContent":true,"text":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Imp"}
2025-01-31T03:02:29.057Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Impractical Jokers, someone else has lost, and it is Joey Fatone. Joey, are you ready for the Total Jok...
2025-01-31T03:02:29.057Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2176,"transcriptSample":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Imp"}
2025-01-31T03:02:29.057Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:02:30.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 79239 bytes)
2025-01-31T03:02:32.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 91474 bytes)
2025-01-31T03:02:35.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 102026 bytes)
2025-01-31T03:02:37.859Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 115796 bytes)
2025-01-31T03:02:39.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 130028 bytes)
2025-01-31T03:02:41.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 144958 bytes)
2025-01-31T03:02:42.228Z [32minfo[39m: Memory Usage:
2025-01-31T03:02:42.229Z [32minfo[39m: rss: 145.78 MB
2025-01-31T03:02:42.229Z [32minfo[39m: heapTotal: 30.71 MB
2025-01-31T03:02:42.230Z [32minfo[39m: heapUsed: 28.5 MB
2025-01-31T03:02:42.230Z [32minfo[39m: external: 10.48 MB
2025-01-31T03:02:42.230Z [32minfo[39m: arrayBuffers: 2.56 MB
2025-01-31T03:02:44.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 157039 bytes)
2025-01-31T03:02:46.029Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 172193 bytes)
2025-01-31T03:02:48.017Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 186676 bytes)
2025-01-31T03:02:50.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 202703 bytes)
2025-01-31T03:02:52.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 216259 bytes)
2025-01-31T03:02:54.218Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 230775 bytes)
2025-01-31T03:02:56.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 243292 bytes)
2025-01-31T03:03:00.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 255903 bytes)
2025-01-31T03:03:02.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 270295 bytes)
2025-01-31T03:03:04.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 282710 bytes)
2025-01-31T03:03:04.904Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2766,"transcriptLength":2176,"summary":"##### Narrative Summary\n\nIn a surprising twist on the popular show, ***Impractical Jokers***, *Joey "}
2025-01-31T03:03:04.912Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"94","data":{"guildId":"1315144523336122469","transcript":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Impractical Jokers, someone else has lost, and it is Joey Fatone. Joey, are you ready for the Total Jokers experience? Do I even have a choice? You have no choice at all. Here's what's happening. Today, you're recording the pilot episode for a brand new TV series called Joey Fatone's Dance Partay. We hired 15 dancers to be on the floor with you. So, what is the catch? While you're hosting Joey Fatone's Dance Partay, you're going to be enduring an assortment of past punishments that we've done. An assortment? Yeah, like I've told you. We won't make you do anything we haven't already done ourselves. Yes, that's the plan below. Look at this! Oh my goodness, it's a full-blown dance partay! People got moves! The vibe out there is fierce! These dancers think it's a real show and have no idea what they're doing. Just like me. Hey Fatone, how you feeling? You ready, bud? Joey, don't worry, buddy. We printed out cue cards for you. So, you'll know what to say. Alright, let's bring in Joey Fatone on the floor, shall we? Alright! Hey, Joey! Come on, Nicky! Here he is! Joey Fatone has a good position. You might recognize Joey Fatone's outfit from his doll. 30 years ago! You know, I get messages every so often. It's been like, I figure out that I don't have to pay for the tickets. Nick, we got your egg. We are about to set in. DJ, come on! He's the crew member of our show. He ain't no DJ. Punishment is one of our classics. There's a punishment where they force me to get a novocaine. It's shot through my thumbs and lips. Please do it, it's brilliant. It's so good. Why don't we come back together just a quick minute? Here you go! Nice! It's good. I still have one. Then you're ready. I'm ready. He's ready, he's ready. Everyone out there's like, what the hell happened to him? He had a stroke. He has been so sick. Thanks, bud. The game is coursing through your guts as we speak. DJ makes people just bleeding. Here you go. Here's my gal, Vincent Forte. Dr. Chandler is there. Joe, I'm gonna throw some cue cards for you. Just read off the cue cards for me, alright?\n"}}
2025-01-31T03:03:04.912Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:03:04.912Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 94
2025-01-31T03:03:04.914Z [33mwarn[39m: [ChannelService] Message is too long (2316 chars), splitting into chunks
2025-01-31T03:03:04.927Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738292584912.txt","size":2176}
2025-01-31T03:03:05.750Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Impractical Jokers, someone else has lost, and it is Joey Fatone. Joey, are you ready for the Total Jokers experience? Do I even have a choice? You have no choice at all. Here's what's happening. Today, you're recording the pilot episode for a brand new TV series called Joey Fatone's Dance Partay. We hired 15 dancers to be on the floor with you. So, what is the catch? While you're hosting Joey Fatone's Dance Partay, you're going to be enduring an assortment of past punishments that we've done. An assortment? Yeah, like I've told you. We won't make you do anything we haven't already done ourselves. Yes, that's the plan below. Look at this! Oh my goodness, it's a full-blown dance partay! People got moves! The vibe out there is fierce! These dancers think it's a real show and have no idea what they're doing. Just like me. Hey Fatone, how you feeling? You ready, bud? Joey, don't worry, buddy. We printed out cue cards for you. So, you'll know what to say. Alright, let's bring in Joey Fatone on the floor, shall we? Alright! Hey, Joey! Come on, Nicky! Here he is! Joey Fatone has a good position. You might recognize Joey Fatone's outfit from his doll. 30 years ago! You know, I get messages every so often. It's been like, I figure out that I don't have to pay for the tickets. Nick, we got your egg. We are about to set in. DJ, come on! He's the crew member of our show. He ain't no DJ. Punishment is one of our classics. There's a punishment where they force me to get a novocaine. It's shot through my thumbs and lips. Please do it, it's brilliant. It's so good. Why don't we come back together just a quick minute? Here you go! Nice! It's good. I still have one. Then you're ready. I'm ready. He's ready, he's ready. Everyone out there's like, what the hell happened to him? He had a stroke. He has been so sick. Thanks, bud. The game is coursing through your guts as we speak. DJ makes people just bleeding. Here you go. Here's my gal, Vincent Forte. Dr. Chandler is there. Joe, I'm gonna throw some cue cards for you. Just read off the cue cards for me, alright?

2025-01-31T03:03:05.751Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:03:05.761Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738292354863-5gs97t5zco3.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:03:05.762Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738292354863-5gs97t5zco3.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:03:06.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 297328 bytes)
2025-01-31T03:03:08.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 311628 bytes)
2025-01-31T03:03:09.919Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"94","data":{"guildId":"1315144523336122469","transcript":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Impractical Jokers, someone else has lost, and it is Joey Fatone. Joey, are you ready for the Total Jokers experience? Do I even have a choice? You have no choice at all. Here's what's happening. Today, you're recording the pilot episode for a brand new TV series called Joey Fatone's Dance Partay. We hired 15 dancers to be on the floor with you. So, what is the catch? While you're hosting Joey Fatone's Dance Partay, you're going to be enduring an assortment of past punishments that we've done. An assortment? Yeah, like I've told you. We won't make you do anything we haven't already done ourselves. Yes, that's the plan below. Look at this! Oh my goodness, it's a full-blown dance partay! People got moves! The vibe out there is fierce! These dancers think it's a real show and have no idea what they're doing. Just like me. Hey Fatone, how you feeling? You ready, bud? Joey, don't worry, buddy. We printed out cue cards for you. So, you'll know what to say. Alright, let's bring in Joey Fatone on the floor, shall we? Alright! Hey, Joey! Come on, Nicky! Here he is! Joey Fatone has a good position. You might recognize Joey Fatone's outfit from his doll. 30 years ago! You know, I get messages every so often. It's been like, I figure out that I don't have to pay for the tickets. Nick, we got your egg. We are about to set in. DJ, come on! He's the crew member of our show. He ain't no DJ. Punishment is one of our classics. There's a punishment where they force me to get a novocaine. It's shot through my thumbs and lips. Please do it, it's brilliant. It's so good. Why don't we come back together just a quick minute? Here you go! Nice! It's good. I still have one. Then you're ready. I'm ready. He's ready, he's ready. Everyone out there's like, what the hell happened to him? He had a stroke. He has been so sick. Thanks, bud. The game is coursing through your guts as we speak. DJ makes people just bleeding. Here you go. Here's my gal, Vincent Forte. Dr. Chandler is there. Joe, I'm gonna throw some cue cards for you. Just read off the cue cards for me, alright?\n"}}
2025-01-31T03:03:09.922Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:03:09.922Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2176,"transcriptSample":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Imp"}
2025-01-31T03:03:09.923Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:03:10.504Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 325270 bytes)
2025-01-31T03:03:12.578Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 338846 bytes)
2025-01-31T03:03:14.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 353447 bytes)
2025-01-31T03:03:17.021Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 364678 bytes)
2025-01-31T03:03:19.218Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 373982 bytes)
2025-01-31T03:03:21.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 386292 bytes)
2025-01-31T03:03:23.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 399573 bytes)
2025-01-31T03:03:25.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 415666 bytes)
2025-01-31T03:03:28.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 428462 bytes)
2025-01-31T03:03:30.116Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 441091 bytes)
2025-01-31T03:03:32.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 103 bytes (total: 451359 bytes)
2025-01-31T03:09:19.915Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T03:09:19.980Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T03:09:20.059Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T03:09:20.086Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738292534855-bn2eb821kk8.pcm","age":347651.1311035156,"size":13059840}
2025-01-31T03:09:20.093Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T03:09:20.096Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T03:09:20.096Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T03:09:20.525Z [32minfo[39m: Bot initialized successfully
2025-01-31T03:09:20.567Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T03:09:50.158Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"94","data":{"guildId":"1315144523336122469","transcript":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Impractical Jokers, someone else has lost, and it is Joey Fatone. Joey, are you ready for the Total Jokers experience? Do I even have a choice? You have no choice at all. Here's what's happening. Today, you're recording the pilot episode for a brand new TV series called Joey Fatone's Dance Partay. We hired 15 dancers to be on the floor with you. So, what is the catch? While you're hosting Joey Fatone's Dance Partay, you're going to be enduring an assortment of past punishments that we've done. An assortment? Yeah, like I've told you. We won't make you do anything we haven't already done ourselves. Yes, that's the plan below. Look at this! Oh my goodness, it's a full-blown dance partay! People got moves! The vibe out there is fierce! These dancers think it's a real show and have no idea what they're doing. Just like me. Hey Fatone, how you feeling? You ready, bud? Joey, don't worry, buddy. We printed out cue cards for you. So, you'll know what to say. Alright, let's bring in Joey Fatone on the floor, shall we? Alright! Hey, Joey! Come on, Nicky! Here he is! Joey Fatone has a good position. You might recognize Joey Fatone's outfit from his doll. 30 years ago! You know, I get messages every so often. It's been like, I figure out that I don't have to pay for the tickets. Nick, we got your egg. We are about to set in. DJ, come on! He's the crew member of our show. He ain't no DJ. Punishment is one of our classics. There's a punishment where they force me to get a novocaine. It's shot through my thumbs and lips. Please do it, it's brilliant. It's so good. Why don't we come back together just a quick minute? Here you go! Nice! It's good. I still have one. Then you're ready. I'm ready. He's ready, he's ready. Everyone out there's like, what the hell happened to him? He had a stroke. He has been so sick. Thanks, bud. The game is coursing through your guts as we speak. DJ makes people just bleeding. Here you go. Here's my gal, Vincent Forte. Dr. Chandler is there. Joe, I'm gonna throw some cue cards for you. Just read off the cue cards for me, alright?\n"}}
2025-01-31T03:09:50.162Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:09:50.163Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2176,"transcriptSample":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Imp"}
2025-01-31T03:09:50.163Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:09:50.164Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":1,"model":"gpt-4","error":"OpenAI API key not set"}
2025-01-31T03:09:50.165Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:09:52.174Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:09:52.178Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":2,"model":"gpt-3.5-turbo","error":"OpenAI API key not set"}
2025-01-31T03:09:52.181Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T03:09:56.186Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T03:09:56.188Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":3,"model":"gpt-4-turbo-preview","error":"OpenAI API key not set"}
2025-01-31T03:09:56.189Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T03:10:02.202Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T03:10:02.212Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":4,"model":"gpt-3.5-turbo-16k","error":"OpenAI API key not set"}
2025-01-31T03:10:02.214Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2176,"transcriptLength":2176,"summary":"You voted in, but Joey Fatone is still tonight's Big Loser. For the first time in the history of Imp"}
2025-01-31T03:10:02.219Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:10:02.532Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:10:02.544Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"94","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738293002214}}
2025-01-31T03:14:19.934Z [32minfo[39m: Memory Usage:
2025-01-31T03:14:19.942Z [32minfo[39m: rss: 121.8 MB
2025-01-31T03:14:19.942Z [32minfo[39m: heapTotal: 29.96 MB
2025-01-31T03:14:19.943Z [32minfo[39m: heapUsed: 26.23 MB
2025-01-31T03:14:19.943Z [32minfo[39m: external: 8.07 MB
2025-01-31T03:14:19.943Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T03:18:39.219Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T03:18:39.266Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T03:18:39.344Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T03:18:39.354Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T03:18:39.376Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T03:18:39.376Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T03:18:39.830Z [32minfo[39m: Bot initialized successfully
2025-01-31T03:18:39.865Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T03:18:50.867Z [32minfo[39m: Command Name: setkey
2025-01-31T03:18:50.870Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T03:18:51.055Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T03:18:51.057Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334724550293717002","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T03:18:51.058Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T03:18:53.631Z [32minfo[39m: Command Name: record
2025-01-31T03:18:53.633Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T03:18:53.809Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T03:18:54.069Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T03:18:54.071Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T03:18:54.072Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T03:18:54.072Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T03:18:54.072Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:18:54.074Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738293534073-3ogbhbvfxrq.pcm","directory":"temp"}
2025-01-31T03:18:54.132Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:18:54.133Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:18:54.133Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T03:18:54.134Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:18:54.134Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T03:18:54.134Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T03:18:54.134Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334724562297815080","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T03:18:54.134Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T03:18:54.136Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:18:54.137Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:18:56.085Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 14338 bytes)
2025-01-31T03:18:58.081Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 28454 bytes)
2025-01-31T03:19:00.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 43891 bytes)
2025-01-31T03:19:02.080Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 58592 bytes)
2025-01-31T03:19:04.081Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 74375 bytes)
2025-01-31T03:19:05.303Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:19:06.820Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 88720 bytes)
2025-01-31T03:19:08.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 104500 bytes)
2025-01-31T03:19:10.819Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 119932 bytes)
2025-01-31T03:19:13.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 133011 bytes)
2025-01-31T03:19:15.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 144789 bytes)
2025-01-31T03:19:17.758Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 159063 bytes)
2025-01-31T03:19:19.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 173269 bytes)
2025-01-31T03:19:21.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 187388 bytes)
2025-01-31T03:19:23.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 202744 bytes)
2025-01-31T03:19:25.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 216058 bytes)
2025-01-31T03:19:27.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 231694 bytes)
2025-01-31T03:19:29.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 246277 bytes)
2025-01-31T03:19:31.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 262404 bytes)
2025-01-31T03:19:33.982Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 277658 bytes)
2025-01-31T03:19:35.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 293418 bytes)
2025-01-31T03:19:38.057Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 307563 bytes)
2025-01-31T03:19:40.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 322711 bytes)
2025-01-31T03:19:42.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 336995 bytes)
2025-01-31T03:19:44.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 351311 bytes)
2025-01-31T03:19:46.979Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 365591 bytes)
2025-01-31T03:19:48.980Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 381207 bytes)
2025-01-31T03:19:50.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 397349 bytes)
2025-01-31T03:19:52.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 411885 bytes)
2025-01-31T03:19:54.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 427409 bytes)
2025-01-31T03:19:57.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 440778 bytes)
2025-01-31T03:19:59.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 456159 bytes)
2025-01-31T03:20:01.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 469486 bytes)
2025-01-31T03:20:03.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 483889 bytes)
2025-01-31T03:20:05.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 498274 bytes)
2025-01-31T03:20:07.218Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 512621 bytes)
2025-01-31T03:20:09.215Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 526051 bytes)
2025-01-31T03:20:11.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 539552 bytes)
2025-01-31T03:20:13.227Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 555484 bytes)
2025-01-31T03:20:15.218Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 570570 bytes)
2025-01-31T03:20:17.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 584408 bytes)
2025-01-31T03:20:19.300Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 597919 bytes)
2025-01-31T03:20:22.282Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 611609 bytes)
2025-01-31T03:20:24.238Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 625278 bytes)
2025-01-31T03:20:26.238Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 639958 bytes)
2025-01-31T03:20:28.237Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 654724 bytes)
2025-01-31T03:20:30.236Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 668913 bytes)
2025-01-31T03:20:32.237Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 681836 bytes)
2025-01-31T03:20:34.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 697349 bytes)
2025-01-31T03:20:36.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 709613 bytes)
2025-01-31T03:20:38.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 725070 bytes)
2025-01-31T03:20:40.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 740158 bytes)
2025-01-31T03:20:42.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 754645 bytes)
2025-01-31T03:20:44.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 769437 bytes)
2025-01-31T03:20:46.360Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 784694 bytes)
2025-01-31T03:20:49.121Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 797525 bytes)
2025-01-31T03:20:51.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 810964 bytes)
2025-01-31T03:20:53.198Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 826995 bytes)
2025-01-31T03:20:55.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 839501 bytes)
2025-01-31T03:20:57.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 855251 bytes)
2025-01-31T03:20:59.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 870204 bytes)
2025-01-31T03:21:01.300Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 884909 bytes)
2025-01-31T03:21:03.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 899735 bytes)
2025-01-31T03:21:05.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 913471 bytes)
2025-01-31T03:21:07.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 927801 bytes)
2025-01-31T03:21:09.858Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 942821 bytes)
2025-01-31T03:21:11.856Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 956911 bytes)
2025-01-31T03:21:14.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 970306 bytes)
2025-01-31T03:21:16.356Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 983299 bytes)
2025-01-31T03:21:19.078Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 992678 bytes)
2025-01-31T03:21:23.255Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 1004701 bytes)
2025-01-31T03:21:25.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1020776 bytes)
2025-01-31T03:21:27.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1035028 bytes)
2025-01-31T03:21:29.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1050630 bytes)
2025-01-31T03:21:31.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1066524 bytes)
2025-01-31T03:21:33.977Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1082542 bytes)
2025-01-31T03:21:35.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1097150 bytes)
2025-01-31T03:21:39.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1108010 bytes)
2025-01-31T03:21:41.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 1123456 bytes)
2025-01-31T03:21:43.319Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1134862 bytes)
2025-01-31T03:21:45.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1150242 bytes)
2025-01-31T03:21:47.315Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1165420 bytes)
2025-01-31T03:21:49.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1180945 bytes)
2025-01-31T03:21:51.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1194371 bytes)
2025-01-31T03:21:53.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1208631 bytes)
2025-01-31T03:21:54.136Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:21:54.140Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738293714138-0gw7zl10d8y.pcm","directory":"temp"}
2025-01-31T03:21:54.144Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:21:54.146Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:21:54.147Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:21:54.147Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:21:55.154Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:21:55.156Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:21:57.932Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738293534073-3ogbhbvfxrq.pcm to MP3
2025-01-31T03:21:57.934Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738293534073-3ogbhbvfxrq.pcm.mp3","exists":true}
2025-01-31T03:21:57.935Z [32minfo[39m: [TranscriptionService] File stats:{"size":2158725,"created":"2025-01-31T03:21:56.678Z","modified":"2025-01-31T03:21:57.884Z"}
2025-01-31T03:21:57.938Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:21:57.938Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:22:12.958Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:22:12.978Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:22:14.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 14056 bytes)
2025-01-31T03:22:15.700Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2411,"hasContent":true,"text":"\"- The Evel 360 is a giant lens larger than your head, attached to some sort of headgear and suspend"}
2025-01-31T03:22:15.701Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: "- The Evel 360 is a giant lens larger than your head, attached to some sort of headgear and suspended in front of your face... maybe straps are below working?" Now as you can see there's... "- Jesus ...
2025-01-31T03:22:15.701Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2410,"transcriptSample":"\"- The Evel 360 is a giant lens larger than your head, attached to some sort of headgear and suspend"}
2025-01-31T03:22:15.702Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:22:16.800Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"'No transcript available'"}
2025-01-31T03:22:16.801Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:22:16.967Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 30366 bytes)
2025-01-31T03:22:18.807Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:22:18.883Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:22:19.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 43806 bytes)
2025-01-31T03:22:22.738Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2427,"transcriptLength":2410,"summary":"***The transcript showcases a chaotic pitch meeting where various products are being presented. The "}
2025-01-31T03:22:22.746Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738293742740.txt","size":2410}
2025-01-31T03:22:22.748Z [33mwarn[39m: [ChannelService] Message is too long (2464 chars), splitting into chunks
2025-01-31T03:22:23.273Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***The transcript showcases a chaotic pitch meeting where various products are being presented. The conversation revolves around inventions like the Realm 360, a device that incorporates multiple prescriptions in one, and the Grow and Voice Lobsters, a unique culinary concept. There is a mix of enthusiasm, confusion, and humor throughout the exchange.***

### Detailed Breakdown

- The conversation begins with a description of the Realm 360, a device with multiple prescriptions built into one, eliminating the need for multiple pairs of glasses.
- The discussion includes concerns about using the Realm 360 on a sunny day, emphasizing the importance of not looking directly at the sun.
- Despite the functionality of the Realm 360, there are some visual concerns raised, suggesting that miniaturizing the device could improve its appeal.
- The speaker highlights the stylish nature of the Realm 360, despite some skepticism from others in the conversation.
- There is a humorous moment where the speaker mentions the impossibility of cutting one's own legs, leading to a show of hands to determine whose ideas are preferred.
- The conversation transitions to a pitch meeting where product inventors, Roy and Sal, showcase new products in the research and development stages.
- Sal presents the Grow and Voice Lobsters, a culinary concept that aims to enhance the experience of enjoying lobsters.

### Memorable Moments
- > "With the Realm 360, you've got all possible prescriptions built into one, okay? I can read anything, no matter what. No more do I need three different sets of glasses."
- > "Lobsters are a culinary delight. The diamond of the sea."
- The humorous exchange regarding cutting one's own legs and the subsequent vote on whose ideas are better adds a light-hearted tone to the conversation.

### Consequences & Setup
- The presentation of the Grow and Voice Lobsters sets the stage for potential future product developments or business ventures.
- The contrasting opinions on the presented ideas may lead to further discussions or revisions in the product development process.

### Next Session
- ***Immediate Goals***: Further develop the concepts introduced during the pitch meeting.
- *Known Challenges Ahead*: Refining product ideas based on feedback and preferences expressed during the meeting.
- Player Intentions: Collaborate on refining and potentially bringing the presented products to market.
2025-01-31T03:22:23.275Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:22:23.285Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293534073-3ogbhbvfxrq.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:22:23.289Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293534073-3ogbhbvfxrq.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:22:23.797Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 57284 bytes)
2025-01-31T03:22:25.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 68760 bytes)
2025-01-31T03:22:27.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 83198 bytes)
2025-01-31T03:22:29.877Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 97236 bytes)
2025-01-31T03:22:31.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 114 bytes (total: 112961 bytes)
2025-01-31T03:22:34.835Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 122193 bytes)
2025-01-31T03:22:36.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 136369 bytes)
2025-01-31T03:22:38.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 147643 bytes)
2025-01-31T03:22:40.997Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 161288 bytes)
2025-01-31T03:22:43.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 174381 bytes)
2025-01-31T03:22:45.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 189951 bytes)
2025-01-31T03:22:47.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 204413 bytes)
2025-01-31T03:22:49.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 219550 bytes)
2025-01-31T03:22:51.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 234273 bytes)
2025-01-31T03:22:53.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 247298 bytes)
2025-01-31T03:22:57.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 259692 bytes)
2025-01-31T03:22:59.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 274899 bytes)
2025-01-31T03:23:01.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 289471 bytes)
2025-01-31T03:23:03.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 305280 bytes)
2025-01-31T03:23:05.297Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 321158 bytes)
2025-01-31T03:23:07.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 335144 bytes)
2025-01-31T03:23:09.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 348483 bytes)
2025-01-31T03:23:11.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 363920 bytes)
2025-01-31T03:23:13.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 379702 bytes)
2025-01-31T03:23:16.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 393417 bytes)
2025-01-31T03:23:18.555Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 408805 bytes)
2025-01-31T03:23:20.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 424309 bytes)
2025-01-31T03:23:22.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 437490 bytes)
2025-01-31T03:23:26.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 451151 bytes)
2025-01-31T03:23:28.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 467103 bytes)
2025-01-31T03:23:30.176Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 482999 bytes)
2025-01-31T03:23:32.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 498848 bytes)
2025-01-31T03:23:34.188Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 514289 bytes)
2025-01-31T03:23:36.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 528182 bytes)
2025-01-31T03:23:38.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 544324 bytes)
2025-01-31T03:23:39.214Z [32minfo[39m: Memory Usage:
2025-01-31T03:23:39.215Z [32minfo[39m: rss: 139.98 MB
2025-01-31T03:23:39.215Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T03:23:39.215Z [32minfo[39m: heapUsed: 28.32 MB
2025-01-31T03:23:39.215Z [32minfo[39m: external: 10.65 MB
2025-01-31T03:23:39.216Z [32minfo[39m: arrayBuffers: 2.73 MB
2025-01-31T03:23:40.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 558003 bytes)
2025-01-31T03:23:43.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 567583 bytes)
2025-01-31T03:23:45.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 582264 bytes)
2025-01-31T03:23:47.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 598369 bytes)
2025-01-31T03:23:51.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 612251 bytes)
2025-01-31T03:23:53.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 622867 bytes)
2025-01-31T03:23:57.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 632129 bytes)
2025-01-31T03:23:59.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 82 bytes (total: 643960 bytes)
2025-01-31T03:24:01.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 655305 bytes)
2025-01-31T03:24:03.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 670174 bytes)
2025-01-31T03:24:05.277Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 683936 bytes)
2025-01-31T03:24:07.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 699266 bytes)
2025-01-31T03:24:09.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 713765 bytes)
2025-01-31T03:24:11.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 727734 bytes)
2025-01-31T03:24:13.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 740859 bytes)
2025-01-31T03:24:15.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 756652 bytes)
2025-01-31T03:24:17.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 772399 bytes)
2025-01-31T03:24:19.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 787777 bytes)
2025-01-31T03:24:21.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 800774 bytes)
2025-01-31T03:24:23.914Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 815954 bytes)
2025-01-31T03:24:27.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 829737 bytes)
2025-01-31T03:24:30.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 838252 bytes)
2025-01-31T03:24:32.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 204 bytes (total: 853201 bytes)
2025-01-31T03:24:34.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 867963 bytes)
2025-01-31T03:24:36.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 881351 bytes)
2025-01-31T03:24:38.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 892920 bytes)
2025-01-31T03:24:40.914Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 905842 bytes)
2025-01-31T03:24:43.135Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 919691 bytes)
2025-01-31T03:24:45.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 935515 bytes)
2025-01-31T03:24:48.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 945485 bytes)
2025-01-31T03:24:50.359Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 959869 bytes)
2025-01-31T03:24:52.357Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 975741 bytes)
2025-01-31T03:24:54.134Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:24:54.140Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738293894137-1uq6go0hoec.pcm","directory":"temp"}
2025-01-31T03:24:54.144Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:24:54.145Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:24:54.145Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:24:54.145Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:24:54.298Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:24:54.302Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:24:54.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 989324 bytes)
2025-01-31T03:24:55.152Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:24:55.157Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:24:57.388Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738293714138-0gw7zl10d8y.pcm to MP3
2025-01-31T03:24:57.389Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738293714138-0gw7zl10d8y.pcm.mp3","exists":true}
2025-01-31T03:24:57.390Z [32minfo[39m: [TranscriptionService] File stats:{"size":1774221,"created":"2025-01-31T03:24:56.384Z","modified":"2025-01-31T03:24:57.372Z"}
2025-01-31T03:24:57.390Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:24:57.390Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:25:02.362Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:25:04.469Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1931,"hasContent":true,"text":"You'd basically set up the tank, you'd have your temperature control, you'd have all the filtration "}
2025-01-31T03:25:04.470Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You'd basically set up the tank, you'd have your temperature control, you'd have all the filtration system in there. You would put the lobster into hot water, and it's going to use a pound of water wh...
2025-01-31T03:25:04.470Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1930,"transcriptSample":"You'd basically set up the tank, you'd have your temperature control, you'd have all the filtration "}
2025-01-31T03:25:04.470Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:25:36.021Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3232,"transcriptLength":1930,"summary":"***In this chaotic dialogue, a group of people discuss bizarre hypothetical scenarios, such as keepi"}
2025-01-31T03:25:36.026Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738293936022.txt","size":1930}
2025-01-31T03:25:36.026Z [33mwarn[39m: [ChannelService] Message is too long (3269 chars), splitting into chunks
2025-01-31T03:25:36.542Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***In this chaotic dialogue, a group of people discuss bizarre hypothetical scenarios, such as keeping a lobster in a home tank and a suit that washes your body while you sleep.*** The conversation is filled with humor, confusion, and odd propositions that leave the listeners with more questions than answers.

#### Detailed Breakdown

##### Key Events
- The speaker begins by detailing how to set up a tank for a lobster, including temperature control and filtration systems. 
> "You'd basically set up the tank, you'd have your temperature control, you'd have all the filtration system in there."
- The speaker questions where in the house they would keep the tank due to the noise.
> "Where in the house would I keep that? Because it's so loud."
- The speaker describes a second phase, leading to increased noise, and a mysterious "proprietary blank" that is not all lobster eggs.
> "Okay, now what's happening now? Phase two."
- The speaker then shifts to a new topic: a "smart suit" that washes your body while you sleep, which is a product of a black-owned business.
> "Shower pajamas. A smart suit that will wash your body without any effort while you sleep."
- The speaker ends the dialogue with a discussion about water running out.
> "I'm just saying that the water is running out right now."

##### Character Development
- **Speaker**: The speaker's ***Notable Decisions*** include considering keeping a lobster in a home tank and being interested in a suit that washes you while you sleep. Their **Character Growth** is unclear from this excerpt, as is their *Relationships/Interactions* with others in the dialogue. 

##### World Building
- __New Locations__ are not introduced in this dialogue.
- *New NPCs*: Roy appears to be a *New NPC* introduced towards the end of the dialogue, who is involved in the demonstration of the "smart suit."
> "Okay, Roy, show them how it works."

##### Memorable Moments
- ```"Don't we all want to die in our own homes? Don't you rather die in your own home?"``` This quote stands out due to its dark humor and unexpectedness in the context of the conversation.
- The concept of a "smart suit" that washes your body while you sleep is an **Unexpected Event** and an innovation from the speaker.

##### Consequences & Setup
- **Immediate Consequences**: The immediate consequences of this conversation are unclear, as the dialogue is largely hypothetical.
- *Future Plot Hooks*: Potential future plot hooks could include the actual acquisition of a lobster and tank, or the purchase and use of the "smart suit."

## Technical Notes
- **House Rules Applied**: None mentioned.
- *Mechanical Challenges*: The dialogue presents mechanical challenges in the form of the hypothetical scenarios discussed, such as the feasibility of keeping a lobster in a home tank or the functionality of the "smart suit."

## Next Session
- ***Immediate Goals***: The immediate goals following this conversation could possibly include further exploration of the topics discussed, such as obtaining a lobster or the "smart suit."
- *Known Challenges Ahead*: Known challenges could include the practical difficulties of the scenarios proposed in the dialogue.
- Player Intentions: Unknown from this excerpt.
2025-01-31T03:25:36.547Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:25:36.591Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293714138-0gw7zl10d8y.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:25:36.593Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293714138-0gw7zl10d8y.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:27:54.134Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:27:54.140Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738294074139-0y4lqqrewh7g.pcm","directory":"temp"}
2025-01-31T03:27:54.144Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:27:54.146Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:27:54.146Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T03:27:54.146Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:27:55.156Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:27:55.158Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:27:56.474Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738293894137-1uq6go0hoec.pcm to MP3
2025-01-31T03:27:56.475Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738293894137-1uq6go0hoec.pcm.mp3","exists":true}
2025-01-31T03:27:56.475Z [32minfo[39m: [TranscriptionService] File stats:{"size":11565,"created":"2025-01-31T03:27:56.396Z","modified":"2025-01-31T03:27:56.451Z"}
2025-01-31T03:27:56.475Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:27:56.475Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:27:58.742Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":336,"hasContent":true,"text":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, s"}
2025-01-31T03:27:58.744Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: conflicting answer. You can steal their conversation. Challenges may not end with just one answer, so there are other answers, right? For example, listen carefully to what everyone's saying. If, for e...
2025-01-31T03:27:58.744Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":335,"transcriptSample":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, s"}
2025-01-31T03:27:58.745Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:27:59.464Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:27:59.465Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":335,"transcriptLength":335,"summary":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, s"}
2025-01-31T03:27:59.499Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"95","data":{"guildId":"1315144523336122469","transcript":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, so there are other answers, right? For example, listen carefully to what everyone's saying. If, for example, Marlowe was talking about how the frequencies are different, say you have five times more BPM than the average human is talking"}}
2025-01-31T03:27:59.500Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:27:59.500Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 95
2025-01-31T03:27:59.509Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738294079501.txt","size":335}
2025-01-31T03:27:59.512Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:27:59.705Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: conflicting answer. You can steal their conversation. Challenges may not end with just one answer, so there are other answers, right? For example, listen carefully to what everyone's saying. If, for example, Marlowe was talking about how the frequencies are different, say you have five times more BPM than the average human is talking
2025-01-31T03:27:59.705Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:27:59.707Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293894137-1uq6go0hoec.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:27:59.708Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738293894137-1uq6go0hoec.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:28:01.686Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:28:01.725Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:28:02.248Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:28:03.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 10783 bytes)
2025-01-31T03:28:04.504Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"95","data":{"guildId":"1315144523336122469","transcript":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, so there are other answers, right? For example, listen carefully to what everyone's saying. If, for example, Marlowe was talking about how the frequencies are different, say you have five times more BPM than the average human is talking"}}
2025-01-31T03:28:04.505Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:28:04.506Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":335,"transcriptSample":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, s"}
2025-01-31T03:28:04.506Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:28:05.733Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:28:05.733Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":335,"transcriptLength":335,"summary":"conflicting answer. You can steal their conversation. Challenges may not end with just one answer, s"}
2025-01-31T03:28:05.734Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:28:05.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 25776 bytes)
2025-01-31T03:28:05.931Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:28:05.941Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"95","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738294085734}}
2025-01-31T03:28:07.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 41503 bytes)
2025-01-31T03:28:09.754Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 56557 bytes)
2025-01-31T03:28:11.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 71137 bytes)
2025-01-31T03:28:13.748Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 84262 bytes)
2025-01-31T03:28:15.746Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 97740 bytes)
2025-01-31T03:28:18.188Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 107792 bytes)
2025-01-31T03:28:20.374Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 120732 bytes)
2025-01-31T03:28:22.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 132990 bytes)
2025-01-31T03:28:24.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 147994 bytes)
2025-01-31T03:28:26.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 162713 bytes)
2025-01-31T03:28:30.848Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 173563 bytes)
2025-01-31T03:28:32.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 196 bytes (total: 187262 bytes)
2025-01-31T03:28:35.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 200402 bytes)
2025-01-31T03:28:37.534Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 213689 bytes)
2025-01-31T03:28:39.212Z [32minfo[39m: Memory Usage:
2025-01-31T03:28:39.213Z [32minfo[39m: rss: 144.12 MB
2025-01-31T03:28:39.214Z [32minfo[39m: heapTotal: 30.71 MB
2025-01-31T03:28:39.216Z [32minfo[39m: heapUsed: 29.39 MB
2025-01-31T03:28:39.217Z [32minfo[39m: external: 12.58 MB
2025-01-31T03:28:39.217Z [32minfo[39m: arrayBuffers: 4.65 MB
2025-01-31T03:28:39.810Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 226503 bytes)
2025-01-31T03:28:41.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 237599 bytes)
2025-01-31T03:28:43.972Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 252788 bytes)
2025-01-31T03:28:46.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 266510 bytes)
2025-01-31T03:28:48.109Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 281061 bytes)
2025-01-31T03:28:51.468Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 293522 bytes)
2025-01-31T03:28:55.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 299433 bytes)
2025-01-31T03:28:59.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 306759 bytes)
2025-01-31T03:29:02.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 318703 bytes)
2025-01-31T03:29:04.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 332787 bytes)
2025-01-31T03:29:06.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 347867 bytes)
2025-01-31T03:29:10.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 360459 bytes)
2025-01-31T03:29:12.690Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 374233 bytes)
2025-01-31T03:29:14.691Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 389287 bytes)
2025-01-31T03:29:17.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 399393 bytes)
2025-01-31T03:29:21.412Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 410380 bytes)
2025-01-31T03:29:23.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 421415 bytes)
2025-01-31T03:29:25.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 432292 bytes)
2025-01-31T03:29:28.281Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 441557 bytes)
2025-01-31T03:29:30.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 455644 bytes)
2025-01-31T03:29:32.910Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 468993 bytes)
2025-01-31T03:29:35.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 483573 bytes)
2025-01-31T03:29:37.037Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 499055 bytes)
2025-01-31T03:29:40.171Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 512374 bytes)
2025-01-31T03:29:42.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 524381 bytes)
2025-01-31T03:29:45.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 534549 bytes)
2025-01-31T03:29:47.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 549301 bytes)
2025-01-31T03:29:50.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 561109 bytes)
2025-01-31T03:29:52.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 573211 bytes)
2025-01-31T03:29:55.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 582293 bytes)
2025-01-31T03:29:57.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 597507 bytes)
2025-01-31T03:29:59.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 79 bytes (total: 611626 bytes)
2025-01-31T03:30:02.389Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 623449 bytes)
2025-01-31T03:30:04.875Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 634314 bytes)
2025-01-31T03:30:06.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 647670 bytes)
2025-01-31T03:30:09.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 655877 bytes)
2025-01-31T03:30:11.368Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 667586 bytes)
2025-01-31T03:30:13.369Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 683173 bytes)
2025-01-31T03:30:15.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 695689 bytes)
2025-01-31T03:30:17.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 706985 bytes)
2025-01-31T03:30:19.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 722192 bytes)
2025-01-31T03:30:21.570Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 738096 bytes)
2025-01-31T03:30:23.650Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 751730 bytes)
2025-01-31T03:30:25.646Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 767498 bytes)
2025-01-31T03:30:27.645Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 783254 bytes)
2025-01-31T03:30:30.886Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 797501 bytes)
2025-01-31T03:30:33.187Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 810604 bytes)
2025-01-31T03:30:35.344Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 823972 bytes)
2025-01-31T03:30:37.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 839808 bytes)
2025-01-31T03:30:41.302Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 851608 bytes)
2025-01-31T03:30:44.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 861877 bytes)
2025-01-31T03:30:46.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 875703 bytes)
2025-01-31T03:30:48.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 890478 bytes)
2025-01-31T03:30:50.266Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 906160 bytes)
2025-01-31T03:30:52.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 922119 bytes)
2025-01-31T03:30:54.127Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:30:54.131Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738294254130-swhcss14o1m.pcm","directory":"temp"}
2025-01-31T03:30:54.139Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:30:54.141Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:30:54.141Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:30:54.142Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:30:54.218Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:30:54.221Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:30:54.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 933792 bytes)
2025-01-31T03:30:54.760Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:30:55.150Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:30:55.154Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:30:57.691Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738294074139-0y4lqqrewh7g.pcm to MP3
2025-01-31T03:30:57.693Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738294074139-0y4lqqrewh7g.pcm.mp3","exists":true}
2025-01-31T03:30:57.693Z [32minfo[39m: [TranscriptionService] File stats:{"size":1730301,"created":"2025-01-31T03:30:56.636Z","modified":"2025-01-31T03:30:57.671Z"}
2025-01-31T03:30:57.694Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:30:57.694Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:31:19.519Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":548,"hasContent":true,"text":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small"}
2025-01-31T03:31:19.522Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small soda, that's it! Damn! I'm trying to help you, bro, it's not that good. We've got one more. Thank y...
2025-01-31T03:31:19.522Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":547,"transcriptSample":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small"}
2025-01-31T03:31:19.523Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:31:21.698Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:31:21.699Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":547,"transcriptLength":547,"summary":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small"}
2025-01-31T03:31:21.710Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"96","data":{"guildId":"1315144523336122469","transcript":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small soda, that's it! Damn! I'm trying to help you, bro, it's not that good. We've got one more. Thank you for choosing Lifehack, so give me one moment, please. That is one of the biggest men I've ever seen in my life. Guys, you're gonna kill me! I'm sorry to trip you. It's not your fault. Tap me a watch, buddy! He looks sad! He's about to kick Murray's ass! He does not want to do what he wants to do! He looks right now like he regrets going deaf."}}
2025-01-31T03:31:21.710Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:31:21.710Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 96
2025-01-31T03:31:21.714Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738294281710.txt","size":547}
2025-01-31T03:31:21.715Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:31:22.075Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small soda, that's it! Damn! I'm trying to help you, bro, it's not that good. We've got one more. Thank you for choosing Lifehack, so give me one moment, please. That is one of the biggest men I've ever seen in my life. Guys, you're gonna kill me! I'm sorry to trip you. It's not your fault. Tap me a watch, buddy! He looks sad! He's about to kick Murray's ass! He does not want to do what he wants to do! He looks right now like he regrets going deaf.
2025-01-31T03:31:22.075Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:31:22.093Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738294074139-0y4lqqrewh7g.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:31:22.097Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738294074139-0y4lqqrewh7g.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:31:26.715Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"96","data":{"guildId":"1315144523336122469","transcript":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small soda, that's it! Damn! I'm trying to help you, bro, it's not that good. We've got one more. Thank you for choosing Lifehack, so give me one moment, please. That is one of the biggest men I've ever seen in my life. Guys, you're gonna kill me! I'm sorry to trip you. It's not your fault. Tap me a watch, buddy! He looks sad! He's about to kick Murray's ass! He does not want to do what he wants to do! He looks right now like he regrets going deaf."}}
2025-01-31T03:31:26.716Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:31:26.716Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":547,"transcriptSample":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small"}
2025-01-31T03:31:26.717Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:31:27.672Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:31:27.673Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":547,"transcriptLength":547,"summary":"You're both being carrots! Bros before hoes! Bros before hoes! Number one combo! Great case of small"}
2025-01-31T03:31:27.673Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:31:27.990Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:31:27.996Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"96","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738294287673}}
2025-01-31T03:33:39.208Z [32minfo[39m: Memory Usage:
2025-01-31T03:33:39.213Z [32minfo[39m: rss: 145.66 MB
2025-01-31T03:33:39.216Z [32minfo[39m: heapTotal: 30.71 MB
2025-01-31T03:33:39.216Z [32minfo[39m: heapUsed: 28.85 MB
2025-01-31T03:33:39.218Z [32minfo[39m: external: 10.09 MB
2025-01-31T03:33:39.218Z [32minfo[39m: arrayBuffers: 2.17 MB
2025-01-31T03:33:54.129Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:33:54.136Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738294434133-dhe1eqhp5j.pcm","directory":"temp"}
2025-01-31T03:33:54.142Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:33:54.143Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:33:54.144Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T03:33:54.144Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:33:55.151Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:33:55.156Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:33:55.571Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:33:55.577Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:33:56.460Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738294254130-swhcss14o1m.pcm to MP3
2025-01-31T03:33:56.460Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738294254130-swhcss14o1m.pcm.mp3","exists":true}
2025-01-31T03:33:56.461Z [32minfo[39m: [TranscriptionService] File stats:{"size":4845,"created":"2025-01-31T03:33:56.390Z","modified":"2025-01-31T03:33:56.443Z"}
2025-01-31T03:33:56.461Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:33:56.461Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:33:57.469Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:33:58.028Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 13477 bytes)
2025-01-31T03:34:00.026Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 26774 bytes)
2025-01-31T03:34:02.026Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 190 bytes (total: 41229 bytes)
2025-01-31T03:34:02.242Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T03:34:02.245Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T03:34:02.246Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T03:34:04.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 54674 bytes)
2025-01-31T03:34:04.255Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738294254130-swhcss14o1m.pcm.mp3","exists":true}
2025-01-31T03:34:04.259Z [32minfo[39m: [TranscriptionService] File stats:{"size":4845,"created":"2025-01-31T03:33:56.390Z","modified":"2025-01-31T03:33:56.443Z"}
2025-01-31T03:34:04.259Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:34:04.259Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:34:06.025Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 70606 bytes)
2025-01-31T03:34:06.540Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T03:34:06.541Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T03:34:06.542Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T03:34:08.025Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 85652 bytes)
2025-01-31T03:34:10.028Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 98686 bytes)
2025-01-31T03:34:10.545Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738294254130-swhcss14o1m.pcm.mp3","exists":true}
2025-01-31T03:34:10.547Z [32minfo[39m: [TranscriptionService] File stats:{"size":4845,"created":"2025-01-31T03:33:56.390Z","modified":"2025-01-31T03:33:56.443Z"}
2025-01-31T03:34:10.548Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:34:10.548Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:34:12.207Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 112014 bytes)
2025-01-31T03:34:13.523Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":35,"hasContent":true,"text":"Thank you for listening. Bye-bye. \n"}
2025-01-31T03:34:13.523Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Thank you for listening. Bye-bye....
2025-01-31T03:34:13.524Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":33,"transcriptSample":"Thank you for listening. Bye-bye."}
2025-01-31T03:34:13.524Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:34:14.115Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:14.116Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:34:14.209Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 127051 bytes)
2025-01-31T03:34:16.121Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:34:16.285Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 139969 bytes)
2025-01-31T03:34:16.975Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:16.976Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T03:34:18.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 152959 bytes)
2025-01-31T03:34:20.978Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T03:34:21.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 164987 bytes)
2025-01-31T03:34:22.258Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:22.259Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T03:34:25.009Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 178614 bytes)
2025-01-31T03:34:27.087Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 191973 bytes)
2025-01-31T03:34:28.262Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T03:34:28.565Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:28.565Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":33,"transcriptLength":33,"summary":"Thank you for listening. Bye-bye."}
2025-01-31T03:34:28.569Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"97","data":{"guildId":"1315144523336122469","transcript":"Thank you for listening. Bye-bye."}}
2025-01-31T03:34:28.570Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:34:28.570Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 97
2025-01-31T03:34:28.576Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738294468570.txt","size":33}
2025-01-31T03:34:28.577Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:34:28.791Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Thank you for listening. Bye-bye.
2025-01-31T03:34:28.792Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:34:28.796Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738294254130-swhcss14o1m.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:34:28.797Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738294254130-swhcss14o1m.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:34:29.167Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 204258 bytes)
2025-01-31T03:34:31.187Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 218426 bytes)
2025-01-31T03:34:33.578Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"97","data":{"guildId":"1315144523336122469","transcript":"Thank you for listening. Bye-bye."}}
2025-01-31T03:34:33.579Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:34:33.579Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":33,"transcriptSample":"Thank you for listening. Bye-bye."}
2025-01-31T03:34:33.579Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:34:34.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 230212 bytes)
2025-01-31T03:34:35.079Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:35.079Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:34:36.108Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 243220 bytes)
2025-01-31T03:34:37.084Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:34:37.405Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:37.405Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T03:34:38.106Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 258660 bytes)
2025-01-31T03:34:40.106Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 274291 bytes)
2025-01-31T03:34:41.407Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T03:34:42.549Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:42.550Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T03:34:42.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 288934 bytes)
2025-01-31T03:34:44.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 303656 bytes)
2025-01-31T03:34:46.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 319384 bytes)
2025-01-31T03:34:48.551Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T03:34:48.906Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 335054 bytes)
2025-01-31T03:34:48.908Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:34:48.908Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":33,"transcriptLength":33,"summary":"Thank you for listening. Bye-bye."}
2025-01-31T03:34:48.909Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:34:49.171Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:34:49.175Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"97","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738294488908}}
2025-01-31T03:34:50.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 350808 bytes)
2025-01-31T03:34:52.908Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 366049 bytes)
2025-01-31T03:35:19.651Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T03:35:19.730Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T03:35:19.844Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T03:35:19.893Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738294434133-dhe1eqhp5j.pcm","age":24943.794921875,"size":10341120}
2025-01-31T03:35:19.914Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T03:35:19.920Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T03:35:19.922Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T03:35:20.435Z [32minfo[39m: Bot initialized successfully
2025-01-31T03:35:20.535Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T03:40:19.664Z [32minfo[39m: Memory Usage:
2025-01-31T03:40:19.673Z [32minfo[39m: rss: 118.02 MB
2025-01-31T03:40:19.675Z [32minfo[39m: heapTotal: 27.46 MB
2025-01-31T03:40:19.675Z [32minfo[39m: heapUsed: 26.17 MB
2025-01-31T03:40:19.675Z [32minfo[39m: external: 8.06 MB
2025-01-31T03:40:19.675Z [32minfo[39m: arrayBuffers: 0.15 MB
2025-01-31T03:43:25.726Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T03:43:25.762Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T03:43:25.829Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T03:43:25.835Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T03:43:25.853Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T03:43:25.853Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T03:43:26.479Z [32minfo[39m: Bot initialized successfully
2025-01-31T03:43:26.542Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T03:43:34.776Z [32minfo[39m: Command Name: setkey
2025-01-31T03:43:34.783Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T03:43:35.005Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T03:43:35.008Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334730774502707240","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T03:43:35.010Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T03:43:42.056Z [32minfo[39m: Command Name: record
2025-01-31T03:43:42.059Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T03:43:42.378Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T03:43:42.683Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T03:43:42.686Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T03:43:42.686Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T03:43:42.686Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T03:43:42.687Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:43:42.689Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295022688-jhejm5vkrkb.pcm","directory":"temp"}
2025-01-31T03:43:42.814Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:43:42.815Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:43:42.815Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T03:43:42.816Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:43:42.816Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T03:43:42.816Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T03:43:42.817Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334730805095694396","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T03:43:42.817Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T03:43:42.856Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:43:42.858Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:43:43.885Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:43:50.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 13562 bytes)
2025-01-31T03:43:52.300Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 29452 bytes)
2025-01-31T03:43:54.461Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 43529 bytes)
2025-01-31T03:43:56.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 57212 bytes)
2025-01-31T03:43:59.442Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 69493 bytes)
2025-01-31T03:44:01.442Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 84587 bytes)
2025-01-31T03:44:03.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 99194 bytes)
2025-01-31T03:44:05.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 114779 bytes)
2025-01-31T03:44:07.441Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 129801 bytes)
2025-01-31T03:44:10.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 142512 bytes)
2025-01-31T03:44:12.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 154976 bytes)
2025-01-31T03:44:14.919Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 170870 bytes)
2025-01-31T03:44:16.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 185726 bytes)
2025-01-31T03:44:19.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 199845 bytes)
2025-01-31T03:44:21.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 215669 bytes)
2025-01-31T03:44:23.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 230226 bytes)
2025-01-31T03:44:25.559Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 245699 bytes)
2025-01-31T03:44:28.019Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 259500 bytes)
2025-01-31T03:44:30.022Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 275672 bytes)
2025-01-31T03:44:32.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 290063 bytes)
2025-01-31T03:44:34.115Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 304048 bytes)
2025-01-31T03:44:36.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 320166 bytes)
2025-01-31T03:44:38.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 335535 bytes)
2025-01-31T03:44:40.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 349594 bytes)
2025-01-31T03:44:42.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 363692 bytes)
2025-01-31T03:44:44.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 377520 bytes)
2025-01-31T03:44:46.799Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 391484 bytes)
2025-01-31T03:44:49.999Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 404867 bytes)
2025-01-31T03:44:52.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 418463 bytes)
2025-01-31T03:44:54.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 430980 bytes)
2025-01-31T03:44:56.460Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 446236 bytes)
2025-01-31T03:44:58.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 461782 bytes)
2025-01-31T03:45:00.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 476306 bytes)
2025-01-31T03:45:02.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 492013 bytes)
2025-01-31T03:45:04.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 507494 bytes)
2025-01-31T03:45:06.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 521664 bytes)
2025-01-31T03:45:08.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 536791 bytes)
2025-01-31T03:45:10.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 551632 bytes)
2025-01-31T03:45:12.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 563510 bytes)
2025-01-31T03:45:14.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 576206 bytes)
2025-01-31T03:45:17.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 587016 bytes)
2025-01-31T03:45:19.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 601026 bytes)
2025-01-31T03:45:21.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 615171 bytes)
2025-01-31T03:45:23.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 630999 bytes)
2025-01-31T03:45:25.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 646833 bytes)
2025-01-31T03:45:27.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 662568 bytes)
2025-01-31T03:45:29.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 678235 bytes)
2025-01-31T03:45:31.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 694225 bytes)
2025-01-31T03:45:33.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 710277 bytes)
2025-01-31T03:45:35.421Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 725430 bytes)
2025-01-31T03:45:37.496Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 216 bytes (total: 738029 bytes)
2025-01-31T03:45:39.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 751159 bytes)
2025-01-31T03:45:41.498Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 767185 bytes)
2025-01-31T03:45:43.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 783083 bytes)
2025-01-31T03:45:46.260Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 797113 bytes)
2025-01-31T03:45:48.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 813419 bytes)
2025-01-31T03:45:50.257Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 828527 bytes)
2025-01-31T03:45:52.256Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 843964 bytes)
2025-01-31T03:45:54.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 857189 bytes)
2025-01-31T03:45:56.761Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 873181 bytes)
2025-01-31T03:45:59.455Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 885779 bytes)
2025-01-31T03:46:01.457Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 901595 bytes)
2025-01-31T03:46:03.798Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 912794 bytes)
2025-01-31T03:46:06.018Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 926620 bytes)
2025-01-31T03:46:08.020Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 942056 bytes)
2025-01-31T03:46:10.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 954546 bytes)
2025-01-31T03:46:12.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 970174 bytes)
2025-01-31T03:46:14.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 978553 bytes)
2025-01-31T03:46:16.459Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 991136 bytes)
2025-01-31T03:46:18.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1004487 bytes)
2025-01-31T03:46:20.455Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 1018910 bytes)
2025-01-31T03:46:22.459Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1034499 bytes)
2025-01-31T03:46:24.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1049849 bytes)
2025-01-31T03:46:27.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 192 bytes (total: 1062703 bytes)
2025-01-31T03:46:29.260Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 199 bytes (total: 1076881 bytes)
2025-01-31T03:46:31.263Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1092787 bytes)
2025-01-31T03:46:34.039Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1104904 bytes)
2025-01-31T03:46:37.556Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1115626 bytes)
2025-01-31T03:46:39.797Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1129411 bytes)
2025-01-31T03:46:41.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1144080 bytes)
2025-01-31T03:46:42.816Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:46:42.818Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm","directory":"temp"}
2025-01-31T03:46:42.821Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:46:42.823Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:46:42.824Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:46:42.825Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:46:43.320Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:46:43.322Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:46:43.834Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:46:43.838Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:46:46.334Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295022688-jhejm5vkrkb.pcm to MP3
2025-01-31T03:46:46.335Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295022688-jhejm5vkrkb.pcm.mp3","exists":true}
2025-01-31T03:46:46.336Z [32minfo[39m: [TranscriptionService] File stats:{"size":2022693,"created":"2025-01-31T03:46:45.130Z","modified":"2025-01-31T03:46:46.305Z"}
2025-01-31T03:46:46.338Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:46:46.339Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:46:49.623Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:47:11.163Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2246,"hasContent":true,"text":"Today, we're working as managers at our favorite chicken spot, Raising Hings. Most of our customers "}
2025-01-31T03:47:11.167Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Today, we're working as managers at our favorite chicken spot, Raising Hings. Most of our customers stop you, throw this person out, you lose. And the way you see who we got ready for you to throw out...
2025-01-31T03:47:11.168Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2245,"transcriptSample":"Today, we're working as managers at our favorite chicken spot, Raising Hings. Most of our customers "}
2025-01-31T03:47:11.168Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:47:11.831Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:47:11.831Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:47:13.833Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:47:17.057Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1689,"transcriptLength":2245,"summary":"***In this transcript, the party takes on the role of managers at the chicken spot, Raising Hings. T"}
2025-01-31T03:47:17.072Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738295237060.txt","size":2245}
2025-01-31T03:47:17.074Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:47:17.337Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***In this transcript, the party takes on the role of managers at the chicken spot, Raising Hings. They are tasked with identifying customers they need to throw out, with a twist that involves throwing out specific individuals they know. The party faces challenges as they attempt to handle these situations, leading to chaotic and hilarious moments.***

### Key Events
- The party is informed that they need to identify and throw out specific customers, James and Phoebe, who are known to them.
- James attempts to propose to Phoebe at the chicken spot, but due to a misunderstanding, the party believes they need to throw him out.
- Despite the confusion, the party successfully throws James out, believing they have completed the task.
- Another challenge arises when Alyssa Wain Corley's lost son, Braynton, enters the restaurant looking for his mother, causing chaos as he asks every table if they've seen her.

### Memorable Moments
- > "Is that Alyssa's son, Braynton? And he's lost. Curious, this son of a bitch."
- > "I can't find my mom and I don't know what to do."

### Consequences & Setup
- **Immediate Consequences**: The party successfully completes the task of throwing James out but faces a new challenge with Braynton looking for his mother.
- *Future Plot Hooks*: The chaotic events at Raising Hings could lead to further hilarious misunderstandings and challenges for the party to navigate in the future.

### Next Session
- ***Immediate Goals***: Help Braynton find his mother and potentially resolve the misunderstanding at Raising Hings.
- *Known Challenges Ahead*: Dealing with more customer-related challenges and potential comedic situations at the chicken spot.
2025-01-31T03:47:17.338Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:47:17.384Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295022688-jhejm5vkrkb.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:47:17.385Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295022688-jhejm5vkrkb.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:48:25.728Z [32minfo[39m: Memory Usage:
2025-01-31T03:48:25.735Z [32minfo[39m: rss: 132.21 MB
2025-01-31T03:48:25.736Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T03:48:25.736Z [32minfo[39m: heapUsed: 27.81 MB
2025-01-31T03:48:25.737Z [32minfo[39m: external: 10.11 MB
2025-01-31T03:48:25.738Z [32minfo[39m: arrayBuffers: 2.19 MB
2025-01-31T03:49:42.825Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:49:42.835Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295382834-32vam6amxp5.pcm","directory":"temp"}
2025-01-31T03:49:42.839Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:49:42.840Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:49:42.840Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T03:49:42.841Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:49:43.853Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:49:43.860Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:49:44.957Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:49:44.959Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:49:45.237Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm to MP3
2025-01-31T03:49:45.238Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm.mp3","exists":true}
2025-01-31T03:49:45.239Z [32minfo[39m: [TranscriptionService] File stats:{"size":7965,"created":"2025-01-31T03:49:45.161Z","modified":"2025-01-31T03:49:45.220Z"}
2025-01-31T03:49:45.239Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:49:45.240Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:49:46.876Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 14051 bytes)
2025-01-31T03:49:48.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 27903 bytes)
2025-01-31T03:49:50.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 41187 bytes)
2025-01-31T03:49:51.099Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:49:52.986Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T03:49:52.988Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T03:49:52.990Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T03:49:53.915Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 53794 bytes)
2025-01-31T03:49:54.996Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm.mp3","exists":true}
2025-01-31T03:49:55.001Z [32minfo[39m: [TranscriptionService] File stats:{"size":7965,"created":"2025-01-31T03:49:45.161Z","modified":"2025-01-31T03:49:45.220Z"}
2025-01-31T03:49:55.001Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:49:55.001Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:49:55.993Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 67072 bytes)
2025-01-31T03:49:57.993Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 81243 bytes)
2025-01-31T03:50:00.187Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 95595 bytes)
2025-01-31T03:50:02.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 111020 bytes)
2025-01-31T03:50:02.634Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T03:50:02.636Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T03:50:02.636Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T03:50:04.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 126924 bytes)
2025-01-31T03:50:06.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 142150 bytes)
2025-01-31T03:50:06.646Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm.mp3","exists":true}
2025-01-31T03:50:06.648Z [32minfo[39m: [TranscriptionService] File stats:{"size":7965,"created":"2025-01-31T03:49:45.161Z","modified":"2025-01-31T03:49:45.220Z"}
2025-01-31T03:50:06.648Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:50:06.649Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:50:08.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 158043 bytes)
2025-01-31T03:50:10.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 174036 bytes)
2025-01-31T03:50:12.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 188584 bytes)
2025-01-31T03:50:12.259Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T03:50:12.263Z [31merror[39m: [TranscriptionService] Transcription failed after all retries:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:157:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)"}
2025-01-31T03:50:12.264Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:157:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:78)","guildId":"1315144523336122469","fileSize":96000}
2025-01-31T03:50:12.264Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:50:12.467Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Failed to process recording. Please try again or contact support if the issue persists.
2025-01-31T03:50:12.468Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:50:12.470Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:50:12.470Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295202817-4cqdnfemcq7.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:50:14.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 204350 bytes)
2025-01-31T03:50:16.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 218867 bytes)
2025-01-31T03:50:18.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 234679 bytes)
2025-01-31T03:50:20.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 249594 bytes)
2025-01-31T03:50:22.293Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 264861 bytes)
2025-01-31T03:50:24.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 278239 bytes)
2025-01-31T03:50:26.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 293484 bytes)
2025-01-31T03:50:31.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 303738 bytes)
2025-01-31T03:50:33.440Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 319520 bytes)
2025-01-31T03:50:36.915Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 333932 bytes)
2025-01-31T03:50:39.278Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 346807 bytes)
2025-01-31T03:50:41.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 363000 bytes)
2025-01-31T03:50:43.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 378201 bytes)
2025-01-31T03:50:45.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 394324 bytes)
2025-01-31T03:50:47.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 408442 bytes)
2025-01-31T03:50:49.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 419921 bytes)
2025-01-31T03:50:52.037Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 434475 bytes)
2025-01-31T03:50:54.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 448867 bytes)
2025-01-31T03:50:56.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 464729 bytes)
2025-01-31T03:50:58.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 478725 bytes)
2025-01-31T03:51:00.112Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 493557 bytes)
2025-01-31T03:51:02.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 509555 bytes)
2025-01-31T03:51:04.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 525056 bytes)
2025-01-31T03:51:06.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 541070 bytes)
2025-01-31T03:51:08.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 557173 bytes)
2025-01-31T03:51:10.114Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 572866 bytes)
2025-01-31T03:51:12.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 585795 bytes)
2025-01-31T03:51:14.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 601810 bytes)
2025-01-31T03:51:16.323Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 616673 bytes)
2025-01-31T03:51:18.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 630355 bytes)
2025-01-31T03:51:20.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 646304 bytes)
2025-01-31T03:51:22.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 662184 bytes)
2025-01-31T03:51:24.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 677758 bytes)
2025-01-31T03:51:26.875Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 692417 bytes)
2025-01-31T03:51:28.876Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 708315 bytes)
2025-01-31T03:51:30.876Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 723782 bytes)
2025-01-31T03:51:32.877Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 739738 bytes)
2025-01-31T03:51:34.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 754278 bytes)
2025-01-31T03:51:37.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 768343 bytes)
2025-01-31T03:51:39.098Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 783990 bytes)
2025-01-31T03:51:41.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 798171 bytes)
2025-01-31T03:51:45.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 810918 bytes)
2025-01-31T03:51:47.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 825330 bytes)
2025-01-31T03:51:49.735Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 840579 bytes)
2025-01-31T03:51:51.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 854548 bytes)
2025-01-31T03:51:53.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 870296 bytes)
2025-01-31T03:51:55.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 92 bytes (total: 885817 bytes)
2025-01-31T03:51:57.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 898521 bytes)
2025-01-31T03:51:59.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 912987 bytes)
2025-01-31T03:52:01.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 928691 bytes)
2025-01-31T03:52:04.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 941708 bytes)
2025-01-31T03:52:06.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 957730 bytes)
2025-01-31T03:52:08.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 973150 bytes)
2025-01-31T03:52:10.576Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 989226 bytes)
2025-01-31T03:52:12.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 47 bytes (total: 1003514 bytes)
2025-01-31T03:52:14.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1019119 bytes)
2025-01-31T03:52:16.659Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 1035092 bytes)
2025-01-31T03:52:18.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1051116 bytes)
2025-01-31T03:52:20.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1064974 bytes)
2025-01-31T03:52:22.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1080195 bytes)
2025-01-31T03:52:24.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 1095423 bytes)
2025-01-31T03:52:26.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 1110104 bytes)
2025-01-31T03:52:28.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1125985 bytes)
2025-01-31T03:52:30.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1142079 bytes)
2025-01-31T03:52:32.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 1156547 bytes)
2025-01-31T03:52:34.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1170918 bytes)
2025-01-31T03:52:36.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1186641 bytes)
2025-01-31T03:52:38.741Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 80 bytes (total: 1200561 bytes)
2025-01-31T03:52:40.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1211382 bytes)
2025-01-31T03:52:42.815Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:52:42.820Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295562817-iqyjagbbg1i.pcm","directory":"temp"}
2025-01-31T03:52:42.822Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:52:42.823Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:52:42.823Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:52:42.824Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:52:42.891Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1224626 bytes)
2025-01-31T03:52:43.830Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:52:43.834Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:52:46.421Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295382834-32vam6amxp5.pcm to MP3
2025-01-31T03:52:46.423Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295382834-32vam6amxp5.pcm.mp3","exists":true}
2025-01-31T03:52:46.423Z [32minfo[39m: [TranscriptionService] File stats:{"size":2134149,"created":"2025-01-31T03:52:45.044Z","modified":"2025-01-31T03:52:46.389Z"}
2025-01-31T03:52:46.423Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:52:46.423Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:53:02.195Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:53:02.200Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:53:02.305Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:53:04.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 15192 bytes)
2025-01-31T03:53:06.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 30890 bytes)
2025-01-31T03:53:08.358Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 46911 bytes)
2025-01-31T03:53:10.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 62503 bytes)
2025-01-31T03:53:12.519Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2379,"hasContent":true,"text":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. "}
2025-01-31T03:53:12.520Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. Murph, shuffle around. This is racing cane, not racing your baby, okay? No, no, no, no, no, no. Drag...
2025-01-31T03:53:12.520Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2378,"transcriptSample":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. "}
2025-01-31T03:53:12.520Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:53:12.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 96 bytes (total: 74390 bytes)
2025-01-31T03:53:13.198Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:53:13.199Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2378,"transcriptLength":2378,"summary":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. "}
2025-01-31T03:53:13.238Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"98","data":{"guildId":"1315144523336122469","transcript":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. Murph, shuffle around. This is racing cane, not racing your baby, okay? No, no, no, no, no, no. Drag her feet. No, come on. No, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. Fine, it's not a big deal, it's not a big deal. Let's go somewhere. Okay, I'm just saying. Bro, just get in and get the f*** out. Alright, come on, come on, come on. No, we're doing one thing at a time. Nice. The whole place is watching us. This guy's gonna kill him. This guy's gonna actually kill him. I've made a full 180. I'll be the one to look for the baby. Murph, you better run after that, buddy. Merklin, deliver a win. So he's first up on the loser board. Today we're at Bass Blossom Bowl playing one of our favorite games, Off the Hook. And here to help us is our good friend, comedian and actor, Adam Rick. While your teammate is on the first floor of the mall distracting a shopper, he'll be on the second floor with his big, ridiculous hook trying to lower it and snag a shopper's bag. If you can't reel in a stranger's belongings, you lose! I thought you were gonna say, let me. We're back. We ride again. This is the third time we're playing this stupid game. Q, I'll tell you right now. Q and I are expert teammates at this game. Yeah. We can't be beat. Sure. Famous last words. No, you know what my dream is? To be able to skate around the bowl on the other side of the bowl when they close overnight like that. Career opportunities. Yes. I'm sorry, are you talking about the Jennifer Connelly when she rides the 25 cent toy? Yes. But this feels like that. Like they're letting us do what we want. I want to keep bringing it back to Jennifer Connelly. They used to have toll booths at the Brooklyn Battery Total. Yep. And I used to work in the toll booths overnight. I remember this. She lived in the area. She would drive through. And every time, I would like fall in love with her. And then one time, Bettany came through with her. And that's when I realized she was married. I've never forgiven Paul Bettany. I've never forgiven Paul Bettany as in giving me the name of your memoir. I'm moving into this session, Q. There you go. Hey, could you help me out? Take a picture of me? I'm trying to get it."}}
2025-01-31T03:53:13.239Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:53:13.239Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 98
2025-01-31T03:53:13.247Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738295593239.txt","size":2378}
2025-01-31T03:53:13.253Z [33mwarn[39m: [ChannelService] Message is too long (2518 chars), splitting into chunks
2025-01-31T03:53:14.090Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. Murph, shuffle around. This is racing cane, not racing your baby, okay? No, no, no, no, no, no. Drag her feet. No, come on. No, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. Fine, it's not a big deal, it's not a big deal. Let's go somewhere. Okay, I'm just saying. Bro, just get in and get the f*** out. Alright, come on, come on, come on. No, we're doing one thing at a time. Nice. The whole place is watching us. This guy's gonna kill him. This guy's gonna actually kill him. I've made a full 180. I'll be the one to look for the baby. Murph, you better run after that, buddy. Merklin, deliver a win. So he's first up on the loser board. Today we're at Bass Blossom Bowl playing one of our favorite games, Off the Hook. And here to help us is our good friend, comedian and actor, Adam Rick. While your teammate is on the first floor of the mall distracting a shopper, he'll be on the second floor with his big, ridiculous hook trying to lower it and snag a shopper's bag. If you can't reel in a stranger's belongings, you lose! I thought you were gonna say, let me. We're back. We ride again. This is the third time we're playing this stupid game. Q, I'll tell you right now. Q and I are expert teammates at this game. Yeah. We can't be beat. Sure. Famous last words. No, you know what my dream is? To be able to skate around the bowl on the other side of the bowl when they close overnight like that. Career opportunities. Yes. I'm sorry, are you talking about the Jennifer Connelly when she rides the 25 cent toy? Yes. But this feels like that. Like they're letting us do what we want. I want to keep bringing it back to Jennifer Connelly. They used to have toll booths at the Brooklyn Battery Total. Yep. And I used to work in the toll booths overnight. I remember this. She lived in the area. She would drive through. And every time, I would like fall in love with her. And then one time, Bettany came through with her. And that's when I realized she was married. I've never forgiven Paul Bettany. I've never forgiven Paul Bettany as in giving me the name of your memoir. I'm moving into this session, Q. There you go. Hey, could you help me out? Take a picture of me? I'm trying to get it.
2025-01-31T03:53:14.091Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:53:14.104Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295382834-32vam6amxp5.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:53:14.107Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295382834-32vam6amxp5.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:53:14.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 84755 bytes)
2025-01-31T03:53:17.133Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 97356 bytes)
2025-01-31T03:53:18.227Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"98","data":{"guildId":"1315144523336122469","transcript":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. Murph, shuffle around. This is racing cane, not racing your baby, okay? No, no, no, no, no, no. Drag her feet. No, come on. No, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. No, no, no, no, no, no, no. Fine, it's not a big deal, it's not a big deal. Let's go somewhere. Okay, I'm just saying. Bro, just get in and get the f*** out. Alright, come on, come on, come on. No, we're doing one thing at a time. Nice. The whole place is watching us. This guy's gonna kill him. This guy's gonna actually kill him. I've made a full 180. I'll be the one to look for the baby. Murph, you better run after that, buddy. Merklin, deliver a win. So he's first up on the loser board. Today we're at Bass Blossom Bowl playing one of our favorite games, Off the Hook. And here to help us is our good friend, comedian and actor, Adam Rick. While your teammate is on the first floor of the mall distracting a shopper, he'll be on the second floor with his big, ridiculous hook trying to lower it and snag a shopper's bag. If you can't reel in a stranger's belongings, you lose! I thought you were gonna say, let me. We're back. We ride again. This is the third time we're playing this stupid game. Q, I'll tell you right now. Q and I are expert teammates at this game. Yeah. We can't be beat. Sure. Famous last words. No, you know what my dream is? To be able to skate around the bowl on the other side of the bowl when they close overnight like that. Career opportunities. Yes. I'm sorry, are you talking about the Jennifer Connelly when she rides the 25 cent toy? Yes. But this feels like that. Like they're letting us do what we want. I want to keep bringing it back to Jennifer Connelly. They used to have toll booths at the Brooklyn Battery Total. Yep. And I used to work in the toll booths overnight. I remember this. She lived in the area. She would drive through. And every time, I would like fall in love with her. And then one time, Bettany came through with her. And that's when I realized she was married. I've never forgiven Paul Bettany. I've never forgiven Paul Bettany as in giving me the name of your memoir. I'm moving into this session, Q. There you go. Hey, could you help me out? Take a picture of me? I'm trying to get it."}}
2025-01-31T03:53:18.227Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:53:18.228Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2378,"transcriptSample":"If you are not having a speech, please step aside. Murphy Borgman said, Ma'am, please restore half. "}
2025-01-31T03:53:18.228Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:53:19.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 111842 bytes)
2025-01-31T03:53:21.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 127611 bytes)
2025-01-31T03:53:23.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 143636 bytes)
2025-01-31T03:53:25.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 159210 bytes)
2025-01-31T03:53:25.717Z [32minfo[39m: Memory Usage:
2025-01-31T03:53:25.717Z [32minfo[39m: rss: 135.88 MB
2025-01-31T03:53:25.718Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T03:53:25.718Z [32minfo[39m: heapUsed: 28.63 MB
2025-01-31T03:53:25.718Z [32minfo[39m: external: 10.47 MB
2025-01-31T03:53:25.718Z [32minfo[39m: arrayBuffers: 2.55 MB
2025-01-31T03:53:27.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 175085 bytes)
2025-01-31T03:53:29.848Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 187196 bytes)
2025-01-31T03:53:31.848Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 202641 bytes)
2025-01-31T03:53:33.849Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 218656 bytes)
2025-01-31T03:53:35.849Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 232643 bytes)
2025-01-31T03:53:37.847Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 248251 bytes)
2025-01-31T03:53:39.849Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 261858 bytes)
2025-01-31T03:53:41.985Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 276002 bytes)
2025-01-31T03:53:43.929Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 291832 bytes)
2025-01-31T03:53:46.015Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 305789 bytes)
2025-01-31T03:53:48.009Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 321346 bytes)
2025-01-31T03:53:50.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 334765 bytes)
2025-01-31T03:53:52.993Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 350962 bytes)
2025-01-31T03:53:55.001Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 366311 bytes)
2025-01-31T03:53:57.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 378958 bytes)
2025-01-31T03:53:58.975Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3561,"transcriptLength":2378,"summary":"***The transcript records a high-energy and chaotic event, possibly a game or contest involving mult"}
2025-01-31T03:53:58.976Z [33mwarn[39m: [ChannelService] Message is too long (3626 chars), splitting into chunks
2025-01-31T03:53:59.389Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:53:59.416Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"98","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738295638975}}
2025-01-31T03:53:59.676Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 391035 bytes)
2025-01-31T03:54:01.769Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 96 bytes (total: 403942 bytes)
2025-01-31T03:54:03.754Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 416532 bytes)
2025-01-31T03:54:05.758Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 431677 bytes)
2025-01-31T03:54:07.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 447725 bytes)
2025-01-31T03:54:10.656Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 460813 bytes)
2025-01-31T03:54:12.654Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 474905 bytes)
2025-01-31T03:54:14.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 486584 bytes)
2025-01-31T03:54:16.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 502580 bytes)
2025-01-31T03:54:18.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 517353 bytes)
2025-01-31T03:54:21.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 529797 bytes)
2025-01-31T03:54:23.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 543384 bytes)
2025-01-31T03:54:25.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 559197 bytes)
2025-01-31T03:54:28.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 570459 bytes)
2025-01-31T03:54:30.236Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 584504 bytes)
2025-01-31T03:54:32.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 600583 bytes)
2025-01-31T03:54:35.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 611577 bytes)
2025-01-31T03:54:38.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 624135 bytes)
2025-01-31T03:54:40.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 639851 bytes)
2025-01-31T03:54:42.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 655752 bytes)
2025-01-31T03:54:44.257Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 669733 bytes)
2025-01-31T03:54:46.257Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 685818 bytes)
2025-01-31T03:54:48.258Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 701792 bytes)
2025-01-31T03:54:50.938Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 714188 bytes)
2025-01-31T03:54:53.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 728898 bytes)
2025-01-31T03:54:55.789Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 744641 bytes)
2025-01-31T03:54:57.717Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 760328 bytes)
2025-01-31T03:55:02.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 772180 bytes)
2025-01-31T03:55:04.117Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 787691 bytes)
2025-01-31T03:55:09.058Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 66 bytes (total: 793928 bytes)
2025-01-31T03:55:11.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 806224 bytes)
2025-01-31T03:55:13.177Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 819099 bytes)
2025-01-31T03:55:15.180Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 829662 bytes)
2025-01-31T03:55:17.859Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 836690 bytes)
2025-01-31T03:55:19.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 851441 bytes)
2025-01-31T03:55:22.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 863944 bytes)
2025-01-31T03:55:26.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 874634 bytes)
2025-01-31T03:55:29.524Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 888270 bytes)
2025-01-31T03:55:31.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 904389 bytes)
2025-01-31T03:55:34.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 916689 bytes)
2025-01-31T03:55:36.761Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 928481 bytes)
2025-01-31T03:55:40.237Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 940256 bytes)
2025-01-31T03:55:42.236Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 955591 bytes)
2025-01-31T03:55:42.838Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:55:42.840Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295742838-5x6wjj09t8n.pcm","directory":"temp"}
2025-01-31T03:55:42.842Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:55:42.844Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:55:42.844Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:55:42.845Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:55:43.847Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:55:43.852Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:55:46.174Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295562817-iqyjagbbg1i.pcm to MP3
2025-01-31T03:55:46.175Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295562817-iqyjagbbg1i.pcm.mp3","exists":true}
2025-01-31T03:55:46.175Z [32minfo[39m: [TranscriptionService] File stats:{"size":1752261,"created":"2025-01-31T03:55:45.110Z","modified":"2025-01-31T03:55:46.151Z"}
2025-01-31T03:55:46.175Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:55:46.176Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:55:47.700Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:55:47.703Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:55:49.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 15504 bytes)
2025-01-31T03:55:51.513Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:55:51.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 29385 bytes)
2025-01-31T03:55:53.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 44095 bytes)
2025-01-31T03:55:55.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 60325 bytes)
2025-01-31T03:55:57.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 76276 bytes)
2025-01-31T03:55:59.698Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 89003 bytes)
2025-01-31T03:56:01.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 103986 bytes)
2025-01-31T03:56:03.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 120060 bytes)
2025-01-31T03:56:06.137Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 133935 bytes)
2025-01-31T03:56:09.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 147019 bytes)
2025-01-31T03:56:11.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 162021 bytes)
2025-01-31T03:56:12.317Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":354,"hasContent":true,"text":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wol"}
2025-01-31T03:56:12.319Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wolver Users6 Wolves Users7 Wolves Users8 Wolves Users9 Wolves Users10 Wolves Users11 Wolves Users12 Wo...
2025-01-31T03:56:12.320Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":353,"transcriptSample":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wol"}
2025-01-31T03:56:12.320Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:56:13.082Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:56:13.082Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":353,"transcriptLength":353,"summary":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wol"}
2025-01-31T03:56:13.089Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"99","data":{"guildId":"1315144523336122469","transcript":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wolver Users6 Wolves Users7 Wolves Users8 Wolves Users9 Wolves Users10 Wolves Users11 Wolves Users12 Wolves User13 Wolves Users18 Wolves Users19 Wolves Users20 Wolves Users21 Wolves Users23 Wolves Users24 Wolves Users24 Wolves Users24 Wolves Users24 Wolves"}}
2025-01-31T03:56:13.089Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T03:56:13.089Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 99
2025-01-31T03:56:13.094Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738295773089.txt","size":353}
2025-01-31T03:56:13.094Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:56:13.340Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wolver Users6 Wolves Users7 Wolves Users8 Wolves Users9 Wolves Users10 Wolves Users11 Wolves Users12 Wolves User13 Wolves Users18 Wolves Users19 Wolves Users20 Wolves Users21 Wolves Users23 Wolves Users24 Wolves Users24 Wolves Users24 Wolves Users24 Wolves
2025-01-31T03:56:13.340Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:56:13.350Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295562817-iqyjagbbg1i.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:56:13.352Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295562817-iqyjagbbg1i.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:56:13.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 177206 bytes)
2025-01-31T03:56:15.736Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 193336 bytes)
2025-01-31T03:56:18.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 206142 bytes)
2025-01-31T03:56:18.105Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"99","data":{"guildId":"1315144523336122469","transcript":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wolver Users6 Wolves Users7 Wolves Users8 Wolves Users9 Wolves Users10 Wolves Users11 Wolves Users12 Wolves User13 Wolves Users18 Wolves Users19 Wolves Users20 Wolves Users21 Wolves Users23 Wolves Users24 Wolves Users24 Wolves Users24 Wolves Users24 Wolves"}}
2025-01-31T03:56:18.106Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T03:56:18.107Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":353,"transcriptSample":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wol"}
2025-01-31T03:56:18.107Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:56:18.951Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T03:56:18.952Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":353,"transcriptLength":353,"summary":"Years later, Back to никак and the switch. Users2 andirdiصل로 Users3  Wolves Users4 Wolves Users5 Wol"}
2025-01-31T03:56:18.953Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T03:56:18.955Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"99","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738295778952}}
2025-01-31T03:56:20.317Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 219213 bytes)
2025-01-31T03:56:22.315Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 234647 bytes)
2025-01-31T03:56:25.356Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 246198 bytes)
2025-01-31T03:56:29.938Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 253325 bytes)
2025-01-31T03:56:31.936Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 269469 bytes)
2025-01-31T03:56:35.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 281943 bytes)
2025-01-31T03:56:37.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 293929 bytes)
2025-01-31T03:56:39.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 308948 bytes)
2025-01-31T03:56:41.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 322454 bytes)
2025-01-31T03:56:44.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 333916 bytes)
2025-01-31T03:56:46.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 346945 bytes)
2025-01-31T03:56:48.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 359979 bytes)
2025-01-31T03:56:50.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 373333 bytes)
2025-01-31T03:56:52.615Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 388213 bytes)
2025-01-31T03:56:54.617Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 403946 bytes)
2025-01-31T03:56:56.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 418685 bytes)
2025-01-31T03:56:58.776Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 429555 bytes)
2025-01-31T03:57:00.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 444012 bytes)
2025-01-31T03:57:02.778Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 459965 bytes)
2025-01-31T03:57:04.777Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 475881 bytes)
2025-01-31T03:57:07.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 487488 bytes)
2025-01-31T03:57:09.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 503304 bytes)
2025-01-31T03:57:11.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 517479 bytes)
2025-01-31T03:57:13.158Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 531209 bytes)
2025-01-31T03:57:15.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 545798 bytes)
2025-01-31T03:57:17.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 559974 bytes)
2025-01-31T03:57:19.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 575883 bytes)
2025-01-31T03:57:21.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 589650 bytes)
2025-01-31T03:57:23.160Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 604900 bytes)
2025-01-31T03:57:25.337Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 618375 bytes)
2025-01-31T03:57:27.335Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 631281 bytes)
2025-01-31T03:57:31.837Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 644826 bytes)
2025-01-31T03:57:33.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 660610 bytes)
2025-01-31T03:57:35.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 676573 bytes)
2025-01-31T03:57:37.836Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 692133 bytes)
2025-01-31T03:57:39.957Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 104 bytes (total: 703955 bytes)
2025-01-31T03:57:42.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 715977 bytes)
2025-01-31T03:57:44.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 731212 bytes)
2025-01-31T03:57:47.915Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 745054 bytes)
2025-01-31T03:57:51.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 758825 bytes)
2025-01-31T03:57:54.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 772498 bytes)
2025-01-31T03:57:57.895Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 784927 bytes)
2025-01-31T03:57:59.976Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 798462 bytes)
2025-01-31T03:58:02.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 812500 bytes)
2025-01-31T03:58:04.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 824212 bytes)
2025-01-31T03:58:07.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 836201 bytes)
2025-01-31T03:58:09.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 850791 bytes)
2025-01-31T03:58:11.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 866868 bytes)
2025-01-31T03:58:13.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 879479 bytes)
2025-01-31T03:58:15.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 894508 bytes)
2025-01-31T03:58:18.455Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 906871 bytes)
2025-01-31T03:58:20.458Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 921007 bytes)
2025-01-31T03:58:22.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 934309 bytes)
2025-01-31T03:58:25.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 947180 bytes)
2025-01-31T03:58:25.752Z [32minfo[39m: Memory Usage:
2025-01-31T03:58:25.758Z [32minfo[39m: rss: 138.81 MB
2025-01-31T03:58:25.759Z [32minfo[39m: heapTotal: 30.96 MB
2025-01-31T03:58:25.759Z [32minfo[39m: heapUsed: 29.08 MB
2025-01-31T03:58:25.759Z [32minfo[39m: external: 10.37 MB
2025-01-31T03:58:25.759Z [32minfo[39m: arrayBuffers: 2.44 MB
2025-01-31T03:58:27.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 960642 bytes)
2025-01-31T03:58:29.616Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 976540 bytes)
2025-01-31T03:58:31.618Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 990275 bytes)
2025-01-31T03:58:34.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1002545 bytes)
2025-01-31T03:58:36.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1015442 bytes)
2025-01-31T03:58:38.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1029164 bytes)
2025-01-31T03:58:40.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1041976 bytes)
2025-01-31T03:58:42.477Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1057490 bytes)
2025-01-31T03:58:42.840Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T03:58:42.845Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738295922842-guuu3ecxxw7.pcm","directory":"temp"}
2025-01-31T03:58:42.852Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T03:58:42.854Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T03:58:42.855Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T03:58:42.856Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T03:58:43.862Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T03:58:43.875Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T03:58:44.520Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T03:58:44.523Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T03:58:46.337Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295742838-5x6wjj09t8n.pcm to MP3
2025-01-31T03:58:46.338Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295742838-5x6wjj09t8n.pcm.mp3","exists":true}
2025-01-31T03:58:46.338Z [32minfo[39m: [TranscriptionService] File stats:{"size":1907205,"created":"2025-01-31T03:58:45.142Z","modified":"2025-01-31T03:58:46.315Z"}
2025-01-31T03:58:46.339Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T03:58:46.339Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T03:58:46.606Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 14218 bytes)
2025-01-31T03:58:48.596Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 27267 bytes)
2025-01-31T03:58:49.318Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T03:58:51.535Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 38035 bytes)
2025-01-31T03:58:54.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 48091 bytes)
2025-01-31T03:58:56.404Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1963,"hasContent":true,"text":"\"- I got a problem, Ian. I'm not going to get anyone straight down. I can't. I'm too slow. I don't l"}
2025-01-31T03:58:56.405Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: "- I got a problem, Ian. I'm not going to get anyone straight down. I can't. I'm too slow. I don't like the height, so I'm going to go down. You chose the wrong partner, right? Oh, man. Do you want to...
2025-01-31T03:58:56.405Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1962,"transcriptSample":"\"- I got a problem, Ian. I'm not going to get anyone straight down. I can't. I'm too slow. I don't l"}
2025-01-31T03:58:56.406Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T03:58:56.495Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 61804 bytes)
2025-01-31T03:58:57.399Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T03:58:57.400Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T03:58:58.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 76791 bytes)
2025-01-31T03:58:59.401Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T03:59:01.277Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 89618 bytes)
2025-01-31T03:59:02.443Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1546,"transcriptLength":1962,"summary":"***The transcript captures a comedic and chaotic scene where the group is struggling with a task inv"}
2025-01-31T03:59:02.450Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738295942444.txt","size":1962}
2025-01-31T03:59:02.451Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T03:59:02.681Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***The transcript captures a comedic and chaotic scene where the group is struggling with a task involving heights. Despite the challenges, there is humor and camaraderie as they try to navigate the situation.***

### Memorable Moments
- **```"I can't see a thing. Just go straight down with it. Go, Sally, go!"```**
- **```"I can't get out! I'm trying, bro!"```**
- **```"This is not a failure of Adam Brown. This is a volcano of failure."```**
- **```"I can't do it! I can't do it!"```**
- **```"Tell me when you're going."```**
- **```"You look like you're sussing your pants."```**
- **```"Be aggressive. Be aggressive."```**

### Key Events
- The group is struggling with a task involving heights, with one member, Sal, having difficulty executing the task.
- There are various humorous and supportive comments exchanged among the group members as they try to help Sal.
- Despite the challenges, there is a sense of camaraderie and lightheartedness among the group.

### Memorable Moments
- Adam is praised and supported by the group, even though the task is challenging.
- The group members try to lighten the mood with humor and encouragement.
- Sal struggles with the task but receives support and understanding from the group.

### Consequences & Setup
- The group's teamwork and support for each other are evident in this situation.
- The humorous and light-hearted interactions add to the camaraderie within the group.
- Despite the challenges faced, the group maintains a positive attitude and tries to make the best of the situation.
2025-01-31T03:59:02.682Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T03:59:02.688Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295742838-5x6wjj09t8n.pcm","directory":"/usr/src/app/temp"}
2025-01-31T03:59:02.689Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295742838-5x6wjj09t8n.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T03:59:03.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 104313 bytes)
2025-01-31T03:59:05.276Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 120130 bytes)
2025-01-31T03:59:07.277Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 135741 bytes)
2025-01-31T03:59:10.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 149515 bytes)
2025-01-31T03:59:13.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 160828 bytes)
2025-01-31T03:59:16.438Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 171972 bytes)
2025-01-31T03:59:18.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 187895 bytes)
2025-01-31T03:59:20.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 199355 bytes)
2025-01-31T03:59:22.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 215583 bytes)
2025-01-31T03:59:24.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 231053 bytes)
2025-01-31T03:59:26.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 245364 bytes)
2025-01-31T03:59:28.677Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 259687 bytes)
2025-01-31T03:59:30.678Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 275661 bytes)
2025-01-31T03:59:32.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 288850 bytes)
2025-01-31T03:59:34.916Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 305016 bytes)
2025-01-31T03:59:36.917Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 321129 bytes)
2025-01-31T03:59:38.918Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 336349 bytes)
2025-01-31T03:59:40.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 350330 bytes)
2025-01-31T03:59:42.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 366578 bytes)
2025-01-31T03:59:44.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 67 bytes (total: 381714 bytes)
2025-01-31T03:59:46.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 394738 bytes)
2025-01-31T03:59:49.394Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 408732 bytes)
2025-01-31T03:59:51.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 424958 bytes)
2025-01-31T03:59:53.396Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 440600 bytes)
2025-01-31T03:59:55.398Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 456390 bytes)
2025-01-31T03:59:57.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 470731 bytes)
2025-01-31T03:59:59.847Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 481235 bytes)
2025-01-31T04:00:01.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 497029 bytes)
2025-01-31T04:00:03.816Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 510762 bytes)
2025-01-31T04:00:05.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 526678 bytes)
2025-01-31T04:00:07.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 541943 bytes)
2025-01-31T04:00:10.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 555813 bytes)
2025-01-31T04:00:12.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 571719 bytes)
2025-01-31T04:00:14.378Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 583608 bytes)
2025-01-31T04:00:18.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 593818 bytes)
2025-01-31T04:00:20.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 609763 bytes)
2025-01-31T04:00:22.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 61 bytes (total: 623631 bytes)
2025-01-31T04:00:24.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 638556 bytes)
2025-01-31T04:00:26.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 650113 bytes)
2025-01-31T04:00:28.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 664163 bytes)
2025-01-31T04:00:30.775Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 678647 bytes)
2025-01-31T04:00:32.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 692900 bytes)
2025-01-31T04:00:34.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 707078 bytes)
2025-01-31T04:00:37.035Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 721655 bytes)
2025-01-31T04:00:39.036Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 737554 bytes)
2025-01-31T04:00:41.038Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 753330 bytes)
2025-01-31T04:00:47.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 767362 bytes)
2025-01-31T04:00:49.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 783355 bytes)
2025-01-31T04:00:51.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 798944 bytes)
2025-01-31T04:00:54.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 77 bytes (total: 812587 bytes)
2025-01-31T04:00:56.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 826442 bytes)
2025-01-31T04:00:58.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 842514 bytes)
2025-01-31T04:01:00.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 857383 bytes)
2025-01-31T04:01:02.298Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 867369 bytes)
2025-01-31T04:01:04.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 880276 bytes)
2025-01-31T04:01:06.376Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 893981 bytes)
2025-01-31T04:01:08.468Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 910130 bytes)
2025-01-31T04:01:10.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 924004 bytes)
2025-01-31T04:01:12.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 937929 bytes)
2025-01-31T04:01:14.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 949727 bytes)
2025-01-31T04:01:19.575Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 964028 bytes)
2025-01-31T04:01:21.574Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 978610 bytes)
2025-01-31T04:01:23.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 993140 bytes)
2025-01-31T04:01:25.572Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1006850 bytes)
2025-01-31T04:01:27.657Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1019986 bytes)
2025-01-31T04:01:29.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1034499 bytes)
2025-01-31T04:01:32.956Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1048266 bytes)
2025-01-31T04:01:34.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1060767 bytes)
2025-01-31T04:01:38.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1069537 bytes)
2025-01-31T04:01:42.817Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1080376 bytes)
2025-01-31T04:01:42.841Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:01:42.843Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738296102842-t1da67cjn2m.pcm","directory":"temp"}
2025-01-31T04:01:42.846Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:01:42.849Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:01:42.850Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T04:01:42.851Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:01:43.856Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T04:01:43.858Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T04:01:44.238Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T04:01:44.239Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T04:01:45.479Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T04:01:46.184Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738295922842-guuu3ecxxw7.pcm to MP3
2025-01-31T04:01:46.185Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738295922842-guuu3ecxxw7.pcm.mp3","exists":true}
2025-01-31T04:01:46.185Z [32minfo[39m: [TranscriptionService] File stats:{"size":1916493,"created":"2025-01-31T04:01:45.057Z","modified":"2025-01-31T04:01:46.167Z"}
2025-01-31T04:01:46.185Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:01:46.185Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:01:46.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 12815 bytes)
2025-01-31T04:01:48.435Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 26234 bytes)
2025-01-31T04:01:50.436Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 40421 bytes)
2025-01-31T04:01:52.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 55009 bytes)
2025-01-31T04:01:54.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 68785 bytes)
2025-01-31T04:01:56.697Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 84858 bytes)
2025-01-31T04:01:58.476Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1930,"hasContent":true,"text":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:01:58.477Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Like this? Tell me who is going to get it on the first try. Oh my god! Oh my god! Oh my god! Oh my god...
2025-01-31T04:01:58.477Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1929,"transcriptSample":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:01:58.477Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T04:01:58.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 100363 bytes)
2025-01-31T04:02:00.151Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T04:02:00.152Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1929,"transcriptLength":1929,"summary":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:02:00.158Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"100","data":{"guildId":"1315144523336122469","transcript":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Like this? Tell me who is going to get it on the first try. Oh my god! Oh my god! Oh my god! Oh my god! Oh my god! Thank you so much! She doesn't even know how big it is! This was on true calling. You should have been hooking the whole time. I know, that's what my mom told me. Nice work, buddy! You and Murr couldn't snap the bag, making Murr tonight's big loser. Alright! So, Murr lost. And you might be wondering why we're here in the back of this van with a slightly altered James Carrey. We put you in this ridiculous disguise, right? Yeah. We are outside Sucker Punch Sports Bar and today is the first day of March Madness. It's the first day of March Madness. A lot of drinks, a lot of sports going on today. There are a ton of people in there solely to watch this NCAA championship tournament. And all you have to do for your punishment is go in there and when we tell you, shut the TV. Oh my god! I'm going to get my ass kicked. Yeah, you are. That's why we gave you the ticket. Alright, get out of there. Get out of here. It ain't going to happen. Oh my god! I get upset if someone in my own home changes his headlamp. Never mind to come here to this kind of place, this California. It's like a subway booth. Yo, Juan Jimmy. How's it feel out there? It's packed. 80% dudes. Alright, alright. Just shut off that one TV there. Just a test to see how people react. Oh no! Oh! This guy is not happy. This guy is so pissed off. Sure is. He's trying to win. Oh no. What's going to happen, Juan? It's dangerous. I can't wait to find out. I'll tell you that. I'm feeling great about my bet right now. Alright, go ahead. Oh! Oh god! Not good. Not good, James. Not good. People are pissed. They're calling the bartender right now to complain. See this? They just complained to the bartender. Turn it right back on. Turn it back on."}}
2025-01-31T04:02:00.158Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T04:02:00.159Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 100
2025-01-31T04:02:00.162Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738296120159.txt","size":1929}
2025-01-31T04:02:00.163Z [33mwarn[39m: [ChannelService] Message is too long (2070 chars), splitting into chunks
2025-01-31T04:02:00.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 112486 bytes)
2025-01-31T04:02:01.041Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Like this? Tell me who is going to get it on the first try. Oh my god! Oh my god! Oh my god! Oh my god! Oh my god! Thank you so much! She doesn't even know how big it is! This was on true calling. You should have been hooking the whole time. I know, that's what my mom told me. Nice work, buddy! You and Murr couldn't snap the bag, making Murr tonight's big loser. Alright! So, Murr lost. And you might be wondering why we're here in the back of this van with a slightly altered James Carrey. We put you in this ridiculous disguise, right? Yeah. We are outside Sucker Punch Sports Bar and today is the first day of March Madness. It's the first day of March Madness. A lot of drinks, a lot of sports going on today. There are a ton of people in there solely to watch this NCAA championship tournament. And all you have to do for your punishment is go in there and when we tell you, shut the TV. Oh my god! I'm going to get my ass kicked. Yeah, you are. That's why we gave you the ticket. Alright, get out of there. Get out of here. It ain't going to happen. Oh my god! I get upset if someone in my own home changes his headlamp. Never mind to come here to this kind of place, this California. It's like a subway booth. Yo, Juan Jimmy. How's it feel out there? It's packed. 80% dudes. Alright, alright. Just shut off that one TV there. Just a test to see how people react. Oh no! Oh! This guy is not happy. This guy is so pissed off. Sure is. He's trying to win. Oh no. What's going to happen, Juan? It's dangerous. I can't wait to find out. I'll tell you that. I'm feeling great about my bet right now. Alright, go ahead. Oh! Oh god! Not good. Not good, James. Not good. People are pissed. They're calling the bartender right now to complain. See this? They just complained to the bartender. Turn it right back on. Turn it back on.
2025-01-31T04:02:01.043Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T04:02:01.120Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295922842-guuu3ecxxw7.pcm","directory":"/usr/src/app/temp"}
2025-01-31T04:02:01.121Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738295922842-guuu3ecxxw7.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T04:02:02.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 126711 bytes)
2025-01-31T04:02:05.162Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"100","data":{"guildId":"1315144523336122469","transcript":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Like this? Tell me who is going to get it on the first try. Oh my god! Oh my god! Oh my god! Oh my god! Oh my god! Thank you so much! She doesn't even know how big it is! This was on true calling. You should have been hooking the whole time. I know, that's what my mom told me. Nice work, buddy! You and Murr couldn't snap the bag, making Murr tonight's big loser. Alright! So, Murr lost. And you might be wondering why we're here in the back of this van with a slightly altered James Carrey. We put you in this ridiculous disguise, right? Yeah. We are outside Sucker Punch Sports Bar and today is the first day of March Madness. It's the first day of March Madness. A lot of drinks, a lot of sports going on today. There are a ton of people in there solely to watch this NCAA championship tournament. And all you have to do for your punishment is go in there and when we tell you, shut the TV. Oh my god! I'm going to get my ass kicked. Yeah, you are. That's why we gave you the ticket. Alright, get out of there. Get out of here. It ain't going to happen. Oh my god! I get upset if someone in my own home changes his headlamp. Never mind to come here to this kind of place, this California. It's like a subway booth. Yo, Juan Jimmy. How's it feel out there? It's packed. 80% dudes. Alright, alright. Just shut off that one TV there. Just a test to see how people react. Oh no! Oh! This guy is not happy. This guy is so pissed off. Sure is. He's trying to win. Oh no. What's going to happen, Juan? It's dangerous. I can't wait to find out. I'll tell you that. I'm feeling great about my bet right now. Alright, go ahead. Oh! Oh god! Not good. Not good, James. Not good. People are pissed. They're calling the bartender right now to complain. See this? They just complained to the bartender. Turn it right back on. Turn it back on."}}
2025-01-31T04:02:05.163Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T04:02:05.163Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1929,"transcriptSample":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:02:05.164Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T04:02:06.865Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T04:02:06.866Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T04:02:07.318Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 135362 bytes)
2025-01-31T04:02:08.871Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T04:02:09.635Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 150061 bytes)
2025-01-31T04:02:10.806Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T04:02:10.807Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T04:02:11.636Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 165838 bytes)
2025-01-31T04:02:39.449Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T04:02:39.494Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T04:02:39.569Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T04:02:39.592Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738296102842-t1da67cjn2m.pcm","age":27365.549560546875,"size":4700160}
2025-01-31T04:02:39.603Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T04:02:39.607Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T04:02:39.608Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T04:02:40.031Z [32minfo[39m: Bot initialized successfully
2025-01-31T04:02:40.083Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T04:03:09.686Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"100","data":{"guildId":"1315144523336122469","transcript":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Like this? Tell me who is going to get it on the first try. Oh my god! Oh my god! Oh my god! Oh my god! Oh my god! Thank you so much! She doesn't even know how big it is! This was on true calling. You should have been hooking the whole time. I know, that's what my mom told me. Nice work, buddy! You and Murr couldn't snap the bag, making Murr tonight's big loser. Alright! So, Murr lost. And you might be wondering why we're here in the back of this van with a slightly altered James Carrey. We put you in this ridiculous disguise, right? Yeah. We are outside Sucker Punch Sports Bar and today is the first day of March Madness. It's the first day of March Madness. A lot of drinks, a lot of sports going on today. There are a ton of people in there solely to watch this NCAA championship tournament. And all you have to do for your punishment is go in there and when we tell you, shut the TV. Oh my god! I'm going to get my ass kicked. Yeah, you are. That's why we gave you the ticket. Alright, get out of there. Get out of here. It ain't going to happen. Oh my god! I get upset if someone in my own home changes his headlamp. Never mind to come here to this kind of place, this California. It's like a subway booth. Yo, Juan Jimmy. How's it feel out there? It's packed. 80% dudes. Alright, alright. Just shut off that one TV there. Just a test to see how people react. Oh no! Oh! This guy is not happy. This guy is so pissed off. Sure is. He's trying to win. Oh no. What's going to happen, Juan? It's dangerous. I can't wait to find out. I'll tell you that. I'm feeling great about my bet right now. Alright, go ahead. Oh! Oh god! Not good. Not good, James. Not good. People are pissed. They're calling the bartender right now to complain. See this? They just complained to the bartender. Turn it right back on. Turn it back on."}}
2025-01-31T04:03:09.690Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T04:03:09.692Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1929,"transcriptSample":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:03:09.693Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T04:03:09.693Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":1,"model":"gpt-4","error":"OpenAI API key not set"}
2025-01-31T04:03:09.694Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T04:03:11.701Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T04:03:11.704Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":2,"model":"gpt-3.5-turbo","error":"OpenAI API key not set"}
2025-01-31T04:03:11.708Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T04:03:15.715Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T04:03:15.724Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":3,"model":"gpt-4-turbo-preview","error":"OpenAI API key not set"}
2025-01-31T04:03:15.725Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T04:03:21.740Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T04:03:21.751Z [31merror[39m: [TranscriptionService] Error during summary attempt:{"attempt":4,"model":"gpt-3.5-turbo-16k","error":"OpenAI API key not set"}
2025-01-31T04:03:21.753Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1929,"transcriptLength":1929,"summary":"I'm going to do it again because it is shaking. You're ready! Ok, so you tell me... This way. Up. Li"}
2025-01-31T04:03:21.756Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T04:03:22.457Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T04:03:22.472Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"100","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738296201753}}
2025-01-31T04:07:39.472Z [32minfo[39m: Memory Usage:
2025-01-31T04:07:39.482Z [32minfo[39m: rss: 129.46 MB
2025-01-31T04:07:39.483Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:07:39.483Z [32minfo[39m: heapUsed: 26.69 MB
2025-01-31T04:07:39.483Z [32minfo[39m: external: 8.07 MB
2025-01-31T04:07:39.483Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T04:12:39.461Z [32minfo[39m: Memory Usage:
2025-01-31T04:12:39.468Z [32minfo[39m: rss: 129.42 MB
2025-01-31T04:12:39.468Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:12:39.469Z [32minfo[39m: heapUsed: 26.43 MB
2025-01-31T04:12:39.469Z [32minfo[39m: external: 8.07 MB
2025-01-31T04:12:39.469Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T04:17:39.468Z [32minfo[39m: Memory Usage:
2025-01-31T04:17:39.473Z [32minfo[39m: rss: 128.58 MB
2025-01-31T04:17:39.474Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:17:39.474Z [32minfo[39m: heapUsed: 26.21 MB
2025-01-31T04:17:39.475Z [32minfo[39m: external: 8.07 MB
2025-01-31T04:17:39.475Z [32minfo[39m: arrayBuffers: 0.16 MB
2025-01-31T04:22:39.521Z [32minfo[39m: Memory Usage:
2025-01-31T04:22:39.526Z [32minfo[39m: rss: 129.2 MB
2025-01-31T04:22:39.527Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:22:39.528Z [32minfo[39m: heapUsed: 26.71 MB
2025-01-31T04:22:39.528Z [32minfo[39m: external: 8.07 MB
2025-01-31T04:22:39.528Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T04:27:39.534Z [32minfo[39m: Memory Usage:
2025-01-31T04:27:39.538Z [32minfo[39m: rss: 128.7 MB
2025-01-31T04:27:39.538Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:27:39.539Z [32minfo[39m: heapUsed: 26.44 MB
2025-01-31T04:27:39.540Z [32minfo[39m: external: 8.07 MB
2025-01-31T04:27:39.540Z [32minfo[39m: arrayBuffers: 0.16 MB
2025-01-31T04:32:39.551Z [32minfo[39m: Memory Usage:
2025-01-31T04:32:39.557Z [32minfo[39m: rss: 129.32 MB
2025-01-31T04:32:39.563Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:32:39.564Z [32minfo[39m: heapUsed: 26.98 MB
2025-01-31T04:32:39.564Z [32minfo[39m: external: 8.08 MB
2025-01-31T04:32:39.567Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T04:37:39.565Z [32minfo[39m: Memory Usage:
2025-01-31T04:37:39.575Z [32minfo[39m: rss: 129.14 MB
2025-01-31T04:37:39.576Z [32minfo[39m: heapTotal: 28.46 MB
2025-01-31T04:37:39.577Z [32minfo[39m: heapUsed: 26.85 MB
2025-01-31T04:37:39.577Z [32minfo[39m: external: 8.08 MB
2025-01-31T04:37:39.577Z [32minfo[39m: arrayBuffers: 0.17 MB
2025-01-31T04:38:24.999Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T04:38:25.080Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T04:38:25.214Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T04:38:25.227Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T04:38:25.256Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T04:38:25.257Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T04:38:26.049Z [32minfo[39m: Bot initialized successfully
2025-01-31T04:38:26.087Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T04:38:27.760Z [32minfo[39m: Command Name: setkey
2025-01-31T04:38:27.763Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T04:38:27.910Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T04:38:27.913Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334744586249306204","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T04:38:27.914Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T04:38:33.491Z [32minfo[39m: Command Name: record
2025-01-31T04:38:33.495Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T04:38:33.948Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T04:38:34.238Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T04:38:34.240Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T04:38:34.241Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T04:38:34.241Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T04:38:34.242Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:38:34.244Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738298314243-ahfan7i95xt.pcm","directory":"temp"}
2025-01-31T04:38:34.385Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:38:34.386Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:38:34.387Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T04:38:34.387Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:38:34.387Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T04:38:34.387Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T04:38:34.388Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334744610148188293","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T04:38:34.388Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T04:38:34.430Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T04:38:34.431Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T04:38:36.248Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 14581 bytes)
2025-01-31T04:38:38.245Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 28902 bytes)
2025-01-31T04:38:40.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 44551 bytes)
2025-01-31T04:38:42.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 59071 bytes)
2025-01-31T04:38:44.245Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 74941 bytes)
2025-01-31T04:38:45.347Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T04:38:46.484Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 88829 bytes)
2025-01-31T04:38:48.581Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 102546 bytes)
2025-01-31T04:38:51.143Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 114202 bytes)
2025-01-31T04:38:53.143Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 128845 bytes)
2025-01-31T04:38:55.143Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 144680 bytes)
2025-01-31T04:38:57.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 160798 bytes)
2025-01-31T04:38:59.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 101 bytes (total: 175358 bytes)
2025-01-31T04:39:02.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 186978 bytes)
2025-01-31T04:39:04.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 202760 bytes)
2025-01-31T04:39:06.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 97 bytes (total: 218496 bytes)
2025-01-31T04:39:08.550Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 232821 bytes)
2025-01-31T04:39:10.972Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 246629 bytes)
2025-01-31T04:39:12.967Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 262587 bytes)
2025-01-31T04:39:14.969Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 123 bytes (total: 278509 bytes)
2025-01-31T04:39:16.970Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 293611 bytes)
2025-01-31T04:39:18.967Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 79 bytes (total: 307126 bytes)
2025-01-31T04:39:20.969Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 322692 bytes)
2025-01-31T04:39:22.969Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 338008 bytes)
2025-01-31T04:39:25.551Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 351606 bytes)
2025-01-31T04:39:27.547Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 367317 bytes)
2025-01-31T04:39:29.549Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 383366 bytes)
2025-01-31T04:39:32.308Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 393688 bytes)
2025-01-31T04:39:35.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 405921 bytes)
2025-01-31T04:39:37.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 421785 bytes)
2025-01-31T04:39:39.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 436665 bytes)
2025-01-31T04:39:41.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 451858 bytes)
2025-01-31T04:39:43.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 467941 bytes)
2025-01-31T04:39:45.127Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 482462 bytes)
2025-01-31T04:39:47.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 498074 bytes)
2025-01-31T04:39:49.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 512373 bytes)
2025-01-31T04:39:51.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 521495 bytes)
2025-01-31T04:39:53.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 537403 bytes)
2025-01-31T04:39:55.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 551331 bytes)
2025-01-31T04:39:57.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 567191 bytes)
2025-01-31T04:39:59.210Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 581635 bytes)
2025-01-31T04:40:01.668Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 593700 bytes)
2025-01-31T04:40:04.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 606060 bytes)
2025-01-31T04:40:06.355Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 617758 bytes)
2025-01-31T04:40:08.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 633617 bytes)
2025-01-31T04:40:10.329Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 649140 bytes)
2025-01-31T04:40:12.409Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 662394 bytes)
2025-01-31T04:40:14.409Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 678106 bytes)
2025-01-31T04:40:16.414Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 693027 bytes)
2025-01-31T04:40:18.629Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 704591 bytes)
2025-01-31T04:40:20.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 719962 bytes)
2025-01-31T04:40:23.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 733905 bytes)
2025-01-31T04:40:25.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 747847 bytes)
2025-01-31T04:40:27.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 763681 bytes)
2025-01-31T04:40:29.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 777298 bytes)
2025-01-31T04:40:31.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 791020 bytes)
2025-01-31T04:40:33.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 190 bytes (total: 806111 bytes)
2025-01-31T04:40:36.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 819979 bytes)
2025-01-31T04:40:38.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 834474 bytes)
2025-01-31T04:40:40.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 848450 bytes)
2025-01-31T04:40:42.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 862236 bytes)
2025-01-31T04:40:44.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 878333 bytes)
2025-01-31T04:40:46.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 894109 bytes)
2025-01-31T04:40:48.428Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 905454 bytes)
2025-01-31T04:40:50.433Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 921275 bytes)
2025-01-31T04:40:52.429Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 937353 bytes)
2025-01-31T04:40:54.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 952814 bytes)
2025-01-31T04:40:56.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 968551 bytes)
2025-01-31T04:40:58.429Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 981565 bytes)
2025-01-31T04:41:00.709Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 995799 bytes)
2025-01-31T04:41:03.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1007505 bytes)
2025-01-31T04:41:05.171Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1023458 bytes)
2025-01-31T04:41:07.170Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1038949 bytes)
2025-01-31T04:41:09.170Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1052739 bytes)
2025-01-31T04:41:11.171Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1067313 bytes)
2025-01-31T04:41:13.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1080872 bytes)
2025-01-31T04:41:15.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1093728 bytes)
2025-01-31T04:41:17.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1109245 bytes)
2025-01-31T04:41:19.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 1122645 bytes)
2025-01-31T04:41:21.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1138393 bytes)
2025-01-31T04:41:23.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1151816 bytes)
2025-01-31T04:41:25.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1166860 bytes)
2025-01-31T04:41:27.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1182849 bytes)
2025-01-31T04:41:29.544Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1198827 bytes)
2025-01-31T04:41:32.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1212991 bytes)
2025-01-31T04:41:34.403Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:41:34.407Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm","directory":"temp"}
2025-01-31T04:41:34.413Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:41:34.415Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:41:34.415Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T04:41:34.416Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:41:34.775Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T04:41:34.776Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T04:41:35.333Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1226522 bytes)
2025-01-31T04:41:35.431Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T04:41:35.433Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T04:41:38.272Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738298314243-ahfan7i95xt.pcm to MP3
2025-01-31T04:41:38.273Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738298314243-ahfan7i95xt.pcm.mp3","exists":true}
2025-01-31T04:41:38.274Z [32minfo[39m: [TranscriptionService] File stats:{"size":2161509,"created":"2025-01-31T04:41:37.030Z","modified":"2025-01-31T04:41:38.242Z"}
2025-01-31T04:41:38.277Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:41:38.277Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:41:51.139Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T04:41:58.534Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1949,"hasContent":true,"text":"Today we're working in an office, but all the bells don't ring, so we already made the location. So "}
2025-01-31T04:41:58.535Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Today we're working in an office, but all the bells don't ring, so we already made the location. So instead, we brought our buddy Joe DeRosa to fill in. But here's the fun part, Sal hates the Wheel of...
2025-01-31T04:41:58.535Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1948,"transcriptSample":"Today we're working in an office, but all the bells don't ring, so we already made the location. So "}
2025-01-31T04:41:58.536Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T04:42:18.233Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":3279,"transcriptLength":1948,"summary":"***In this transcript, a group of friends involve their buddy, Joe DeRosa, in a game called the Whee"}
2025-01-31T04:42:18.240Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738298538235.txt","size":1948}
2025-01-31T04:42:18.243Z [33mwarn[39m: [ChannelService] Message is too long (3316 chars), splitting into chunks
2025-01-31T04:42:18.820Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***In this transcript, a group of friends involve their buddy, Joe DeRosa, in a game called the Wheel of Doom, while working in an office setting.*** The game involves completing assigned tasks, failure to do so results in some form of penalty. The game's sessions are filled with humor, pranks, and unexpected outcomes, leading to a unique and entertaining episode. 

##### Detailed Breakdown

##### Key Events
- The friends bring in Joe DeRosa, in the absence of Sal who dislikes the game, to engage in the Wheel of Doom. 
> "But here's the fun part, Sal hates the Wheel of Doom. But we love it, and you love it. And since he's not here, it's time to play the Wheel of Doom!"

- Joe DeRosa is asked about his feeling towards Murray after spending time with the group.
> "Alright Joe, you spend a lot of time hanging out with Sal. How do you feel? Now that you've hung out with me and Mark without Sal, do you feel closer to Murray than you did before?"

- A situation is set up where one of the friends, Murr, tries to get a coworker named Steve to roll his eyes. 
> "Murr, you've gotta try and get an eye roll for this guy. Give it a shot, see if you can get that eye roll."

- There is a ***critical moment*** where Murr pretends to neglect his pregnant wife's call about her labor in order to continue working and provoke an eye roll from Steve. 
> "I know it's our first child, but I can't make it. I have to finish the spreadsheet. How far dilated are you? Call me when you see crowding."

- Despite Murr's attempts, he fails to get the desired reaction from Steve. This leads to another spin on the Wheel of Doom.
> "Murr, I've just seen this guy roll his eyeballs out. Do you want to keep trying, or do you want to roll them in a wheel again?"

- The Wheel of Doom lands on a task that results in a surprising and humorous twist involving a pumpkin.
> "He's going to pull this pumpkin down on top of him. You crazy son of a bitch. Oh, my God. Get out of here."

### Memorable Moments
- The entire transcript is filled with humor and playful banter, creating a lively and enjoyable atmosphere. The friends' camaraderie and willingness to prank each other adds to the fun.
- **Critical Successes/Failures**: Murr's failure to get an eye roll from Steve leads to another spin on the Wheel of Doom and results in a hilarious twist.
- *Unexpected Events*: The Wheel of Doom lands on a task that involves a pumpkin, leading to a surprising and funny outcome.

### Consequences & Setup
- **Immediate Consequences**: Murr's failure to get the eye roll results in a new task from the Wheel of Doom.
- *Future Plot Hooks*: The group's continued engagement in the Wheel of Doom game promises more entertaining scenarios and pranks in future sessions.

## Technical Notes
- The group seems to follow loose rules for the Wheel of Doom game, focusing more on entertainment and humor than strict adherence to game mechanics.

## Next Session
- ***Immediate Goals***: The group will likely continue with the Wheel of Doom game, involving more tasks and pranks.
- *Known Challenges Ahead*: The unpredictable nature of the Wheel of Doom game presents potential challenges for the participants.
- Player Intentions: The group plans to continue the game, aiming for entertainment and humor.
2025-01-31T04:42:18.822Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T04:42:18.886Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298314243-ahfan7i95xt.pcm","directory":"/usr/src/app/temp"}
2025-01-31T04:42:18.891Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298314243-ahfan7i95xt.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T04:43:25.007Z [32minfo[39m: Memory Usage:
2025-01-31T04:43:25.024Z [32minfo[39m: rss: 139.19 MB
2025-01-31T04:43:25.025Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T04:43:25.025Z [32minfo[39m: heapUsed: 27.82 MB
2025-01-31T04:43:25.025Z [32minfo[39m: external: 10.22 MB
2025-01-31T04:43:25.025Z [32minfo[39m: arrayBuffers: 2.3 MB
2025-01-31T04:44:34.405Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:44:34.411Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738298674410-uccg25iulo.pcm","directory":"temp"}
2025-01-31T04:44:34.433Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:44:34.437Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:44:34.438Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T04:44:34.439Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:44:34.714Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T04:44:34.722Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T04:44:35.442Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T04:44:35.443Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T04:44:36.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 15290 bytes)
2025-01-31T04:44:36.898Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm to MP3
2025-01-31T04:44:36.899Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm.mp3","exists":true}
2025-01-31T04:44:36.900Z [32minfo[39m: [TranscriptionService] File stats:{"size":9741,"created":"2025-01-31T04:44:36.803Z","modified":"2025-01-31T04:44:36.867Z"}
2025-01-31T04:44:36.900Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:44:36.900Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:44:38.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 31237 bytes)
2025-01-31T04:44:40.314Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T04:44:40.316Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T04:44:40.317Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T04:44:40.716Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 47215 bytes)
2025-01-31T04:44:42.154Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T04:44:42.319Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm.mp3","exists":true}
2025-01-31T04:44:42.323Z [32minfo[39m: [TranscriptionService] File stats:{"size":9741,"created":"2025-01-31T04:44:36.803Z","modified":"2025-01-31T04:44:36.867Z"}
2025-01-31T04:44:42.324Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:44:42.325Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:44:42.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 60983 bytes)
2025-01-31T04:44:44.794Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T04:44:44.795Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T04:44:44.795Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T04:44:44.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 76542 bytes)
2025-01-31T04:44:46.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 92688 bytes)
2025-01-31T04:44:48.807Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm.mp3","exists":true}
2025-01-31T04:44:48.810Z [32minfo[39m: [TranscriptionService] File stats:{"size":9741,"created":"2025-01-31T04:44:36.803Z","modified":"2025-01-31T04:44:36.867Z"}
2025-01-31T04:44:48.812Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:44:48.812Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:44:48.880Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 105627 bytes)
2025-01-31T04:44:50.816Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T04:44:50.820Z [31merror[39m: [TranscriptionService] Transcription failed after all retries:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:158:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:99)"}
2025-01-31T04:44:50.821Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:158:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:106:99)","guildId":"1315144523336122469","fileSize":122880}
2025-01-31T04:44:50.821Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T04:44:50.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 119856 bytes)
2025-01-31T04:44:51.048Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: Failed to process recording. Please try again or contact support if the issue persists.
2025-01-31T04:44:51.049Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T04:44:51.050Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm","directory":"/usr/src/app/temp"}
2025-01-31T04:44:51.051Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298494405-lqoh8sgn3yp.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T04:44:52.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 133766 bytes)
2025-01-31T04:44:55.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 148721 bytes)
2025-01-31T04:44:57.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 163937 bytes)
2025-01-31T04:45:01.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 85 bytes (total: 175388 bytes)
2025-01-31T04:45:03.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 190351 bytes)
2025-01-31T04:45:05.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 204348 bytes)
2025-01-31T04:45:07.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 220429 bytes)
2025-01-31T04:45:11.454Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 234350 bytes)
2025-01-31T04:45:13.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 244138 bytes)
2025-01-31T04:45:16.013Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 203 bytes (total: 254615 bytes)
2025-01-31T04:45:17.950Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 269587 bytes)
2025-01-31T04:45:19.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 285724 bytes)
2025-01-31T04:45:21.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 300887 bytes)
2025-01-31T04:45:23.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 316856 bytes)
2025-01-31T04:45:25.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 331476 bytes)
2025-01-31T04:45:28.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 346608 bytes)
2025-01-31T04:45:29.955Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 362792 bytes)
2025-01-31T04:45:32.157Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 376337 bytes)
2025-01-31T04:45:34.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 389989 bytes)
2025-01-31T04:45:36.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 406182 bytes)
2025-01-31T04:45:39.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 420540 bytes)
2025-01-31T04:45:41.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 436406 bytes)
2025-01-31T04:45:43.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 449305 bytes)
2025-01-31T04:45:45.674Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 463329 bytes)
2025-01-31T04:45:47.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 478678 bytes)
2025-01-31T04:45:49.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 493739 bytes)
2025-01-31T04:45:51.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 509096 bytes)
2025-01-31T04:45:54.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 521926 bytes)
2025-01-31T04:45:56.851Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 535942 bytes)
2025-01-31T04:45:58.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 552145 bytes)
2025-01-31T04:46:01.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 566249 bytes)
2025-01-31T04:46:06.013Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 579574 bytes)
2025-01-31T04:46:08.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 595395 bytes)
2025-01-31T04:46:10.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 608892 bytes)
2025-01-31T04:46:12.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 622252 bytes)
2025-01-31T04:46:14.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 638123 bytes)
2025-01-31T04:46:16.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 654201 bytes)
2025-01-31T04:46:20.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 667870 bytes)
2025-01-31T04:46:22.995Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 683405 bytes)
2025-01-31T04:46:25.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 697977 bytes)
2025-01-31T04:46:27.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 712532 bytes)
2025-01-31T04:46:30.195Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 722624 bytes)
2025-01-31T04:46:32.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 738657 bytes)
2025-01-31T04:46:34.220Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 753568 bytes)
2025-01-31T04:46:37.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 764388 bytes)
2025-01-31T04:46:39.175Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 780075 bytes)
2025-01-31T04:46:41.173Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 796017 bytes)
2025-01-31T04:46:43.477Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 810031 bytes)
2025-01-31T04:46:45.453Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 824244 bytes)
2025-01-31T04:46:47.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 839886 bytes)
2025-01-31T04:46:49.456Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 854039 bytes)
2025-01-31T04:46:52.114Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 868236 bytes)
2025-01-31T04:46:54.895Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 881889 bytes)
2025-01-31T04:46:58.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 894292 bytes)
2025-01-31T04:47:00.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 909183 bytes)
2025-01-31T04:47:02.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 925104 bytes)
2025-01-31T04:47:04.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 939353 bytes)
2025-01-31T04:47:06.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 953455 bytes)
2025-01-31T04:47:08.413Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 969460 bytes)
2025-01-31T04:47:10.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 982437 bytes)
2025-01-31T04:47:13.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 996619 bytes)
2025-01-31T04:47:15.978Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1012448 bytes)
2025-01-31T04:47:17.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1027002 bytes)
2025-01-31T04:47:19.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1040770 bytes)
2025-01-31T04:47:21.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1056523 bytes)
2025-01-31T04:47:23.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1071726 bytes)
2025-01-31T04:47:25.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1087829 bytes)
2025-01-31T04:47:27.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1102809 bytes)
2025-01-31T04:47:31.096Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1116376 bytes)
2025-01-31T04:47:34.409Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:47:34.416Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738298854412-oak0dyvss2.pcm","directory":"temp"}
2025-01-31T04:47:34.424Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:47:34.426Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:47:34.426Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T04:47:34.427Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:47:34.855Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1128825 bytes)
2025-01-31T04:47:35.415Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T04:47:35.416Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T04:47:35.432Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T04:47:35.434Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T04:47:37.809Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738298674410-uccg25iulo.pcm to MP3
2025-01-31T04:47:37.809Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738298674410-uccg25iulo.pcm.mp3","exists":true}
2025-01-31T04:47:37.809Z [32minfo[39m: [TranscriptionService] File stats:{"size":1995213,"created":"2025-01-31T04:47:36.647Z","modified":"2025-01-31T04:47:37.787Z"}
2025-01-31T04:47:37.810Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T04:47:37.810Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T04:47:39.700Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T04:47:44.443Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1656,"hasContent":true,"text":"Joe, you've got to get her dad's phone number, and it's got to be a romantic problem. Are you from h"}
2025-01-31T04:47:44.444Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Joe, you've got to get her dad's phone number, and it's got to be a romantic problem. Are you from here? Where's your family from?  Haiti, oh, this is going to be a long-distance call. Your parents mo...
2025-01-31T04:47:44.444Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1655,"transcriptSample":"Joe, you've got to get her dad's phone number, and it's got to be a romantic problem. Are you from h"}
2025-01-31T04:47:44.445Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T04:47:45.250Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T04:47:45.250Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T04:47:47.254Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T04:47:49.940Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":940,"transcriptLength":1655,"summary":"***The group engages in a lighthearted conversation about a romantic prank involving an 80-year-old "}
2025-01-31T04:47:49.947Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738298869940.txt","size":1655}
2025-01-31T04:47:49.947Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T04:47:50.123Z [33mwarn[39m: [VoiceRecorder] Summary Channel Failed to send to 1327887143309279275 summary: ***The group engages in a lighthearted conversation about a romantic prank involving an 80-year-old father from Haiti. Sal, the absent member, tasked Joe with obtaining the father's phone number as part of a comedic prank. Joe, not actually being gay, navigates the humorous exchange with the group.***

### Memorable Moments
- ```"I think 80 is a good age, like when I date, I mean, I date older men."```
- ```"Oh my God, he's a doctor too? Sweep me off my feet."```
- ```"I was tasked with the prank of trying to get your father's phone number. I'm not even gay."```

### Consequences & Setup
- **Immediate Consequences**: Joe attempts to navigate the prank but eventually decides to give up as it's not working.
- *Future Plot Hooks*: The group's dynamic may shift as they continue with their comedic pranks and interactions.
- Party's Next Objectives: The group may come up with new pranks or jokes to keep the atmosphere light-hearted.
2025-01-31T04:47:50.126Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T04:47:50.132Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298674410-uccg25iulo.pcm","directory":"/usr/src/app/temp"}
2025-01-31T04:47:50.133Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738298674410-uccg25iulo.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T04:48:25.010Z [32minfo[39m: Memory Usage:
2025-01-31T04:48:25.017Z [32minfo[39m: rss: 144.09 MB
2025-01-31T04:48:25.018Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T04:48:25.018Z [32minfo[39m: heapUsed: 27.96 MB
2025-01-31T04:48:25.019Z [32minfo[39m: external: 10.03 MB
2025-01-31T04:48:25.019Z [32minfo[39m: arrayBuffers: 2.1 MB
2025-01-31T04:50:34.412Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T04:50:34.422Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738299034417-g2rnvuwbat.pcm","directory":"temp"}
2025-01-31T04:50:34.426Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T04:50:34.428Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T04:50:34.428Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T04:50:34.429Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T04:50:35.436Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T04:50:35.440Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T04:50:35.445Z [31merror[39m: Error in convertToMp3:{"error":"Input file is empty","inputFile":"/usr/src/app/temp/recording-1315144523336122469-1738298854412-oak0dyvss2.pcm","inputFileExists":true}
2025-01-31T05:14:39.517Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T05:14:39.589Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T05:14:39.696Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-31T05:14:39.753Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738298854412-oak0dyvss2.pcm","age":1625142.1416015625,"size":0}
2025-01-31T05:14:39.766Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738299034417-g2rnvuwbat.pcm","age":1445140.0012207031,"size":0}
2025-01-31T05:14:39.786Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T05:14:39.788Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T05:14:39.789Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T05:14:40.197Z [32minfo[39m: Bot initialized successfully
2025-01-31T05:14:40.269Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T05:14:43.784Z [32minfo[39m: Command Name: setkey
2025-01-31T05:14:43.786Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T05:14:43.937Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T05:14:43.939Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334753713159540890","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:14:43.939Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:14:49.231Z [32minfo[39m: Command Name: record
2025-01-31T05:14:49.237Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T05:14:49.431Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T05:14:49.685Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T05:14:49.688Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T05:14:49.688Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:14:49.688Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:14:49.689Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:14:49.690Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738300489690-kh0el9437db.pcm","directory":"temp"}
2025-01-31T05:14:49.764Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:14:49.765Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:14:49.765Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T05:14:49.765Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:14:49.765Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T05:14:49.766Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T05:14:49.766Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334753735968297041","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:14:49.766Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:14:49.801Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:14:49.802Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:14:50.955Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:14:52.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 12042 bytes)
2025-01-31T05:14:55.149Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 28214 bytes)
2025-01-31T05:14:58.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 41971 bytes)
2025-01-31T05:15:00.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 57953 bytes)
2025-01-31T05:15:02.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 121 bytes (total: 73186 bytes)
2025-01-31T05:15:05.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 85123 bytes)
2025-01-31T05:15:07.730Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 97454 bytes)
2025-01-31T05:15:09.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 113470 bytes)
2025-01-31T05:15:11.996Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 127252 bytes)
2025-01-31T05:15:13.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 143339 bytes)
2025-01-31T05:15:16.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 157093 bytes)
2025-01-31T05:15:18.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 172676 bytes)
2025-01-31T05:15:20.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 187161 bytes)
2025-01-31T05:15:22.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 203212 bytes)
2025-01-31T05:15:24.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 216541 bytes)
2025-01-31T05:15:26.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 229927 bytes)
2025-01-31T05:15:28.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 245464 bytes)
2025-01-31T05:15:30.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 261344 bytes)
2025-01-31T05:15:32.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 277224 bytes)
2025-01-31T05:15:34.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 290149 bytes)
2025-01-31T05:15:36.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 301473 bytes)
2025-01-31T05:15:38.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 317271 bytes)
2025-01-31T05:15:40.729Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 331590 bytes)
2025-01-31T05:15:42.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 345446 bytes)
2025-01-31T05:15:44.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 361220 bytes)
2025-01-31T05:15:48.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 374374 bytes)
2025-01-31T05:15:50.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 388436 bytes)
2025-01-31T05:15:52.010Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 404445 bytes)
2025-01-31T05:15:54.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 418555 bytes)
2025-01-31T05:15:56.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 434046 bytes)
2025-01-31T05:15:58.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 449237 bytes)
2025-01-31T05:16:00.373Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 460312 bytes)
2025-01-31T05:16:02.370Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 474854 bytes)
2025-01-31T05:16:04.374Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 490127 bytes)
2025-01-31T05:16:08.572Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 504603 bytes)
2025-01-31T05:16:10.572Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 520222 bytes)
2025-01-31T05:16:12.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 532535 bytes)
2025-01-31T05:16:14.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 546747 bytes)
2025-01-31T05:16:16.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 561660 bytes)
2025-01-31T05:16:18.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 577021 bytes)
2025-01-31T05:16:20.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 590230 bytes)
2025-01-31T05:16:23.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 604091 bytes)
2025-01-31T05:16:25.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 620151 bytes)
2025-01-31T05:16:27.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 634248 bytes)
2025-01-31T05:16:29.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 649957 bytes)
2025-01-31T05:16:31.233Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 664784 bytes)
2025-01-31T05:16:33.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 676141 bytes)
2025-01-31T05:16:35.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 691930 bytes)
2025-01-31T05:16:37.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 707869 bytes)
2025-01-31T05:16:39.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 722383 bytes)
2025-01-31T05:16:41.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 736328 bytes)
2025-01-31T05:16:43.952Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 751933 bytes)
2025-01-31T05:16:46.091Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 765083 bytes)
2025-01-31T05:16:48.090Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 778083 bytes)
2025-01-31T05:16:50.091Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 792480 bytes)
2025-01-31T05:16:52.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 805367 bytes)
2025-01-31T05:16:54.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 818891 bytes)
2025-01-31T05:16:56.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 834564 bytes)
2025-01-31T05:16:58.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 850733 bytes)
2025-01-31T05:17:00.362Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 865680 bytes)
2025-01-31T05:17:02.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 880809 bytes)
2025-01-31T05:17:04.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 188 bytes (total: 896711 bytes)
2025-01-31T05:17:06.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 912762 bytes)
2025-01-31T05:17:08.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 927942 bytes)
2025-01-31T05:17:11.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 942103 bytes)
2025-01-31T05:17:13.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 958108 bytes)
2025-01-31T05:17:15.186Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 974021 bytes)
2025-01-31T05:17:17.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 988764 bytes)
2025-01-31T05:17:19.269Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1001265 bytes)
2025-01-31T05:17:21.269Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1016594 bytes)
2025-01-31T05:17:23.270Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1032248 bytes)
2025-01-31T05:17:25.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1046178 bytes)
2025-01-31T05:17:27.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1060743 bytes)
2025-01-31T05:17:29.465Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1072356 bytes)
2025-01-31T05:17:31.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1088180 bytes)
2025-01-31T05:17:33.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1101565 bytes)
2025-01-31T05:17:35.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1116628 bytes)
2025-01-31T05:17:38.431Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 1130749 bytes)
2025-01-31T05:17:40.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1145132 bytes)
2025-01-31T05:17:42.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1159596 bytes)
2025-01-31T05:17:44.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1175166 bytes)
2025-01-31T05:17:46.519Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1190906 bytes)
2025-01-31T05:17:48.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 1203963 bytes)
2025-01-31T05:17:50.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1216504 bytes)
2025-01-31T05:17:52.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1232525 bytes)
2025-01-31T05:17:54.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1248599 bytes)
2025-01-31T05:17:56.525Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1264492 bytes)
2025-01-31T05:17:58.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1279698 bytes)
2025-01-31T05:18:01.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1293899 bytes)
2025-01-31T05:18:03.869Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 1309315 bytes)
2025-01-31T05:18:06.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1321428 bytes)
2025-01-31T05:18:10.969Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 1332800 bytes)
2025-01-31T05:18:14.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1345080 bytes)
2025-01-31T05:18:16.788Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1357142 bytes)
2025-01-31T05:18:19.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1368824 bytes)
2025-01-31T05:18:22.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 1379315 bytes)
2025-01-31T05:18:24.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1393330 bytes)
2025-01-31T05:18:27.049Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1407432 bytes)
2025-01-31T05:18:30.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1421616 bytes)
2025-01-31T05:18:32.632Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1437301 bytes)
2025-01-31T05:18:34.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1450674 bytes)
2025-01-31T05:18:36.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1466697 bytes)
2025-01-31T05:18:38.632Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1482491 bytes)
2025-01-31T05:18:40.710Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1495231 bytes)
2025-01-31T05:18:42.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1510954 bytes)
2025-01-31T05:18:44.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1524764 bytes)
2025-01-31T05:18:46.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 213 bytes (total: 1539347 bytes)
2025-01-31T05:18:48.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1554723 bytes)
2025-01-31T05:18:50.809Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1568897 bytes)
2025-01-31T05:18:53.090Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1582145 bytes)
2025-01-31T05:18:55.172Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1596757 bytes)
2025-01-31T05:18:57.172Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1612652 bytes)
2025-01-31T05:18:59.270Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1626999 bytes)
2025-01-31T05:19:02.588Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 1638717 bytes)
2025-01-31T05:19:04.588Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1654498 bytes)
2025-01-31T05:19:07.248Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1667152 bytes)
2025-01-31T05:19:09.542Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1678385 bytes)
2025-01-31T05:19:11.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1691832 bytes)
2025-01-31T05:19:15.168Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1703864 bytes)
2025-01-31T05:19:17.409Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 191 bytes (total: 1716417 bytes)
2025-01-31T05:19:19.409Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1729959 bytes)
2025-01-31T05:19:26.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1738833 bytes)
2025-01-31T05:19:29.249Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 1749414 bytes)
2025-01-31T05:19:31.411Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1759104 bytes)
2025-01-31T05:19:33.408Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1775191 bytes)
2025-01-31T05:19:35.490Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 111 bytes (total: 1787267 bytes)
2025-01-31T05:19:37.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1799040 bytes)
2025-01-31T05:19:39.519Z [32minfo[39m: Memory Usage:
2025-01-31T05:19:39.521Z [32minfo[39m: rss: 136.03 MB
2025-01-31T05:19:39.523Z [32minfo[39m: heapTotal: 28.71 MB
2025-01-31T05:19:39.523Z [32minfo[39m: heapUsed: 27.53 MB
2025-01-31T05:19:39.524Z [32minfo[39m: external: 8.64 MB
2025-01-31T05:19:39.524Z [32minfo[39m: arrayBuffers: 0.71 MB
2025-01-31T05:19:39.709Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1814311 bytes)
2025-01-31T05:19:41.711Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1828812 bytes)
2025-01-31T05:19:43.710Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1843691 bytes)
2025-01-31T05:19:45.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1856887 bytes)
2025-01-31T05:19:47.869Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1868360 bytes)
2025-01-31T05:19:49.772Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:19:49.776Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738300789773-wnlnnz7mym.pcm","directory":"temp"}
2025-01-31T05:19:49.782Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:19:49.783Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:19:49.784Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T05:19:49.784Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:19:50.800Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T05:19:54.728Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738300489690-kh0el9437db.pcm to MP3
2025-01-31T05:19:54.730Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738300489690-kh0el9437db.pcm.mp3","exists":true}
2025-01-31T05:19:54.730Z [32minfo[39m: [TranscriptionService] File stats:{"size":3325365,"created":"2025-01-31T05:19:52.919Z","modified":"2025-01-31T05:19:54.703Z"}
2025-01-31T05:19:54.733Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T05:19:54.733Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T05:20:00.515Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:20:00.522Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:20:02.512Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 15807 bytes)
2025-01-31T05:20:04.511Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 31807 bytes)
2025-01-31T05:20:06.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 47647 bytes)
2025-01-31T05:20:08.510Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 62553 bytes)
2025-01-31T05:20:10.591Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 76259 bytes)
2025-01-31T05:20:11.100Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:20:13.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 88799 bytes)
2025-01-31T05:20:15.971Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 104076 bytes)
2025-01-31T05:20:18.049Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 117143 bytes)
2025-01-31T05:20:18.641Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1442,"hasContent":true,"text":"Now Coochie's not just going to give himself up. He's missing people's eyes! She took my flashlight "}
2025-01-31T05:20:18.642Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Now Coochie's not just going to give himself up. He's missing people's eyes! She took my flashlight through! The ring's blown up! When we're supposed to point at my stall light, I can't see! I'm on yo...
2025-01-31T05:20:18.642Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":1441,"transcriptSample":"Now Coochie's not just going to give himself up. He's missing people's eyes! She took my flashlight "}
2025-01-31T05:20:18.643Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T05:20:19.955Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T05:20:19.956Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":1441,"transcriptLength":1441,"summary":"Now Coochie's not just going to give himself up. He's missing people's eyes! She took my flashlight "}
2025-01-31T05:20:19.962Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738300819956.txt","size":1441}
2025-01-31T05:20:19.964Z [31merror[39m: [VoiceRecorder] Error sending to summary channel: startTime is not defined{"stack":"ReferenceError: startTime is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:311:47)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:20:19.965Z [31merror[39m: [VoiceRecorder] Error processing recording: summary is not defined{"stack":"ReferenceError: summary is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:337:121)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:20:19.983Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738300489690-kh0el9437db.pcm","directory":"/usr/src/app/temp"}
2025-01-31T05:20:19.983Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T05:20:25.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 72 bytes (total: 123098 bytes)
2025-01-31T05:20:29.333Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 133989 bytes)
2025-01-31T05:20:31.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 149981 bytes)
2025-01-31T05:20:33.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 165390 bytes)
2025-01-31T05:20:35.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 181473 bytes)
2025-01-31T05:20:37.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 196988 bytes)
2025-01-31T05:20:39.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 211842 bytes)
2025-01-31T05:20:41.330Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 227601 bytes)
2025-01-31T05:20:43.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 243621 bytes)
2025-01-31T05:20:45.369Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 258536 bytes)
2025-01-31T05:20:47.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 274547 bytes)
2025-01-31T05:20:49.429Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 285086 bytes)
2025-01-31T05:20:52.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 299091 bytes)
2025-01-31T05:20:54.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 313020 bytes)
2025-01-31T05:20:56.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 327816 bytes)
2025-01-31T05:20:58.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 343370 bytes)
2025-01-31T05:21:00.509Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 354733 bytes)
2025-01-31T05:21:02.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 367860 bytes)
2025-01-31T05:21:04.851Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 382387 bytes)
2025-01-31T05:21:06.850Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 63 bytes (total: 398163 bytes)
2025-01-31T05:21:09.954Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 412106 bytes)
2025-01-31T05:21:11.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 428217 bytes)
2025-01-31T05:21:14.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 441983 bytes)
2025-01-31T05:21:16.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 456397 bytes)
2025-01-31T05:21:18.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 472204 bytes)
2025-01-31T05:21:20.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 486712 bytes)
2025-01-31T05:21:22.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 499201 bytes)
2025-01-31T05:21:25.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 512832 bytes)
2025-01-31T05:21:27.552Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 526403 bytes)
2025-01-31T05:21:29.552Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 540180 bytes)
2025-01-31T05:21:33.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 551273 bytes)
2025-01-31T05:21:35.230Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 566167 bytes)
2025-01-31T05:21:37.552Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 579540 bytes)
2025-01-31T05:21:39.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 592801 bytes)
2025-01-31T05:21:43.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 54 bytes (total: 604446 bytes)
2025-01-31T05:21:47.701Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 615713 bytes)
2025-01-31T05:21:54.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 628098 bytes)
2025-01-31T05:21:56.389Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 641613 bytes)
2025-01-31T05:21:58.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 655555 bytes)
2025-01-31T05:22:00.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 667453 bytes)
2025-01-31T05:22:02.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 108 bytes (total: 681152 bytes)
2025-01-31T05:22:04.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 696987 bytes)
2025-01-31T05:22:06.751Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 713108 bytes)
2025-01-31T05:22:08.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 728551 bytes)
2025-01-31T05:22:10.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 742583 bytes)
2025-01-31T05:22:12.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 758669 bytes)
2025-01-31T05:22:14.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 774330 bytes)
2025-01-31T05:22:16.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 790184 bytes)
2025-01-31T05:22:18.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 803684 bytes)
2025-01-31T05:22:20.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 819769 bytes)
2025-01-31T05:22:22.875Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 833699 bytes)
2025-01-31T05:22:24.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 845836 bytes)
2025-01-31T05:22:26.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 860008 bytes)
2025-01-31T05:22:28.870Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 874106 bytes)
2025-01-31T05:22:30.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 889305 bytes)
2025-01-31T05:22:32.873Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 905090 bytes)
2025-01-31T05:22:36.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 915588 bytes)
2025-01-31T05:22:40.728Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 929311 bytes)
2025-01-31T05:22:42.729Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 945173 bytes)
2025-01-31T05:22:45.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 957850 bytes)
2025-01-31T05:22:49.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 970551 bytes)
2025-01-31T05:22:52.969Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 982354 bytes)
2025-01-31T05:22:55.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 996283 bytes)
2025-01-31T05:22:57.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1012263 bytes)
2025-01-31T05:22:59.710Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1026264 bytes)
2025-01-31T05:23:02.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 80 bytes (total: 1034644 bytes)
2025-01-31T05:23:04.030Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1050049 bytes)
2025-01-31T05:23:06.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1065942 bytes)
2025-01-31T05:23:08.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1081904 bytes)
2025-01-31T05:23:10.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1097158 bytes)
2025-01-31T05:23:12.430Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 193 bytes (total: 1108353 bytes)
2025-01-31T05:23:14.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1122655 bytes)
2025-01-31T05:23:17.412Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1137772 bytes)
2025-01-31T05:23:19.950Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 1149607 bytes)
2025-01-31T05:23:22.573Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1162798 bytes)
2025-01-31T05:23:24.588Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 191 bytes (total: 1176404 bytes)
2025-01-31T05:23:27.450Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1190912 bytes)
2025-01-31T05:23:29.449Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 1205241 bytes)
2025-01-31T05:23:31.450Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1220650 bytes)
2025-01-31T05:23:33.811Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1233759 bytes)
2025-01-31T05:23:35.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1243562 bytes)
2025-01-31T05:23:37.809Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1259586 bytes)
2025-01-31T05:23:44.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 45 bytes (total: 1271494 bytes)
2025-01-31T05:24:15.970Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1276508 bytes)
2025-01-31T05:26:23.244Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T05:26:23.284Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T05:26:23.355Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":2,"maxAge":0}
2025-01-31T05:26:23.374Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738300489690-kh0el9437db.pcm.mp3","age":388571.4211425781,"size":3325365}
2025-01-31T05:26:23.382Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738300789773-wnlnnz7mym.pcm","age":124279.9140625,"size":35677440}
2025-01-31T05:26:23.389Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T05:26:23.391Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T05:26:23.391Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T05:26:23.756Z [32minfo[39m: Bot initialized successfully
2025-01-31T05:26:23.822Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T05:26:32.545Z [32minfo[39m: Command Name: setkey
2025-01-31T05:26:32.549Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T05:26:32.769Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T05:26:32.772Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334756685473906748","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:26:32.773Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:26:37.022Z [32minfo[39m: Command Name: record
2025-01-31T05:26:37.025Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T05:26:37.227Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T05:26:37.538Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T05:26:37.540Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T05:26:37.540Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:26:37.541Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:26:37.542Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:26:37.543Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738301197543-6ln9ztna926.pcm","directory":"temp"}
2025-01-31T05:26:37.617Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:26:37.618Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:26:37.618Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T05:26:37.618Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:26:37.618Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T05:26:37.618Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T05:26:37.618Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334756704721702952","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:26:37.618Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:26:37.620Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:26:37.621Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:26:38.918Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:26:40.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 14039 bytes)
2025-01-31T05:26:42.034Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 29998 bytes)
2025-01-31T05:26:44.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 45963 bytes)
2025-01-31T05:26:46.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 61809 bytes)
2025-01-31T05:26:48.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 77992 bytes)
2025-01-31T05:26:50.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 92788 bytes)
2025-01-31T05:26:52.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 108613 bytes)
2025-01-31T05:26:54.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 122565 bytes)
2025-01-31T05:26:56.315Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 138221 bytes)
2025-01-31T05:26:58.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 151889 bytes)
2025-01-31T05:27:00.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 165812 bytes)
2025-01-31T05:27:02.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 181153 bytes)
2025-01-31T05:27:04.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 195475 bytes)
2025-01-31T05:27:06.608Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 210057 bytes)
2025-01-31T05:27:08.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 225489 bytes)
2025-01-31T05:27:11.288Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 239120 bytes)
2025-01-31T05:27:13.509Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 252043 bytes)
2025-01-31T05:27:15.607Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 265439 bytes)
2025-01-31T05:27:17.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 281291 bytes)
2025-01-31T05:27:19.590Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 297371 bytes)
2025-01-31T05:27:21.661Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 313280 bytes)
2025-01-31T05:27:23.590Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 327526 bytes)
2025-01-31T05:27:26.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 343236 bytes)
2025-01-31T05:27:28.234Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 359424 bytes)
2025-01-31T05:27:30.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 374592 bytes)
2025-01-31T05:27:32.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 46 bytes (total: 389638 bytes)
2025-01-31T05:27:34.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 404034 bytes)
2025-01-31T05:27:37.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 418118 bytes)
2025-01-31T05:27:39.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 433195 bytes)
2025-01-31T05:27:41.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 449163 bytes)
2025-01-31T05:27:43.831Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 462329 bytes)
2025-01-31T05:27:45.857Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 477570 bytes)
2025-01-31T05:27:47.830Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 492236 bytes)
2025-01-31T05:27:50.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 506337 bytes)
2025-01-31T05:27:52.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 522145 bytes)
2025-01-31T05:27:54.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 538213 bytes)
2025-01-31T05:27:56.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 553594 bytes)
2025-01-31T05:27:58.530Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 565807 bytes)
2025-01-31T05:28:00.953Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 579502 bytes)
2025-01-31T05:28:02.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 594089 bytes)
2025-01-31T05:28:05.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 601601 bytes)
2025-01-31T05:28:07.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 610893 bytes)
2025-01-31T05:28:09.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 623837 bytes)
2025-01-31T05:28:13.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 634435 bytes)
2025-01-31T05:28:15.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 648404 bytes)
2025-01-31T05:28:17.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 661622 bytes)
2025-01-31T05:28:19.796Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 671435 bytes)
2025-01-31T05:28:21.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 685395 bytes)
2025-01-31T05:28:23.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 700341 bytes)
2025-01-31T05:28:25.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 716284 bytes)
2025-01-31T05:28:28.189Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 729973 bytes)
2025-01-31T05:28:30.191Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 746134 bytes)
2025-01-31T05:28:32.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 760255 bytes)
2025-01-31T05:28:39.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 774834 bytes)
2025-01-31T05:28:41.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 790756 bytes)
2025-01-31T05:28:43.989Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 806451 bytes)
2025-01-31T05:28:46.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 820645 bytes)
2025-01-31T05:28:48.247Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 834983 bytes)
2025-01-31T05:28:50.250Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 848812 bytes)
2025-01-31T05:28:52.470Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 863795 bytes)
2025-01-31T05:28:54.713Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 876567 bytes)
2025-01-31T05:28:57.009Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 886053 bytes)
2025-01-31T05:29:00.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 894090 bytes)
2025-01-31T05:29:03.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 906692 bytes)
2025-01-31T05:29:05.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 922689 bytes)
2025-01-31T05:29:07.631Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 937346 bytes)
2025-01-31T05:29:10.330Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 949640 bytes)
2025-01-31T05:29:13.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 962710 bytes)
2025-01-31T05:29:15.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 978720 bytes)
2025-01-31T05:29:17.730Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 994535 bytes)
2025-01-31T05:29:19.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1010486 bytes)
2025-01-31T05:29:21.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1026129 bytes)
2025-01-31T05:29:23.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1041662 bytes)
2025-01-31T05:29:25.729Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1057595 bytes)
2025-01-31T05:29:27.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1073443 bytes)
2025-01-31T05:29:29.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1089529 bytes)
2025-01-31T05:29:31.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1105507 bytes)
2025-01-31T05:29:33.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1121563 bytes)
2025-01-31T05:29:35.728Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1136414 bytes)
2025-01-31T05:29:40.988Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1146590 bytes)
2025-01-31T05:29:42.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1160847 bytes)
2025-01-31T05:29:44.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 1175612 bytes)
2025-01-31T05:29:46.990Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1191618 bytes)
2025-01-31T05:29:48.991Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1207009 bytes)
2025-01-31T05:29:51.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1220594 bytes)
2025-01-31T05:29:53.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 1234006 bytes)
2025-01-31T05:29:55.353Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1248807 bytes)
2025-01-31T05:29:57.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1264912 bytes)
2025-01-31T05:29:59.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1280812 bytes)
2025-01-31T05:30:01.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1294475 bytes)
2025-01-31T05:30:03.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1306928 bytes)
2025-01-31T05:30:05.493Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1323149 bytes)
2025-01-31T05:30:07.492Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1338624 bytes)
2025-01-31T05:30:09.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1353844 bytes)
2025-01-31T05:30:11.489Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1369081 bytes)
2025-01-31T05:30:13.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1382760 bytes)
2025-01-31T05:30:15.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 1398740 bytes)
2025-01-31T05:30:17.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1414446 bytes)
2025-01-31T05:30:19.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1428750 bytes)
2025-01-31T05:30:21.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1443688 bytes)
2025-01-31T05:30:23.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 1459803 bytes)
2025-01-31T05:30:25.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1475540 bytes)
2025-01-31T05:30:27.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1490040 bytes)
2025-01-31T05:30:30.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1503856 bytes)
2025-01-31T05:30:32.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 1517282 bytes)
2025-01-31T05:30:34.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1531878 bytes)
2025-01-31T05:30:36.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1547803 bytes)
2025-01-31T05:30:39.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1560471 bytes)
2025-01-31T05:30:41.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1575237 bytes)
2025-01-31T05:30:43.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1590413 bytes)
2025-01-31T05:30:45.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1604598 bytes)
2025-01-31T05:30:48.470Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1615509 bytes)
2025-01-31T05:30:51.070Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1626987 bytes)
2025-01-31T05:30:53.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1642745 bytes)
2025-01-31T05:30:55.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1658638 bytes)
2025-01-31T05:30:57.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1673592 bytes)
2025-01-31T05:30:59.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1686038 bytes)
2025-01-31T05:31:01.730Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1701943 bytes)
2025-01-31T05:31:05.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 1713333 bytes)
2025-01-31T05:31:07.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1728360 bytes)
2025-01-31T05:31:09.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1744116 bytes)
2025-01-31T05:31:11.350Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 1758461 bytes)
2025-01-31T05:31:13.351Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1774773 bytes)
2025-01-31T05:31:15.349Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1790509 bytes)
2025-01-31T05:31:17.352Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 88 bytes (total: 1805151 bytes)
2025-01-31T05:31:19.471Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1818070 bytes)
2025-01-31T05:31:21.692Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1831683 bytes)
2025-01-31T05:31:23.246Z [32minfo[39m: Memory Usage:
2025-01-31T05:31:23.248Z [32minfo[39m: rss: 129.02 MB
2025-01-31T05:31:23.249Z [32minfo[39m: heapTotal: 28.71 MB
2025-01-31T05:31:23.252Z [32minfo[39m: heapUsed: 26.82 MB
2025-01-31T05:31:23.253Z [32minfo[39m: external: 8.26 MB
2025-01-31T05:31:23.254Z [32minfo[39m: arrayBuffers: 0.33 MB
2025-01-31T05:31:23.689Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1847701 bytes)
2025-01-31T05:31:25.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1859571 bytes)
2025-01-31T05:31:27.947Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1875471 bytes)
2025-01-31T05:31:30.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1888065 bytes)
2025-01-31T05:31:32.113Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1903839 bytes)
2025-01-31T05:31:34.110Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1918085 bytes)
2025-01-31T05:31:36.112Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1933484 bytes)
2025-01-31T05:31:37.622Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:31:37.626Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738301497624-23c4271h1c1.pcm","directory":"temp"}
2025-01-31T05:31:37.633Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:31:37.634Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:31:37.634Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T05:31:37.635Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:31:38.111Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1949123 bytes)
2025-01-31T05:31:38.651Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T05:31:40.591Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:31:40.591Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:31:41.774Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:31:42.319Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738301197543-6ln9ztna926.pcm to MP3
2025-01-31T05:31:42.320Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738301197543-6ln9ztna926.pcm.mp3","exists":true}
2025-01-31T05:31:42.321Z [32minfo[39m: [TranscriptionService] File stats:{"size":3428661,"created":"2025-01-31T05:31:40.449Z","modified":"2025-01-31T05:31:42.297Z"}
2025-01-31T05:31:42.323Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T05:31:42.323Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T05:31:43.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 9548 bytes)
2025-01-31T05:31:46.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 21460 bytes)
2025-01-31T05:31:48.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 36837 bytes)
2025-01-31T05:31:50.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 52840 bytes)
2025-01-31T05:31:52.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 81 bytes (total: 67032 bytes)
2025-01-31T05:31:54.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 83058 bytes)
2025-01-31T05:31:55.506Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":3577,"hasContent":true,"text":"Alright, so Sal doesn't know this. While we were outside, we threw a little free-throw contest indoo"}
2025-01-31T05:31:55.506Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Alright, so Sal doesn't know this. While we were outside, we threw a little free-throw contest indoors with the Boys and Girls Club of Hoboken. Right, and Sal doesn't know that the winning child was p...
2025-01-31T05:31:55.507Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":3576,"transcriptSample":"Alright, so Sal doesn't know this. While we were outside, we threw a little free-throw contest indoo"}
2025-01-31T05:31:55.507Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T05:31:56.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 98460 bytes)
2025-01-31T05:31:58.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 114065 bytes)
2025-01-31T05:32:00.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 130014 bytes)
2025-01-31T05:32:02.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 145038 bytes)
2025-01-31T05:32:04.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 159471 bytes)
2025-01-31T05:32:06.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 175319 bytes)
2025-01-31T05:32:09.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 187301 bytes)
2025-01-31T05:32:11.388Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 202264 bytes)
2025-01-31T05:32:13.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 214059 bytes)
2025-01-31T05:32:15.869Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 226717 bytes)
2025-01-31T05:32:17.159Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2662,"transcriptLength":3576,"summary":"***In this transcript, the group hosts a free-throw contest for the Boys and Girls Club of Hoboken, "}
2025-01-31T05:32:17.167Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738301537160.txt","size":3576}
2025-01-31T05:32:17.170Z [31merror[39m: [VoiceRecorder] Error sending to summary channel: startTime is not defined{"stack":"ReferenceError: startTime is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:311:47)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:32:17.172Z [31merror[39m: [VoiceRecorder] Error processing recording: summary is not defined{"stack":"ReferenceError: summary is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:337:121)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:32:17.197Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738301197543-6ln9ztna926.pcm","directory":"/usr/src/app/temp"}
2025-01-31T05:32:17.197Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T05:32:18.389Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 239456 bytes)
2025-01-31T05:32:20.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 255045 bytes)
2025-01-31T05:32:22.851Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 105 bytes (total: 267941 bytes)
2025-01-31T05:32:24.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 282048 bytes)
2025-01-31T05:32:26.931Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 296663 bytes)
2025-01-31T05:32:28.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 312706 bytes)
2025-01-31T05:32:30.930Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 327316 bytes)
2025-01-31T05:32:32.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 343023 bytes)
2025-01-31T05:32:35.012Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 357679 bytes)
2025-01-31T05:32:37.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 373473 bytes)
2025-01-31T05:32:39.010Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 389113 bytes)
2025-01-31T05:32:41.011Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 405067 bytes)
2025-01-31T05:32:43.009Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 419640 bytes)
2025-01-31T05:32:45.133Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 435076 bytes)
2025-01-31T05:32:47.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 450645 bytes)
2025-01-31T05:32:49.130Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 466639 bytes)
2025-01-31T05:32:51.314Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 480318 bytes)
2025-01-31T05:32:53.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 496557 bytes)
2025-01-31T05:32:55.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 187 bytes (total: 512252 bytes)
2025-01-31T05:32:57.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 528497 bytes)
2025-01-31T05:32:59.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 542936 bytes)
2025-01-31T05:33:01.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 558754 bytes)
2025-01-31T05:33:03.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 573978 bytes)
2025-01-31T05:33:05.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 588042 bytes)
2025-01-31T05:33:07.390Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 603749 bytes)
2025-01-31T05:33:09.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 618074 bytes)
2025-01-31T05:33:11.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 632585 bytes)
2025-01-31T05:33:14.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 645367 bytes)
2025-01-31T05:33:16.313Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 659295 bytes)
2025-01-31T05:33:18.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 672545 bytes)
2025-01-31T05:33:20.316Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 688391 bytes)
2025-01-31T05:33:22.314Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 700877 bytes)
2025-01-31T05:33:26.330Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 709838 bytes)
2025-01-31T05:33:28.330Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 724208 bytes)
2025-01-31T05:33:30.452Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 737932 bytes)
2025-01-31T05:33:32.449Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 752897 bytes)
2025-01-31T05:33:34.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 768995 bytes)
2025-01-31T05:33:36.449Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 783952 bytes)
2025-01-31T05:33:38.449Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 50 bytes (total: 799394 bytes)
2025-01-31T05:33:41.491Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 811069 bytes)
2025-01-31T05:33:43.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 823609 bytes)
2025-01-31T05:33:45.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 839367 bytes)
2025-01-31T05:33:47.648Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 853732 bytes)
2025-01-31T05:33:51.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 869647 bytes)
2025-01-31T05:33:53.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 885472 bytes)
2025-01-31T05:33:55.531Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 897256 bytes)
2025-01-31T05:33:57.533Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 911967 bytes)
2025-01-31T05:33:59.525Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 926617 bytes)
2025-01-31T05:34:02.243Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 939284 bytes)
2025-01-31T05:34:06.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 952101 bytes)
2025-01-31T05:34:09.203Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 966479 bytes)
2025-01-31T05:34:11.203Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 981919 bytes)
2025-01-31T05:34:13.584Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 994024 bytes)
2025-01-31T05:34:15.583Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 1008330 bytes)
2025-01-31T05:34:17.585Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1023080 bytes)
2025-01-31T05:34:19.744Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1033699 bytes)
2025-01-31T05:34:22.681Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1044531 bytes)
2025-01-31T05:34:24.766Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1058041 bytes)
2025-01-31T05:34:26.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 1070678 bytes)
2025-01-31T05:34:28.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1085134 bytes)
2025-01-31T05:34:32.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1097506 bytes)
2025-01-31T05:34:34.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1112151 bytes)
2025-01-31T05:34:36.031Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1127130 bytes)
2025-01-31T05:34:39.513Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1139224 bytes)
2025-01-31T05:34:42.192Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1152048 bytes)
2025-01-31T05:34:44.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1166351 bytes)
2025-01-31T05:34:46.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1181792 bytes)
2025-01-31T05:34:48.392Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1196518 bytes)
2025-01-31T05:34:50.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 1211387 bytes)
2025-01-31T05:34:52.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1224845 bytes)
2025-01-31T05:34:54.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1240736 bytes)
2025-01-31T05:34:57.591Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1253107 bytes)
2025-01-31T05:35:00.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1265027 bytes)
2025-01-31T05:35:03.115Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 1280860 bytes)
2025-01-31T05:35:06.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1294000 bytes)
2025-01-31T05:35:08.476Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 73 bytes (total: 1309392 bytes)
2025-01-31T05:35:10.476Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 112 bytes (total: 1323117 bytes)
2025-01-31T05:35:12.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1335958 bytes)
2025-01-31T05:35:14.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1349457 bytes)
2025-01-31T05:35:16.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1365202 bytes)
2025-01-31T05:35:18.813Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1380629 bytes)
2025-01-31T05:35:20.814Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1396629 bytes)
2025-01-31T05:35:22.811Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1410071 bytes)
2025-01-31T05:35:24.815Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1425493 bytes)
2025-01-31T05:35:26.988Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1436883 bytes)
2025-01-31T05:35:28.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1451106 bytes)
2025-01-31T05:35:30.975Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1466845 bytes)
2025-01-31T05:35:32.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 135 bytes (total: 1482181 bytes)
2025-01-31T05:35:34.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1495080 bytes)
2025-01-31T05:35:36.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1510459 bytes)
2025-01-31T05:35:38.972Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1525170 bytes)
2025-01-31T05:35:41.151Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 1538901 bytes)
2025-01-31T05:35:43.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1553101 bytes)
2025-01-31T05:35:45.134Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1567747 bytes)
2025-01-31T05:35:47.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1582031 bytes)
2025-01-31T05:35:49.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1597590 bytes)
2025-01-31T05:35:51.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1611329 bytes)
2025-01-31T05:35:53.694Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1627234 bytes)
2025-01-31T05:35:55.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1643147 bytes)
2025-01-31T05:35:57.696Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1659060 bytes)
2025-01-31T05:35:59.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1673553 bytes)
2025-01-31T05:36:01.695Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1687794 bytes)
2025-01-31T05:36:03.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1703779 bytes)
2025-01-31T05:36:05.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1718194 bytes)
2025-01-31T05:36:07.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1733691 bytes)
2025-01-31T05:36:09.773Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1749472 bytes)
2025-01-31T05:36:12.253Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1762110 bytes)
2025-01-31T05:36:14.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1772687 bytes)
2025-01-31T05:36:18.413Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1787431 bytes)
2025-01-31T05:36:20.414Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1803389 bytes)
2025-01-31T05:36:22.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1817374 bytes)
2025-01-31T05:36:23.230Z [32minfo[39m: Memory Usage:
2025-01-31T05:36:23.231Z [32minfo[39m: rss: 137.61 MB
2025-01-31T05:36:23.233Z [32minfo[39m: heapTotal: 29.71 MB
2025-01-31T05:36:23.234Z [32minfo[39m: heapUsed: 28.33 MB
2025-01-31T05:36:23.235Z [32minfo[39m: external: 12.01 MB
2025-01-31T05:36:23.236Z [32minfo[39m: arrayBuffers: 4.09 MB
2025-01-31T05:36:24.613Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1833628 bytes)
2025-01-31T05:36:26.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1849594 bytes)
2025-01-31T05:36:28.611Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1865298 bytes)
2025-01-31T05:36:30.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1881168 bytes)
2025-01-31T05:36:32.613Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1896895 bytes)
2025-01-31T05:36:34.612Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1912773 bytes)
2025-01-31T05:36:37.606Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:36:37.610Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738301797607-f5x3vqo7qyv.pcm","directory":"temp"}
2025-01-31T05:36:37.614Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:36:37.616Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:36:37.617Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T05:36:37.617Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:36:37.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1927037 bytes)
2025-01-31T05:36:38.622Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T05:36:42.159Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738301497624-23c4271h1c1.pcm to MP3
2025-01-31T05:36:42.160Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738301497624-23c4271h1c1.pcm.mp3","exists":true}
2025-01-31T05:36:42.160Z [32minfo[39m: [TranscriptionService] File stats:{"size":3422301,"created":"2025-01-31T05:36:40.322Z","modified":"2025-01-31T05:36:42.140Z"}
2025-01-31T05:36:42.160Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T05:36:42.160Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T05:36:47.394Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:36:47.398Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:36:49.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 15689 bytes)
2025-01-31T05:36:51.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 29596 bytes)
2025-01-31T05:36:52.380Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:36:54.671Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 41901 bytes)
2025-01-31T05:36:58.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 54007 bytes)
2025-01-31T05:37:00.374Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 69719 bytes)
2025-01-31T05:37:03.434Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 80635 bytes)
2025-01-31T05:37:05.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 95200 bytes)
2025-01-31T05:37:06.038Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2856,"hasContent":true,"text":"user1, user2, user3, user4, user5, user6, user7, user8, user9, ... It's been a long day, I know. Oh,"}
2025-01-31T05:37:06.038Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: user1, user2, user3, user4, user5, user6, user7, user8, user9, ... It's been a long day, I know. Oh, my God! Oh, my God! What did you like about it? Well, I'm sticking to the program. Take it again! F...
2025-01-31T05:37:06.038Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2855,"transcriptSample":"user1, user2, user3, user4, user5, user6, user7, user8, user9, ... It's been a long day, I know. Oh,"}
2025-01-31T05:37:06.038Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T05:37:06.923Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T05:37:06.924Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2855,"transcriptLength":2855,"summary":"user1, user2, user3, user4, user5, user6, user7, user8, user9, ... It's been a long day, I know. Oh,"}
2025-01-31T05:37:06.930Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738301826924.txt","size":2855}
2025-01-31T05:37:06.931Z [31merror[39m: [VoiceRecorder] Error sending to summary channel: startTime is not defined{"stack":"ReferenceError: startTime is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:311:47)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:37:06.931Z [31merror[39m: [VoiceRecorder] Error processing recording: summary is not defined{"stack":"ReferenceError: summary is not defined\n    at VoiceRecorder.sendSummaryToChannel (file:///usr/src/app/src/VoiceRecorder.js:337:121)\n    at VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:131:24)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:64:17)"}
2025-01-31T05:37:06.938Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738301497624-23c4271h1c1.pcm","directory":"/usr/src/app/temp"}
2025-01-31T05:37:06.938Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T05:37:07.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 111225 bytes)
2025-01-31T05:37:10.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 124739 bytes)
2025-01-31T05:37:12.190Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 135452 bytes)
2025-01-31T05:37:15.934Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 149026 bytes)
2025-01-31T05:37:17.935Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 197 bytes (total: 163982 bytes)
2025-01-31T05:37:19.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 129 bytes (total: 180005 bytes)
2025-01-31T05:37:21.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 196038 bytes)
2025-01-31T05:37:23.929Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 211107 bytes)
2025-01-31T05:37:26.531Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 226405 bytes)
2025-01-31T05:37:29.932Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 237520 bytes)
2025-01-31T05:37:32.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 252294 bytes)
2025-01-31T05:37:34.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 268413 bytes)
2025-01-31T05:37:36.296Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 282744 bytes)
2025-01-31T05:37:38.892Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 295488 bytes)
2025-01-31T05:37:40.973Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 309527 bytes)
2025-01-31T05:37:44.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 320758 bytes)
2025-01-31T05:37:46.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 334070 bytes)
2025-01-31T05:37:49.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 347842 bytes)
2025-01-31T05:37:51.194Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 363459 bytes)
2025-01-31T05:37:53.193Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 119 bytes (total: 379247 bytes)
2025-01-31T05:37:55.595Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 390863 bytes)
2025-01-31T05:37:57.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 406537 bytes)
2025-01-31T05:37:59.598Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 422413 bytes)
2025-01-31T05:38:01.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 434940 bytes)
2025-01-31T05:38:04.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 449568 bytes)
2025-01-31T05:38:06.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 463330 bytes)
2025-01-31T05:38:08.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 477783 bytes)
2025-01-31T05:38:10.210Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 492918 bytes)
2025-01-31T05:38:15.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 506176 bytes)
2025-01-31T05:38:17.754Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 518650 bytes)
2025-01-31T05:38:19.755Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 534348 bytes)
2025-01-31T05:38:21.750Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 544932 bytes)
2025-01-31T05:38:25.852Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 554901 bytes)
2025-01-31T05:38:30.490Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 562942 bytes)
2025-01-31T05:38:36.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 576033 bytes)
2025-01-31T05:38:38.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 592095 bytes)
2025-01-31T05:38:40.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 608083 bytes)
2025-01-31T05:38:42.093Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 623130 bytes)
2025-01-31T05:45:35.206Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T05:45:35.249Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T05:45:35.338Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T05:45:35.369Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738301197543-6ln9ztna926.pcm.mp3","age":832939.5581054688,"size":3428661}
2025-01-31T05:45:35.378Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738301497624-23c4271h1c1.pcm.mp3","age":533097.3015136719,"size":3422301}
2025-01-31T05:45:35.392Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738301797607-f5x3vqo7qyv.pcm","age":412526.8005371094,"size":17399040}
2025-01-31T05:45:35.395Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T05:45:35.397Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T05:45:35.397Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T05:45:35.923Z [32minfo[39m: Bot initialized successfully
2025-01-31T05:45:35.972Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T05:45:44.418Z [32minfo[39m: Command Name: setkey
2025-01-31T05:45:44.421Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T05:45:44.645Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T05:45:44.647Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334761517324832860","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:45:44.648Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:45:49.957Z [32minfo[39m: Command Name: record
2025-01-31T05:45:49.961Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T05:45:50.154Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T05:45:50.469Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T05:45:50.471Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T05:45:50.472Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:45:50.472Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T05:45:50.472Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:45:50.473Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738302350473-muwno1v6oqn.pcm","directory":"temp"}
2025-01-31T05:45:50.561Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:45:50.562Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:45:50.562Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T05:45:50.563Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:45:50.563Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T05:45:50.563Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T05:45:50.563Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334761540401889281","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T05:45:50.563Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T05:45:50.589Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:45:50.593Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:45:51.576Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:45:52.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 122 bytes (total: 12321 bytes)
2025-01-31T05:45:54.868Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 25061 bytes)
2025-01-31T05:45:56.947Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 39363 bytes)
2025-01-31T05:45:58.948Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 55494 bytes)
2025-01-31T05:46:00.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 70675 bytes)
2025-01-31T05:46:02.947Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 86108 bytes)
2025-01-31T05:46:04.949Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 102311 bytes)
2025-01-31T05:46:06.951Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 116404 bytes)
2025-01-31T05:46:08.950Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 130681 bytes)
2025-01-31T05:46:11.671Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 144386 bytes)
2025-01-31T05:46:13.667Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 160427 bytes)
2025-01-31T05:46:15.665Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 173502 bytes)
2025-01-31T05:46:20.328Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 185379 bytes)
2025-01-31T05:46:22.329Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 200803 bytes)
2025-01-31T05:46:24.607Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 214370 bytes)
2025-01-31T05:46:26.610Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 65 bytes (total: 229429 bytes)
2025-01-31T05:46:28.606Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 244693 bytes)
2025-01-31T05:46:30.606Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 256074 bytes)
2025-01-31T05:46:32.606Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 270676 bytes)
2025-01-31T05:46:34.971Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 281775 bytes)
2025-01-31T05:46:37.287Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 292831 bytes)
2025-01-31T05:46:39.385Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 306606 bytes)
2025-01-31T05:46:42.227Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 320236 bytes)
2025-01-31T05:46:44.228Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 335014 bytes)
2025-01-31T05:46:46.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 349226 bytes)
2025-01-31T05:46:48.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 364050 bytes)
2025-01-31T05:46:50.227Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 87 bytes (total: 379561 bytes)
2025-01-31T05:46:52.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 394203 bytes)
2025-01-31T05:46:54.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 409937 bytes)
2025-01-31T05:46:56.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 424991 bytes)
2025-01-31T05:46:58.485Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 437744 bytes)
2025-01-31T05:47:03.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 450583 bytes)
2025-01-31T05:47:06.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 464378 bytes)
2025-01-31T05:47:08.827Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 479246 bytes)
2025-01-31T05:47:11.251Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 493780 bytes)
2025-01-31T05:47:13.629Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 507327 bytes)
2025-01-31T05:47:15.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 519741 bytes)
2025-01-31T05:47:17.809Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 534616 bytes)
2025-01-31T05:47:19.806Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 549702 bytes)
2025-01-31T05:47:22.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 563333 bytes)
2025-01-31T05:47:24.148Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 579330 bytes)
2025-01-31T05:47:26.224Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 591921 bytes)
2025-01-31T05:47:28.228Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 607526 bytes)
2025-01-31T05:47:30.231Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 621721 bytes)
2025-01-31T05:47:32.308Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 636284 bytes)
2025-01-31T05:47:34.308Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 651919 bytes)
2025-01-31T05:47:36.306Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 665594 bytes)
2025-01-31T05:47:38.310Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 58 bytes (total: 679629 bytes)
2025-01-31T05:47:40.386Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 201 bytes (total: 691210 bytes)
2025-01-31T05:47:42.468Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 704646 bytes)
2025-01-31T05:47:44.468Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 719130 bytes)
2025-01-31T05:47:46.825Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 730940 bytes)
2025-01-31T05:47:49.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 744273 bytes)
2025-01-31T05:47:51.829Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 760602 bytes)
2025-01-31T05:47:54.069Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 775134 bytes)
2025-01-31T05:47:56.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 789029 bytes)
2025-01-31T05:47:58.447Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 804458 bytes)
2025-01-31T05:48:01.509Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 817197 bytes)
2025-01-31T05:48:03.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 832845 bytes)
2025-01-31T05:48:05.508Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 849066 bytes)
2025-01-31T05:48:07.766Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 862882 bytes)
2025-01-31T05:48:09.763Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 875860 bytes)
2025-01-31T05:48:12.086Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 889144 bytes)
2025-01-31T05:48:14.086Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 905030 bytes)
2025-01-31T05:48:17.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 915975 bytes)
2025-01-31T05:48:19.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 136 bytes (total: 931534 bytes)
2025-01-31T05:48:21.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 947178 bytes)
2025-01-31T05:48:23.227Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 962436 bytes)
2025-01-31T05:48:25.567Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 976349 bytes)
2025-01-31T05:48:27.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 985129 bytes)
2025-01-31T05:48:32.686Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1001316 bytes)
2025-01-31T05:48:40.087Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1015679 bytes)
2025-01-31T05:48:42.087Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1030954 bytes)
2025-01-31T05:48:44.086Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 1043122 bytes)
2025-01-31T05:48:46.087Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1059229 bytes)
2025-01-31T05:48:48.092Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1074680 bytes)
2025-01-31T05:48:50.810Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1089209 bytes)
2025-01-31T05:48:52.806Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1103129 bytes)
2025-01-31T05:48:55.365Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1115764 bytes)
2025-01-31T05:48:58.068Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1129121 bytes)
2025-01-31T05:49:00.147Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1140543 bytes)
2025-01-31T05:49:07.609Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1147493 bytes)
2025-01-31T05:49:10.046Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1159467 bytes)
2025-01-31T05:49:12.767Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 130 bytes (total: 1173427 bytes)
2025-01-31T05:49:14.767Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1189197 bytes)
2025-01-31T05:49:16.847Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1203133 bytes)
2025-01-31T05:49:18.920Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 85 bytes (total: 1218794 bytes)
2025-01-31T05:49:21.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 1226034 bytes)
2025-01-31T05:49:26.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1238683 bytes)
2025-01-31T05:49:28.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1253479 bytes)
2025-01-31T05:49:30.784Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1269011 bytes)
2025-01-31T05:49:32.787Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 1284955 bytes)
2025-01-31T05:49:34.854Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1299476 bytes)
2025-01-31T05:49:38.383Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 100 bytes (total: 1311112 bytes)
2025-01-31T05:49:40.386Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1327157 bytes)
2025-01-31T05:49:42.384Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1342963 bytes)
2025-01-31T05:49:44.384Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 74 bytes (total: 1354967 bytes)
2025-01-31T05:49:49.006Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 1369269 bytes)
2025-01-31T05:49:51.249Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1381839 bytes)
2025-01-31T05:49:53.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1394207 bytes)
2025-01-31T05:49:57.625Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1405827 bytes)
2025-01-31T05:49:59.705Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 117 bytes (total: 1417047 bytes)
2025-01-31T05:50:06.168Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1430302 bytes)
2025-01-31T05:50:08.165Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1446293 bytes)
2025-01-31T05:50:10.166Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1462235 bytes)
2025-01-31T05:50:12.326Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1475851 bytes)
2025-01-31T05:50:14.663Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1485053 bytes)
2025-01-31T05:50:18.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1496202 bytes)
2025-01-31T05:50:20.106Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1509721 bytes)
2025-01-31T05:50:22.184Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1522099 bytes)
2025-01-31T05:50:25.928Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 1534446 bytes)
2025-01-31T05:50:28.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1542745 bytes)
2025-01-31T05:50:31.063Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1556944 bytes)
2025-01-31T05:50:33.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1572894 bytes)
2025-01-31T05:50:35.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1588723 bytes)
2025-01-31T05:50:35.207Z [32minfo[39m: Memory Usage:
2025-01-31T05:50:35.209Z [32minfo[39m: rss: 135.81 MB
2025-01-31T05:50:35.209Z [32minfo[39m: heapTotal: 28.71 MB
2025-01-31T05:50:35.210Z [32minfo[39m: heapUsed: 27.34 MB
2025-01-31T05:50:35.210Z [32minfo[39m: external: 8.62 MB
2025-01-31T05:50:35.210Z [32minfo[39m: arrayBuffers: 0.69 MB
2025-01-31T05:50:37.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1602346 bytes)
2025-01-31T05:50:39.784Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 1615177 bytes)
2025-01-31T05:50:41.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1630649 bytes)
2025-01-31T05:50:43.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1645634 bytes)
2025-01-31T05:50:45.786Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1661478 bytes)
2025-01-31T05:50:47.785Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1677339 bytes)
2025-01-31T05:50:49.784Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1692318 bytes)
2025-01-31T05:50:50.582Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T05:50:50.587Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738302650584-arz0r2yuwfi.pcm","directory":"temp"}
2025-01-31T05:50:50.592Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T05:50:50.595Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T05:50:50.595Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T05:50:50.596Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T05:50:51.618Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T05:50:54.523Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T05:50:54.524Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T05:50:55.200Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738302350473-muwno1v6oqn.pcm to MP3
2025-01-31T05:50:55.201Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738302350473-muwno1v6oqn.pcm.mp3","exists":true}
2025-01-31T05:50:55.202Z [32minfo[39m: [TranscriptionService] File stats:{"size":3041301,"created":"2025-01-31T05:50:53.497Z","modified":"2025-01-31T05:50:55.174Z"}
2025-01-31T05:50:55.203Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T05:50:55.203Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T05:50:55.689Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T05:50:56.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 12079 bytes)
2025-01-31T05:51:00.725Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 186 bytes (total: 24783 bytes)
2025-01-31T05:51:02.723Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 39699 bytes)
2025-01-31T05:51:04.805Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 54961 bytes)
2025-01-31T05:51:06.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 70678 bytes)
2025-01-31T05:51:08.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 85528 bytes)
2025-01-31T05:51:10.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 98115 bytes)
2025-01-31T05:51:11.094Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":168,"hasContent":true,"text":"Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Song"}
2025-01-31T05:51:11.095Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories....
2025-01-31T05:51:11.096Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":167,"transcriptSample":"Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Song"}
2025-01-31T05:51:11.096Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T05:51:11.780Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T05:51:11.781Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":167,"transcriptLength":167,"summary":"Songs are like stories. Songs are like stories. Songs are like stories. Songs are like stories. Song"}
2025-01-31T05:51:11.786Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738302671781.txt","size":167}
2025-01-31T05:51:11.787Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T05:51:12.028Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T05:51:12.048Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738302350473-muwno1v6oqn.pcm","directory":"/usr/src/app/temp"}
2025-01-31T05:51:12.051Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738302350473-muwno1v6oqn.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T05:51:12.051Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T05:51:12.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 111545 bytes)
2025-01-31T05:51:14.886Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 127505 bytes)
2025-01-31T05:51:16.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 142605 bytes)
2025-01-31T05:51:18.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 157414 bytes)
2025-01-31T05:51:20.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 173028 bytes)
2025-01-31T05:51:22.887Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 188709 bytes)
2025-01-31T05:51:24.886Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 204578 bytes)
2025-01-31T05:51:26.885Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 220044 bytes)
2025-01-31T05:51:28.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 236010 bytes)
2025-01-31T05:51:30.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 251807 bytes)
2025-01-31T05:51:34.063Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 266179 bytes)
2025-01-31T05:51:36.065Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 281547 bytes)
2025-01-31T05:51:38.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 297643 bytes)
2025-01-31T05:51:40.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 311870 bytes)
2025-01-31T05:51:42.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 327367 bytes)
2025-01-31T05:51:44.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 343599 bytes)
2025-01-31T05:51:46.464Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 357633 bytes)
2025-01-31T05:51:48.781Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 371750 bytes)
2025-01-31T05:51:51.905Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 384970 bytes)
2025-01-31T05:51:53.904Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 400877 bytes)
2025-01-31T05:51:55.985Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 414372 bytes)
2025-01-31T05:51:58.075Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 427482 bytes)
2025-01-31T05:52:00.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 443425 bytes)
2025-01-31T05:52:02.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 458361 bytes)
2025-01-31T05:52:04.064Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 474317 bytes)
2025-01-31T05:52:06.066Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 490064 bytes)
2025-01-31T05:52:09.505Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 504573 bytes)
2025-01-31T05:52:11.504Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 518826 bytes)
2025-01-31T05:52:13.504Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 534707 bytes)
2025-01-31T05:52:15.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 549231 bytes)
2025-01-31T05:52:17.503Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 565264 bytes)
2025-01-31T05:52:19.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 578028 bytes)
2025-01-31T05:52:21.863Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 593994 bytes)
2025-01-31T05:52:23.884Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 609858 bytes)
2025-01-31T05:52:25.867Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 625853 bytes)
2025-01-31T05:52:27.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 641845 bytes)
2025-01-31T05:52:29.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 657474 bytes)
2025-01-31T05:52:33.565Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 671890 bytes)
2025-01-31T05:52:36.122Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 137 bytes (total: 684954 bytes)
2025-01-31T05:52:38.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 700897 bytes)
2025-01-31T05:52:40.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 716223 bytes)
2025-01-31T05:52:42.129Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 732436 bytes)
2025-01-31T05:52:44.125Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 748385 bytes)
2025-01-31T05:52:46.128Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 764221 bytes)
2025-01-31T05:52:48.126Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 778766 bytes)
2025-01-31T05:52:50.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 793385 bytes)
2025-01-31T05:52:52.224Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 808436 bytes)
2025-01-31T05:52:54.223Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 823211 bytes)
2025-01-31T05:52:56.244Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 838789 bytes)
2025-01-31T05:52:58.226Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 854688 bytes)
2025-01-31T05:53:00.223Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 868488 bytes)
2025-01-31T05:53:02.225Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 884472 bytes)
2025-01-31T05:53:04.303Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 898875 bytes)
2025-01-31T05:53:06.305Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 914768 bytes)
2025-01-31T05:53:08.387Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 928930 bytes)
2025-01-31T05:53:10.385Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 943788 bytes)
2025-01-31T05:53:12.804Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 955827 bytes)
2025-01-31T05:53:14.805Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 970060 bytes)
2025-01-31T05:53:16.803Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 986094 bytes)
2025-01-31T05:53:18.882Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1000435 bytes)
2025-01-31T05:53:22.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1012190 bytes)
2025-01-31T05:53:24.264Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1026954 bytes)
2025-01-31T05:53:26.267Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1042437 bytes)
2025-01-31T05:53:28.262Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1057662 bytes)
2025-01-31T05:53:30.268Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1073513 bytes)
2025-01-31T05:53:32.265Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1089369 bytes)
2025-01-31T05:53:34.345Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1103987 bytes)
2025-01-31T05:53:36.344Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1119670 bytes)
2025-01-31T05:53:38.347Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1135593 bytes)
2025-01-31T05:53:40.425Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1149401 bytes)
2025-01-31T05:53:42.625Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1163244 bytes)
2025-01-31T05:53:44.624Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1179129 bytes)
2025-01-31T05:53:46.627Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1195216 bytes)
2025-01-31T05:53:48.823Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1209423 bytes)
2025-01-31T05:53:50.826Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1222936 bytes)
2025-01-31T05:53:53.865Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1235181 bytes)
2025-01-31T05:53:55.865Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1249664 bytes)
2025-01-31T05:53:57.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1265637 bytes)
2025-01-31T05:53:59.866Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1281689 bytes)
2025-01-31T05:54:01.864Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1297471 bytes)
2025-01-31T05:54:03.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1311670 bytes)
2025-01-31T05:54:05.943Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1327580 bytes)
2025-01-31T05:54:07.945Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 189 bytes (total: 1342365 bytes)
2025-01-31T05:54:09.942Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1357819 bytes)
2025-01-31T05:54:11.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 109 bytes (total: 1373030 bytes)
2025-01-31T05:54:13.945Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 1389136 bytes)
2025-01-31T05:54:15.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1403733 bytes)
2025-01-31T05:54:17.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1419150 bytes)
2025-01-31T05:54:19.943Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1433121 bytes)
2025-01-31T05:54:21.942Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1447656 bytes)
2025-01-31T05:54:23.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1463603 bytes)
2025-01-31T05:54:25.944Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1479328 bytes)
2025-01-31T05:54:27.943Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1495155 bytes)
2025-01-31T05:54:30.025Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1509441 bytes)
2025-01-31T05:54:32.023Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1525609 bytes)
2025-01-31T05:54:34.026Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1540268 bytes)
2025-01-31T05:54:36.023Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1556160 bytes)
2025-01-31T05:54:38.023Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1571525 bytes)
2025-01-31T05:54:40.024Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1587485 bytes)
2025-01-31T05:54:43.387Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1600169 bytes)
2025-01-31T05:54:45.385Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1616409 bytes)
2025-01-31T05:54:47.384Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1632007 bytes)
2025-01-31T05:54:49.386Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1647642 bytes)
2025-01-31T05:54:51.645Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1661020 bytes)
2025-01-31T05:54:53.646Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1676097 bytes)
2025-01-31T05:54:55.645Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1691476 bytes)
2025-01-31T05:54:57.924Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1705537 bytes)
2025-01-31T05:54:59.922Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1721256 bytes)
2025-01-31T05:55:01.924Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1737390 bytes)
2025-01-31T05:55:03.923Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1753195 bytes)
2025-01-31T05:55:05.924Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 1769043 bytes)
2025-01-31T05:55:07.923Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1785146 bytes)
2025-01-31T05:55:09.921Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 1800494 bytes)
2025-01-31T05:55:11.923Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1816711 bytes)
2025-01-31T05:55:14.704Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1829890 bytes)
2025-01-31T05:55:16.704Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1846073 bytes)
2025-01-31T05:55:18.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1861927 bytes)
2025-01-31T05:55:20.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1877413 bytes)
2025-01-31T05:55:22.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1893550 bytes)
2025-01-31T05:55:24.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1909325 bytes)
2025-01-31T05:55:26.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1925246 bytes)
2025-01-31T05:55:28.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1940627 bytes)
2025-01-31T05:55:30.703Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 1956600 bytes)
2025-01-31T05:55:32.705Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1972537 bytes)
2025-01-31T05:55:52.031Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T05:55:52.065Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T05:55:52.133Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-01-31T05:55:52.154Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738302650584-arz0r2yuwfi.pcm","age":19132.287353515625,"size":50346240}
2025-01-31T05:55:52.159Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T05:55:52.160Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T05:55:52.160Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T05:55:52.597Z [32minfo[39m: Bot initialized successfully
2025-01-31T05:55:52.630Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T06:01:23.815Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T06:01:23.856Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T06:01:23.934Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T06:01:23.940Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T06:01:23.962Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T06:01:23.962Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T06:01:24.414Z [32minfo[39m: Bot initialized successfully
2025-01-31T06:01:24.472Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T06:01:36.803Z [32minfo[39m: Command Name: setkey
2025-01-31T06:01:36.806Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T06:01:37.053Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T06:01:37.056Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334765511958986792","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T06:01:37.057Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T06:01:42.153Z [32minfo[39m: Command Name: record
2025-01-31T06:01:42.155Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T06:01:42.460Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T06:01:42.728Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T06:01:42.731Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T06:01:42.732Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T06:01:42.732Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T06:01:42.733Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:01:42.734Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738303302734-krlvtofp90r.pcm","directory":"temp"}
2025-01-31T06:01:42.820Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:01:42.821Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:01:42.821Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T06:01:42.821Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:01:42.821Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T06:01:42.821Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T06:01:42.821Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334765534201380906","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T06:01:42.821Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T06:01:42.837Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T06:01:42.838Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T06:01:43.871Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T06:01:44.842Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 11934 bytes)
2025-01-31T06:01:47.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 23675 bytes)
2025-01-31T06:01:49.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 39595 bytes)
2025-01-31T06:01:52.860Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 143 bytes (total: 53149 bytes)
2025-01-31T06:01:54.860Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 67468 bytes)
2025-01-31T06:01:56.859Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 83160 bytes)
2025-01-31T06:01:58.860Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 99124 bytes)
2025-01-31T06:02:01.501Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 113539 bytes)
2025-01-31T06:02:03.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 129523 bytes)
2025-01-31T06:02:05.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 144793 bytes)
2025-01-31T06:02:07.640Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 158957 bytes)
2025-01-31T06:02:09.637Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 171137 bytes)
2025-01-31T06:02:12.702Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 186624 bytes)
2025-01-31T06:02:14.700Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 202704 bytes)
2025-01-31T06:02:16.700Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 218691 bytes)
2025-01-31T06:02:18.700Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 234501 bytes)
2025-01-31T06:02:21.080Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 248647 bytes)
2025-01-31T06:02:23.079Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 264357 bytes)
2025-01-31T06:02:25.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 278213 bytes)
2025-01-31T06:02:27.160Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 293840 bytes)
2025-01-31T06:02:29.160Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 308953 bytes)
2025-01-31T06:02:31.159Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 325099 bytes)
2025-01-31T06:02:33.241Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 338975 bytes)
2025-01-31T06:02:35.239Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 354779 bytes)
2025-01-31T06:02:37.240Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 369248 bytes)
2025-01-31T06:02:40.543Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 382087 bytes)
2025-01-31T06:02:42.536Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 396935 bytes)
2025-01-31T06:02:44.819Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 411227 bytes)
2025-01-31T06:02:46.820Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 426393 bytes)
2025-01-31T06:02:48.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 441475 bytes)
2025-01-31T06:02:50.822Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 457287 bytes)
2025-01-31T06:02:53.061Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 470055 bytes)
2025-01-31T06:02:55.059Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 485964 bytes)
2025-01-31T06:02:57.139Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 498489 bytes)
2025-01-31T06:02:59.142Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 113 bytes (total: 513605 bytes)
2025-01-31T06:03:01.139Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 529117 bytes)
2025-01-31T06:03:03.140Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 544440 bytes)
2025-01-31T06:03:05.137Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 557827 bytes)
2025-01-31T06:03:07.499Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 125 bytes (total: 573141 bytes)
2025-01-31T06:03:09.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 589313 bytes)
2025-01-31T06:03:11.497Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 604282 bytes)
2025-01-31T06:03:13.500Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 620256 bytes)
2025-01-31T06:03:15.759Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 633177 bytes)
2025-01-31T06:03:17.760Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 648810 bytes)
2025-01-31T06:03:19.760Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 664886 bytes)
2025-01-31T06:03:21.757Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 679850 bytes)
2025-01-31T06:03:25.380Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 689758 bytes)
2025-01-31T06:03:27.381Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 704468 bytes)
2025-01-31T06:03:29.380Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 93 bytes (total: 719061 bytes)
2025-01-31T06:03:31.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 735048 bytes)
2025-01-31T06:03:33.378Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 749656 bytes)
2025-01-31T06:03:35.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 762789 bytes)
2025-01-31T06:03:37.820Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 777599 bytes)
2025-01-31T06:03:39.822Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 793225 bytes)
2025-01-31T06:03:41.820Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 809239 bytes)
2025-01-31T06:03:44.000Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 823642 bytes)
2025-01-31T06:03:45.998Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 839566 bytes)
2025-01-31T06:03:48.000Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 855464 bytes)
2025-01-31T06:03:50.579Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 868087 bytes)
2025-01-31T06:03:52.879Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 878967 bytes)
2025-01-31T06:03:54.878Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 893588 bytes)
2025-01-31T06:03:58.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 907002 bytes)
2025-01-31T06:04:01.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 178 bytes (total: 917115 bytes)
2025-01-31T06:04:03.740Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 931332 bytes)
2025-01-31T06:04:07.380Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 942892 bytes)
2025-01-31T06:04:09.379Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 957892 bytes)
2025-01-31T06:04:11.380Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 972691 bytes)
2025-01-31T06:04:13.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 988296 bytes)
2025-01-31T06:04:15.582Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 138 bytes (total: 1000414 bytes)
2025-01-31T06:04:18.597Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1011940 bytes)
2025-01-31T06:04:21.139Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1027270 bytes)
2025-01-31T06:04:23.138Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 127 bytes (total: 1041127 bytes)
2025-01-31T06:04:25.140Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1056844 bytes)
2025-01-31T06:04:27.145Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1071868 bytes)
2025-01-31T06:04:29.140Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1085672 bytes)
2025-01-31T06:04:31.217Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1100243 bytes)
2025-01-31T06:04:33.220Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1115477 bytes)
2025-01-31T06:04:35.219Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 98 bytes (total: 1130873 bytes)
2025-01-31T06:04:37.220Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1146155 bytes)
2025-01-31T06:04:39.221Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1161950 bytes)
2025-01-31T06:04:41.222Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1177366 bytes)
2025-01-31T06:04:43.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1190190 bytes)
2025-01-31T06:04:45.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1204722 bytes)
2025-01-31T06:04:47.518Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1220801 bytes)
2025-01-31T06:04:51.039Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1234990 bytes)
2025-01-31T06:04:53.039Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1251047 bytes)
2025-01-31T06:04:57.742Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1261807 bytes)
2025-01-31T06:04:59.740Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1276873 bytes)
2025-01-31T06:05:01.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1292557 bytes)
2025-01-31T06:05:03.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1308432 bytes)
2025-01-31T06:05:05.738Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1323306 bytes)
2025-01-31T06:05:07.739Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1338798 bytes)
2025-01-31T06:05:09.818Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 1351741 bytes)
2025-01-31T06:05:11.821Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 1367829 bytes)
2025-01-31T06:05:14.838Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1377261 bytes)
2025-01-31T06:05:16.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 107 bytes (total: 1393233 bytes)
2025-01-31T06:05:18.839Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1409216 bytes)
2025-01-31T06:05:21.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 141 bytes (total: 1421175 bytes)
2025-01-31T06:05:23.299Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1437327 bytes)
2025-01-31T06:05:26.118Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 1451524 bytes)
2025-01-31T06:05:28.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1462877 bytes)
2025-01-31T06:05:30.420Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 132 bytes (total: 1478591 bytes)
2025-01-31T06:05:32.418Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1492968 bytes)
2025-01-31T06:05:34.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 1508329 bytes)
2025-01-31T06:05:36.417Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 126 bytes (total: 1523783 bytes)
2025-01-31T06:05:38.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 1538946 bytes)
2025-01-31T06:05:40.419Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 1554223 bytes)
2025-01-31T06:05:42.517Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 110 bytes (total: 1568520 bytes)
2025-01-31T06:05:42.827Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:05:42.832Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm","directory":"temp"}
2025-01-31T06:05:42.836Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:05:42.838Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:05:42.838Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T06:05:42.838Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:05:43.519Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T06:05:43.520Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T06:05:43.853Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T06:05:47.531Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738303302734-krlvtofp90r.pcm to MP3
2025-01-31T06:05:47.532Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738303302734-krlvtofp90r.pcm.mp3","exists":true}
2025-01-31T06:05:47.533Z [32minfo[39m: [TranscriptionService] File stats:{"size":2761005,"created":"2025-01-31T06:05:45.930Z","modified":"2025-01-31T06:05:47.489Z"}
2025-01-31T06:05:47.535Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T06:05:47.536Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T06:05:56.914Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":2226,"hasContent":true,"text":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that m"}
2025-01-31T06:05:56.914Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that most zoos do not have, see-through bathrooms, do you want to walk through that? Whiskey Steve has gon...
2025-01-31T06:05:56.915Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2225,"transcriptSample":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that m"}
2025-01-31T06:05:56.915Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T06:05:57.511Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T06:05:57.512Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T06:05:59.516Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T06:05:59.740Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T06:06:04.196Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2045,"transcriptLength":2225,"summary":"***The group discusses starting a business venture involving a petting zoo with unique amenities, le"}
2025-01-31T06:06:04.224Z [32minfo[39m: [JobService] Scheduled job in queue summary-generation:{"jobId":"101","data":{"guildId":"1315144523336122469","transcript":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that most zoos do not have, see-through bathrooms, do you want to walk through that? Whiskey Steve has gone rogue. Have you ever gone to the zoo and seen like a monkey peeing? It's not something, so at the Robson and Horman Barred Petting Zoo, you just go into the thing and you just pee wherever you want. Well, that's, you know, we'll have services there to take you home. Whiskey Steve is behind the wheel right now. I brought a pretty good heavy metal band, what do you think this sounds like? Get it together. Nobody said to do that. Get it together and stop doing shots of whiskey. He's seducing you with spirits. What did you say? I'm stoic, my feet can't move, but I'm not gonna lie, I'm a little... Okay, I'm okay. Raise your hand if you want to invest in the Zoo Bar. Please raise your hand if you would invest in the Robson and Horman Ranch Barred Petting Zoo and stand on. They had drunk themselves by association. I'm Sal's Steve. I'm the creative guy, he's my money guy. It is important to note that Steve and Q are now drunk, and Sal's... So, the business we are starting today is called Tramps. I know most folks out there would be thinking, how does Ja Rule fit into all this? Yeah, yeah, yeah, yeah. No. This is multifaceted. The social space, you get the tap screen, but on off hours we also do begin a physical therapy. No, no, no, no. The best part, which we've never mentioned, we got mint tea instead of half off. Sal, get this guy under control. Let me just explain that. We are not going to charge people that can't jump on the trampolines full price. Do we have anything else to add? That's smart. No recipe. Why not? On the trampolines called a milkshake. I'm the money guy. How many of you guys think that we're in good shape to bring this presentation out to investors? Fair enough. You were great. Thanks. I flew out to Nashville. Sal got burned, making him tonight's big loser. You guys want to play some three on one? No, Sal is our loser. But fun fact, he's also a sneakerhead. Absolutely correct. For your punishment, Anthony Davis wanted to give you a gift. These are yours. It's crazy. That was."}}
2025-01-31T06:06:04.224Z [32minfo[39m: [SummaryJobService] Scheduled summary generation for guild 1315144523336122469 with 5000ms delay
2025-01-31T06:06:04.225Z [32minfo[39m: [VoiceRecorder] Scheduled summary generation for guild 1315144523336122469 with job ID: 101
2025-01-31T06:06:04.228Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738303564225.txt","size":2225}
2025-01-31T06:06:04.229Z [33mwarn[39m: [ChannelService] Message is too long (2070 chars), splitting into chunks
2025-01-31T06:06:04.801Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T06:06:04.824Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738303302734-krlvtofp90r.pcm","directory":"/usr/src/app/temp"}
2025-01-31T06:06:04.826Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738303302734-krlvtofp90r.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T06:06:04.827Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T06:06:09.228Z [32minfo[39m: [JobService] Processing job in queue summary-generation:{"jobId":"101","data":{"guildId":"1315144523336122469","transcript":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that most zoos do not have, see-through bathrooms, do you want to walk through that? Whiskey Steve has gone rogue. Have you ever gone to the zoo and seen like a monkey peeing? It's not something, so at the Robson and Horman Barred Petting Zoo, you just go into the thing and you just pee wherever you want. Well, that's, you know, we'll have services there to take you home. Whiskey Steve is behind the wheel right now. I brought a pretty good heavy metal band, what do you think this sounds like? Get it together. Nobody said to do that. Get it together and stop doing shots of whiskey. He's seducing you with spirits. What did you say? I'm stoic, my feet can't move, but I'm not gonna lie, I'm a little... Okay, I'm okay. Raise your hand if you want to invest in the Zoo Bar. Please raise your hand if you would invest in the Robson and Horman Ranch Barred Petting Zoo and stand on. They had drunk themselves by association. I'm Sal's Steve. I'm the creative guy, he's my money guy. It is important to note that Steve and Q are now drunk, and Sal's... So, the business we are starting today is called Tramps. I know most folks out there would be thinking, how does Ja Rule fit into all this? Yeah, yeah, yeah, yeah. No. This is multifaceted. The social space, you get the tap screen, but on off hours we also do begin a physical therapy. No, no, no, no. The best part, which we've never mentioned, we got mint tea instead of half off. Sal, get this guy under control. Let me just explain that. We are not going to charge people that can't jump on the trampolines full price. Do we have anything else to add? That's smart. No recipe. Why not? On the trampolines called a milkshake. I'm the money guy. How many of you guys think that we're in good shape to bring this presentation out to investors? Fair enough. You were great. Thanks. I flew out to Nashville. Sal got burned, making him tonight's big loser. You guys want to play some three on one? No, Sal is our loser. But fun fact, he's also a sneakerhead. Absolutely correct. For your punishment, Anthony Davis wanted to give you a gift. These are yours. It's crazy. That was."}}
2025-01-31T06:06:09.229Z [32minfo[39m: [SummaryJobService] Processing summary for guild 1315144523336122469
2025-01-31T06:06:09.229Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":2225,"transcriptSample":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that m"}
2025-01-31T06:06:09.229Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T06:06:09.871Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T06:06:09.872Z [32minfo[39m: [TranscriptionService] Retry 2/4, waiting 2000ms
2025-01-31T06:06:11.876Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo
2025-01-31T06:06:12.544Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T06:06:12.544Z [32minfo[39m: [TranscriptionService] Retry 3/4, waiting 4000ms
2025-01-31T06:06:16.548Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4-turbo-preview
2025-01-31T06:06:18.158Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T06:06:18.159Z [32minfo[39m: [TranscriptionService] Retry 4/4, waiting 6000ms
2025-01-31T06:06:23.816Z [32minfo[39m: Memory Usage:
2025-01-31T06:06:23.818Z [32minfo[39m: rss: 143.52 MB
2025-01-31T06:06:23.819Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T06:06:23.819Z [32minfo[39m: heapUsed: 27.62 MB
2025-01-31T06:06:23.820Z [32minfo[39m: external: 8.11 MB
2025-01-31T06:06:23.820Z [32minfo[39m: arrayBuffers: 0.19 MB
2025-01-31T06:06:24.160Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-3.5-turbo-16k
2025-01-31T06:06:24.531Z [33mwarn[39m: [TranscriptionService] No valid summary generated, retrying...{"responseContent":"No transcript available."}
2025-01-31T06:06:24.532Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":2225,"transcriptLength":2225,"summary":"And another one, on the cog, cat and dog. There's access to this, quote-unquote, petting zoo, that m"}
2025-01-31T06:06:24.532Z [33mwarn[39m: [ChannelService] Message is too long (2292 chars), splitting into chunks
2025-01-31T06:06:25.248Z [32minfo[39m: [SummaryJobService] Successfully generated background summary for guild 1315144523336122469
2025-01-31T06:06:25.258Z [32minfo[39m: [JobService] Job completed in queue summary-generation:{"jobId":"101","result":{"success":true,"guildId":"1315144523336122469","timestamp":1738303584532}}
2025-01-31T06:09:42.844Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:09:42.855Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738303782851-tulh6ckbfs.pcm","directory":"temp"}
2025-01-31T06:09:42.862Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:09:42.863Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:09:42.863Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T06:09:42.863Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:09:43.875Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T06:09:45.346Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T06:09:45.350Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T06:09:45.703Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm to MP3
2025-01-31T06:09:45.704Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm.mp3","exists":true}
2025-01-31T06:09:45.705Z [32minfo[39m: [TranscriptionService] File stats:{"size":5373,"created":"2025-01-31T06:09:45.621Z","modified":"2025-01-31T06:09:45.673Z"}
2025-01-31T06:09:45.705Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T06:09:45.705Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T06:09:45.956Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T06:09:47.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 12347 bytes)
2025-01-31T06:09:49.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 27620 bytes)
2025-01-31T06:09:50.050Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T06:09:50.051Z [33mwarn[39m: [TranscriptionService] Transcription attempt 1 failed:{"error":"Empty transcription received"}
2025-01-31T06:09:50.052Z [32minfo[39m: [TranscriptionService] Retry 2/3, waiting 2000ms
2025-01-31T06:09:51.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 41305 bytes)
2025-01-31T06:09:52.056Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 2/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm.mp3","exists":true}
2025-01-31T06:09:52.058Z [32minfo[39m: [TranscriptionService] File stats:{"size":5373,"created":"2025-01-31T06:09:45.621Z","modified":"2025-01-31T06:09:45.673Z"}
2025-01-31T06:09:52.058Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T06:09:52.059Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T06:09:53.877Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 56027 bytes)
2025-01-31T06:09:54.163Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T06:09:54.165Z [33mwarn[39m: [TranscriptionService] Transcription attempt 2 failed:{"error":"Empty transcription received"}
2025-01-31T06:09:54.166Z [32minfo[39m: [TranscriptionService] Retry 3/3, waiting 4000ms
2025-01-31T06:09:55.875Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 71472 bytes)
2025-01-31T06:09:57.878Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 86618 bytes)
2025-01-31T06:09:58.169Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 3/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm.mp3","exists":true}
2025-01-31T06:09:58.170Z [32minfo[39m: [TranscriptionService] File stats:{"size":5373,"created":"2025-01-31T06:09:45.621Z","modified":"2025-01-31T06:09:45.673Z"}
2025-01-31T06:09:58.170Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T06:09:58.170Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T06:10:00.476Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 97370 bytes)
2025-01-31T06:10:03.051Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":1,"hasContent":true,"text":"\n"}
2025-01-31T06:10:03.056Z [31merror[39m: [TranscriptionService] Transcription failed after all retries:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:195:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:141:35)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:76:17)"}
2025-01-31T06:10:03.058Z [31merror[39m: [VoiceRecorder] Error transcribing or saving transcript:{"error":"Empty transcription received","stack":"Error: Empty transcription received\n    at TranscriptionService.transcribeAudio (file:///usr/src/app/src/services/TranscriptionService.js:88:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async VoiceRecorder.TrascribeAndSummarize (file:///usr/src/app/src/VoiceRecorder.js:195:30)\n    at async VoiceRecorder.processRotatedRecording (file:///usr/src/app/src/VoiceRecorder.js:141:35)\n    at async VoiceRecorder.rotateStreams (file:///usr/src/app/src/VoiceRecorder.js:76:17)","guildId":"1315144523336122469","fileSize":61440}
2025-01-31T06:10:03.059Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T06:10:03.330Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T06:10:03.333Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm","directory":"/usr/src/app/temp"}
2025-01-31T06:10:03.334Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738303542829-b57hrf0mc6.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T06:10:03.334Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T06:10:11.475Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 105993 bytes)
2025-01-31T06:10:14.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 118860 bytes)
2025-01-31T06:10:16.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 134393 bytes)
2025-01-31T06:10:18.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 150345 bytes)
2025-01-31T06:10:20.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 166264 bytes)
2025-01-31T06:10:22.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 180683 bytes)
2025-01-31T06:10:24.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 116 bytes (total: 195812 bytes)
2025-01-31T06:10:26.271Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 209792 bytes)
2025-01-31T06:10:28.274Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 225833 bytes)
2025-01-31T06:10:30.275Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 241530 bytes)
2025-01-31T06:10:35.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 253808 bytes)
2025-01-31T06:10:37.077Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 268372 bytes)
2025-01-31T06:10:39.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 283919 bytes)
2025-01-31T06:10:41.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 298214 bytes)
2025-01-31T06:10:43.076Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 313439 bytes)
2025-01-31T06:10:45.074Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 328326 bytes)
2025-01-31T06:10:47.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 341593 bytes)
2025-01-31T06:10:49.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 355520 bytes)
2025-01-31T06:10:51.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 371639 bytes)
2025-01-31T06:10:53.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 387516 bytes)
2025-01-31T06:10:55.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 403356 bytes)
2025-01-31T06:10:57.232Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 417262 bytes)
2025-01-31T06:10:59.235Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 433346 bytes)
2025-01-31T06:11:03.674Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 445132 bytes)
2025-01-31T06:11:06.431Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 56 bytes (total: 455029 bytes)
2025-01-31T06:11:11.097Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 59 bytes (total: 463437 bytes)
2025-01-31T06:11:13.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 477048 bytes)
2025-01-31T06:11:15.414Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 488802 bytes)
2025-01-31T06:11:17.415Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 51 bytes (total: 503921 bytes)
2025-01-31T06:11:20.894Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 55 bytes (total: 511876 bytes)
2025-01-31T06:11:23.838Z [32minfo[39m: Memory Usage:
2025-01-31T06:11:23.839Z [32minfo[39m: rss: 144.59 MB
2025-01-31T06:11:23.840Z [32minfo[39m: heapTotal: 30.46 MB
2025-01-31T06:11:23.841Z [32minfo[39m: heapUsed: 28.7 MB
2025-01-31T06:11:23.841Z [32minfo[39m: external: 8.4 MB
2025-01-31T06:11:23.841Z [32minfo[39m: arrayBuffers: 0.48 MB
2025-01-31T06:11:26.834Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 519761 bytes)
2025-01-31T06:11:29.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 531481 bytes)
2025-01-31T06:11:31.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 547405 bytes)
2025-01-31T06:11:33.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 563270 bytes)
2025-01-31T06:11:35.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 576944 bytes)
2025-01-31T06:11:37.073Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 592639 bytes)
2025-01-31T06:11:39.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 606129 bytes)
2025-01-31T06:11:41.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 620002 bytes)
2025-01-31T06:11:43.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 636014 bytes)
2025-01-31T06:11:45.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 651984 bytes)
2025-01-31T06:11:47.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 667967 bytes)
2025-01-31T06:11:49.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 142 bytes (total: 684100 bytes)
2025-01-31T06:11:51.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 699512 bytes)
2025-01-31T06:11:53.332Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 713850 bytes)
2025-01-31T06:11:56.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 727719 bytes)
2025-01-31T06:11:58.051Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 743548 bytes)
2025-01-31T06:12:00.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 757084 bytes)
2025-01-31T06:12:02.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 120 bytes (total: 771375 bytes)
2025-01-31T06:12:04.055Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 787590 bytes)
2025-01-31T06:12:06.050Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 802940 bytes)
2025-01-31T06:12:08.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 817542 bytes)
2025-01-31T06:12:10.052Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 833094 bytes)
2025-01-31T06:12:12.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 846741 bytes)
2025-01-31T06:12:16.071Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 856062 bytes)
2025-01-31T06:12:18.156Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 115 bytes (total: 871528 bytes)
2025-01-31T06:12:20.154Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 886018 bytes)
2025-01-31T06:12:22.155Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 152 bytes (total: 901946 bytes)
2025-01-31T06:12:24.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 918164 bytes)
2025-01-31T06:12:26.794Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 931764 bytes)
2025-01-31T06:12:28.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 947691 bytes)
2025-01-31T06:12:30.795Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 963784 bytes)
2025-01-31T06:12:35.273Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 976010 bytes)
2025-01-31T06:12:37.272Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 992001 bytes)
2025-01-31T06:12:39.655Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1004220 bytes)
2025-01-31T06:12:41.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1020190 bytes)
2025-01-31T06:12:43.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1035433 bytes)
2025-01-31T06:12:45.651Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1049530 bytes)
2025-01-31T06:12:47.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1064783 bytes)
2025-01-31T06:12:50.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1076997 bytes)
2025-01-31T06:12:52.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1092769 bytes)
2025-01-31T06:12:54.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1108731 bytes)
2025-01-31T06:12:56.472Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 1124825 bytes)
2025-01-31T06:12:58.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1139025 bytes)
2025-01-31T06:13:00.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1152251 bytes)
2025-01-31T06:13:02.479Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 124 bytes (total: 1165926 bytes)
2025-01-31T06:13:04.471Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1179894 bytes)
2025-01-31T06:13:08.152Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1190972 bytes)
2025-01-31T06:13:10.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 57 bytes (total: 1204317 bytes)
2025-01-31T06:13:12.150Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1218884 bytes)
2025-01-31T06:13:14.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 185 bytes (total: 1232015 bytes)
2025-01-31T06:13:16.391Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1247344 bytes)
2025-01-31T06:13:18.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1260624 bytes)
2025-01-31T06:13:20.974Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 1274148 bytes)
2025-01-31T06:13:23.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1286844 bytes)
2025-01-31T06:13:25.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1302584 bytes)
2025-01-31T06:13:27.153Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 1318530 bytes)
2025-01-31T06:13:29.374Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1331553 bytes)
2025-01-31T06:13:32.393Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 1345838 bytes)
2025-01-31T06:13:39.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 1359949 bytes)
2025-01-31T06:13:41.494Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 1374433 bytes)
2025-01-31T06:13:42.839Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:13:42.841Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738304022840-y2ebd3gsieb.pcm","directory":"temp"}
2025-01-31T06:13:42.849Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:13:42.851Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:13:42.851Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T06:13:42.851Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:13:43.493Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1390648 bytes)
2025-01-31T06:13:43.859Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T06:14:06.138Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T06:14:06.204Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T06:14:06.279Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":3,"maxAge":0}
2025-01-31T06:14:06.300Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738303782851-tulh6ckbfs.pcm","age":22356.19775390625,"size":37697280}
2025-01-31T06:14:06.306Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738303782851-tulh6ckbfs.pcm.mp3","age":20392.584228515625,"size":262144}
2025-01-31T06:14:06.309Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738304022840-y2ebd3gsieb.pcm","age":23339.865478515625,"size":0}
2025-01-31T06:14:06.312Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T06:14:06.321Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T06:14:06.322Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T06:14:06.699Z [32minfo[39m: Bot initialized successfully
2025-01-31T06:14:06.750Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T06:19:06.159Z [32minfo[39m: Memory Usage:
2025-01-31T06:19:06.174Z [32minfo[39m: rss: 117.71 MB
2025-01-31T06:19:06.174Z [32minfo[39m: heapTotal: 27.71 MB
2025-01-31T06:19:06.175Z [32minfo[39m: heapUsed: 26.3 MB
2025-01-31T06:19:06.177Z [32minfo[39m: external: 8.06 MB
2025-01-31T06:19:06.177Z [32minfo[39m: arrayBuffers: 0.15 MB
2025-01-31T06:25:04.251Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-01-31T06:25:04.293Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-01-31T06:25:04.399Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":0,"maxAge":0}
2025-01-31T06:25:04.423Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-01-31T06:25:04.429Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-01-31T06:25:04.429Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-01-31T06:25:04.829Z [32minfo[39m: Bot initialized successfully
2025-01-31T06:25:04.871Z [32minfo[39m: Logged in as Lorescribe#8404
2025-01-31T06:25:29.034Z [32minfo[39m: Command Name: setkey
2025-01-31T06:25:29.039Z [32minfo[39m: [BaseCommand] Deferring reply with ephemeral flag
2025-01-31T06:25:29.240Z [32minfo[39m: Set OpenAI key for guild 1315144523336122469 (stored in memory only)
2025-01-31T06:25:29.243Z [32minfo[39m: [handleReply] Interaction state: ✅ **Success!** OpenAI API key has been set
> The key will be stored securely and used for transcription.{"deferred":true,"replied":false,"ephemeral":true,"interactionId":"1334771519066210376","commandName":"setkey","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T06:25:29.244Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T06:25:32.850Z [32minfo[39m: Command Name: record
2025-01-31T06:25:32.854Z [32minfo[39m: [BaseCommand] Deferring reply without ephemeral flag
2025-01-31T06:25:33.035Z [32minfo[39m: [RecordCommand] Starting recording...
2025-01-31T06:25:33.299Z [32minfo[39m: [VoiceStateService] Connection ready for guild 1315144523336122469
2025-01-31T06:25:33.302Z [32minfo[39m: [VoiceStateService] Successfully connected to voice channel in guild 1315144523336122469 (attempt 1)
2025-01-31T06:25:33.303Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T06:25:33.303Z [32minfo[39m: [VoiceRecorder] Joined voice channel for guild 1315144523336122469
2025-01-31T06:25:33.304Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:25:33.306Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738304733306-eenarhy98o.pcm","directory":"temp"}
2025-01-31T06:25:33.383Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:25:33.384Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:25:33.385Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":0}
2025-01-31T06:25:33.385Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:25:33.385Z [32minfo[39m: [VoiceRecorder] Started recording for guild 1315144523336122469
2025-01-31T06:25:33.385Z [32minfo[39m: [RecordCommand] Deferred state:{"deferred":true,"replied":false}
2025-01-31T06:25:33.386Z [32minfo[39m: [handleReply] Interaction state: 🎙️ **Recording Started!**
The bot will now record and summarize your voice channel conversation.

💡 **Tips:**
• `Speak clearly` and at a normal pace
• `Avoid background noise` if possible
• Use `/stop` to end the recording

> Your recording will be automatically processed and summarized.
> Use high-quality audio for best results.{"deferred":true,"replied":false,"ephemeral":false,"interactionId":"1334771535185055794","commandName":"record","isCommand":true,"isMessageComponent":false,"isModalSubmit":false}
2025-01-31T06:25:33.386Z [32minfo[39m: [handleReply] Attempting edit reply
2025-01-31T06:25:33.422Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T06:25:33.423Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T06:25:35.311Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 84 bytes (total: 15246 bytes)
2025-01-31T06:25:37.394Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 26949 bytes)
2025-01-31T06:25:39.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 40998 bytes)
2025-01-31T06:25:40.118Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T06:25:42.094Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 160 bytes (total: 54343 bytes)
2025-01-31T06:25:44.095Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 69691 bytes)
2025-01-31T06:25:46.229Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 81814 bytes)
2025-01-31T06:25:48.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 96583 bytes)
2025-01-31T06:25:50.714Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 164 bytes (total: 112298 bytes)
2025-01-31T06:25:52.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 127356 bytes)
2025-01-31T06:25:54.712Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 134 bytes (total: 143406 bytes)
2025-01-31T06:25:56.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 157870 bytes)
2025-01-31T06:25:59.174Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 64 bytes (total: 171757 bytes)
2025-01-31T06:26:01.774Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 180674 bytes)
2025-01-31T06:26:04.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 196308 bytes)
2025-01-31T06:26:06.554Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 212236 bytes)
2025-01-31T06:26:09.136Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 180 bytes (total: 225873 bytes)
2025-01-31T06:26:11.216Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 182 bytes (total: 240227 bytes)
2025-01-31T06:26:13.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 163 bytes (total: 254698 bytes)
2025-01-31T06:26:15.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 269293 bytes)
2025-01-31T06:26:17.377Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 162 bytes (total: 283780 bytes)
2025-01-31T06:26:19.372Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 298568 bytes)
2025-01-31T06:26:21.473Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 314118 bytes)
2025-01-31T06:26:23.474Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 330082 bytes)
2025-01-31T06:26:26.343Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 342949 bytes)
2025-01-31T06:26:28.338Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 358755 bytes)
2025-01-31T06:26:30.331Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 372649 bytes)
2025-01-31T06:26:32.334Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 388466 bytes)
2025-01-31T06:26:34.333Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 404473 bytes)
2025-01-31T06:26:37.072Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 417886 bytes)
2025-01-31T06:26:39.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 431717 bytes)
2025-01-31T06:26:41.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 173 bytes (total: 447586 bytes)
2025-01-31T06:26:43.730Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 462029 bytes)
2025-01-31T06:26:45.731Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 478147 bytes)
2025-01-31T06:26:47.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 171 bytes (total: 494003 bytes)
2025-01-31T06:26:49.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 510038 bytes)
2025-01-31T06:26:51.812Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 94 bytes (total: 523066 bytes)
2025-01-31T06:26:53.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 536723 bytes)
2025-01-31T06:26:57.693Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 546651 bytes)
2025-01-31T06:27:00.054Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 562719 bytes)
2025-01-31T06:27:02.053Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 577139 bytes)
2025-01-31T06:27:04.133Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 591292 bytes)
2025-01-31T06:27:06.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 606006 bytes)
2025-01-31T06:27:08.132Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 619079 bytes)
2025-01-31T06:27:10.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 176 bytes (total: 631439 bytes)
2025-01-31T06:27:12.653Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 647704 bytes)
2025-01-31T06:27:14.652Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 155 bytes (total: 663542 bytes)
2025-01-31T06:27:16.734Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 140 bytes (total: 677957 bytes)
2025-01-31T06:27:18.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 693932 bytes)
2025-01-31T06:27:20.737Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 709936 bytes)
2025-01-31T06:27:22.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 725936 bytes)
2025-01-31T06:27:24.732Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 741552 bytes)
2025-01-31T06:27:26.733Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 757429 bytes)
2025-01-31T06:27:29.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 131 bytes (total: 771415 bytes)
2025-01-31T06:27:31.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 785784 bytes)
2025-01-31T06:27:33.670Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 799759 bytes)
2025-01-31T06:27:35.672Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 812147 bytes)
2025-01-31T06:27:37.673Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 827791 bytes)
2025-01-31T06:27:39.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 842277 bytes)
2025-01-31T06:27:41.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 53 bytes (total: 857654 bytes)
2025-01-31T06:27:43.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 872056 bytes)
2025-01-31T06:27:45.753Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 48 bytes (total: 885805 bytes)
2025-01-31T06:27:47.752Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 147 bytes (total: 900510 bytes)
2025-01-31T06:27:49.754Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 915525 bytes)
2025-01-31T06:27:51.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 184 bytes (total: 929589 bytes)
2025-01-31T06:27:54.133Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 942941 bytes)
2025-01-31T06:27:57.312Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 956228 bytes)
2025-01-31T06:27:59.613Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 970316 bytes)
2025-01-31T06:28:01.614Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 985797 bytes)
2025-01-31T06:28:03.911Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 133 bytes (total: 999091 bytes)
2025-01-31T06:28:05.913Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 1015223 bytes)
2025-01-31T06:28:07.912Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 146 bytes (total: 1029998 bytes)
2025-01-31T06:28:09.913Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1043972 bytes)
2025-01-31T06:28:12.394Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 177 bytes (total: 1057556 bytes)
2025-01-31T06:28:14.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 1069239 bytes)
2025-01-31T06:28:16.592Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 179 bytes (total: 1084323 bytes)
2025-01-31T06:28:18.594Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 148 bytes (total: 1099079 bytes)
2025-01-31T06:28:20.595Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 151 bytes (total: 1114867 bytes)
2025-01-31T06:28:22.933Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 102 bytes (total: 1129337 bytes)
2025-01-31T06:28:25.033Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1143347 bytes)
2025-01-31T06:28:27.032Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 1159037 bytes)
2025-01-31T06:28:29.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1173248 bytes)
2025-01-31T06:28:31.432Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1188110 bytes)
2025-01-31T06:28:33.772Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1200601 bytes)
2025-01-31T06:28:37.874Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1212651 bytes)
2025-01-31T06:28:39.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 1227160 bytes)
2025-01-31T06:28:41.872Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1242376 bytes)
2025-01-31T06:28:43.871Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1255299 bytes)
2025-01-31T06:28:46.771Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 149 bytes (total: 1269314 bytes)
2025-01-31T06:28:49.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 145 bytes (total: 1279054 bytes)
2025-01-31T06:28:51.212Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 106 bytes (total: 1291229 bytes)
2025-01-31T06:28:53.214Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 154 bytes (total: 1305445 bytes)
2025-01-31T06:28:55.213Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 172 bytes (total: 1320630 bytes)
2025-01-31T06:28:57.293Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1334748 bytes)
2025-01-31T06:28:59.711Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 167 bytes (total: 1348703 bytes)
2025-01-31T06:29:02.131Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 168 bytes (total: 1363072 bytes)
2025-01-31T06:29:04.209Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 144 bytes (total: 1375296 bytes)
2025-01-31T06:29:06.288Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1388653 bytes)
2025-01-31T06:29:08.295Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 157 bytes (total: 1404435 bytes)
2025-01-31T06:29:10.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 183 bytes (total: 1419763 bytes)
2025-01-31T06:29:12.292Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 175 bytes (total: 1433977 bytes)
2025-01-31T06:29:14.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 165 bytes (total: 1445078 bytes)
2025-01-31T06:29:16.793Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 1461007 bytes)
2025-01-31T06:29:18.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 153 bytes (total: 1475958 bytes)
2025-01-31T06:29:20.790Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 174 bytes (total: 1491810 bytes)
2025-01-31T06:29:22.791Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 161 bytes (total: 1505629 bytes)
2025-01-31T06:29:24.792Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 1520112 bytes)
2025-01-31T06:29:27.211Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 181 bytes (total: 1533881 bytes)
2025-01-31T06:29:29.211Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 49 bytes (total: 1546570 bytes)
2025-01-31T06:29:33.394Z [32minfo[39m: [StorageService] Generating temp file path for guild 1315144523336122469 with type pcm
2025-01-31T06:29:33.398Z [32minfo[39m: [StorageService] Generated temp file path:{"guildId":"1315144523336122469","type":"pcm","filename":"recording-1315144523336122469-1738304973395-hjomkyf9fll.pcm","directory":"temp"}
2025-01-31T06:29:33.404Z [32minfo[39m: [VoiceRecorder] Using prism-media opus decoder
2025-01-31T06:29:33.405Z [32minfo[39m: [AudioService] Starting recording with connection state:{"status":"ready","adapter":"present","subscription":"inactive"}
2025-01-31T06:29:33.406Z [32minfo[39m: [AudioService] Voice receiver state:{"subscriptions":1}
2025-01-31T06:29:33.406Z [32minfo[39m: [AudioService] Recording setup complete, waiting for audio...
2025-01-31T06:29:33.553Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 1559116 bytes)
2025-01-31T06:29:34.421Z [32minfo[39m: [VoiceRecorder] Output stream closed successfully
2025-01-31T06:29:34.975Z [32minfo[39m: [AudioService] User 406937877348352001 started speaking
2025-01-31T06:29:34.977Z [32minfo[39m: [AudioService] Set up audio stream for user 406937877348352001
2025-01-31T06:29:35.854Z [32minfo[39m: [AudioService] User 406937877348352001 stopped speaking
2025-01-31T06:29:37.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 139 bytes (total: 13496 bytes)
2025-01-31T06:29:37.830Z [32minfo[39m: Successfully converted /usr/src/app/temp/recording-1315144523336122469-1738304733306-eenarhy98o.pcm to MP3
2025-01-31T06:29:37.831Z [32minfo[39m: [TranscriptionService] Starting transcription (attempt 1/3):{"filepath":"/usr/src/app/temp/recording-1315144523336122469-1738304733306-eenarhy98o.pcm.mp3","exists":true}
2025-01-31T06:29:37.831Z [32minfo[39m: [TranscriptionService] File stats:{"size":2787669,"created":"2025-01-31T06:29:36.304Z","modified":"2025-01-31T06:29:37.802Z"}
2025-01-31T06:29:37.833Z [32minfo[39m: [TranscriptionService] Transcribing with guildId: 1315144523336122469
2025-01-31T06:29:37.833Z [32minfo[39m: [TranscriptionService] Creating read stream and sending to OpenAI...
2025-01-31T06:29:39.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 156 bytes (total: 28633 bytes)
2025-01-31T06:29:41.532Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 42634 bytes)
2025-01-31T06:29:42.816Z [32minfo[39m: [TranscriptionService] Transcription completed:{"length":621,"hasContent":true,"text":"For example, if there is no audio, just use user1, user2, and so on. For example, if there is no aud"}
2025-01-31T06:29:42.817Z [32minfo[39m: [VoiceRecorder] Transcript received for guild 1315144523336122469: For example, if there is no audio, just use user1, user2, and so on. For example, if there is no audio, just use user1, user2, and so on. For example, if there is no audio, just use user1, user2, and ...
2025-01-31T06:29:42.817Z [32minfo[39m: [TranscriptionService] Starting summary generation{"transcriptLength":620,"transcriptSample":"For example, if there is no audio, just use user1, user2, and so on. For example, if there is no aud"}
2025-01-31T06:29:42.817Z [32minfo[39m: [TranscriptionService] Sending summary prompt to OpenAI with model gpt-4
2025-01-31T06:29:43.534Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 166 bytes (total: 56231 bytes)
2025-01-31T06:29:43.588Z [33mwarn[39m: [TranscriptionService] Unable to summarize, using transcript as fallback{"responseContent":"Unable to summarize."}
2025-01-31T06:29:43.589Z [32minfo[39m: [TranscriptionService] Summary generated successfully:{"length":620,"transcriptLength":620,"summary":"For example, if there is no audio, just use user1, user2, and so on. For example, if there is no aud"}
2025-01-31T06:29:43.595Z [32minfo[39m: [StorageService] Saved transcript:{"guildId":"1315144523336122469","fileName":"transcript-1315144523336122469-1738304983589.txt","size":620}
2025-01-31T06:29:43.596Z [32minfo[39m: [ChannelService] Sending message to channel
2025-01-31T06:29:43.964Z [31merror[39m: [AudioService] Cleanup failed for guild 1315144523336122469:{}
2025-01-31T06:29:44.045Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738304733306-eenarhy98o.pcm","directory":"/usr/src/app/temp"}
2025-01-31T06:29:44.052Z [32minfo[39m: [StorageService] Deleted file:{"file":"recording-1315144523336122469-1738304733306-eenarhy98o.pcm.mp3","directory":"/usr/src/app/temp"}
2025-01-31T06:29:44.052Z [32minfo[39m: [VoiceRecorder] Successfully rotated recording for guild 1315144523336122469
2025-01-31T06:29:45.530Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 170 bytes (total: 72094 bytes)
2025-01-31T06:29:48.371Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 128 bytes (total: 86201 bytes)
2025-01-31T06:29:50.455Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 158 bytes (total: 97609 bytes)
2025-01-31T06:29:52.451Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 111866 bytes)
2025-01-31T06:29:56.833Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 3 bytes (total: 123890 bytes)
2025-01-31T06:29:59.349Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 150 bytes (total: 137561 bytes)
2025-01-31T06:30:01.548Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 159 bytes (total: 150893 bytes)
2025-01-31T06:30:03.630Z [32minfo[39m: [AudioService] Received audio data from 406937877348352001: 169 bytes (total: 163936 bytes)
2025-02-02T06:09:25.529Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-02-02T06:09:25.548Z [32minfo[39m: [ServiceFactory] Services initialized successfully
2025-02-02T06:09:25.568Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"temp","fileCount":1,"maxAge":0}
2025-02-02T06:09:25.573Z [32minfo[39m: [StorageService] Deleted old file:{"file":"recording-1315144523336122469-1738304973395-hjomkyf9fll.pcm","age":171561512.34887695,"size":4684800}
2025-02-02T06:09:25.574Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/transcripts","fileCount":1,"maxAge":2592000000}
2025-02-02T06:09:25.575Z [32minfo[39m: [StorageService] Cleaning directory:{"directory":"data/summaries","fileCount":0,"maxAge":2592000000}
2025-02-02T06:09:25.575Z [32minfo[39m: [StorageService] Storage cleanup completed
2025-02-02T06:09:25.585Z [32minfo[39m: Loaded command: record
2025-02-02T06:09:25.586Z [32minfo[39m: Loaded command: setkey
2025-02-02T06:09:25.587Z [32minfo[39m: Loaded command: setsummarychannel
2025-02-02T06:09:25.588Z [32minfo[39m: Loaded command: setinterval
2025-02-02T06:09:25.589Z [32minfo[39m: Loaded command: status
2025-02-02T06:09:25.590Z [32minfo[39m: Loaded command: stop
2025-02-02T06:09:25.590Z [32minfo[39m: Started refreshing 6 application (/) commands.
2025-02-02T06:09:25.713Z [31merror[39m: [JobService] Queue summary-generation error:{"error":"WRONGPASS invalid username-password pair or user is disabled.","stack":"ReplyError: WRONGPASS invalid username-password pair or user is disabled.\n    at parseError (/Users/joshreed/Code/SummarizerBot/node_modules/.pnpm/redis-parser@3.0.0/node_modules/redis-parser/lib/parser.js:179:12)\n    at parseType (/Users/joshreed/Code/SummarizerBot/node_modules/.pnpm/redis-parser@3.0.0/node_modules/redis-parser/lib/parser.js:302:14)"}
2025-02-02T06:10:02.414Z [32minfo[39m: Loaded 2 guild configs, 0 errors
2025-02-02T06:10:02.434Z [31merror[39m: Error loading command from /Users/joshreed/Code/SummarizerBot/src/commands/audio/RecordCommand.js: Service voiceRecorder not found{"stack":"Error: Service voiceRecorder not found\n    at Container.get (file:///Users/joshreed/Code/SummarizerBot/src/services/Container.js:44:15)\n    at new RecordCommand (file:///Users/joshreed/Code/SummarizerBot/src/commands/audio/RecordCommand.js:9:39)\n    at file:///Users/joshreed/Code/SummarizerBot/src/deploy-commands.js:47:20"}
2025-02-02T06:10:02.436Z [32minfo[39m: Loaded command: setkey
2025-02-02T06:10:02.439Z [32minfo[39m: Loaded command: setsummarychannel
2025-02-02T06:10:02.439Z [31merror[39m: Error loading command from /Users/joshreed/Code/SummarizerBot/src/commands/audio/SetTimeIntervalCommand.js: Service storage not found{"stack":"Error: Service storage not found\n    at Container.get (file:///Users/joshreed/Code/SummarizerBot/src/services/Container.js:44:15)\n    at new SetTimeIntervalCommand (file:///Users/joshreed/Code/SummarizerBot/src/commands/audio/SetTimeIntervalCommand.js:8:33)\n    at file:///Users/joshreed/Code/SummarizerBot/src/deploy-commands.js:47:20"}
2025-02-02T06:10:02.440Z [31merror[39m: Error loading command from /Users/joshreed/Code/SummarizerBot/src/commands/audio/StatusCommand.js: Service voiceRecorder not found{"stack":"Error: Service voiceRecorder not found\n    at Container.get (file:///Users/joshreed/Code/SummarizerBot/src/services/Container.js:44:15)\n    at new StatusCommand (file:///Users/joshreed/Code/SummarizerBot/src/commands/audio/StatusCommand.js:11:39)\n    at file:///Users/joshreed/Code/SummarizerBot/src/deploy-commands.js:47:20"}
2025-02-02T06:10:02.442Z [31merror[39m: Error loading command from /Users/joshreed/Code/SummarizerBot/src/commands/audio/StopCommand.js: Service voiceRecorder not found{"stack":"Error: Service voiceRecorder not found\n    at Container.get (file:///Users/joshreed/Code/SummarizerBot/src/services/Container.js:44:15)\n    at new StopCommand (file:///Users/joshreed/Code/SummarizerBot/src/commands/audio/StopCommand.js:10:39)\n    at file:///Users/joshreed/Code/SummarizerBot/src/deploy-commands.js:47:20"}
2025-02-02T06:10:02.443Z [32minfo[39m: Started refreshing 2 application (/) commands.
2025-02-02T06:10:02.443Z [32minfo[39m: Deploying commands to guild 1315144523336122469...
2025-02-02T06:10:02.685Z [32minfo[39m: Guild commands deployed successfully
2025-02-02T06:10:02.685Z [32minfo[39m: Deploying commands globally...
2025-02-02T06:10:02.994Z [32minfo[39m: Global commands deployed successfully
2025-02-02T06:10:02.994Z [32minfo[39m: Successfully reloaded 2 application (/) commands.
